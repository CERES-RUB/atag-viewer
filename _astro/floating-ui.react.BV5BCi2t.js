import{R as $e,r as C,b as fi,g as Lo,a as No}from"./index.BLZuVVrN.js";import{j as q}from"./jsx-runtime.DHyoM1g7.js";var di={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls;function Bo(){if(ls)return It;ls=1;var e=$e,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var l,f={},d=null,h=null;u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),c.ref!==void 0&&(h=c.ref);for(l in c)r.call(c,l)&&!i.hasOwnProperty(l)&&(f[l]=c[l]);if(a&&a.defaultProps)for(l in c=a.defaultProps,c)f[l]===void 0&&(f[l]=c[l]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:s.current}}return It.Fragment=n,It.jsx=o,It.jsxs=o,It}di.exports=Bo();var Uo=di.exports;const Cn=C.createContext({anno:void 0,setAnno:void 0,annotations:[],selection:{selected:[]}}),Yf=C.forwardRef((e,t)=>{const[n,r]=C.useState(null),[s,i]=C.useState([]),[o,a]=C.useState({selected:[]});return C.useImperativeHandle(t,()=>n),C.useEffect(()=>{if(n){const{selection:c,store:u}=n.state;u.all().length>0&&i(u.all());const l=()=>i(()=>u.all());u.observe(l);let f;const d=c.subscribe(({selected:h,pointerEvent:y})=>{f&&u.unobserve(f);const p=(h||[]).map(({id:b,editable:w})=>({annotation:u.getAnnotation(b),editable:w}));a({selected:p,pointerEvent:y}),f=b=>{const{updated:w}=b.changes;a(({selected:$})=>({selected:$.map(({annotation:E,editable:x})=>{const k=w.find(M=>M.oldValue.id===E.id);return k?{annotation:k.newValue,editable:x}:{annotation:E,editable:x}})}))},u.observe(f,{annotations:h.map(({id:b})=>b)})});return()=>{u.unobserve(l),d()}}},[n]),Uo.jsx(Cn.Provider,{value:{anno:n,setAnno:r,annotations:s,selection:o},children:e.children})}),Ho=()=>{const{anno:e}=C.useContext(Cn);return e},Vo=()=>{const{annotations:e}=C.useContext(Cn);return e},qo=e=>Vo(),Wo=()=>{const{selection:e}=C.useContext(Cn);return e};var zo=Object.defineProperty,Go=(e,t,n)=>t in e?zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fs=(e,t,n)=>Go(e,typeof t!="symbol"?t+"":t,n);function jt(){}function ur(e,t){for(const n in t)e[n]=t[n];return e}function hi(e){return e()}function ds(){return Object.create(null)}function Be(e){e.forEach(hi)}function ue(e){return typeof e=="function"}function Pn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ko(e){return Object.keys(e).length===0}function Qo(e,t,n,r){if(e){const s=gi(e,t,n,r);return e[0](s)}}function gi(e,t,n,r){return e[1]&&r?ur(n.ctx.slice(),e[1](r(t))):n.ctx}function Yo(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(t.dirty.length,s.length);for(let a=0;a<o;a+=1)i[a]=t.dirty[a]|s[a];return i}return t.dirty|s}return t.dirty}function Xo(e,t,n,r,s,i){if(s){const o=gi(t,n,r,i);e.p(o,s)}}function Jo(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function hs(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function mn(e){return e??""}function gs(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function Zo(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function pi(e){return document.createTextNode(e)}function Ee(){return pi(" ")}function mi(){return pi("")}function ae(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function B(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ea(e){return Array.from(e.childNodes)}function ps(e,t,n){e.classList.toggle(t,!!n)}function ta(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Lt;function Tt(e){Lt=e}function na(){if(!Lt)throw new Error("Function called outside component initialization");return Lt}function ra(){const e=na();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=ta(t,n,{cancelable:r});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function Me(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const dt=[],ms=[];let gt=[];const ys=[],sa=Promise.resolve();let cr=!1;function ia(){cr||(cr=!0,sa.then(yi))}function lr(e){gt.push(e)}const Qn=new Set;let lt=0;function yi(){if(lt!==0)return;const e=Lt;do{try{for(;lt<dt.length;){const t=dt[lt];lt++,Tt(t),oa(t.$$)}}catch(t){throw dt.length=0,lt=0,t}for(Tt(null),dt.length=0,lt=0;ms.length;)ms.pop()();for(let t=0;t<gt.length;t+=1){const n=gt[t];Qn.has(n)||(Qn.add(n),n())}gt.length=0}while(dt.length);for(;ys.length;)ys.pop()();cr=!1,Qn.clear(),Tt(e)}function oa(e){if(e.fragment!==null){e.update(),Be(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(lr)}}function aa(e){const t=[],n=[];gt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),gt=t}const fn=new Set;let tt;function ua(){tt={r:0,c:[],p:tt}}function ca(){tt.r||Be(tt.c),tt=tt.p}function be(e,t){e&&e.i&&(fn.delete(e),e.i(t))}function Ae(e,t,n,r){if(e&&e.o){if(fn.has(e))return;fn.add(e),tt.c.push(()=>{fn.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function vs(e){return e?.length!==void 0?e:Array.from(e)}function nt(e){e&&e.c()}function Ve(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),lr(()=>{const i=e.$$.on_mount.map(hi).filter(ue);e.$$.on_destroy?e.$$.on_destroy.push(...i):Be(i),e.$$.on_mount=[]}),s.forEach(lr)}function qe(e,t){const n=e.$$;n.fragment!==null&&(aa(n.after_update),Be(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function la(e,t){e.$$.dirty[0]===-1&&(dt.push(e),ia(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Rn(e,t,n,r,s,i,o=null,a=[-1]){const c=Lt;Tt(e);const u=e.$$={fragment:null,ctx:[],props:i,update:jt,not_equal:s,bound:ds(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ds(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let l=!1;if(u.ctx=n?n(e,t.props||{},(f,d,...h)=>{const y=h.length?h[0]:d;return u.ctx&&s(u.ctx[f],u.ctx[f]=y)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](y),l&&la(e,f)),d}):[],u.update(),l=!0,Be(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const f=ea(t.target);u.fragment&&u.fragment.l(f),f.forEach(ee)}else u.fragment&&u.fragment.c();t.intro&&be(e.$$.fragment),Ve(e,t.target,t.anchor),yi()}Tt(c)}class Fn{constructor(){fs(this,"$$"),fs(this,"$$set")}$destroy(){qe(this,1),this.$destroy=jt}$on(t,n){if(!ue(n))return jt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!Ko(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const fa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fa);var we=(e=>(e.ELLIPSE="ELLIPSE",e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(we||{});const Rr=(e,t)=>t,vi=e=>{let t=1/0,n=1/0,r=-1/0,s=-1/0;return e.forEach(([i,o])=>{t=Math.min(t,i),n=Math.min(n,o),r=Math.max(r,i),s=Math.max(s,o)}),{minX:t,minY:n,maxX:r,maxY:s}},da={area:e=>Math.PI*e.geometry.rx*e.geometry.ry,intersects:(e,t,n)=>{const{cx:r,cy:s,rx:i,ry:o}=e.geometry,a=0,c=Math.cos(a),u=Math.sin(a),l=t-r,f=n-s,d=c*l+u*f,h=u*l-c*f;return d*d/(i*i)+h*h/(o*o)<=1}};Rr(we.ELLIPSE,da);const ha={area:e=>{const{points:t}=e.geometry;let n=0,r=t.length-1;for(let s=0;s<t.length;s++)n+=(t[r][0]+t[s][0])*(t[r][1]-t[s][1]),r=s;return Math.abs(.5*n)},intersects:(e,t,n)=>{const{points:r}=e.geometry;let s=!1;for(let i=0,o=r.length-1;i<r.length;o=i++){const a=r[i][0],c=r[i][1],u=r[o][0],l=r[o][1];c>n!=l>n&&t<(u-a)*(n-c)/(l-c)+a&&(s=!s)}return s}};Rr(we.POLYGON,ha);const ga={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,n)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&n>=e.geometry.y&&n<=e.geometry.y+e.geometry.h};Rr(we.RECTANGLE,ga);const pa=(e,t=!1)=>{const n=typeof e=="string"?e:e.value,r=/^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,s=[...n.matchAll(r)][0],[i,o,a,c,u,l,f]=s;if(o!=="xywh")throw new Error("Unsupported MediaFragment: "+n);if(a&&a!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${a}`);const[d,h,y,p]=[c,u,l,f].map(parseFloat);return{type:we.RECTANGLE,geometry:{x:d,y:h,w:y,h:p,bounds:{minX:d,minY:t?h-p:h,maxX:d+y,maxY:t?h:h+p}}}},ma=e=>{const{x:t,y:n,w:r,h:s}=e;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${t},${n},${r},${s}`}},bi="http://www.w3.org/2000/svg",bs=e=>{const t=r=>{Array.from(r.attributes).forEach(s=>{s.name.startsWith("on")&&r.removeAttribute(s.name)})},n=e.getElementsByTagName("script");return Array.from(n).reverse().forEach(r=>r.parentNode.removeChild(r)),Array.from(e.querySelectorAll("*")).forEach(t),e},ya=e=>{const t=new XMLSerializer().serializeToString(e.documentElement).replace("<svg>",`<svg xmlns="${bi}">`);return new DOMParser().parseFromString(t,"image/svg+xml").documentElement},va=e=>{const t=new DOMParser().parseFromString(e,"image/svg+xml"),n=t.lookupPrefix(bi),r=t.lookupNamespaceURI(null);return n||r?bs(t).firstChild:bs(ya(t)).firstChild},ba=e=>{const[t,n,r]=e.match(/(<polygon points=["|'])([^("|')]*)/)||[],s=r.split(" ").map(i=>i.split(",").map(parseFloat));return{type:we.POLYGON,geometry:{points:s,bounds:vi(s)}}},wa=e=>{const t=va(e),n=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),s=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry")),o={minX:n-s,minY:r-i,maxX:n+s,maxY:r+i};return{type:we.ELLIPSE,geometry:{cx:n,cy:r,rx:s,ry:i,bounds:o}}},Sa=e=>{const t=typeof e=="string"?e:e.value;if(t.includes("<polygon points="))return ba(t);if(t.includes("<ellipse "))return wa(t);throw"Unsupported SVG shape: "+t},Ea=e=>{let t;if(e.type===we.POLYGON){const n=e.geometry,{points:r}=n;t=`<svg><polygon points="${r.map(s=>s.join(",")).join(" ")}" /></svg>`}else if(e.type===we.ELLIPSE){const n=e.geometry;t=`<svg><ellipse cx="${n.cx}" cy="${n.cy}" rx="${n.rx}" ry="${n.ry}" /></svg>`}if(t)return{type:"SvgSelector",value:t};throw`Unsupported shape type: ${e.type}`};var oe=[];for(var Yn=0;Yn<256;++Yn)oe.push((Yn+256).toString(16).slice(1));function xa(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}var rn,_a=new Uint8Array(16);function Oa(){if(!rn&&(rn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rn(_a)}var Ia=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ws={randomUUID:Ia};function Aa(e,t,n){if(ws.randomUUID&&!t&&!e)return ws.randomUUID();e=e||{};var r=e.random||(e.rng||Oa)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,xa(r)}var Ca=[];for(var Xn=0;Xn<256;++Xn)Ca.push((Xn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Pa="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ra=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=Pa[n[e]&63];return t};const Fa=e=>{const t=JSON.stringify(e);let n=0;for(let r=0,s=t.length;r<s;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n|=0}return`${n}`},wi=e=>e?typeof e=="object"?{...e}:e:void 0,Ta=(e,t)=>(Array.isArray(e)?e:[e]).map(n=>{const{id:r,type:s,purpose:i,value:o,created:a,modified:c,creator:u,...l}=n;return{id:r||`temp-${Fa(n)}`,annotation:t,type:s,purpose:i,value:o,creator:wi(u),created:a?new Date(a):void 0,updated:c?new Date(c):void 0,...l}}),Da=e=>e.map(t=>{var n;const{annotation:r,created:s,updated:i,...o}=t,a={...o,created:s?.toISOString(),modified:i?.toISOString()};return(n=a.id)!=null&&n.startsWith("temp-")&&delete a.id,a});Ra();const Xf=(e,t=!1)=>({parse:n=>$a(n,t),serialize:n=>ka(n,e)}),$a=(e,t=!1)=>{const n=e.id||Aa(),{creator:r,created:s,modified:i,body:o,...a}=e,c=Ta(o,n),u=Array.isArray(e.target)?e.target[0]:e.target,l=Array.isArray(u.selector)?u.selector[0]:u.selector,f=l?.type==="FragmentSelector"?pa(l,t):l?.type==="SvgSelector"?Sa(l):void 0;return f?{parsed:{...a,id:n,bodies:c,target:{created:s?new Date(s):void 0,creator:wi(r),updated:i?new Date(i):void 0,...Array.isArray(a.target)?a.target[0]:a.target,annotation:n,selector:f}}}:{error:Error(`Invalid selector: ${JSON.stringify(l)}`)}},ka=(e,t)=>{const{selector:n,creator:r,created:s,updated:i,updatedBy:o,...a}=e.target,c=n.type==we.RECTANGLE?ma(n.geometry):Ea(n),u={...e,"@context":"http://www.w3.org/ns/anno.jsonld",id:e.id,type:"Annotation",body:Da(e.bodies),created:s?.toISOString(),creator:r,modified:i?.toISOString(),target:{...a,source:t,selector:c}};return delete u.bodies,"annotation"in u.target&&delete u.target.annotation,u};function Ss(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Es(e){let t,n;return t=new Rt({props:{x:e[10][0],y:e[10][1],scale:e[3]}}),t.$on("pointerdown",function(){ue(e[9](`HANDLE-${e[12]}`))&&e[9](`HANDLE-${e[12]}`).apply(this,arguments)}),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,s){e=r;const i={};s&16&&(i.x=e[10][0]),s&16&&(i.y=e[10][1]),s&8&&(i.scale=e[3]),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Ma(e){let t,n,r,s,i,o,a,c,u,l,f,d=vs(e[4].points),h=[];for(let p=0;p<d.length;p+=1)h[p]=Es(Ss(e,d,p));const y=p=>Ae(h[p],1,1,()=>{h[p]=null});return{c(){t=ge("polygon"),s=Ee(),i=ge("polygon"),a=Ee();for(let p=0;p<h.length;p+=1)h[p].c();c=mi(),B(t,"class","a9s-outer"),B(t,"style",n=e[1]?"display:none;":void 0),B(t,"points",r=e[4].points.map(xs).join(" ")),B(i,"class","a9s-inner a9s-shape-handle"),B(i,"style",e[1]),B(i,"points",o=e[4].points.map(_s).join(" "))},m(p,b){te(p,t,b),te(p,s,b),te(p,i,b),te(p,a,b);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(p,b);te(p,c,b),u=!0,l||(f=[ae(t,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(i,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)})],l=!0)},p(p,b){if(e=p,(!u||b&2&&n!==(n=e[1]?"display:none;":void 0))&&B(t,"style",n),(!u||b&16&&r!==(r=e[4].points.map(xs).join(" ")))&&B(t,"points",r),(!u||b&2)&&B(i,"style",e[1]),(!u||b&16&&o!==(o=e[4].points.map(_s).join(" ")))&&B(i,"points",o),b&536){d=vs(e[4].points);let w;for(w=0;w<d.length;w+=1){const $=Ss(e,d,w);h[w]?(h[w].p($,b),be(h[w],1)):(h[w]=Es($),h[w].c(),be(h[w],1),h[w].m(c.parentNode,c))}for(ua(),w=d.length;w<h.length;w+=1)y(w);ca()}},i(p){if(!u){for(let b=0;b<d.length;b+=1)be(h[b]);u=!0}},o(p){h=h.filter(Boolean);for(let b=0;b<h.length;b+=1)Ae(h[b]);u=!1},d(p){p&&(ee(t),ee(s),ee(i),ee(a),ee(c)),Zo(h,p),l=!1,Be(f)}}}function ja(e){let t,n;return t=new Si({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Ma,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("change",e[6]),t.$on("grab",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&8730&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}const xs=e=>e.join(","),_s=e=>e.join(",");function La(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:a=1}=t;const c=(d,h,y)=>{let p;const b=d.geometry;h==="SHAPE"?p=b.points.map(([$,E])=>[$+y[0],E+y[1]]):p=b.points.map(([$,E],x)=>h===`HANDLE-${x}`?[$+y[0],E+y[1]]:[$,E]);const w=vi(p);return{...d,geometry:{points:p,bounds:w}}};function u(d){Me.call(this,e,d)}function l(d){Me.call(this,e,d)}function f(d){Me.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,a,r,c,u,l,f]}class Na extends Fn{constructor(t){super(),Rn(this,t,La,ja,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}const Ba="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function Ua(e){let t,n,r,s,i,o;return{c(){t=ge("rect"),B(t,"class",n=mn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),B(t,"x",r=e[0]-e[5]/2),B(t,"y",s=e[1]-e[5]/2),B(t,"width",e[5]),B(t,"height",e[5])},m(a,c){te(a,t,c),i||(o=ae(t,"pointerdown",e[11]),i=!0)},p(a,c){c&256&&n!==(n=mn(`a9s-handle ${a[8].class||""}`.trim())+" svelte-1sgkh33")&&B(t,"class",n),c&33&&r!==(r=a[0]-a[5]/2)&&B(t,"x",r),c&34&&s!==(s=a[1]-a[5]/2)&&B(t,"y",s),c&32&&B(t,"width",a[5]),c&32&&B(t,"height",a[5])},d(a){a&&ee(t),i=!1,o()}}}function Ha(e){let t,n,r,s,i,o,a,c,u;return{c(){t=ge("g"),n=ge("circle"),s=ge("rect"),B(n,"cx",e[0]),B(n,"cy",e[1]),B(n,"r",r=e[3]/e[2]),B(n,"class","a9s-touch-halo svelte-1sgkh33"),ps(n,"touched",e[4]),B(s,"class",i=mn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),B(s,"x",o=e[0]-e[5]/2),B(s,"y",a=e[1]-e[5]/2),B(s,"width",e[5]),B(s,"height",e[5]),B(t,"class","a9s-touch-handle")},m(l,f){te(l,t,f),gs(t,n),gs(t,s),c||(u=[ae(n,"pointerdown",e[10]),ae(n,"pointerdown",e[6]),ae(n,"pointerup",e[7]),ae(s,"pointerdown",e[9]),ae(s,"pointerdown",e[6]),ae(s,"pointerup",e[7])],c=!0)},p(l,f){f&1&&B(n,"cx",l[0]),f&2&&B(n,"cy",l[1]),f&12&&r!==(r=l[3]/l[2])&&B(n,"r",r),f&16&&ps(n,"touched",l[4]),f&256&&i!==(i=mn(`a9s-handle ${l[8].class||""}`.trim())+" svelte-1sgkh33")&&B(s,"class",i),f&33&&o!==(o=l[0]-l[5]/2)&&B(s,"x",o),f&34&&a!==(a=l[1]-l[5]/2)&&B(s,"y",a),f&32&&B(s,"width",l[5]),f&32&&B(s,"height",l[5])},d(l){l&&ee(t),c=!1,Be(u)}}}function Va(e){let t;function n(s,i){return Ba?Ha:Ua}let r=n()(e);return{c(){r.c(),t=mi()},m(s,i){r.m(s,i),te(s,t,i)},p(s,[i]){r.p(s,i)},i:jt,o:jt,d(s){s&&ee(t),r.d(s)}}}function qa(e,t,n){let r,{x:s}=t,{y:i}=t,{scale:o}=t,{radius:a=30}=t,c=!1;const u=y=>{y.pointerType==="touch"&&n(4,c=!0)},l=()=>n(4,c=!1);function f(y){Me.call(this,e,y)}function d(y){Me.call(this,e,y)}function h(y){Me.call(this,e,y)}return e.$$set=y=>{n(8,t=ur(ur({},t),hs(y))),"x"in y&&n(0,s=y.x),"y"in y&&n(1,i=y.y),"scale"in y&&n(2,o=y.scale),"radius"in y&&n(3,a=y.radius)},e.$$.update=()=>{e.$$.dirty&4&&n(5,r=10/o)},t=hs(t),[s,i,o,a,c,r,u,l,t,f,d,h]}class Rt extends Fn{constructor(t){super(),Rn(this,t,qa,Va,Pn,{x:0,y:1,scale:2,radius:3})}}function Wa(e){let t,n,r,s,i,o,a,c,u,l,f,d,h,y,p,b,w,$,E,x,k,M,N,_,v,S,P,D,L,j,H,K,z,I,m,O,R,g,A,F,T,G,Q;return I=new Rt({props:{class:"a9s-corner-handle-topleft",x:e[4].x,y:e[4].y,scale:e[3]}}),I.$on("pointerdown",function(){ue(e[9]("TOP_LEFT"))&&e[9]("TOP_LEFT").apply(this,arguments)}),O=new Rt({props:{class:"a9s-corner-handle-topright",x:e[4].x+e[4].w,y:e[4].y,scale:e[3]}}),O.$on("pointerdown",function(){ue(e[9]("TOP_RIGHT"))&&e[9]("TOP_RIGHT").apply(this,arguments)}),g=new Rt({props:{class:"a9s-corner-handle-bottomright",x:e[4].x+e[4].w,y:e[4].y+e[4].h,scale:e[3]}}),g.$on("pointerdown",function(){ue(e[9]("BOTTOM_RIGHT"))&&e[9]("BOTTOM_RIGHT").apply(this,arguments)}),F=new Rt({props:{class:"a9s-corner-handle-bottomleft",x:e[4].x,y:e[4].y+e[4].h,scale:e[3]}}),F.$on("pointerdown",function(){ue(e[9]("BOTTOM_LEFT"))&&e[9]("BOTTOM_LEFT").apply(this,arguments)}),{c(){t=ge("rect"),a=Ee(),c=ge("rect"),h=Ee(),y=ge("rect"),$=Ee(),E=ge("rect"),N=Ee(),_=ge("rect"),D=Ee(),L=ge("rect"),z=Ee(),nt(I.$$.fragment),m=Ee(),nt(O.$$.fragment),R=Ee(),nt(g.$$.fragment),A=Ee(),nt(F.$$.fragment),B(t,"class","a9s-outer"),B(t,"style",n=e[1]?"display:none;":void 0),B(t,"x",r=e[4].x),B(t,"y",s=e[4].y),B(t,"width",i=e[4].w),B(t,"height",o=e[4].h),B(c,"class","a9s-inner a9s-shape-handle"),B(c,"style",e[1]),B(c,"x",u=e[4].x),B(c,"y",l=e[4].y),B(c,"width",f=e[4].w),B(c,"height",d=e[4].h),B(y,"class","a9s-edge-handle a9s-edge-handle-top"),B(y,"x",p=e[4].x),B(y,"y",b=e[4].y),B(y,"height",1),B(y,"width",w=e[4].w),B(E,"class","a9s-edge-handle a9s-edge-handle-right"),B(E,"x",x=e[4].x+e[4].w),B(E,"y",k=e[4].y),B(E,"height",M=e[4].h),B(E,"width",1),B(_,"class","a9s-edge-handle a9s-edge-handle-bottom"),B(_,"x",v=e[4].x),B(_,"y",S=e[4].y+e[4].h),B(_,"height",1),B(_,"width",P=e[4].w),B(L,"class","a9s-edge-handle a9s-edge-handle-left"),B(L,"x",j=e[4].x),B(L,"y",H=e[4].y),B(L,"height",K=e[4].h),B(L,"width",1)},m(W,V){te(W,t,V),te(W,a,V),te(W,c,V),te(W,h,V),te(W,y,V),te(W,$,V),te(W,E,V),te(W,N,V),te(W,_,V),te(W,D,V),te(W,L,V),te(W,z,V),Ve(I,W,V),te(W,m,V),Ve(O,W,V),te(W,R,V),Ve(g,W,V),te(W,A,V),Ve(F,W,V),T=!0,G||(Q=[ae(t,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(c,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(y,"pointerdown",function(){ue(e[9]("TOP"))&&e[9]("TOP").apply(this,arguments)}),ae(E,"pointerdown",function(){ue(e[9]("RIGHT"))&&e[9]("RIGHT").apply(this,arguments)}),ae(_,"pointerdown",function(){ue(e[9]("BOTTOM"))&&e[9]("BOTTOM").apply(this,arguments)}),ae(L,"pointerdown",function(){ue(e[9]("LEFT"))&&e[9]("LEFT").apply(this,arguments)})],G=!0)},p(W,V){e=W,(!T||V&2&&n!==(n=e[1]?"display:none;":void 0))&&B(t,"style",n),(!T||V&16&&r!==(r=e[4].x))&&B(t,"x",r),(!T||V&16&&s!==(s=e[4].y))&&B(t,"y",s),(!T||V&16&&i!==(i=e[4].w))&&B(t,"width",i),(!T||V&16&&o!==(o=e[4].h))&&B(t,"height",o),(!T||V&2)&&B(c,"style",e[1]),(!T||V&16&&u!==(u=e[4].x))&&B(c,"x",u),(!T||V&16&&l!==(l=e[4].y))&&B(c,"y",l),(!T||V&16&&f!==(f=e[4].w))&&B(c,"width",f),(!T||V&16&&d!==(d=e[4].h))&&B(c,"height",d),(!T||V&16&&p!==(p=e[4].x))&&B(y,"x",p),(!T||V&16&&b!==(b=e[4].y))&&B(y,"y",b),(!T||V&16&&w!==(w=e[4].w))&&B(y,"width",w),(!T||V&16&&x!==(x=e[4].x+e[4].w))&&B(E,"x",x),(!T||V&16&&k!==(k=e[4].y))&&B(E,"y",k),(!T||V&16&&M!==(M=e[4].h))&&B(E,"height",M),(!T||V&16&&v!==(v=e[4].x))&&B(_,"x",v),(!T||V&16&&S!==(S=e[4].y+e[4].h))&&B(_,"y",S),(!T||V&16&&P!==(P=e[4].w))&&B(_,"width",P),(!T||V&16&&j!==(j=e[4].x))&&B(L,"x",j),(!T||V&16&&H!==(H=e[4].y))&&B(L,"y",H),(!T||V&16&&K!==(K=e[4].h))&&B(L,"height",K);const Z={};V&16&&(Z.x=e[4].x),V&16&&(Z.y=e[4].y),V&8&&(Z.scale=e[3]),I.$set(Z);const ne={};V&16&&(ne.x=e[4].x+e[4].w),V&16&&(ne.y=e[4].y),V&8&&(ne.scale=e[3]),O.$set(ne);const se={};V&16&&(se.x=e[4].x+e[4].w),V&16&&(se.y=e[4].y+e[4].h),V&8&&(se.scale=e[3]),g.$set(se);const ie={};V&16&&(ie.x=e[4].x),V&16&&(ie.y=e[4].y+e[4].h),V&8&&(ie.scale=e[3]),F.$set(ie)},i(W){T||(be(I.$$.fragment,W),be(O.$$.fragment,W),be(g.$$.fragment,W),be(F.$$.fragment,W),T=!0)},o(W){Ae(I.$$.fragment,W),Ae(O.$$.fragment,W),Ae(g.$$.fragment,W),Ae(F.$$.fragment,W),T=!1},d(W){W&&(ee(t),ee(a),ee(c),ee(h),ee(y),ee($),ee(E),ee(N),ee(_),ee(D),ee(L),ee(z),ee(m),ee(R),ee(A)),qe(I,W),qe(O,W),qe(g,W),qe(F,W),G=!1,Be(Q)}}}function za(e){let t,n;return t=new Si({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Wa,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("grab",e[6]),t.$on("change",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&1562&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Ga(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:a=1}=t;const c=(d,h,y)=>{const p=d.geometry.bounds;let[b,w]=[p.minX,p.minY],[$,E]=[p.maxX,p.maxY];const[x,k]=y;if(h==="SHAPE")b+=x,$+=x,w+=k,E+=k;else{switch(h){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{w+=k;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{E+=k;break}}switch(h){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{b+=x;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{$+=x;break}}}const M=Math.min(b,$),N=Math.min(w,E),_=Math.abs($-b),v=Math.abs(E-w);return{...d,geometry:{x:M,y:N,w:_,h:v,bounds:{minX:M,minY:N,maxX:M+_,maxY:N+v}}}};function u(d){Me.call(this,e,d)}function l(d){Me.call(this,e,d)}function f(d){Me.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,a,r,c,u,l,f]}class Ka extends Fn{constructor(t){super(),Rn(this,t,Ga,za,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}we.RECTANGLE,we.POLYGON;const Qa=e=>({}),Os=e=>({grab:e[0]});function Ya(e){let t,n,r,s;const i=e[7].default,o=Qo(i,e,e[6],Os);return{c(){t=ge("g"),o&&o.c(),B(t,"class","a9s-annotation selected")},m(a,c){te(a,t,c),o&&o.m(t,null),n=!0,r||(s=[ae(t,"pointerup",e[2]),ae(t,"pointermove",e[1])],r=!0)},p(a,[c]){o&&o.p&&(!n||c&64)&&Xo(o,i,a,a[6],n?Yo(i,a[6],c,Qa):Jo(a[6]),Os)},i(a){n||(be(o,a),n=!0)},o(a){Ae(o,a),n=!1},d(a){a&&ee(t),o&&o.d(a),r=!1,Be(s)}}}function Xa(e,t,n){let{$$slots:r={},$$scope:s}=t;const i=ra();let{shape:o}=t,{editor:a}=t,{transform:c}=t,u,l,f;const d=p=>b=>{u=p,l=c.elementToImage(b.offsetX,b.offsetY),f=o,b.target.setPointerCapture(b.pointerId),i("grab",b)},h=p=>{if(u){const[b,w]=c.elementToImage(p.offsetX,p.offsetY),$=[b-l[0],w-l[1]];n(3,o=a(f,u,$)),i("change",o)}},y=p=>{p.target.releasePointerCapture(p.pointerId),u=void 0,f=o,i("release",p)};return e.$$set=p=>{"shape"in p&&n(3,o=p.shape),"editor"in p&&n(4,a=p.editor),"transform"in p&&n(5,c=p.transform),"$$scope"in p&&n(6,s=p.$$scope)},[d,h,y,o,a,c,s,r]}class Si extends Fn{constructor(t){super(),Rn(this,t,Xa,Ya,Pn,{shape:3,editor:4,transform:5})}}navigator.userAgent.indexOf("Mac OS X");var Ja=(e=>(e.EDIT="EDIT",e.SELECT="SELECT",e.NONE="NONE",e))(Ja||{}),Za=[];for(var Jn=0;Jn<256;++Jn)Za.push((Jn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const eu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let tu=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=eu[n[e]&63];return t};tu();const Jf=e=>{const[t,n]=C.useState();return C.useEffect(()=>{fetch(`../../${e}`).then(r=>r.json()).then(r=>{const s=r.filter(i=>{const a=(Array.isArray(i.body)?i.body:[i.body]).some(d=>d.purpose==="tagging"),c=Array.isArray(i.target)?i.target[0]:i.target,l=(Array.isArray(c.selector)?c.selector:[c.selector]).find(d=>d.type==="FragmentSelector"),f=l&&l.value.endsWith(",0,0");return a&&!f});n(s)}).catch(r=>{console.log("Error fetching annotations",r)})},[]),t},Zf=(e,t)=>{const[n,r]=C.useState(t);return C.useEffect(()=>{const s=localStorage.getItem(e);if(s)try{r(JSON.parse(s))}catch(i){console.error("Error parsing stored state",i)}},[e]),C.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n]),[n,r]},ed=e=>{const[t,n]=C.useState([]),[r,s]=C.useState({images:void 0,verses:void 0});return C.useEffect(()=>{fetch("../../tag-index.json").then(i=>i.json()).then(n)},[]),C.useEffect(()=>{if(t)if(e){const i=e.bodies.filter(u=>u.purpose==="tagging"&&u.value).map(u=>u.value),o=t.filter(u=>u.id!==e.id&&u.tags.some(l=>i.includes(l))),a=o.filter(u=>u.type==="IMAGE"),c=o.filter(u=>u.type==="VERSE");s({images:a,verses:c})}else s({images:void 0,verses:void 0})},[t,e]),r},nu=()=>{const e=Wo();return C.useMemo(()=>e.selected.length>0?e.selected[0].annotation:void 0,[e.selected.map(n=>n.annotation.id).join(",")])},td=e=>{const t=Ho(),n=nu(),[r,s]=C.useState(!1);return C.useEffect(()=>{if(r)if(n){const i=n.id.substring(n.id.lastIndexOf("/")+1);location.hash=`#${i}`}else location.hash=""},[n,r]),C.useEffect(()=>{if(!t||!e.loaded)return;const i=u=>{const l=`https://recogito.pelagios.org/annotation/${u}`;if(!(t.getSelected()||[]).map(d=>d.id).includes(l)&&(t.setSelected(l),"scrollIntoView"in t)){const d=t.getAnnotationById(`https://recogito.pelagios.org/annotation/${u}`);t.scrollIntoView(d)}},o=()=>{t.getSelected()?.length>0&&t.cancelSelected()},a=window.location.hash.substring(1);a?setTimeout(()=>{i(a),s(!0)}):s(!0);const c=()=>{const u=window.location.hash.substring(1);u?i(u):o()};return window.addEventListener("hashchange",c),()=>{window.removeEventListener("hashchange",c)}},[t,e.loaded]),null};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ei=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var su={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>C.createElement("svg",{ref:c,...su,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ei("lucide",s),...a},[...o.map(([u,l])=>C.createElement(u,l)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(e,t)=>{const n=C.forwardRef(({className:r,...s},i)=>C.createElement(iu,{ref:i,iconNode:t,className:Ei(`lucide-${ru(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=ot("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ot("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=ot("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var du=Object.defineProperty,hu=(e,t)=>{for(var n in t)du(e,n,{get:t[n],enumerable:!0})},Oe={};hu(Oe,{assign:()=>mu,colors:()=>Ge,createStringInterpolator:()=>Lr,skipAnimation:()=>Pi,to:()=>Ci,willAdvance:()=>Nr});var Tr=Qt(),X=e=>Kt(e,Tr),Dr=Qt();X.write=e=>Kt(e,Dr);var Tn=Qt();X.onStart=e=>Kt(e,Tn);var $r=Qt();X.onFrame=e=>Kt(e,$r);var kr=Qt();X.onFinish=e=>Kt(e,kr);var pt=[];X.setTimeout=(e,t)=>{const n=X.now()+t,r=()=>{const i=pt.findIndex(o=>o.cancel==r);~i&&pt.splice(i,1),ze-=~i?1:0},s={time:n,handler:e,cancel:r};return pt.splice(xi(n),0,s),ze+=1,_i(),s};var xi=e=>~(~pt.findIndex(t=>t.time>e)||~pt.length);X.cancel=e=>{Tn.delete(e),$r.delete(e),kr.delete(e),Tr.delete(e),Dr.delete(e)};X.sync=e=>{fr=!0,X.batchedUpdates(e),fr=!1};X.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,X.onStart(n)}return r.handler=e,r.cancel=()=>{Tn.delete(n),t=null},r};var Mr=typeof window<"u"?window.requestAnimationFrame:()=>{};X.use=e=>Mr=e;X.now=typeof performance<"u"?()=>performance.now():Date.now;X.batchedUpdates=e=>e();X.catch=console.error;X.frameLoop="always";X.advance=()=>{X.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ii()};var We=-1,ze=0,fr=!1;function Kt(e,t){fr?(t.delete(e),e(0)):(t.add(e),_i())}function _i(){We<0&&(We=0,X.frameLoop!=="demand"&&Mr(Oi))}function gu(){We=-1}function Oi(){~We&&(Mr(Oi),X.batchedUpdates(Ii))}function Ii(){const e=We;We=X.now();const t=xi(We);if(t&&(Ai(pt.splice(0,t),n=>n.handler()),ze-=t),!ze){gu();return}Tn.flush(),Tr.flush(e?Math.min(64,We-e):16.667),$r.flush(),Dr.flush(),kr.flush()}function Qt(){let e=new Set,t=e;return{add(n){ze+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return ze-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,ze-=t.size,Ai(t,r=>r(n)&&e.add(r)),ze+=e.size,t=e)}}}function Ai(e,t){e.forEach(n=>{try{t(n)}catch(r){X.catch(r)}})}function dr(){}var pu=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),U={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function ke(e,t){if(U.arr(e)){if(!U.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var J=(e,t)=>e.forEach(t);function Re(e,t,n){if(U.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ce=e=>U.und(e)?[]:U.arr(e)?e:[e];function Dt(e,t){if(e.size){const n=Array.from(e);e.clear(),J(n,t)}}var Ft=(e,...t)=>Dt(e,n=>n(...t)),jr=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Lr,Ci,Ge=null,Pi=!1,Nr=dr,mu=e=>{e.to&&(Ci=e.to),e.now&&(X.now=e.now),e.colors!==void 0&&(Ge=e.colors),e.skipAnimation!=null&&(Pi=e.skipAnimation),e.createStringInterpolator&&(Lr=e.createStringInterpolator),e.requestAnimationFrame&&X.use(e.requestAnimationFrame),e.batchedUpdates&&(X.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Nr=e.willAdvance),e.frameLoop&&(X.frameLoop=e.frameLoop)},$t=new Set,ve=[],Zn=[],yn=0,Dn={get idle(){return!$t.size&&!ve.length},start(e){yn>e.priority?($t.add(e),X.onStart(yu)):(Ri(e),X(hr))},advance:hr,sort(e){if(yn)X.onFrame(()=>Dn.sort(e));else{const t=ve.indexOf(e);~t&&(ve.splice(t,1),Fi(e))}},clear(){ve=[],$t.clear()}};function yu(){$t.forEach(Ri),$t.clear(),X(hr)}function Ri(e){ve.includes(e)||Fi(e)}function Fi(e){ve.splice(vu(ve,t=>t.priority>e.priority),0,e)}function hr(e){const t=Zn;for(let n=0;n<ve.length;n++){const r=ve[n];yn=r.priority,r.idle||(Nr(r),r.advance(e),r.idle||t.push(r))}return yn=0,Zn=ve,Zn.length=0,ve=t,ve.length>0}function vu(e,t){const n=e.findIndex(t);return n<0?e.length:n}var bu=(e,t,n)=>Math.min(Math.max(n,e),t),wu={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_e="[-+]?\\d*\\.?\\d+",vn=_e+"%";function $n(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Su=new RegExp("rgb"+$n(_e,_e,_e)),Eu=new RegExp("rgba"+$n(_e,_e,_e,_e)),xu=new RegExp("hsl"+$n(_e,vn,vn)),_u=new RegExp("hsla"+$n(_e,vn,vn,_e)),Ou=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Iu=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Au=/^#([0-9a-fA-F]{6})$/,Cu=/^#([0-9a-fA-F]{8})$/;function Pu(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Au.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ge&&Ge[e]!==void 0?Ge[e]:(t=Su.exec(e))?(ft(t[1])<<24|ft(t[2])<<16|ft(t[3])<<8|255)>>>0:(t=Eu.exec(e))?(ft(t[1])<<24|ft(t[2])<<16|ft(t[3])<<8|Cs(t[4]))>>>0:(t=Ou.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Cu.exec(e))?parseInt(t[1],16)>>>0:(t=Iu.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=xu.exec(e))?(Is(As(t[1]),sn(t[2]),sn(t[3]))|255)>>>0:(t=_u.exec(e))?(Is(As(t[1]),sn(t[2]),sn(t[3]))|Cs(t[4]))>>>0:null}function er(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Is(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=er(s,r,e+1/3),o=er(s,r,e),a=er(s,r,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function ft(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function As(e){return(parseFloat(e)%360+360)%360/360}function Cs(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function sn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Ps(e){let t=Pu(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${i})`}var Nt=(e,t,n)=>{if(U.fun(e))return e;if(U.arr(e))return Nt({range:e,output:t,extrapolate:n});if(U.str(e.output[0]))return Lr(e);const r=e,s=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const l=Fu(u,i);return Ru(u,i[l],i[l+1],s[l],s[l+1],c,o,a,r.map)}};function Ru(e,t,n,r,s,i,o,a,c){let u=c?c(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=i(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function Fu(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Tu=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,s=t==="end"?Math.floor(r):Math.ceil(r);return bu(0,1,s/e)},bn=1.70158,on=bn*1.525,Rs=bn+1,Fs=2*Math.PI/3,Ts=2*Math.PI/4.5,an=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,kn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Rs*e*e*e-bn*e*e,easeOutBack:e=>1+Rs*Math.pow(e-1,3)+bn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((on+1)*2*e-on)/2:(Math.pow(2*e-2,2)*((on+1)*(e*2-2)+on)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Fs),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Fs)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Ts))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Ts)/2+1,easeInBounce:e=>1-an(1-e),easeOutBounce:an,easeInOutBounce:e=>e<.5?(1-an(1-2*e))/2:(1+an(2*e-1))/2,steps:Tu},Bt=Symbol.for("FluidValue.get"),vt=Symbol.for("FluidValue.observers"),ye=e=>!!(e&&e[Bt]),fe=e=>e&&e[Bt]?e[Bt]():e,Ds=e=>e[vt]||null;function Du(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Ut(e,t){const n=e[vt];n&&n.forEach(r=>{Du(r,t)})}var Ti=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");$u(this,e)}},$u=(e,t)=>Di(e,Bt,t);function Et(e,t){if(e[Bt]){let n=e[vt];n||Di(e,vt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Ht(e,t){const n=e[vt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[vt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Di=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),dn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ku=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,$s=new RegExp(`(${dn.source})(%|[a-z]+)`,"i"),Mu=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Mn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,$i=e=>{const[t,n]=ju(e);if(!t||jr())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&Mn.test(n))return $i(n);if(n)return n}return e},ju=e=>{const t=Mn.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},tr,Lu=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,ki=e=>{tr||(tr=Ge?new RegExp(`(${Object.keys(Ge).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>fe(i).replace(Mn,$i).replace(ku,Ps).replace(tr,Ps)),n=t.map(i=>i.match(dn).map(Number)),s=n[0].map((i,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(i=>Nt({...e,output:i}));return i=>{const o=!$s.test(t[0])&&t.find(c=>$s.test(c))?.replace(dn,"");let a=0;return t[0].replace(dn,()=>`${s[a++](i)}${o||""}`).replace(Mu,Lu)}},Br="react-spring: ",Mi=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Br}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Nu=Mi(console.warn);function Bu(){Nu(`${Br}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Uu=Mi(console.warn);function Hu(){Uu(`${Br}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function jn(e){return U.str(e)&&(e[0]=="#"||/\d/.test(e)||!jr()&&Mn.test(e)||e in(Ge||{}))}var ht=jr()?C.useEffect:C.useLayoutEffect,Vu=()=>{const e=C.useRef(!1);return ht(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function ji(){const e=C.useState()[1],t=Vu();return()=>{t.current&&e(Math.random())}}function qu(e,t){const[n]=C.useState(()=>({inputs:t,result:e()})),r=C.useRef(),s=r.current;let i=s;return i?t&&i.inputs&&Wu(t,i.inputs)||(i={inputs:t,result:e()}):i=n,C.useEffect(()=>{r.current=i,s==n&&(n.inputs=n.result=void 0)},[i]),i.result}function Wu(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var Li=e=>C.useEffect(e,zu),zu=[];function Gu(e){const t=C.useRef();return C.useEffect(()=>{t.current=e}),t.current}var Vt=Symbol.for("Animated:node"),Ku=e=>!!e&&e[Vt]===e,Ie=e=>e&&e[Vt],Ur=(e,t)=>pu(e,Vt,t),Ln=e=>e&&e[Vt]&&e[Vt].getPayload(),Ni=class{constructor(){Ur(this,this)}getPayload(){return this.payload||[]}},Yt=class extends Ni{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,U.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Yt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return U.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,U.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},qt=class extends Yt{constructor(e){super(0),this._string=null,this._toString=Nt({output:[e,e]})}static create(e){return new qt(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(U.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Nt({output:[this.getValue(),e]})),this._value=0,super.reset()}},wn={dependencies:null},Nn=class extends Ni{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Re(this.source,(n,r)=>{Ku(n)?t[r]=n.getValue(e):ye(n)?t[r]=fe(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&J(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Re(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){wn.dependencies&&ye(e)&&wn.dependencies.add(e);const t=Ln(e);t&&J(t,n=>this.add(n))}},Bi=class extends Nn{constructor(e){super(e)}static create(e){return new Bi(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Qu)),!0)}};function Qu(e){return(jn(e)?qt:Yt).create(e)}function gr(e){const t=Ie(e);return t?t.constructor:U.arr(e)?Bi:jn(e)?qt:Yt}var ks=(e,t)=>{const n=!U.fun(e)||e.prototype&&e.prototype.isReactComponent;return C.forwardRef((r,s)=>{const i=C.useRef(null),o=n&&C.useCallback(y=>{i.current=Ju(s,y)},[s]),[a,c]=Xu(r,t),u=ji(),l=()=>{const y=i.current;if(n&&!y)return;(y?t.applyAnimatedValues(y,a.getValue(!0)):!1)===!1&&u()},f=new Yu(l,c),d=C.useRef();ht(()=>(d.current=f,J(c,y=>Et(y,f)),()=>{d.current&&(J(d.current.deps,y=>Ht(y,d.current)),X.cancel(d.current.update))})),C.useEffect(l,[]),Li(()=>()=>{const y=d.current;J(y.deps,p=>Ht(p,y))});const h=t.getComponentProps(a.getValue());return C.createElement(e,{...h,ref:o})})},Yu=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&X.write(this.update)}};function Xu(e,t){const n=new Set;return wn.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Nn(e),wn.dependencies=null,[e,n]}function Ju(e,t){return e&&(U.fun(e)?e(t):e.current=t),t}var Ms=Symbol.for("AnimatedComponent"),Zu=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new Nn(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=o=>{const a=js(o)||"Anonymous";return U.str(o)?o=i[o]||(i[o]=ks(o,s)):o=o[Ms]||(o[Ms]=ks(o,s)),o.displayName=`Animated(${a})`,o};return Re(e,(o,a)=>{U.arr(e)&&(a=js(o)),i[a]=i(o)}),{animated:i}},js=e=>U.str(e)?e:e&&U.str(e.displayName)?e.displayName:U.fun(e)&&e.name||null;function de(e,...t){return U.fun(e)?e(...t):e}var kt=(e,t)=>e===!0||!!(t&&e&&(U.fun(e)?e(t):ce(e).includes(t))),Ui=(e,t)=>U.obj(e)?t&&e[t]:e,Hi=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,ec=e=>e,Hr=(e,t=ec)=>{let n=tc;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const i=t(e[s],s);U.und(i)||(r[s]=i)}return r},tc=["config","onProps","onStart","onChange","onPause","onResume","onRest"],nc={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function rc(e){const t={};let n=0;if(Re(e,(r,s)=>{nc[s]||(t[s]=r,n++)}),n)return t}function Vr(e){const t=rc(e);if(t){const n={to:t};return Re(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Wt(e){return e=fe(e),U.arr(e)?e.map(Wt):jn(e)?Oe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function sc(e){for(const t in e)return!0;return!1}function pr(e){return U.fun(e)||U.arr(e)&&U.obj(e[0])}function Ls(e,t){e.ref?.delete(e),t?.delete(e)}function ic(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var oc={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},mr={...oc.default,mass:1,damping:1,easing:kn.linear,clamp:!1},ac=class{constructor(){this.velocity=0,Object.assign(this,mr)}};function uc(e,t,n){n&&(n={...n},Ns(n,t),t={...n,...t}),Ns(e,t),Object.assign(e,t);for(const o in mr)e[o]==null&&(e[o]=mr[o]);let{frequency:r,damping:s}=e;const{mass:i}=e;return U.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*s*i/r),e}function Ns(e,t){if(!U.und(t.decay))e.duration=void 0;else{const n=!U.und(t.tension)||!U.und(t.friction);(n||!U.und(t.frequency)||!U.und(t.damping)||!U.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var Bs=[],cc=class{constructor(){this.changed=!1,this.values=Bs,this.toValues=null,this.fromValues=Bs,this.config=new ac,this.immediate=!1}};function Vi(e,{key:t,props:n,defaultProps:r,state:s,actions:i}){return new Promise((o,a)=>{let c,u,l=kt(n.cancel??r?.cancel,t);if(l)h();else{U.und(n.pause)||(s.paused=kt(n.pause,t));let y=r?.pause;y!==!0&&(y=s.paused||kt(y,t)),c=de(n.delay||0,t),y?(s.resumeQueue.add(d),i.pause()):(i.resume(),d())}function f(){s.resumeQueue.add(d),s.timeouts.delete(u),u.cancel(),c=u.time-X.now()}function d(){c>0&&!Oe.skipAnimation?(s.delayed=!0,u=X.setTimeout(h,c),s.pauseQueue.add(f),s.timeouts.add(u)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(f),s.timeouts.delete(u),e<=(s.cancelId||0)&&(l=!0);try{i.start({...n,callId:e,cancel:l},o)}catch(y){a(y)}}})}var qr=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?mt(e.get()):t.every(n=>n.noop)?qi(e.get()):xe(e.get(),t.every(n=>n.finished)),qi=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),xe=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),mt=e=>({value:e,cancelled:!0,finished:!1});function Wi(e,t,n,r){const{callId:s,parentId:i,onRest:o}=t,{asyncTo:a,promise:c}=n;return!i&&e===a&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=Hr(t,(b,w)=>w==="onRest"?void 0:b);let l,f;const d=new Promise((b,w)=>(l=b,f=w)),h=b=>{const w=s<=(n.cancelId||0)&&mt(r)||s!==n.asyncId&&xe(r,!1);if(w)throw b.result=w,f(b),b},y=(b,w)=>{const $=new Us,E=new Hs;return(async()=>{if(Oe.skipAnimation)throw zt(n),E.result=xe(r,!1),f(E),E;h($);const x=U.obj(b)?{...b}:{...w,to:b};x.parentId=s,Re(u,(M,N)=>{U.und(x[N])&&(x[N]=M)});const k=await r.start(x);return h($),n.paused&&await new Promise(M=>{n.resumeQueue.add(M)}),k})()};let p;if(Oe.skipAnimation)return zt(n),xe(r,!1);try{let b;U.arr(e)?b=(async w=>{for(const $ of w)await y($)})(e):b=Promise.resolve(e(y,r.stop.bind(r))),await Promise.all([b.then(l),d]),p=xe(r.get(),!0,!1)}catch(b){if(b instanceof Us)p=b.result;else if(b instanceof Hs)p=b.result;else throw b}finally{s==n.asyncId&&(n.asyncId=i,n.asyncTo=i?a:void 0,n.promise=i?c:void 0)}return U.fun(o)&&X.batchedUpdates(()=>{o(p,r,r.item)}),p})()}function zt(e,t){Dt(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Us=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Hs=class extends Error{constructor(){super("SkipAnimationSignal")}},yr=e=>e instanceof Wr,lc=1,Wr=class extends Ti{constructor(){super(...arguments),this.id=lc++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ie(this);return e&&e.getValue()}to(...e){return Oe.to(this,e)}interpolate(...e){return Bu(),Oe.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Ut(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Dn.sort(this),Ut(this,{type:"priority",parent:this,priority:e})}},rt=Symbol.for("SpringPhase"),zi=1,vr=2,br=4,nr=e=>(e[rt]&zi)>0,He=e=>(e[rt]&vr)>0,At=e=>(e[rt]&br)>0,Vs=(e,t)=>t?e[rt]|=vr|zi:e[rt]&=~vr,qs=(e,t)=>t?e[rt]|=br:e[rt]&=~br,fc=class extends Wr{constructor(e,t){if(super(),this.animation=new cc,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!U.und(e)||!U.und(t)){const n=U.obj(e)?{...e}:{...t,from:e};U.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(He(this)||this._state.asyncTo)||At(this)}get goal(){return fe(this.animation.to)}get velocity(){const e=Ie(this);return e instanceof Yt?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return nr(this)}get isAnimating(){return He(this)}get isPaused(){return At(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:i}=r,o=Ln(r.to);!o&&ye(r.to)&&(s=ce(fe(r.to))),r.values.forEach((u,l)=>{if(u.done)return;const f=u.constructor==qt?1:o?o[l].lastPosition:s[l];let d=r.immediate,h=f;if(!d){if(h=u.lastPosition,i.tension<=0){u.done=!0;return}let y=u.elapsedTime+=e;const p=r.fromValues[l],b=u.v0!=null?u.v0:u.v0=U.arr(i.velocity)?i.velocity[l]:i.velocity;let w;const $=i.precision||(p==f?.005:Math.min(1,Math.abs(f-p)*.001));if(U.und(i.duration))if(i.decay){const E=i.decay===!0?.998:i.decay,x=Math.exp(-(1-E)*y);h=p+b/(1-E)*(1-x),d=Math.abs(u.lastPosition-h)<=$,w=b*x}else{w=u.lastVelocity==null?b:u.lastVelocity;const E=i.restVelocity||$/10,x=i.clamp?0:i.bounce,k=!U.und(x),M=p==f?u.v0>0:p<f;let N,_=!1;const v=1,S=Math.ceil(e/v);for(let P=0;P<S&&(N=Math.abs(w)>E,!(!N&&(d=Math.abs(f-h)<=$,d)));++P){k&&(_=h==f||h>f==M,_&&(w=-w*x,h=f));const D=-i.tension*1e-6*(h-f),L=-i.friction*.001*w,j=(D+L)/i.mass;w=w+j*v,h=h+w*v}}else{let E=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,u.durationProgress>0&&(u.elapsedTime=i.duration*u.durationProgress,y=u.elapsedTime+=e)),E=(i.progress||0)+y/this._memoizedDuration,E=E>1?1:E<0?0:E,u.durationProgress=E),h=p+i.easing(E)*(f-p),w=(h-u.lastPosition)/e,d=E==1}u.lastVelocity=w,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[l].done&&(d=!1),d?u.done=!0:t=!1,u.setValue(h,i.round)&&(n=!0)});const a=Ie(this),c=a.getValue();if(t){const u=fe(r.to);(c!==u||n)&&!i.decay?(a.setValue(u),this._onChange(u)):n&&i.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return X.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(He(this)){const{to:e,config:t}=this.animation;X.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return U.und(e)?(n=this.queue||[],this.queue=[]):n=[U.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>qr(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),zt(this._state,e&&this._lastCallId),X.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=U.obj(n)?n[t]:n,(n==null||pr(n))&&(n=void 0),r=U.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return nr(this)||(e.reverse&&([n,r]=[r,n]),r=fe(r),U.und(r)?Ie(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Hr(e,(o,a)=>/^on/.test(a)?Ui(o,n):o)),zs(this,e,"onProps"),Pt(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return Vi(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{At(this)||(qs(this,!0),Ft(i.pauseQueue),Pt(this,"onPause",xe(this,Ct(this,this.animation.to)),this))},resume:()=>{At(this)&&(qs(this,!1),He(this)&&this._resume(),Ft(i.resumeQueue),Pt(this,"onResume",xe(this,Ct(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const a=Gi(e);if(a)return this._update(a,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(mt(this));const r=!U.und(e.to),s=!U.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(mt(this));const{key:i,defaultProps:o,animation:a}=this,{to:c,from:u}=a;let{to:l=c,from:f=u}=e;s&&!r&&(!t.default||U.und(l))&&(l=f),t.reverse&&([l,f]=[f,l]);const d=!ke(f,u);d&&(a.from=f),f=fe(f);const h=!ke(l,c);h&&this._focus(l);const y=pr(t.to),{config:p}=a,{decay:b,velocity:w}=p;(r||s)&&(p.velocity=0),t.config&&!y&&uc(p,de(t.config,i),t.config!==o.config?de(o.config,i):void 0);let $=Ie(this);if(!$||U.und(l))return n(xe(this,!0));const E=U.und(t.reset)?s&&!t.default:!U.und(f)&&kt(t.reset,i),x=E?f:this.get(),k=Wt(l),M=U.num(k)||U.arr(k)||jn(k),N=!y&&(!M||kt(o.immediate||t.immediate,i));if(h){const P=gr(l);if(P!==$.constructor)if(N)$=this._set(k);else throw Error(`Cannot animate between ${$.constructor.name} and ${P.name}, as the "to" prop suggests`)}const _=$.constructor;let v=ye(l),S=!1;if(!v){const P=E||!nr(this)&&d;(h||P)&&(S=ke(Wt(x),k),v=!S),(!ke(a.immediate,N)&&!N||!ke(p.decay,b)||!ke(p.velocity,w))&&(v=!0)}if(S&&He(this)&&(a.changed&&!E?v=!0:v||this._stop(c)),!y&&((v||ye(c))&&(a.values=$.getPayload(),a.toValues=ye(l)?null:_==qt?[1]:ce(k)),a.immediate!=N&&(a.immediate=N,!N&&!E&&this._set(c)),v)){const{onRest:P}=a;J(dc,L=>zs(this,t,L));const D=xe(this,Ct(this,c));Ft(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&X.batchedUpdates(()=>{a.changed=!E,P?.(D,this),E?de(o.onRest,D):a.onStart?.(D,this)})}E&&this._set(x),y?n(Wi(t.to,t,this._state,this)):v?this._start():He(this)&&!h?this._pendingCalls.add(n):n(qi(x))}_focus(e){const t=this.animation;e!==t.to&&(Ds(this)&&this._detach(),t.to=e,Ds(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ye(t)&&(Et(t,this),yr(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ye(e)&&Ht(e,this)}_set(e,t=!0){const n=fe(e);if(!U.und(n)){const r=Ie(this);if(!r||!ke(n,r.getValue())){const s=gr(n);!r||r.constructor!=s?Ur(this,s.create(n)):r.setValue(n),r&&X.batchedUpdates(()=>{this._onChange(n,t)})}}return Ie(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Pt(this,"onStart",xe(this,Ct(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),de(this.animation.onChange,e,this)),de(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Ie(this).reset(fe(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),He(this)||(Vs(this,!0),At(this)||this._resume())}_resume(){Oe.skipAnimation?this.finish():Dn.start(this)}_stop(e,t){if(He(this)){Vs(this,!1);const n=this.animation;J(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ut(this,{type:"idle",parent:this});const r=t?mt(this.get()):xe(this.get(),Ct(this,e??n.to));Ft(this._pendingCalls,r),n.changed&&(n.changed=!1,Pt(this,"onRest",r,this))}}};function Ct(e,t){const n=Wt(t),r=Wt(e.get());return ke(r,n)}function Gi(e,t=e.loop,n=e.to){const r=de(t);if(r){const s=r!==!0&&Vr(r),i=(s||e).reverse,o=!s||s.reset;return Sn({...e,loop:t,default:!1,pause:void 0,to:!i||pr(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function Sn(e){const{to:t,from:n}=e=Vr(e),r=new Set;return U.obj(t)&&Ws(t,r),U.obj(n)&&Ws(n,r),e.keys=r.size?Array.from(r):null,e}function Ws(e,t){Re(e,(n,r)=>n!=null&&t.add(r))}var dc=["onStart","onRest","onChange","onPause","onResume"];function zs(e,t,n){e.animation[n]=t[n]!==Hi(t,n)?Ui(t[n],e.key):void 0}function Pt(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var hc=["onStart","onChange","onRest"],gc=1,pc=class{constructor(e,t){this.id=gc++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];U.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Sn(e)),this}start(e){let{queue:t}=this;return e?t=ce(e).map(Sn):this.queue=[],this._flush?this._flush(this,t):(Xi(this,t),mc(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;J(ce(t),r=>n[r].stop(!!e))}else zt(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(U.und(e))this.start({pause:!0});else{const t=this.springs;J(ce(e),n=>t[n].pause())}return this}resume(e){if(U.und(e))this.start({pause:!1});else{const t=this.springs;J(ce(e),n=>t[n].resume())}return this}each(e){Re(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Dt(e,([a,c])=>{c.value=this.get(),a(c,this,this._item)}));const i=!r&&this._started,o=s||i&&n.size?this.get():null;s&&t.size&&Dt(t,([a,c])=>{c.value=o,a(c,this,this._item)}),i&&(this._started=!1,Dt(n,([a,c])=>{c.value=o,a(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;X.onFrame(this._onFrame)}};function mc(e,t){return Promise.all(t.map(n=>Ki(e,n))).then(n=>qr(e,n))}async function Ki(e,t,n){const{keys:r,to:s,from:i,loop:o,onRest:a,onResolve:c}=t,u=U.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),i===!1&&(t.from=null);const l=U.arr(s)||U.fun(s)?s:void 0;l?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):J(hc,p=>{const b=t[p];if(U.fun(b)){const w=e._events[p];t[p]=({finished:$,cancelled:E})=>{const x=w.get(b);x?($||(x.finished=!1),E&&(x.cancelled=!0)):w.set(b,{value:null,finished:$||!1,cancelled:E||!1})},u&&(u[p]=t[p])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,Ft(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map(p=>e.springs[p].start(t)),h=t.cancel===!0||Hi(t,"cancel")===!0;(l||h&&f.asyncId)&&d.push(Vi(++e._lastAsyncId,{props:t,state:f,actions:{pause:dr,resume:dr,start(p,b){h?(zt(f,e._lastAsyncId),b(mt(e))):(p.onRest=a,b(Wi(l,p,f,e)))}}})),f.paused&&await new Promise(p=>{f.resumeQueue.add(p)});const y=qr(e,await Promise.all(d));if(o&&y.finished&&!(n&&y.noop)){const p=Gi(t,o,s);if(p)return Xi(e,[p]),Ki(e,p,!0)}return c&&X.batchedUpdates(()=>c(y,e,e.item)),y}function yc(e,t){const n={...e.springs};return t&&J(ce(t),r=>{U.und(r.keys)&&(r=Sn(r)),U.obj(r.to)||(r={...r,to:void 0}),Yi(n,r,s=>Qi(s))}),vc(e,n),n}function vc(e,t){Re(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,Et(n,e))})}function Qi(e,t){const n=new fc;return n.key=e,t&&Et(n,t),n}function Yi(e,t,n){t.keys&&J(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Xi(e,t){J(t,n=>{Yi(e.springs,n,r=>Qi(r,e))})}var Bn=({children:e,...t})=>{const n=C.useContext(En),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=qu(()=>({pause:r,immediate:s}),[r,s]);const{Provider:i}=En;return C.createElement(i,{value:t},e)},En=bc(Bn,{});Bn.Provider=En.Provider;Bn.Consumer=En.Consumer;function bc(e,t){return Object.assign(e,C.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var wc=()=>{const e=[],t=function(r){Hu();const s=[];return J(e,(i,o)=>{if(U.und(r))s.push(i.start());else{const a=n(r,i,o);a&&s.push(i.start(a))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return J(e,r=>r.pause(...arguments)),this},t.resume=function(){return J(e,r=>r.resume(...arguments)),this},t.set=function(r){J(e,(s,i)=>{const o=U.fun(r)?r(i,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return J(e,(i,o)=>{if(U.und(r))s.push(i.start());else{const a=this._getProps(r,i,o);a&&s.push(i.start(a))}}),s},t.stop=function(){return J(e,r=>r.stop(...arguments)),this},t.update=function(r){return J(e,(s,i)=>s.update(this._getProps(r,s,i))),this};const n=function(r,s,i){return U.fun(r)?r(i,s):r};return t._getProps=n,t};function zr(e,t,n){const r=U.fun(t)&&t,{reset:s,sort:i,trail:o=0,expires:a=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:l,config:f}=r?r():t,d=C.useMemo(()=>r||arguments.length==3?wc():void 0,[]),h=ce(e),y=[],p=C.useRef(null),b=s?null:p.current;ht(()=>{p.current=y}),Li(()=>(J(y,j=>{d?.add(j.ctrl),j.ctrl.ref=d}),()=>{J(p.current,j=>{j.expired&&clearTimeout(j.expirationId),Ls(j.ctrl,d),j.ctrl.stop(!0)})}));const w=Ec(h,r?r():t,b),$=s&&p.current||[];ht(()=>J($,({ctrl:j,item:H,key:K})=>{Ls(j,d),de(u,H,K)}));const E=[];if(b&&J(b,(j,H)=>{j.expired?(clearTimeout(j.expirationId),$.push(j)):(H=E[H]=w.indexOf(j.key),~H&&(y[H]=j))}),J(h,(j,H)=>{y[H]||(y[H]={key:w[H],item:j,phase:"mount",ctrl:new pc},y[H].ctrl.item=j)}),E.length){let j=-1;const{leave:H}=r?r():t;J(E,(K,z)=>{const I=b[z];~K?(j=y.indexOf(I),y[j]={...I,item:h[K]}):H&&y.splice(++j,0,I)})}U.fun(i)&&y.sort((j,H)=>i(j.item,H.item));let x=-o;const k=ji(),M=Hr(t),N=new Map,_=C.useRef(new Map),v=C.useRef(!1);J(y,(j,H)=>{const K=j.key,z=j.phase,I=r?r():t;let m,O;const R=de(I.delay||0,K);if(z=="mount")m=I.enter,O="enter";else{const T=w.indexOf(K)<0;if(z!="leave")if(T)m=I.leave,O="leave";else if(m=I.update)O="update";else return;else if(!T)m=I.enter,O="enter";else return}if(m=de(m,j.item,H),m=U.obj(m)?Vr(m):{to:m},!m.config){const T=f||M.config;m.config=de(T,j.item,H,O)}x+=o;const g={...M,delay:R+x,ref:l,immediate:I.immediate,reset:!1,...m};if(O=="enter"&&U.und(g.from)){const T=r?r():t,G=U.und(T.initial)||b?T.from:T.initial;g.from=de(G,j.item,H)}const{onResolve:A}=g;g.onResolve=T=>{de(A,T);const G=p.current,Q=G.find(W=>W.key===K);if(Q&&!(T.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const W=G.every(V=>V.ctrl.idle);if(Q.phase=="leave"){const V=de(a,Q.item);if(V!==!1){const Z=V===!0?0:V;if(Q.expired=!0,!W&&Z>0){Z<=2147483647&&(Q.expirationId=setTimeout(k,Z));return}}}W&&G.some(V=>V.expired)&&(_.current.delete(Q),c&&(v.current=!0),k())}};const F=yc(j.ctrl,g);O==="leave"&&c?_.current.set(j,{phase:O,springs:F,payload:g}):N.set(j,{phase:O,springs:F,payload:g})});const S=C.useContext(Bn),P=Gu(S),D=S!==P&&sc(S);ht(()=>{D&&J(y,j=>{j.ctrl.start({default:S})})},[S]),J(N,(j,H)=>{if(_.current.size){const K=y.findIndex(z=>z.key===H.key);y.splice(K,1)}}),ht(()=>{J(_.current.size?_.current:N,({phase:j,payload:H},K)=>{const{ctrl:z}=K;K.phase=j,d?.add(z),D&&j=="enter"&&z.start({default:S}),H&&(ic(z,H.ref),(z.ref||d)&&!v.current?z.update(H):(z.start(H),v.current&&(v.current=!1)))})},s?void 0:n);const L=j=>C.createElement(C.Fragment,null,y.map((H,K)=>{const{springs:z}=N.get(H)||H.ctrl,I=j({...z},H.item,H,K);return I&&I.type?C.createElement(I.type,{...I.props,key:U.str(H.key)||U.num(H.key)?H.key:H.ctrl.id,ref:I.ref}):I}));return d?[L,d]:L}var Sc=1;function Ec(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(i=>{const o=r&&r.find(a=>a.item===i&&a.phase!=="leave"&&!s.has(a));return o?(s.add(o),o.key):Sc++})}return U.und(n)?e:U.fun(n)?e.map(n):ce(n)}var xc=class extends Wr{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Nt(...t);const n=this._get(),r=gr(n);Ur(this,r.create(n))}advance(e){const t=this._get(),n=this.get();ke(t,n)||(Ie(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Gs(this._active)&&rr(this)}_get(){const e=U.arr(this.source)?this.source.map(fe):ce(fe(this.source));return this.calc(...e)}_start(){this.idle&&!Gs(this._active)&&(this.idle=!1,J(Ln(this),e=>{e.done=!1}),Oe.skipAnimation?(X.batchedUpdates(()=>this.advance()),rr(this)):Dn.start(this))}_attach(){let e=1;J(ce(this.source),t=>{ye(t)&&Et(t,this),yr(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){J(ce(this.source),e=>{ye(e)&&Ht(e,this)}),this._active.clear(),rr(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ce(this.source).reduce((t,n)=>Math.max(t,(yr(n)?n.priority:0)+1),0))}};function _c(e){return e.idle!==!1}function Gs(e){return!e.size||Array.from(e).every(_c)}function rr(e){e.idle||(e.idle=!0,J(Ln(e),t=>{t.done=!0}),Ut(e,{type:"idle",parent:e}))}Oe.assign({createStringInterpolator:ki,to:(e,t)=>new xc(e,t)});var Ji=/^--/;function Oc(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Ji.test(e)&&!(Mt.hasOwnProperty(e)&&Mt[e])?t+"px":(""+t).trim()}var Ks={};function Ic(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:r,children:s,scrollTop:i,scrollLeft:o,viewBox:a,...c}=t,u=Object.values(c),l=Object.keys(c).map(f=>n||e.hasAttribute(f)?f:Ks[f]||(Ks[f]=f.replace(/([A-Z])/g,d=>"-"+d.toLowerCase())));s!==void 0&&(e.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const d=Oc(f,r[f]);Ji.test(f)?e.style.setProperty(f,d):e.style[f]=d}l.forEach((f,d)=>{e.setAttribute(f,u[d])}),i!==void 0&&(e.scrollTop=i),o!==void 0&&(e.scrollLeft=o),a!==void 0&&e.setAttribute("viewBox",a)}var Mt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ac=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Cc=["Webkit","Ms","Moz","O"];Mt=Object.keys(Mt).reduce((e,t)=>(Cc.forEach(n=>e[Ac(n,t)]=e[t]),e),Mt);var Pc=/^(matrix|translate|scale|rotate|skew)/,Rc=/^(translate)/,Fc=/^(rotate|skew)/,sr=(e,t)=>U.num(e)&&e!==0?e+t:e,hn=(e,t)=>U.arr(e)?e.every(n=>hn(n,t)):U.num(e)?e===t:parseFloat(e)===t,Tc=class extends Nn{constructor({x:e,y:t,z:n,...r}){const s=[],i=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),i.push(o=>[`translate3d(${o.map(a=>sr(a,"px")).join(",")})`,hn(o,0)])),Re(r,(o,a)=>{if(a==="transform")s.push([o||""]),i.push(c=>[c,c===""]);else if(Pc.test(a)){if(delete r[a],U.und(o))return;const c=Rc.test(a)?"px":Fc.test(a)?"deg":"";s.push(ce(o)),i.push(a==="rotate3d"?([u,l,f,d])=>[`rotate3d(${u},${l},${f},${sr(d,c)})`,hn(d,0)]:u=>[`${a}(${u.map(l=>sr(l,c)).join(",")})`,hn(u,a.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new Dc(s,i)),super(r)}},Dc=class extends Ti{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return J(this.inputs,(n,r)=>{const s=fe(n[0]),[i,o]=this.transforms[r](U.arr(s)?s:n.map(fe));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&J(this.inputs,t=>J(t,n=>ye(n)&&Et(n,this)))}observerRemoved(e){e==0&&J(this.inputs,t=>J(t,n=>ye(n)&&Ht(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Ut(this,e)}},$c=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Oe.assign({batchedUpdates:fi.unstable_batchedUpdates,createStringInterpolator:ki,colors:wu});var kc=Zu($c,{applyAnimatedValues:Ic,createAnimatedStyle:e=>new Tc(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Gr=kc.animated,Zi={},eo={exports:{}},Mc="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jc=Mc,Lc=jc;function to(){}function no(){}no.resetWarningCache=to;var Nc=function(){function e(r,s,i,o,a,c){if(c!==Lc){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:no,resetWarningCache:to};return n.PropTypes=n,n};eo.exports=Nc();var Xt=eo.exports;function Bc(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Uc=Bc,ro={},Qs=function(){function e(t,n){var r=[],s=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),c;!(s=(c=a.next()).done)&&(r.push(c.value),!(n&&r.length===n));s=!0);}catch(u){i=!0,o=u}finally{try{!s&&a.return&&a.return()}finally{if(i)throw o}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Hc=function(e){var t=e.data,n=e.multiSection;function r(c){for(c===null?c=0:c++;c<t.length&&t[c]===0;)c++;return c===t.length?null:c}function s(c){for(c===null?c=t.length-1:c--;c>=0&&t[c]===0;)c--;return c===-1?null:c}function i(c){var u=Qs(c,2),l=u[0],f=u[1];return n?f===null||f===t[l]-1?(l=r(l),l===null?[null,null]:[l,0]):[l,f+1]:t===0||f===t-1?[null,null]:f===null?[null,0]:[null,f+1]}function o(c){var u=Qs(c,2),l=u[0],f=u[1];return n?f===null||f===0?(l=s(l),l===null?[null,null]:[l,t[l]-1]):[l,f-1]:t===0||f===0?[null,null]:f===null?[null,t-1]:[null,f-1]}function a(c){return i(c)[1]===null}return{next:i,prev:o,isLast:a}},wr={exports:{}},Vc=Object.prototype.propertyIsEnumerable;function qc(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Wc(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(n){return Vc.call(e,n)})}var zc=Object.assign||function(e,t){for(var n,r,s=qc(e),i=1;i<arguments.length;i++){n=arguments[i],r=Wc(Object(n));for(var o=0;o<r.length;o++)s[r[o]]=n[r[o]]}return s};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function c(u,l){var f=[],d=!0,h=!1,y=void 0;try{for(var p=u[Symbol.iterator](),b;!(d=(b=p.next()).done)&&(f.push(b.value),!(l&&f.length===l));d=!0);}catch(w){h=!0,y=w}finally{try{!d&&p.return&&p.return()}finally{if(h)throw y}}return f}return function(u,l){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return c(u,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(c){return c&&c.__esModule?c:{default:c}}function s(c){if(Array.isArray(c)){for(var u=0,l=Array(c.length);u<c.length;u++)l[u]=c[u];return l}else return Array.from(c)}var i=zc,o=r(i),a=function(u){return u};t.default=function(c){var u=Array.isArray(c)&&c.length===2?c:[c,null],l=n(u,2),f=l[0],d=l[1];return function(h){for(var y=arguments.length,p=Array(y>1?y-1:0),b=1;b<y;b++)p[b-1]=arguments[b];var w=p.map(function($){return f[$]}).filter(a);return typeof w[0]=="string"||typeof d=="function"?{key:h,className:d?d.apply(void 0,s(w)):w.join(" ")}:{key:h,style:o.default.apply(void 0,[{}].concat(s(w)))}}},e.exports=t.default})(wr,wr.exports);var Gc=wr.exports,so={},Un={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(i){return typeof i}:t=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t(r)}function n(r,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===s)return!1;var o=Object.keys(r),a=Object.keys(s);if(o.length!==a.length)return!0;var c={},u,l;for(u=0,l=i.length;u<l;u++)c[i[u]]=!0;for(u=0,l=o.length;u<l;u++){var f=o[u],d=r[f],h=s[f];if(d!==h){if(!c[f]||d===null||h===null||t(d)!=="object"||t(h)!=="object")return!0;var y=Object.keys(d),p=Object.keys(h);if(y.length!==p.length)return!0;for(var b=0,w=y.length;b<w;b++){var $=y[b];if(d[$]!==h[$])return!0}}}return!1}})(Un);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(C),n=s(Xt),r=s(Un);function s(x){return x&&x.__esModule?x:{default:x}}function i(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return i=function(){return x},x}function o(x){if(x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var k=i();if(k&&k.has(x))return k.get(x);var M={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in x)if(Object.prototype.hasOwnProperty.call(x,_)){var v=N?Object.getOwnPropertyDescriptor(x,_):null;v&&(v.get||v.set)?Object.defineProperty(M,_,v):M[_]=x[_]}return M.default=x,k&&k.set(x,M),M}function a(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(M){return typeof M}:a=function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},a(x)}function c(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function u(x,k){for(var M=0;M<k.length;M++){var N=k[M];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}function l(x,k,M){return k&&u(x.prototype,k),x}function f(x){return function(){var k=p(x),M;if(y()){var N=p(this).constructor;M=Reflect.construct(k,arguments,N)}else M=k.apply(this,arguments);return d(this,M)}}function d(x,k){return k&&(a(k)==="object"||typeof k=="function")?k:h(x)}function h(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(x){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},p(x)}function b(x,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(k&&k.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),k&&w(x,k)}function w(x,k){return w=Object.setPrototypeOf||function(N,_){return N.__proto__=_,N},w(x,k)}function $(x,k,M){return k in x?Object.defineProperty(x,k,{value:M,enumerable:!0,configurable:!0,writable:!0}):x[k]=M,x}var E=function(x){b(M,x);var k=f(M);function M(){return c(this,M),k.apply(this,arguments)}return l(M,[{key:"shouldComponentUpdate",value:function(_){return(0,r.default)(_,this.props)}},{key:"render",value:function(){var _=this.props,v=_.section,S=_.renderSectionTitle,P=_.theme,D=_.sectionKeyPrefix,L=S(v);return L?t.default.createElement("div",P("".concat(D,"title"),"sectionTitle"),L):null}}]),M}(t.Component);e.default=E,$(E,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})})(so);var io={},oo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(C),n=s(Xt),r=s(Un);function s(v){return v&&v.__esModule?v:{default:v}}function i(){if(typeof WeakMap!="function")return null;var v=new WeakMap;return i=function(){return v},v}function o(v){if(v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var S=i();if(S&&S.has(v))return S.get(v);var P={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in v)if(Object.prototype.hasOwnProperty.call(v,L)){var j=D?Object.getOwnPropertyDescriptor(v,L):null;j&&(j.get||j.set)?Object.defineProperty(P,L,j):P[L]=v[L]}return P.default=v,S&&S.set(v,P),P}function a(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(P){return typeof P}:a=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},a(v)}function c(){return c=Object.assign||function(v){for(var S=1;S<arguments.length;S++){var P=arguments[S];for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(v[D]=P[D])}return v},c.apply(this,arguments)}function u(v,S){var P=Object.keys(v);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(v);S&&(D=D.filter(function(L){return Object.getOwnPropertyDescriptor(v,L).enumerable})),P.push.apply(P,D)}return P}function l(v){for(var S=1;S<arguments.length;S++){var P=arguments[S]!=null?arguments[S]:{};S%2?u(Object(P),!0).forEach(function(D){N(v,D,P[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(P)):u(Object(P)).forEach(function(D){Object.defineProperty(v,D,Object.getOwnPropertyDescriptor(P,D))})}return v}function f(v,S){if(v==null)return{};var P=d(v,S),D,L;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(v);for(L=0;L<j.length;L++)D=j[L],!(S.indexOf(D)>=0)&&Object.prototype.propertyIsEnumerable.call(v,D)&&(P[D]=v[D])}return P}function d(v,S){if(v==null)return{};var P={},D=Object.keys(v),L,j;for(j=0;j<D.length;j++)L=D[j],!(S.indexOf(L)>=0)&&(P[L]=v[L]);return P}function h(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")}function y(v,S){for(var P=0;P<S.length;P++){var D=S[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}function p(v,S,P){return S&&y(v.prototype,S),v}function b(v){return function(){var S=x(v),P;if(E()){var D=x(this).constructor;P=Reflect.construct(S,arguments,D)}else P=S.apply(this,arguments);return w(this,P)}}function w(v,S){return S&&(a(S)==="object"||typeof S=="function")?S:$(v)}function $(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(v){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},x(v)}function k(v,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(S&&S.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),S&&M(v,S)}function M(v,S){return M=Object.setPrototypeOf||function(D,L){return D.__proto__=L,D},M(v,S)}function N(v,S,P){return S in v?Object.defineProperty(v,S,{value:P,enumerable:!0,configurable:!0,writable:!0}):v[S]=P,v}var _=function(v){k(P,v);var S=b(P);function P(){var D;h(this,P);for(var L=arguments.length,j=new Array(L),H=0;H<L;H++)j[H]=arguments[H];return D=S.call.apply(S,[this].concat(j)),N($(D),"storeItemReference",function(K){K!==null&&(D.item=K)}),N($(D),"onMouseEnter",function(K){var z=D.props,I=z.sectionIndex,m=z.itemIndex;D.props.onMouseEnter(K,{sectionIndex:I,itemIndex:m})}),N($(D),"onMouseLeave",function(K){var z=D.props,I=z.sectionIndex,m=z.itemIndex;D.props.onMouseLeave(K,{sectionIndex:I,itemIndex:m})}),N($(D),"onMouseDown",function(K){var z=D.props,I=z.sectionIndex,m=z.itemIndex;D.props.onMouseDown(K,{sectionIndex:I,itemIndex:m})}),N($(D),"onClick",function(K){var z=D.props,I=z.sectionIndex,m=z.itemIndex;D.props.onClick(K,{sectionIndex:I,itemIndex:m})}),D}return p(P,[{key:"shouldComponentUpdate",value:function(L){return(0,r.default)(L,this.props,["renderItemData"])}},{key:"render",value:function(){var L=this.props,j=L.isHighlighted,H=L.item,K=L.renderItem,z=L.renderItemData,I=f(L,["isHighlighted","item","renderItem","renderItemData"]);return delete I.sectionIndex,delete I.itemIndex,typeof I.onMouseEnter=="function"&&(I.onMouseEnter=this.onMouseEnter),typeof I.onMouseLeave=="function"&&(I.onMouseLeave=this.onMouseLeave),typeof I.onMouseDown=="function"&&(I.onMouseDown=this.onMouseDown),typeof I.onClick=="function"&&(I.onClick=this.onClick),t.default.createElement("li",c({role:"option"},I,{ref:this.storeItemReference}),K(H,l({isHighlighted:j},z)))}}]),P}(t.Component);e.default=_,N(_,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})})(oo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(C),n=i(Xt),r=i(oo),s=i(Un);function i(_){return _&&_.__esModule?_:{default:_}}function o(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return o=function(){return _},_}function a(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var v=o();if(v&&v.has(_))return v.get(_);var S={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in _)if(Object.prototype.hasOwnProperty.call(_,D)){var L=P?Object.getOwnPropertyDescriptor(_,D):null;L&&(L.get||L.set)?Object.defineProperty(S,D,L):S[D]=_[D]}return S.default=_,v&&v.set(_,S),S}function c(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(S){return typeof S}:c=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},c(_)}function u(){return u=Object.assign||function(_){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(_[P]=S[P])}return _},u.apply(this,arguments)}function l(_,v){var S=Object.keys(_);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(_);v&&(P=P.filter(function(D){return Object.getOwnPropertyDescriptor(_,D).enumerable})),S.push.apply(S,P)}return S}function f(_){for(var v=1;v<arguments.length;v++){var S=arguments[v]!=null?arguments[v]:{};v%2?l(Object(S),!0).forEach(function(P){M(_,P,S[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(S)):l(Object(S)).forEach(function(P){Object.defineProperty(_,P,Object.getOwnPropertyDescriptor(S,P))})}return _}function d(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){for(var S=0;S<v.length;S++){var P=v[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}function y(_,v,S){return v&&h(_.prototype,v),_}function p(_){return function(){var v=E(_),S;if($()){var P=E(this).constructor;S=Reflect.construct(v,arguments,P)}else S=v.apply(this,arguments);return b(this,S)}}function b(_,v){return v&&(c(v)==="object"||typeof v=="function")?v:w(_)}function w(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(_){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},E(_)}function x(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&k(_,v)}function k(_,v){return k=Object.setPrototypeOf||function(P,D){return P.__proto__=D,P},k(_,v)}function M(_,v,S){return v in _?Object.defineProperty(_,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[v]=S,_}var N=function(_){x(S,_);var v=p(S);function S(){var P;d(this,S);for(var D=arguments.length,L=new Array(D),j=0;j<D;j++)L[j]=arguments[j];return P=v.call.apply(v,[this].concat(L)),M(w(P),"storeHighlightedItemReference",function(H){P.props.onHighlightedItemChange(H===null?null:H.item)}),P}return y(S,[{key:"shouldComponentUpdate",value:function(D){return(0,s.default)(D,this.props,["itemProps"])}},{key:"render",value:function(){var D=this,L=this.props,j=L.items,H=L.itemProps,K=L.renderItem,z=L.renderItemData,I=L.sectionIndex,m=L.highlightedItemIndex,O=L.getItemId,R=L.theme,g=L.keyPrefix,A=I===null?g:"".concat(g,"section-").concat(I,"-"),F=typeof H=="function";return t.default.createElement("ul",u({role:"listbox"},R("".concat(A,"items-list"),"itemsList")),j.map(function(T,G){var Q=G===0,W=G===m,V="".concat(A,"item-").concat(G),Z=F?H({sectionIndex:I,itemIndex:G}):H,ne=f({id:O(I,G),"aria-selected":W},R(V,"item",Q&&"itemFirst",W&&"itemHighlighted"),{},Z);return W&&(ne.ref=D.storeHighlightedItemReference),t.default.createElement(r.default,u({},ne,{sectionIndex:I,isHighlighted:W,itemIndex:G,item:T,renderItem:K,renderItemData:z}))}))}}]),S}(t.Component);e.default=N,M(N,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),M(N,"defaultProps",{sectionIndex:null})})(io);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(C),n=a(Xt),r=a(Hc),s=a(Gc),i=a(so),o=a(io);function a(m){return m&&m.__esModule?m:{default:m}}function c(){if(typeof WeakMap!="function")return null;var m=new WeakMap;return c=function(){return m},m}function u(m){if(m&&m.__esModule)return m;if(m===null||$(m)!=="object"&&typeof m!="function")return{default:m};var O=c();if(O&&O.has(m))return O.get(m);var R={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in m)if(Object.prototype.hasOwnProperty.call(m,A)){var F=g?Object.getOwnPropertyDescriptor(m,A):null;F&&(F.get||F.set)?Object.defineProperty(R,A,F):R[A]=m[A]}return R.default=m,O&&O.set(m,R),R}function l(m,O){var R=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);O&&(g=g.filter(function(A){return Object.getOwnPropertyDescriptor(m,A).enumerable})),R.push.apply(R,g)}return R}function f(m){for(var O=1;O<arguments.length;O++){var R=arguments[O]!=null?arguments[O]:{};O%2?l(Object(R),!0).forEach(function(g){L(m,g,R[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(R)):l(Object(R)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(R,g))})}return m}function d(m,O){return w(m)||b(m,O)||y(m,O)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(m,O){if(m){if(typeof m=="string")return p(m,O);var R=Object.prototype.toString.call(m).slice(8,-1);if(R==="Object"&&m.constructor&&(R=m.constructor.name),R==="Map"||R==="Set")return Array.from(R);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return p(m,O)}}function p(m,O){(O==null||O>m.length)&&(O=m.length);for(var R=0,g=new Array(O);R<O;R++)g[R]=m[R];return g}function b(m,O){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(m)))){var R=[],g=!0,A=!1,F=void 0;try{for(var T=m[Symbol.iterator](),G;!(g=(G=T.next()).done)&&(R.push(G.value),!(O&&R.length===O));g=!0);}catch(Q){A=!0,F=Q}finally{try{!g&&T.return!=null&&T.return()}finally{if(A)throw F}}return R}}function w(m){if(Array.isArray(m))return m}function $(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$=function(R){return typeof R}:$=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},$(m)}function E(m,O){if(!(m instanceof O))throw new TypeError("Cannot call a class as a function")}function x(m,O){for(var R=0;R<O.length;R++){var g=O[R];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}function k(m,O,R){return O&&x(m.prototype,O),m}function M(m){return function(){var O=S(m),R;if(v()){var g=S(this).constructor;R=Reflect.construct(O,arguments,g)}else R=O.apply(this,arguments);return N(this,R)}}function N(m,O){return O&&($(O)==="object"||typeof O=="function")?O:_(m)}function _(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function S(m){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},S(m)}function P(m,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(O&&O.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),O&&D(m,O)}function D(m,O){return D=Object.setPrototypeOf||function(g,A){return g.__proto__=A,g},D(m,O)}function L(m,O,R){return O in m?Object.defineProperty(m,O,{value:R,enumerable:!0,configurable:!0,writable:!0}):m[O]=R,m}var j={},H=function(O){return t.default.createElement("input",O)},K=function(O){var R=O.containerProps,g=O.children;return t.default.createElement("div",R,g)},z={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},I=function(m){P(R,m);var O=M(R);function R(g){var A;return E(this,R),A=O.call(this,g),L(_(A),"storeInputReference",function(F){F!==null&&(A.input=F);var T=A.props.inputProps.ref;T&&(typeof T=="function"?T(F):$(T)==="object"&&Object.prototype.hasOwnProperty.call(T,"current")&&(T.current=F))}),L(_(A),"storeItemsContainerReference",function(F){F!==null&&(A.itemsContainer=F)}),L(_(A),"onHighlightedItemChange",function(F){A.highlightedItem=F}),L(_(A),"getItemId",function(F,T){if(T===null)return null;var G=A.props.id,Q=F===null?"":"section-".concat(F);return"react-autowhatever-".concat(G,"-").concat(Q,"-item-").concat(T)}),L(_(A),"onFocus",function(F){var T=A.props.inputProps;A.setState({isInputFocused:!0}),T.onFocus&&T.onFocus(F)}),L(_(A),"onBlur",function(F){var T=A.props.inputProps;A.setState({isInputFocused:!1}),T.onBlur&&T.onBlur(F)}),L(_(A),"onKeyDown",function(F){var T=A.props,G=T.inputProps,Q=T.highlightedSectionIndex,W=T.highlightedItemIndex,V=F.keyCode;switch(V){case 40:case 38:{var Z=V===40?"next":"prev",ne=A.sectionIterator[Z]([Q,W]),se=d(ne,2),ie=se[0],Ze=se[1];G.onKeyDown(F,{newHighlightedSectionIndex:ie,newHighlightedItemIndex:Ze});break}default:G.onKeyDown(F,{highlightedSectionIndex:Q,highlightedItemIndex:W})}}),A.highlightedItem=null,A.state={isInputFocused:!1},A.setSectionsItems(g),A.setSectionIterator(g),A.setTheme(g),A}return k(R,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(A){A.items!==this.props.items&&this.setSectionsItems(A),(A.items!==this.props.items||A.multiSection!==this.props.multiSection)&&this.setSectionIterator(A),A.theme!==this.props.theme&&this.setTheme(A)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(A){A.multiSection&&(this.sectionsItems=A.items.map(function(F){return A.getSectionItems(F)}),this.sectionsLengths=this.sectionsItems.map(function(F){return F.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(F){return F===0}))}},{key:"setSectionIterator",value:function(A){this.sectionIterator=(0,r.default)({multiSection:A.multiSection,data:A.multiSection?this.sectionsLengths:A.items.length})}},{key:"setTheme",value:function(A){this.theme=(0,s.default)(A.theme)}},{key:"renderSections",value:function(){var A=this;if(this.allSectionsAreEmpty)return null;var F=this.theme,T=this.props,G=T.id,Q=T.items,W=T.renderItem,V=T.renderItemData,Z=T.renderSectionTitle,ne=T.highlightedSectionIndex,se=T.highlightedItemIndex,ie=T.itemProps;return Q.map(function(Ze,le){var at="react-autowhatever-".concat(G,"-"),ut="".concat(at,"section-").concat(le,"-"),Te=le===0;return t.default.createElement("div",F("".concat(ut,"container"),"sectionContainer",Te&&"sectionContainerFirst"),t.default.createElement(i.default,{section:Ze,renderSectionTitle:Z,theme:F,sectionKeyPrefix:ut}),t.default.createElement(o.default,{items:A.sectionsItems[le],itemProps:ie,renderItem:W,renderItemData:V,sectionIndex:le,highlightedItemIndex:ne===le?se:null,onHighlightedItemChange:A.onHighlightedItemChange,getItemId:A.getItemId,theme:F,keyPrefix:at,ref:A.storeItemsListReference}))})}},{key:"renderItems",value:function(){var A=this.props.items;if(A.length===0)return null;var F=this.theme,T=this.props,G=T.id,Q=T.renderItem,W=T.renderItemData,V=T.highlightedSectionIndex,Z=T.highlightedItemIndex,ne=T.itemProps;return t.default.createElement(o.default,{items:A,itemProps:ne,renderItem:Q,renderItemData:W,highlightedItemIndex:V===null?Z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:F,keyPrefix:"react-autowhatever-".concat(G,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var A=this.highlightedItem;if(A){var F=this.itemsContainer,T=A.offsetParent===F?A.offsetTop:A.offsetTop-F.offsetTop,G=F.scrollTop;T<G?G=T:T+A.offsetHeight>G+F.offsetHeight&&(G=T+A.offsetHeight-F.offsetHeight),G!==F.scrollTop&&(F.scrollTop=G)}}},{key:"render",value:function(){var A=this.theme,F=this.props,T=F.id,G=F.multiSection,Q=F.renderInputComponent,W=F.renderItemsContainer,V=F.highlightedSectionIndex,Z=F.highlightedItemIndex,ne=this.state.isInputFocused,se=G?this.renderSections():this.renderItems(),ie=se!==null,Ze=this.getItemId(V,Z),le="react-autowhatever-".concat(T),at=f({role:"combobox","aria-haspopup":"listbox","aria-owns":le,"aria-expanded":ie},A("react-autowhatever-".concat(T,"-container"),"container",ie&&"containerOpen"),{},this.props.containerProps),ut=Q(f({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":le,"aria-activedescendant":Ze},A("react-autowhatever-".concat(T,"-input"),"input",ie&&"inputOpen",ne&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),Te=W({containerProps:f({id:le,role:"listbox"},A("react-autowhatever-".concat(T,"-items-container"),"itemsContainer",ie&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:se});return t.default.createElement("div",at,ut,Te)}}]),R}(t.Component);e.default=I,L(I,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),L(I,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:H,renderItemsContainer:K,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:j,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:j,inputProps:j,itemProps:j,highlightedSectionIndex:null,highlightedItemIndex:null,theme:z})})(ro);var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.mapToAutowhateverTheme=bt.defaultTheme=void 0;var Kc={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};bt.defaultTheme=Kc;var Qc=function(t){var n={};for(var r in t)switch(r){case"suggestionsContainer":n.itemsContainer=t[r];break;case"suggestionsContainerOpen":n.itemsContainerOpen=t[r];break;case"suggestion":n.item=t[r];break;case"suggestionFirst":n.itemFirst=t[r];break;case"suggestionHighlighted":n.itemHighlighted=t[r];break;case"suggestionsList":n.itemsList=t[r];break;default:n[r]=t[r]}return n};bt.mapToAutowhateverTheme=Qc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(C),n=o(Xt),r=o(Uc),s=o(ro),i=bt;function o(I){return I&&I.__esModule?I:{default:I}}function a(){if(typeof WeakMap!="function")return null;var I=new WeakMap;return a=function(){return I},I}function c(I){if(I&&I.__esModule)return I;if(I===null||u(I)!=="object"&&typeof I!="function")return{default:I};var m=a();if(m&&m.has(I))return m.get(I);var O={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in I)if(Object.prototype.hasOwnProperty.call(I,g)){var A=R?Object.getOwnPropertyDescriptor(I,g):null;A&&(A.get||A.set)?Object.defineProperty(O,g,A):O[g]=I[g]}return O.default=I,m&&m.set(I,O),O}function u(I){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(O){return typeof O}:u=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},u(I)}function l(I,m){var O=Object.keys(I);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(I);m&&(R=R.filter(function(g){return Object.getOwnPropertyDescriptor(I,g).enumerable})),O.push.apply(O,R)}return O}function f(I){for(var m=1;m<arguments.length;m++){var O=arguments[m]!=null?arguments[m]:{};m%2?l(Object(O),!0).forEach(function(R){M(I,R,O[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(O)):l(Object(O)).forEach(function(R){Object.defineProperty(I,R,Object.getOwnPropertyDescriptor(O,R))})}return I}function d(I,m){if(!(I instanceof m))throw new TypeError("Cannot call a class as a function")}function h(I,m){for(var O=0;O<m.length;O++){var R=m[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}function y(I,m,O){return m&&h(I.prototype,m),I}function p(I){return function(){var m=E(I),O;if($()){var R=E(this).constructor;O=Reflect.construct(m,arguments,R)}else O=m.apply(this,arguments);return b(this,O)}}function b(I,m){return m&&(u(m)==="object"||typeof m=="function")?m:w(I)}function w(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(I){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},E(I)}function x(I,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(m&&m.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),m&&k(I,m)}function k(I,m){return k=Object.setPrototypeOf||function(R,g){return R.__proto__=g,R},k(I,m)}function M(I,m,O){return m in I?Object.defineProperty(I,m,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[m]=O,I}var N=function(){return!0},_=function(m){return m.trim().length>0},v=function(m){var O=m.containerProps,R=m.children;return t.default.createElement("div",O,R)},S="suggestions-revealed",P="suggestions-updated",D="suggestion-selected",L="input-focused",j="input-changed",H="input-blurred",K="escape-pressed",z=function(I){x(O,I);var m=p(O);function O(R){var g,A=R.alwaysRenderSuggestions;return d(this,O),g=m.call(this),M(w(g),"onDocumentMouseDown",function(F){g.justClickedOnSuggestionsContainer=!1;for(var T=F.detail&&F.detail.target||F.target;T!==null&&T!==document;){if(T.getAttribute&&T.getAttribute("data-suggestion-index")!==null)return;if(T===g.suggestionsContainer){g.justClickedOnSuggestionsContainer=!0;return}T=T.parentNode}}),M(w(g),"storeAutowhateverRef",function(F){F!==null&&(g.autowhatever=F)}),M(w(g),"onSuggestionMouseEnter",function(F,T){var G=T.sectionIndex,Q=T.itemIndex;g.updateHighlightedSuggestion(G,Q),F.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!0),g.justMouseEntered=!0,setTimeout(function(){g.justMouseEntered=!1})}),M(w(g),"highlightFirstSuggestion",function(){g.updateHighlightedSuggestion(g.props.multiSection?0:null,0)}),M(w(g),"onDocumentMouseUp",function(){g.pressedSuggestion&&!g.justSelectedSuggestion&&g.input.focus(),g.pressedSuggestion=null}),M(w(g),"onSuggestionMouseDown",function(F){g.justSelectedSuggestion||(g.justSelectedSuggestion=!0,g.pressedSuggestion=F.target)}),M(w(g),"onSuggestionsClearRequested",function(){var F=g.props.onSuggestionsClearRequested;F&&F()}),M(w(g),"onSuggestionSelected",function(F,T){var G=g.props,Q=G.alwaysRenderSuggestions,W=G.onSuggestionSelected,V=G.onSuggestionsFetchRequested;W&&W(F,T);var Z=g.props.shouldKeepSuggestionsOnSelect(T.suggestion);Q||Z?V({value:T.suggestionValue,reason:D}):g.onSuggestionsClearRequested(),g.resetHighlightedSuggestion()}),M(w(g),"onSuggestionClick",function(F){var T=g.props,G=T.alwaysRenderSuggestions,Q=T.focusInputOnSuggestionClick,W=g.getSuggestionIndices(g.findSuggestionElement(F.target)),V=W.sectionIndex,Z=W.suggestionIndex,ne=g.getSuggestion(V,Z),se=g.props.getSuggestionValue(ne);g.maybeCallOnChange(F,se,"click"),g.onSuggestionSelected(F,{suggestion:ne,suggestionValue:se,suggestionIndex:Z,sectionIndex:V,method:"click"});var ie=g.props.shouldKeepSuggestionsOnSelect(ne);G||ie||g.closeSuggestions(),Q===!0?g.input.focus():g.onBlur(),setTimeout(function(){g.justSelectedSuggestion=!1})}),M(w(g),"onBlur",function(){var F=g.props,T=F.inputProps,G=F.shouldRenderSuggestions,Q=T.value,W=T.onBlur,V=g.getHighlightedSuggestion(),Z=G(Q,H);g.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Z}),W&&W(g.blurEvent,{highlightedSuggestion:V})}),M(w(g),"onSuggestionMouseLeave",function(F){g.resetHighlightedSuggestion(!1),g.justSelectedSuggestion&&F.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!1)}),M(w(g),"onSuggestionTouchStart",function(){g.justSelectedSuggestion=!0}),M(w(g),"onSuggestionTouchMove",function(){g.justSelectedSuggestion=!1,g.pressedSuggestion=null,g.input.focus()}),M(w(g),"itemProps",function(F){var T=F.sectionIndex,G=F.itemIndex;return{"data-section-index":T,"data-suggestion-index":G,onMouseEnter:g.onSuggestionMouseEnter,onMouseLeave:g.onSuggestionMouseLeave,onMouseDown:g.onSuggestionMouseDown,onTouchStart:g.onSuggestionTouchStart,onTouchMove:g.onSuggestionTouchMove,onClick:g.onSuggestionClick}}),M(w(g),"renderSuggestionsContainer",function(F){var T=F.containerProps,G=F.children,Q=g.props.renderSuggestionsContainer;return Q({containerProps:T,children:G,query:g.getQuery()})}),g.state={isFocused:!1,isCollapsed:!A,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},g.justPressedUpDown=!1,g.justMouseEntered=!1,g.pressedSuggestion=null,g}return y(O,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(g){var A=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!g.highlightFirstSuggestion;(0,r.default)(g.suggestions,this.props.suggestions)?g.highlightFirstSuggestion&&g.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():A&&this.resetHighlightedSuggestion():this.willRenderSuggestions(g,P)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),A&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(g,A){var F=this.props,T=F.suggestions,G=F.onSuggestionHighlighted,Q=F.highlightFirstSuggestion;if(!(0,r.default)(T,g.suggestions)&&T.length>0&&Q){this.highlightFirstSuggestion();return}if(G){var W=this.getHighlightedSuggestion(),V=A.highlightedSuggestion;W!=V&&G({suggestion:W})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(g,A,F){var T=this;this.setState(function(G){var Q=G.valueBeforeUpDown;return A===null?Q=null:Q===null&&typeof F<"u"&&(Q=F),{highlightedSectionIndex:g,highlightedSuggestionIndex:A,highlightedSuggestion:A===null?null:T.getSuggestion(g,A),valueBeforeUpDown:Q}})}},{key:"resetHighlightedSuggestion",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(A){var F=A.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:g?null:F}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(g,A){var F=this.props,T=F.suggestions,G=F.multiSection,Q=F.getSectionSuggestions;return G?Q(T[g])[A]:T[A]}},{key:"getHighlightedSuggestion",value:function(){var g=this.state,A=g.highlightedSectionIndex,F=g.highlightedSuggestionIndex;return F===null?null:this.getSuggestion(A,F)}},{key:"getSuggestionValueByIndex",value:function(g,A){var F=this.props.getSuggestionValue;return F(this.getSuggestion(g,A))}},{key:"getSuggestionIndices",value:function(g){var A=g.getAttribute("data-section-index"),F=g.getAttribute("data-suggestion-index");return{sectionIndex:typeof A=="string"?parseInt(A,10):null,suggestionIndex:parseInt(F,10)}}},{key:"findSuggestionElement",value:function(g){var A=g;do{if(A.getAttribute&&A.getAttribute("data-suggestion-index")!==null)return A;A=A.parentNode}while(A!==null);throw console.error("Clicked element:",g),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(g,A,F){var T=this.props.inputProps,G=T.value,Q=T.onChange;A!==G&&Q(g,{newValue:A,method:F})}},{key:"willRenderSuggestions",value:function(g,A){var F=g.suggestions,T=g.inputProps,G=g.shouldRenderSuggestions,Q=T.value;return F.length>0&&G(Q,A)}},{key:"getQuery",value:function(){var g=this.props.inputProps,A=g.value,F=this.state.valueBeforeUpDown;return(F===null?A:F).trim()}},{key:"render",value:function(){var g=this,A=this.props,F=A.suggestions,T=A.renderInputComponent,G=A.onSuggestionsFetchRequested,Q=A.renderSuggestion,W=A.inputProps,V=A.multiSection,Z=A.renderSectionTitle,ne=A.id,se=A.getSectionSuggestions,ie=A.theme,Ze=A.getSuggestionValue,le=A.alwaysRenderSuggestions,at=A.highlightFirstSuggestion,ut=A.containerProps,Te=this.state,Do=Te.isFocused,ns=Te.isCollapsed,rs=Te.highlightedSectionIndex,ss=Te.highlightedSuggestionIndex,en=Te.valueBeforeUpDown,tn=le?N:this.props.shouldRenderSuggestions,ct=W.value,is=W.onFocus,os=W.onKeyDown,$o=this.willRenderSuggestions(this.props,"render"),nn=le||Do&&!ns&&$o,ko=nn?F:[],Mo=f({},W,{onFocus:function(re){if(!g.justSelectedSuggestion&&!g.justClickedOnSuggestionsContainer){var De=tn(ct,L);g.setState({isFocused:!0,isCollapsed:!De}),is&&is(re),De&&G({value:ct,reason:L})}},onBlur:function(re){if(g.justClickedOnSuggestionsContainer){g.input.focus();return}g.blurEvent=re,g.justSelectedSuggestion||(g.onBlur(),g.onSuggestionsClearRequested())},onChange:function(re){var De=re.target.value,Ot=tn(De,j);g.maybeCallOnChange(re,De,"type"),g.suggestionsContainer&&(g.suggestionsContainer.scrollTop=0),g.setState(f({},at?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!Ot})),Ot?G({value:De,reason:j}):g.onSuggestionsClearRequested()},onKeyDown:function(re,De){var Ot=re.keyCode;switch(Ot){case 40:case 38:if(ns)tn(ct,S)&&(G({value:ct,reason:S}),g.revealSuggestions(),re.preventDefault());else if(F.length>0){var as=De.newHighlightedSectionIndex,Wn=De.newHighlightedItemIndex,zn;Wn===null?zn=en===null?ct:en:zn=g.getSuggestionValueByIndex(as,Wn),g.updateHighlightedSuggestion(as,Wn,ct),g.maybeCallOnChange(re,zn,Ot===40?"down":"up"),re.preventDefault()}g.justPressedUpDown=!0,setTimeout(function(){g.justPressedUpDown=!1});break;case 13:{if(re.keyCode===229)break;var Gn=g.getHighlightedSuggestion();if(nn&&!le&&g.closeSuggestions(),Gn!=null){re.preventDefault();var us=Ze(Gn);g.maybeCallOnChange(re,us,"enter"),g.onSuggestionSelected(re,{suggestion:Gn,suggestionValue:us,suggestionIndex:ss,sectionIndex:rs,method:"enter"}),g.justSelectedSuggestion=!0,setTimeout(function(){g.justSelectedSuggestion=!1})}break}case 27:{nn&&re.preventDefault();var cs=nn&&!le;if(en===null){if(!cs){var Kn="";g.maybeCallOnChange(re,Kn,"escape"),tn(Kn,K)?G({value:Kn,reason:K}):g.onSuggestionsClearRequested()}}else g.maybeCallOnChange(re,en,"escape");cs?(g.onSuggestionsClearRequested(),g.closeSuggestions()):g.resetHighlightedSuggestion();break}}os&&os(re)}}),jo={query:this.getQuery()};return t.default.createElement(s.default,{multiSection:V,items:ko,renderInputComponent:T,renderItemsContainer:this.renderSuggestionsContainer,renderItem:Q,renderItemData:jo,renderSectionTitle:Z,getSectionItems:se,highlightedSectionIndex:rs,highlightedItemIndex:ss,containerProps:ut,inputProps:Mo,itemProps:this.itemProps,theme:(0,i.mapToAutowhateverTheme)(ie),id:ne,ref:this.storeAutowhateverRef})}}]),O}(t.Component);e.default=z,M(z,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(m,O){var R=m[O];if(typeof R!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(m,O){var R=m[O];if(m.alwaysRenderSuggestions===!1&&typeof R!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(m,O){var R=m[O];if(!R)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(R,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(R,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(m,O){var R=m[O];if(m.multiSection===!0&&typeof R!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(m,O){var R=m[O];if(m.multiSection===!0&&typeof R!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),M(z,"defaultProps",{renderSuggestionsContainer:v,shouldRenderSuggestions:_,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:i.defaultTheme,id:"1",containerProps:{}})})(Zi);var Yc=Zi.default;const Xc=Lo(Yc),Jc=e=>{const[t,n]=C.useState([]),r=({value:i})=>n(e.getSuggestions(i)),s=(i,{isHighlighted:o})=>q.jsx("div",{"data-highlighted":o?"true":void 0,children:i});return q.jsx(Xc,{suggestions:t,onSuggestionSelected:(i,o)=>e.onSelect&&e.onSelect(o.suggestion),onSuggestionsFetchRequested:r,onSuggestionsClearRequested:()=>n([]),getSuggestionValue:i=>i,renderSuggestionsContainer:({containerProps:i,children:o})=>C.Children.toArray(o).length>0?C.createElement("div",{...i,key:i.key,className:"react-autosuggest"},o):null,renderSuggestion:s,containerProps:{className:"relative"},inputProps:{disabled:e.disabled,placeholder:e.placeholder,value:e.value||"",onBlur:e.onBlur,onChange:(i,{newValue:o})=>e.onChange&&e.onChange(o),onFocus:e.onFocus,onKeyDown:e.onKeyDown}})};var Ke={};Ke.remove=Zc;var gn=[{base:" ",chars:""},{base:"0",chars:""},{base:"A",chars:""},{base:"AA",chars:""},{base:"AE",chars:""},{base:"AO",chars:""},{base:"AU",chars:""},{base:"AV",chars:""},{base:"AY",chars:""},{base:"B",chars:""},{base:"C",chars:"C"},{base:"D",chars:""},{base:"Dh",chars:""},{base:"DZ",chars:""},{base:"Dz",chars:""},{base:"E",chars:""},{base:"F",chars:""},{base:"G",chars:""},{base:"H",chars:""},{base:"I",chars:""},{base:"J",chars:""},{base:"K",chars:""},{base:"L",chars:""},{base:"LJ",chars:""},{base:"Lj",chars:""},{base:"M",chars:""},{base:"N",chars:""},{base:"NJ",chars:""},{base:"Nj",chars:""},{base:"O",chars:""},{base:"OE",chars:""},{base:"OI",chars:""},{base:"OO",chars:""},{base:"OU",chars:""},{base:"P",chars:""},{base:"Q",chars:""},{base:"R",chars:""},{base:"S",chars:""},{base:"T",chars:""},{base:"Th",chars:""},{base:"TZ",chars:""},{base:"U",chars:""},{base:"V",chars:""},{base:"VY",chars:""},{base:"W",chars:""},{base:"X",chars:""},{base:"Y",chars:""},{base:"Z",chars:""},{base:"a",chars:""},{base:"aa",chars:""},{base:"ae",chars:""},{base:"ao",chars:""},{base:"au",chars:""},{base:"av",chars:""},{base:"ay",chars:""},{base:"b",chars:""},{base:"c",chars:""},{base:"d",chars:""},{base:"dh",chars:""},{base:"dz",chars:""},{base:"e",chars:""},{base:"f",chars:""},{base:"ff",chars:""},{base:"fi",chars:""},{base:"fl",chars:""},{base:"ffi",chars:""},{base:"ffl",chars:""},{base:"g",chars:""},{base:"h",chars:""},{base:"hv",chars:""},{base:"i",chars:""},{base:"j",chars:""},{base:"k",chars:""},{base:"l",chars:""},{base:"lj",chars:""},{base:"m",chars:""},{base:"n",chars:""},{base:"nj",chars:""},{base:"o",chars:""},{base:"oe",chars:""},{base:"oi",chars:""},{base:"oo",chars:""},{base:"ou",chars:""},{base:"p",chars:""},{base:"q",chars:""},{base:"r",chars:""},{base:"s",chars:""},{base:"ss",chars:""},{base:"t",chars:""},{base:"th",chars:""},{base:"tz",chars:""},{base:"u",chars:""},{base:"v",chars:""},{base:"vy",chars:""},{base:"w",chars:""},{base:"x",chars:""},{base:"y",chars:""},{base:"z",chars:""}],Kr={};for(var un=0;un<gn.length;un+=1)for(var Ys=gn[un].chars,ir=0;ir<Ys.length;ir+=1)Kr[Ys[ir]]=gn[un].base;function Zc(e){return e.replace(/[^\u0000-\u007e]/g,function(t){return Kr[t]||t})}Ke.replacementList=gn;Ke.diacriticsMap=Kr;function je(e){return Array.isArray?Array.isArray(e):co(e)==="[object Array]"}const el=1/0;function tl(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-el?"-0":t}function nl(e){return e==null?"":tl(e)}function Ce(e){return typeof e=="string"}function ao(e){return typeof e=="number"}function rl(e){return e===!0||e===!1||sl(e)&&co(e)=="[object Boolean]"}function uo(e){return typeof e=="object"}function sl(e){return uo(e)&&e!==null}function pe(e){return e!=null}function or(e){return!e.trim().length}function co(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const il="Incorrect 'index' type",ol=e=>`Invalid value for key ${e}`,al=e=>`Pattern length exceeds max of ${e}.`,ul=e=>`Missing ${e} property in key`,cl=e=>`Property 'weight' in key '${e}' must be a positive integer`,Xs=Object.prototype.hasOwnProperty;class ll{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=lo(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function lo(e){let t=null,n=null,r=null,s=1,i=null;if(Ce(e)||je(e))r=e,t=Js(e),n=Sr(e);else{if(!Xs.call(e,"name"))throw new Error(ul("name"));const o=e.name;if(r=o,Xs.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(cl(o));t=Js(o),n=Sr(o),i=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:i}}function Js(e){return je(e)?e:e.split(".")}function Sr(e){return je(e)?e.join("."):e}function fl(e,t){let n=[],r=!1;const s=(i,o,a)=>{if(pe(i))if(!o[a])n.push(i);else{let c=o[a];const u=i[c];if(!pe(u))return;if(a===o.length-1&&(Ce(u)||ao(u)||rl(u)))n.push(nl(u));else if(je(u)){r=!0;for(let l=0,f=u.length;l<f;l+=1)s(u[l],o,a+1)}else o.length&&s(u,o,a+1)}};return s(e,Ce(t)?t.split("."):t,0),r?n:n[0]}const dl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},hl={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},gl={location:0,threshold:.6,distance:100},pl={useExtendedSearch:!1,getFn:fl,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Y={...hl,...dl,...gl,...pl};const ml=/[^ ]+/g;function yl(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const i=s.match(ml).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class Qr{constructor({getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){this.norm=yl(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ce(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ce(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!pe(t)||or(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(pe(o)){if(je(o)){let a=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:l}=c.pop();if(pe(l))if(Ce(l)&&!or(l)){let f={v:l,i:u,n:this.norm.get(l)};a.push(f)}else je(l)&&l.forEach((f,d)=>{c.push({nestedArrIndex:d,value:f})})}r.$[i]=a}else if(Ce(o)&&!or(o)){let a={v:o,n:this.norm.get(o)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function fo(e,t,{getFn:n=Y.getFn,fieldNormWeight:r=Y.fieldNormWeight}={}){const s=new Qr({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(lo)),s.setSources(t),s.create(),s}function vl(e,{getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){const{keys:r,records:s}=e,i=new Qr({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function cn(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=Y.distance,ignoreLocation:i=Y.ignoreLocation}={}){const o=t/e.length;if(i)return o;const a=Math.abs(r-n);return s?o+a/s:a?1:o}function bl(e=[],t=Y.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=e.length;i<o;i+=1){let a=e[i];a&&r===-1?r=i:!a&&r!==-1&&(s=i-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const et=32;function wl(e,t,n,{location:r=Y.location,distance:s=Y.distance,threshold:i=Y.threshold,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,includeMatches:c=Y.includeMatches,ignoreLocation:u=Y.ignoreLocation}={}){if(t.length>et)throw new Error(al(et));const l=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=i,y=d;const p=a>1||c,b=p?Array(f):[];let w;for(;(w=e.indexOf(t,y))>-1;){let N=cn(t,{currentLocation:w,expectedLocation:d,distance:s,ignoreLocation:u});if(h=Math.min(N,h),y=w+l,p){let _=0;for(;_<l;)b[w+_]=1,_+=1}}y=-1;let $=[],E=1,x=l+f;const k=1<<l-1;for(let N=0;N<l;N+=1){let _=0,v=x;for(;_<v;)cn(t,{errors:N,currentLocation:d+v,expectedLocation:d,distance:s,ignoreLocation:u})<=h?_=v:x=v,v=Math.floor((x-_)/2+_);x=v;let S=Math.max(1,d-v+1),P=o?f:Math.min(d+v,f)+l,D=Array(P+2);D[P+1]=(1<<N)-1;for(let j=P;j>=S;j-=1){let H=j-1,K=n[e.charAt(H)];if(p&&(b[H]=+!!K),D[j]=(D[j+1]<<1|1)&K,N&&(D[j]|=($[j+1]|$[j])<<1|1|$[j+1]),D[j]&k&&(E=cn(t,{errors:N,currentLocation:H,expectedLocation:d,distance:s,ignoreLocation:u}),E<=h)){if(h=E,y=H,y<=d)break;S=Math.max(1,2*d-y)}}if(cn(t,{errors:N+1,currentLocation:d,expectedLocation:d,distance:s,ignoreLocation:u})>h)break;$=D}const M={isMatch:y>=0,score:Math.max(.001,E)};if(p){const N=bl(b,a);N.length?c&&(M.indices=N):M.isMatch=!1}return M}function Sl(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class ho{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:s=Y.distance,includeMatches:i=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,isCaseSensitive:c=Y.isCaseSensitive,ignoreLocation:u=Y.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(d,h)=>{this.chunks.push({pattern:d,alphabet:Sl(d),startIndex:h})},f=this.pattern.length;if(f>et){let d=0;const h=f%et,y=f-h;for(;d<y;)l(this.pattern.substr(d,et),d),d+=et;if(h){const p=f-et;l(this.pattern.substr(p),p)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return r&&(y.indices=[[0,t.length-1]]),y}const{location:s,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:c,ignoreLocation:u}=this.options;let l=[],f=0,d=!1;this.chunks.forEach(({pattern:y,alphabet:p,startIndex:b})=>{const{isMatch:w,score:$,indices:E}=wl(t,y,p,{location:s+b,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});w&&(d=!0),f+=$,w&&E&&(l=[...l,...E])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=l),h}}class Xe{constructor(t){this.pattern=t}static isMultiMatch(t){return Zs(t,this.multiRegex)}static isSingleMatch(t){return Zs(t,this.singleRegex)}search(){}}function Zs(e,t){const n=e.match(t);return n?n[1]:null}class El extends Xe{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class xl extends Xe{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class _l extends Xe{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Ol extends Xe{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Il extends Xe{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Al extends Xe{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class go extends Xe{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:s=Y.distance,includeMatches:i=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,isCaseSensitive:c=Y.isCaseSensitive,ignoreLocation:u=Y.ignoreLocation}={}){super(t),this._bitapSearch=new ho(t,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class po extends Xe{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Er=[El,po,_l,Ol,Al,Il,xl,go],ei=Er.length,Cl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Pl="|";function Rl(e,t={}){return e.split(Pl).map(n=>{let r=n.trim().split(Cl).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const a=r[i];let c=!1,u=-1;for(;!c&&++u<ei;){const l=Er[u];let f=l.isMultiMatch(a);f&&(s.push(new l(f,t)),c=!0)}if(!c)for(u=-1;++u<ei;){const l=Er[u];let f=l.isSingleMatch(a);if(f){s.push(new l(f,t));break}}}return s})}const Fl=new Set([go.type,po.type]);class Tl{constructor(t,{isCaseSensitive:n=Y.isCaseSensitive,includeMatches:r=Y.includeMatches,minMatchCharLength:s=Y.minMatchCharLength,ignoreLocation:i=Y.ignoreLocation,findAllMatches:o=Y.findAllMatches,location:a=Y.location,threshold:c=Y.threshold,distance:u=Y.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:a,threshold:c,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=Rl(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0,o=[],a=0;for(let c=0,u=n.length;c<u;c+=1){const l=n[c];o.length=0,i=0;for(let f=0,d=l.length;f<d;f+=1){const h=l[f],{isMatch:y,indices:p,score:b}=h.search(t);if(y){if(i+=1,a+=b,r){const w=h.constructor.type;Fl.has(w)?o=[...o,...p]:o.push(p)}}else{a=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:a/i};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const xr=[];function Dl(...e){xr.push(...e)}function _r(e,t){for(let n=0,r=xr.length;n<r;n+=1){let s=xr[n];if(s.condition(e,t))return new s(e,t)}return new ho(e,t)}const xn={AND:"$and",OR:"$or"},Or={PATH:"$path",PATTERN:"$val"},Ir=e=>!!(e[xn.AND]||e[xn.OR]),$l=e=>!!e[Or.PATH],kl=e=>!je(e)&&uo(e)&&!Ir(e),ti=e=>({[xn.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function mo(e,t,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=$l(s);if(!o&&i.length>1&&!Ir(s))return r(ti(s));if(kl(s)){const c=o?s[Or.PATH]:i[0],u=o?s[Or.PATTERN]:s[c];if(!Ce(u))throw new Error(ol(c));const l={keyId:Sr(c),pattern:u};return n&&(l.searcher=_r(u,t)),l}let a={children:[],operator:i[0]};return i.forEach(c=>{const u=s[c];je(u)&&u.forEach(l=>{a.children.push(r(l))})}),a};return Ir(e)||(e=ti(e)),r(e)}function Ml(e,{ignoreFieldNorm:t=Y.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const a=s?s.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:i))}),n.score=r})}function jl(e,t){const n=e.matches;t.matches=[],pe(n)&&n.forEach(r=>{if(!pe(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Ll(e,t){t.score=e.score}function Nl(e,t,{includeMatches:n=Y.includeMatches,includeScore:r=Y.includeScore}={}){const s=[];return n&&s.push(jl),r&&s.push(Ll),e.map(i=>{const{idx:o}=i,a={item:t[o],refIndex:o};return s.length&&s.forEach(c=>{c(i,a)}),a})}class Je{constructor(t,n={},r){this.options={...Y,...n},this.options.useExtendedSearch,this._keyStore=new ll(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Qr))throw new Error(il);this._myIndex=n||fo(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let c=Ce(t)?Ce(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ml(c,{ignoreFieldNorm:a}),i&&c.sort(o),ao(n)&&n>-1&&(c=c.slice(0,n)),Nl(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=_r(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:a})=>{if(!pe(i))return;const{isMatch:c,score:u,indices:l}=n.searchIn(i);c&&s.push({item:i,idx:o,matches:[{score:u,value:i,norm:a,indices:l}]})}),s}_searchLogical(t){const n=mo(t,this.options),r=(a,c,u)=>{if(!a.children){const{keyId:f,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:d});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const l=[];for(let f=0,d=a.children.length;f<d;f+=1){const h=a.children[f],y=r(h,c,u);if(y.length)l.push(...y);else if(a.operator===xn.AND)return[]}return l},s=this._myIndex.records,i={},o=[];return s.forEach(({$:a,i:c})=>{if(pe(a)){let u=r(n,a,c);u.length&&(i[c]||(i[c]={idx:c,item:a,matches:[]},o.push(i[c])),u.forEach(({matches:l})=>{i[c].matches.push(...l)}))}}),o}_searchObjectList(t){const n=_r(t,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:a})=>{if(!pe(o))return;let c=[];r.forEach((u,l)=>{c.push(...this._findMatches({key:u,value:o[l],searcher:n}))}),c.length&&i.push({idx:a,item:o,matches:c})}),i}_findMatches({key:t,value:n,searcher:r}){if(!pe(n))return[];let s=[];if(je(n))n.forEach(({v:i,i:o,n:a})=>{if(!pe(i))return;const{isMatch:c,score:u,indices:l}=r.searchIn(i);c&&s.push({score:u,key:t,value:i,idx:o,norm:a,indices:l})});else{const{v:i,n:o}=n,{isMatch:a,score:c,indices:u}=r.searchIn(i);a&&s.push({score:c,key:t,value:i,norm:o,indices:u})}return s}}Je.version="7.0.0";Je.createIndex=fo;Je.parseIndex=vl;Je.config=Y;Je.parseQuery=mo;Dl(Tl);const Bl=e=>{const n=[...new Set(e.reduce((r,s)=>{const i=s.bodies.filter(o=>o.purpose==="tagging"&&o.value);return[...r,...i.map(o=>o.value)]},[]))].map(r=>({value:r,normalized:Ke.remove(r)}));return new Je(n,{keys:["normalized"],shouldSort:!0,threshold:.2})},Ul=()=>fetch("/thesaurus/all-concepts-compact.json").then(e=>e.json()).then(e=>{e.sort();const t=e.map(n=>({value:n,normalized:Ke.remove(n)}));return new Je(t,{keys:["normalized"],shouldSort:!0,threshold:.2})}),Hl=(e,t="THESAURUS")=>{const[n,r]=C.useState(),s=C.useMemo(()=>new Map(e.map(c=>[c.id,c])),[e]);C.useEffect(()=>{if(t==="FROM_ANNOTATIONS"){const c=Bl(e);r(c)}else Ul().then(r)},[t,e]);const i=C.useMemo(()=>{const c=e.map(u=>{const l=u.id,f=u.bodies.filter(d=>d.purpose==="tagging"&&d.value).map(d=>({value:d.value,normalized:Ke.remove(d.value)}));return{annotationId:l,tags:f}}).filter(u=>u.tags.length>0);return new Je(c,{keys:["tags.normalized"],shouldSort:!0,threshold:.4})},[e]);return{search:(c,u)=>i.search(Ke.remove(c),{limit:u||500}).map(l=>s.get(l.item.annotationId)).filter(Boolean),getSuggestions:(c,u)=>n?n.search(Ke.remove(c),{limit:u||10}).map(l=>l.item.value):[]}},Vl=e=>{const t=qo(),[n,r]=C.useState(!0),{search:s,getSuggestions:i}=Hl(t),[o,a]=C.useState(""),[c,u]=C.useState(),[l,f]=C.useState(0),[d,h]=C.useState(!1),y=zr([n],{from:{maxWidth:0,opacity:0},enter:{maxWidth:120,opacity:1},leave:{maxWidth:0,opacity:1},config:{duration:250,easing:kn.easeInOutCubic}});C.useEffect(()=>{if(o){const E=s(o);e.sorter&&E.sort(e.sorter),u(E),E.length>0?f(1):f(0),e.onSearch(E)}else u(void 0),f(1),e.onSearch([])},[o,e.sorter]),C.useEffect(()=>{if(!l||!c)return;const E=c[l-1];e.onHighlightResult(E)},[c,l]);const p=E=>{if(!c)return;const x=Math.min(Math.max(1,l+E),c.length);f(x)},b=()=>{a(""),u(void 0),f(1),r(!0),e.onClear()},w=E=>{E.key==="Enter"?d?p(1):h(!0):h(!1)},$=()=>{o||r(!0)};return q.jsxs("div",{className:"annotation-search",children:[q.jsx(fu,{size:20}),q.jsxs("div",{className:"searchbox-wrapper",children:[q.jsx(Jc,{placeholder:"Search",value:o,onChange:a,onFocus:()=>r(!1),onBlur:$,onKeyDown:w,getSuggestions:i}),c&&q.jsxs("div",{className:"result-count",children:[l,"/",c.length]})]}),y((E,x)=>!x&&q.jsx(Gr.div,{style:E,className:"collapsible",children:q.jsxs("div",{className:"actions",children:[q.jsx("button",{onClick:()=>p(-1),children:q.jsx(cu,{size:18})}),q.jsx("button",{onClick:()=>p(1),children:q.jsx(au,{size:18})}),q.jsx("button",{onClick:b,children:q.jsx(Fr,{size:18,strokeWidth:2.2})})]})}))]})},nd=e=>{const[t,n]=C.useState([]);return C.useEffect(()=>{e.onSearch(t)},[t]),q.jsxs("header",{children:[q.jsxs("div",{className:"header-left",children:[q.jsxs("a",{href:`../..${e.backToTab?`?tab=${e.backToTab}`:""}`,children:[q.jsx(uu,{}),q.jsx("span",{children:"Home"})]}),q.jsx("a",{href:"../../about",children:"About"})]}),q.jsxs("div",{className:"header-right",children:[q.jsx(Vl,{sorter:e.searchSorter,onClear:e.onClearSearch,onHighlightResult:e.onHighlightSearchResult,onSearch:n}),q.jsx("button",{className:e.isRelatedVersesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedVerses,children:q.jsx(ou,{size:18})}),q.jsx("button",{className:e.isRelatedImagesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedImages,children:q.jsx(lu,{size:18})})]})]})},yo=e=>e.bodies.filter(t=>t.purpose==="tagging"&&t.value).map(t=>t.value),ql=(e,t)=>{const n=Array.from(t).filter(s=>e.has(s)),r=new Set([...e,...t]);return n.length/r.size},vo=(e,t)=>{const n=(i,o)=>i.size===o.size&&[...i].every(a=>o.has(a)),r=i=>{i.sort((o,a)=>a.common.size-o.common.size),i.forEach(o=>o.related.sort((a,c)=>c.score-a.score))},s=[];return t.forEach(i=>{const o=new Set(i.tags),a=new Set(Array.from(o).filter(l=>e.has(l))),c=ql(e,o),u=s.find(({common:l})=>n(l,a));u?u.related=[...u.related,{annotation:i,score:c}]:s.push({common:a,related:[{annotation:i,score:c}]})}),r(s),s},rd=(e,t)=>{const n=[...e].filter(i=>i.width>0&&i.height>0);let r,s=Number.MAX_VALUE;return n.forEach(i=>{const o=i.top+i.height/2,a=Math.abs(o-t.y);a<s&&(s=a,r=i)}),r},sd=e=>({length:1,item:t=>t===0?e:void 0,[Symbol.iterator]:function*(){for(let t=0;t<this.length;t++)yield this.item(t)}}),Wl=$e.createContext({}),bo=!0;function zl({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:s,circle:i,direction:o,duration:a,enableAnimation:c=bo}){const u={};return o==="rtl"&&(u["--animation-direction"]="reverse"),typeof a=="number"&&(u["--animation-duration"]=`${a}s`),c||(u["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(u.width=n),(typeof r=="string"||typeof r=="number")&&(u.height=r),(typeof s=="string"||typeof s=="number")&&(u.borderRadius=s),i&&(u.borderRadius="50%"),typeof e<"u"&&(u["--base-color"]=e),typeof t<"u"&&(u["--highlight-color"]=t),u}function Gl({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:s,circle:i=!1,style:o,...a}){var c,u,l;const f=$e.useContext(Wl),d={...a};for(const[E,x]of Object.entries(a))typeof x>"u"&&delete d[E];const h={...f,...d,circle:i},y={...o,...zl(h)};let p="react-loading-skeleton";n&&(p+=` ${n}`);const b=(c=h.inline)!==null&&c!==void 0?c:!1,w=[],$=Math.ceil(e);for(let E=0;E<$;E++){let x=y;if($>e&&E===$-1){const M=(u=x.width)!==null&&u!==void 0?u:"100%",N=e%1,_=typeof M=="number"?M*N:`calc(${M} * ${N})`;x={...x,width:_}}const k=$e.createElement("span",{className:p,style:x,key:E},"");b?w.push(k):w.push($e.createElement($e.Fragment,{key:E},k,$e.createElement("br",null)))}return $e.createElement("span",{className:r,"data-testid":s,"aria-live":"polite","aria-busy":(l=h.enableAnimation)!==null&&l!==void 0?l:bo},t?w.map((E,x)=>$e.createElement(t,{key:x},E)):w)}const Kl=e=>{const[t,n]=C.useState(!1);return q.jsxs("div",{className:"thumbnail-wrapper",children:[!t&&q.jsx(Gl,{}),q.jsx("img",{src:e.src,style:{display:t?void 0:"none"},onLoad:()=>n(!0)})]})},id=e=>{const[t,n]=C.useState(!1),r=C.useMemo(()=>e.annotation?new Set(yo(e.annotation)):new Set,[e.annotation]),s=C.useMemo(()=>vo(r,e.related||[]),[r,e.related]),i=zr([e.open],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:kn.easeInCubic}});C.useLayoutEffect(()=>{setTimeout(()=>n(!0),1)},[]);const o=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/image/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return i((a,c)=>c&&q.jsxs(Gr.aside,{style:a,className:"related related-images",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(Fr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Images ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:s.map(u=>u.related.map(({annotation:l})=>q.jsxs("li",{children:[q.jsxs("div",{className:"preview",children:[q.jsx(Kl,{src:l.thumbnail}),q.jsx("div",{className:"taglist-wrapper",children:q.jsx("ul",{className:"taglist",children:l.tags.map(f=>q.jsx("li",{className:r.has(f)?"common":void 0,children:f},f))})})]}),q.jsx("a",{href:o(l),children:l.image})]},l.id)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},Ql=e=>{const{prefix:t,quote:n,suffix:r}=e.value,[s,i]=C.useMemo(()=>{const o=t&&(t.endsWith("|")?t:t+" "),a=r&&(r?.startsWith("|")?r:" "+r);return[o,a]},[t,n,r]);return q.jsxs(q.Fragment,{children:[q.jsx("span",{children:s}),q.jsx("a",{href:e.href,className:"verse-snippet-quote",children:n}),q.jsx("span",{children:i})]})},od=e=>{const[t,n]=C.useState(!1),r=C.useMemo(()=>e.annotation?new Set(yo(e.annotation)):new Set,[e.annotation]),s=C.useMemo(()=>vo(r,e.related||[]),[r,e.related]),i=zr([e.open],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:kn.easeInCubic}});C.useLayoutEffect(()=>{setTimeout(()=>n(!0),10)},[]);const o=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/verse/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return i((a,c)=>c&&q.jsxs(Gr.aside,{style:a,className:"related related-verses",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(Fr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Verses ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:s.map(u=>u.related.map(({annotation:l})=>q.jsxs("li",{children:[q.jsx("ul",{className:"taglist",children:l.tags.map(f=>q.jsx("li",{className:r.has(f)?"common":void 0,children:f},f))}),l.snippet&&q.jsx("p",{className:"snippet-preview",children:q.jsx(Ql,{value:l.snippet,href:o(l)})}),q.jsx("a",{href:o(l),children:l.verse})]},l.id)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},ad=e=>{const t=e.relatedImages.length,n=e.relatedVerses.length,r=C.useMemo(()=>e.annotation.bodies.filter(s=>s.purpose==="tagging"),[e.annotation]);return q.jsx("div",{className:"annotation-popup",children:q.jsxs("div",{className:"tags",children:[q.jsx("div",{children:r.map(s=>s.value).join("  ")}),e.type==="VERSE"?q.jsxs("div",{className:"related",children:[n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," other verse",n>1&&"s"]})}),t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," image",t>1&&"s"]})})]}):q.jsxs("div",{className:"related",children:[t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," other image",t>1&&"s"]})}),n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," verse",n>1&&"s"]})})]})]})})};function xt(e){return wo(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ue(e){var t;return(t=(wo(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wo(e){return e instanceof Node||e instanceof me(e).Node}function he(e){return e instanceof Element||e instanceof me(e).Element}function Fe(e){return e instanceof HTMLElement||e instanceof me(e).HTMLElement}function ni(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}function Jt(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Se(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Yl(e){return["table","td","th"].includes(xt(e))}function Hn(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Yr(e){const t=Xr(),n=Se(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Xl(e){let t=Qe(e);for(;Fe(t)&&!wt(t);){if(Hn(t))return null;if(Yr(t))return t;t=Qe(t)}return null}function Xr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wt(e){return["html","body","#document"].includes(xt(e))}function Se(e){return me(e).getComputedStyle(e)}function Vn(e){return he(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qe(e){if(xt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ni(e)&&e.host||Ue(e);return ni(t)?t.host:t}function So(e){const t=Qe(e);return wt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fe(t)&&Jt(t)?t:So(t)}function Gt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=So(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=me(s);return i?t.concat(o,o.visualViewport||[],Jt(s)?s:[],o.frameElement&&n?Gt(o.frameElement):[]):t.concat(s,Gt(s,[],n))}const Le=Math.min,Pe=Math.max,_n=Math.round,ln=Math.floor,Ye=e=>({x:e,y:e}),Jl={left:"right",right:"left",bottom:"top",top:"bottom"},Zl={start:"end",end:"start"};function Ar(e,t,n){return Pe(e,Le(t,n))}function _t(e,t){return typeof e=="function"?e(t):e}function Ne(e){return e.split("-")[0]}function Zt(e){return e.split("-")[1]}function Eo(e){return e==="x"?"y":"x"}function Jr(e){return e==="y"?"height":"width"}function st(e){return["top","bottom"].includes(Ne(e))?"y":"x"}function Zr(e){return Eo(st(e))}function ef(e,t,n){n===void 0&&(n=!1);const r=Zt(e),s=Zr(e),i=Jr(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=On(o)),[o,On(o)]}function tf(e){const t=On(e);return[Cr(e),t,Cr(t)]}function Cr(e){return e.replace(/start|end/g,t=>Zl[t])}function nf(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function rf(e,t,n,r){const s=Zt(e);let i=nf(Ne(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Cr)))),i}function On(e){return e.replace(/left|right|bottom|top/g,t=>Jl[t])}function sf(e){return{top:0,right:0,bottom:0,left:0,...e}}function es(e){return typeof e!="number"?sf(e):{top:e,right:e,bottom:e,left:e}}function St(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ri(e,t,n){let{reference:r,floating:s}=e;const i=st(t),o=Zr(t),a=Jr(o),c=Ne(t),u=i==="y",l=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,d=r[a]/2-s[a]/2;let h;switch(c){case"top":h={x:l,y:r.y-s.height};break;case"bottom":h={x:l,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-s.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Zt(t)){case"start":h[o]-=d*(n&&u?-1:1);break;case"end":h[o]+=d*(n&&u?-1:1);break}return h}const of=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:l,y:f}=ri(u,r,c),d=r,h={},y=0;for(let p=0;p<a.length;p++){const{name:b,fn:w}=a[p],{x:$,y:E,data:x,reset:k}=await w({x:l,y:f,initialPlacement:r,placement:d,strategy:s,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});l=$??l,f=E??f,h={...h,[b]:{...h[b],...x}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(d=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:l,y:f}=ri(u,d,c)),p=-1)}return{x:l,y:f,placement:d,strategy:s,middlewareData:h}};async function xo(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_t(t,e),y=es(h),b=a[d?f==="floating"?"reference":"floating":f],w=St(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:l,strategy:c})),$=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=St(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:$,offsetParent:E,strategy:c}):$);return{top:(w.top-k.top+y.top)/x.y,bottom:(k.bottom-w.bottom+y.bottom)/x.y,left:(w.left-k.left+y.left)/x.x,right:(k.right-w.right+y.right)/x.x}}const af=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=t,{element:u,padding:l=0}=_t(e,t)||{};if(u==null)return{};const f=es(l),d={x:n,y:r},h=Zr(s),y=Jr(h),p=await o.getDimensions(u),b=h==="y",w=b?"top":"left",$=b?"bottom":"right",E=b?"clientHeight":"clientWidth",x=i.reference[y]+i.reference[h]-d[h]-i.floating[y],k=d[h]-i.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=M?M[E]:0;(!N||!await(o.isElement==null?void 0:o.isElement(M)))&&(N=a.floating[E]||i.floating[y]);const _=x/2-k/2,v=N/2-p[y]/2-1,S=Le(f[w],v),P=Le(f[$],v),D=S,L=N-p[y]-P,j=N/2-p[y]/2+_,H=Ar(D,j,L),K=!c.arrow&&Zt(s)!=null&&j!==H&&i.reference[y]/2-(j<D?S:P)-p[y]/2<0,z=K?j<D?j-D:j-L:0;return{[h]:d[h]+z,data:{[h]:H,centerOffset:j-H-z,...K&&{alignmentOffset:z}},reset:K}}}),uf=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:l=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:p=!0,...b}=_t(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Ne(s),$=st(a),E=Ne(a)===a,x=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=d||(E||!p?[On(a)]:tf(a)),M=y!=="none";!d&&M&&k.push(...rf(a,p,y,x));const N=[a,...k],_=await xo(t,b),v=[];let S=((r=i.flip)==null?void 0:r.overflows)||[];if(l&&v.push(_[w]),f){const j=ef(s,o,x);v.push(_[j[0]],_[j[1]])}if(S=[...S,{placement:s,overflows:v}],!v.every(j=>j<=0)){var P,D;const j=(((P=i.flip)==null?void 0:P.index)||0)+1,H=N[j];if(H)return{data:{index:j,overflows:S},reset:{placement:H}};let K=(D=S.filter(z=>z.overflows[0]<=0).sort((z,I)=>z.overflows[1]-I.overflows[1])[0])==null?void 0:D.placement;if(!K)switch(h){case"bestFit":{var L;const z=(L=S.filter(I=>{if(M){const m=st(I.placement);return m===$||m==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(m=>m>0).reduce((m,O)=>m+O,0)]).sort((I,m)=>I[1]-m[1])[0])==null?void 0:L[0];z&&(K=z);break}case"initialPlacement":K=a;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function _o(e){const t=Le(...e.map(i=>i.left)),n=Le(...e.map(i=>i.top)),r=Pe(...e.map(i=>i.right)),s=Pe(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:s-n}}function cf(e){const t=e.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<t.length;s++){const i=t[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>St(_o(s)))}const lf=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=t,{padding:a=2,x:c,y:u}=_t(e,t),l=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),f=cf(l),d=St(_o(l)),h=es(a);function y(){if(f.length===2&&f[0].left>f[1].right&&c!=null&&u!=null)return f.find(b=>c>b.left-h.left&&c<b.right+h.right&&u>b.top-h.top&&u<b.bottom+h.bottom)||d;if(f.length>=2){if(st(n)==="y"){const S=f[0],P=f[f.length-1],D=Ne(n)==="top",L=S.top,j=P.bottom,H=D?S.left:P.left,K=D?S.right:P.right,z=K-H,I=j-L;return{top:L,bottom:j,left:H,right:K,width:z,height:I,x:H,y:L}}const b=Ne(n)==="left",w=Pe(...f.map(S=>S.right)),$=Le(...f.map(S=>S.left)),E=f.filter(S=>b?S.left===$:S.right===w),x=E[0].top,k=E[E.length-1].bottom,M=$,N=w,_=N-M,v=k-x;return{top:x,bottom:k,left:M,right:N,width:_,height:v,x:M,y:x}}return d}const p=await i.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:o});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function ff(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ne(n),a=Zt(n),c=st(n)==="y",u=["left","top"].includes(o)?-1:1,l=i&&c?-1:1,f=_t(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof y=="number"&&(h=a==="end"?y*-1:y),c?{x:h*l,y:d*u}:{x:d*u,y:h*l}}const df=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,c=await ff(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},hf=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:$}=b;return{x:w,y:$}}},...c}=_t(e,t),u={x:n,y:r},l=await xo(t,c),f=st(Ne(s)),d=Eo(f);let h=u[d],y=u[f];if(i){const b=d==="y"?"top":"left",w=d==="y"?"bottom":"right",$=h+l[b],E=h-l[w];h=Ar($,h,E)}if(o){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",$=y+l[b],E=y-l[w];y=Ar($,y,E)}const p=a.fn({...t,[d]:h,[f]:y});return{...p,data:{x:p.x-n,y:p.y-r}}}}};function Oo(e){const t=Se(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Fe(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=_n(n)!==i||_n(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function ts(e){return he(e)?e:e.contextElement}function yt(e){const t=ts(e);if(!Fe(t))return Ye(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Oo(t);let o=(i?_n(n.width):n.width)/r,a=(i?_n(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gf=Ye(0);function Io(e){const t=me(e);return!Xr()||!t.visualViewport?gf:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function pf(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function it(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=ts(e);let o=Ye(1);t&&(r?he(r)&&(o=yt(r)):o=yt(e));const a=pf(i,n,r)?Io(i):Ye(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,l=s.width/o.x,f=s.height/o.y;if(i){const d=me(i),h=r&&he(r)?me(r):r;let y=d,p=y.frameElement;for(;p&&r&&h!==y;){const b=yt(p),w=p.getBoundingClientRect(),$=Se(p),E=w.left+(p.clientLeft+parseFloat($.paddingLeft))*b.x,x=w.top+(p.clientTop+parseFloat($.paddingTop))*b.y;c*=b.x,u*=b.y,l*=b.x,f*=b.y,c+=E,u+=x,y=me(p),p=y.frameElement}}return St({width:l,height:f,x:c,y:u})}function mf(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Ue(r),a=t?Hn(t.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ye(1);const l=Ye(0),f=Fe(r);if((f||!f&&!i)&&((xt(r)!=="body"||Jt(o))&&(c=Vn(r)),Fe(r))){const d=it(r);u=yt(r),l.x=d.x+r.clientLeft,l.y=d.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+l.x,y:n.y*u.y-c.scrollTop*u.y+l.y}}function yf(e){return Array.from(e.getClientRects())}function Ao(e){return it(Ue(e)).left+Vn(e).scrollLeft}function vf(e){const t=Ue(e),n=Vn(e),r=e.ownerDocument.body,s=Pe(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Pe(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ao(e);const a=-n.scrollTop;return Se(r).direction==="rtl"&&(o+=Pe(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function bf(e,t){const n=me(e),r=Ue(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=Xr();(!u||u&&t==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function wf(e,t){const n=it(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Fe(e)?yt(e):Ye(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function si(e,t,n){let r;if(t==="viewport")r=bf(e,n);else if(t==="document")r=vf(Ue(e));else if(he(t))r=wf(t,n);else{const s=Io(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return St(r)}function Co(e,t){const n=Qe(e);return n===t||!he(n)||wt(n)?!1:Se(n).position==="fixed"||Co(n,t)}function Sf(e,t){const n=t.get(e);if(n)return n;let r=Gt(e,[],!1).filter(a=>he(a)&&xt(a)!=="body"),s=null;const i=Se(e).position==="fixed";let o=i?Qe(e):e;for(;he(o)&&!wt(o);){const a=Se(o),c=Yr(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Jt(o)&&!c&&Co(e,o))?r=r.filter(l=>l!==o):s=a,o=Qe(o)}return t.set(e,r),r}function Ef(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Hn(t)?[]:Sf(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,l)=>{const f=si(t,l,s);return u.top=Pe(f.top,u.top),u.right=Le(f.right,u.right),u.bottom=Le(f.bottom,u.bottom),u.left=Pe(f.left,u.left),u},si(t,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function xf(e){const{width:t,height:n}=Oo(e);return{width:t,height:n}}function _f(e,t,n){const r=Fe(t),s=Ue(t),i=n==="fixed",o=it(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const c=Ye(0);if(r||!r&&!i)if((xt(t)!=="body"||Jt(s))&&(a=Vn(t)),r){const f=it(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else s&&(c.x=Ao(s));const u=o.left+a.scrollLeft-c.x,l=o.top+a.scrollTop-c.y;return{x:u,y:l,width:o.width,height:o.height}}function ar(e){return Se(e).position==="static"}function ii(e,t){return!Fe(e)||Se(e).position==="fixed"?null:t?t(e):e.offsetParent}function Po(e,t){const n=me(e);if(Hn(e))return n;if(!Fe(e)){let s=Qe(e);for(;s&&!wt(s);){if(he(s)&&!ar(s))return s;s=Qe(s)}return n}let r=ii(e,t);for(;r&&Yl(r)&&ar(r);)r=ii(r,t);return r&&wt(r)&&ar(r)&&!Yr(r)?n:r||Xl(e)||n}const Of=async function(e){const t=this.getOffsetParent||Po,n=this.getDimensions,r=await n(e.floating);return{reference:_f(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function If(e){return Se(e).direction==="rtl"}const Af={convertOffsetParentRelativeRectToViewportRelativeRect:mf,getDocumentElement:Ue,getClippingRect:Ef,getOffsetParent:Po,getElementRects:Of,getClientRects:yf,getDimensions:xf,getScale:yt,isElement:he,isRTL:If};function Cf(e,t){let n=null,r;const s=Ue(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const{left:u,top:l,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=ln(l),y=ln(s.clientWidth-(u+f)),p=ln(s.clientHeight-(l+d)),b=ln(u),$={rootMargin:-h+"px "+-y+"px "+-p+"px "+-b+"px",threshold:Pe(0,Le(1,c))||1};let E=!0;function x(k){const M=k[0].intersectionRatio;if(M!==c){if(!E)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{n=new IntersectionObserver(x,{...$,root:s.ownerDocument})}catch{n=new IntersectionObserver(x,$)}n.observe(e)}return o(!0),i}function ud(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ts(e),l=s||i?[...u?Gt(u):[],...Gt(t)]:[];l.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const f=u&&a?Cf(u,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(w=>{let[$]=w;$&&$.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let y,p=c?it(e):null;c&&b();function b(){const w=it(e);p&&(w.x!==p.x||w.y!==p.y||w.width!==p.width||w.height!==p.height)&&n(),p=w,y=requestAnimationFrame(b)}return n(),()=>{var w;l.forEach($=>{s&&$.removeEventListener("scroll",n),i&&$.removeEventListener("resize",n)}),f?.(),(w=h)==null||w.disconnect(),h=null,c&&cancelAnimationFrame(y)}}const Pf=df,Rf=hf,Ff=uf,oi=af,Tf=lf,Df=(e,t,n)=>{const r=new Map,s={platform:Af,...n},i={...s.platform,_c:r};return of(e,t,{...s,platform:i})};var pn=typeof document<"u"?C.useLayoutEffect:C.useEffect;function In(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!In(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!In(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ro(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ai(e,t){const n=Ro(e);return Math.round(t*n)/n}function ui(e){const t=C.useRef(e);return pn(()=>{t.current=e}),t}function $f(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=e,[l,f]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=C.useState(r);In(d,r)||h(r);const[y,p]=C.useState(null),[b,w]=C.useState(null),$=C.useCallback(z=>{z!==M.current&&(M.current=z,p(z))},[]),E=C.useCallback(z=>{z!==N.current&&(N.current=z,w(z))},[]),x=i||y,k=o||b,M=C.useRef(null),N=C.useRef(null),_=C.useRef(l),v=c!=null,S=ui(c),P=ui(s),D=C.useCallback(()=>{if(!M.current||!N.current)return;const z={placement:t,strategy:n,middleware:d};P.current&&(z.platform=P.current),Df(M.current,N.current,z).then(I=>{const m={...I,isPositioned:!0};L.current&&!In(_.current,m)&&(_.current=m,fi.flushSync(()=>{f(m)}))})},[d,t,n,P]);pn(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[u]);const L=C.useRef(!1);pn(()=>(L.current=!0,()=>{L.current=!1}),[]),pn(()=>{if(x&&(M.current=x),k&&(N.current=k),x&&k){if(S.current)return S.current(x,k,D);D()}},[x,k,D,S,v]);const j=C.useMemo(()=>({reference:M,floating:N,setReference:$,setFloating:E}),[$,E]),H=C.useMemo(()=>({reference:x,floating:k}),[x,k]),K=C.useMemo(()=>{const z={position:n,left:0,top:0};if(!H.floating)return z;const I=ai(H.floating,l.x),m=ai(H.floating,l.y);return a?{...z,transform:"translate("+I+"px, "+m+"px)",...Ro(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:m}},[n,a,H.floating,l.x,l.y]);return C.useMemo(()=>({...l,update:D,refs:j,elements:H,floatingStyles:K}),[l,D,j,H,K])}const kf=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?oi({element:r.current,padding:s}).fn(n):{}:r?oi({element:r,padding:s}).fn(n):{}}}},cd=(e,t)=>({...Pf(e),options:[e,t]}),ld=(e,t)=>({...Rf(e),options:[e,t]}),fd=(e,t)=>({...Ff(e),options:[e,t]}),dd=(e,t)=>({...Tf(e),options:[e,t]}),hd=(e,t)=>({...kf(e),options:[e,t]}),Fo={...No},Mf=Fo.useInsertionEffect,jf=Mf||(e=>e());function Lf(e){const t=C.useRef(()=>{});return jf(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var An=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Pr(){return Pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pr.apply(this,arguments)}let ci=!1,Nf=0;const li=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Nf++;function Bf(){const[e,t]=C.useState(()=>ci?li():void 0);return An(()=>{e==null&&t(li())},[]),C.useEffect(()=>{ci=!0},[]),e}const Uf=Fo.useId,To=Uf||Bf,gd=C.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i}},width:o=14,height:a=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:l,stroke:f,d,style:{transform:h,...y}={},...p}=t,b=To(),[w,$]=C.useState(!1);if(An(()=>{if(!s)return;Se(s).direction==="rtl"&&$(!0)},[s]),!s)return null;const E=u*2,x=E/2,k=o/2*(c/-8+1),M=a/2*c/4,[N,_]=r.split("-"),v=!!d,S=N==="top"||N==="bottom",P=l&&_==="end"?"bottom":"top";let D=l&&_==="end"?"right":"left";l&&w&&(D=_==="end"?"left":"right");const L=i?.x!=null?l||i.x:"",j=i?.y!=null?l||i.y:"",H=d||"M0,0"+(" H"+o)+(" L"+(o-k)+","+(a-M))+(" Q"+o/2+","+a+" "+k+","+(a-M))+" Z",K={top:v?"rotate(180deg)":"",left:v?"rotate(90deg)":"rotate(-90deg)",bottom:v?"":"rotate(180deg)",right:v?"rotate(-90deg)":"rotate(90deg)"}[N];return C.createElement("svg",Pr({},p,{"aria-hidden":!0,ref:n,width:v?o:o+E,height:o,viewBox:"0 0 "+o+" "+(a>o?a:o),style:{position:"absolute",pointerEvents:"none",[D]:L,[P]:j,[N]:S||v?"100%":"calc(100% - "+E/2+"px)",transform:""+K+(h??""),...y}}),E>0&&C.createElement("path",{clipPath:"url(#"+b+")",fill:"none",stroke:f,strokeWidth:E+(d?0:1),d:H}),C.createElement("path",{stroke:E&&!d?p.fill:"none",d:H}),C.createElement("clipPath",{id:b},C.createElement("rect",{x:-x,y:x*(v?-1:1),width:o+E,height:o})))});function Hf(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const Vf=C.createContext(null),qf=C.createContext(null),Wf=()=>{var e;return((e=C.useContext(Vf))==null?void 0:e.id)||null},zf=()=>C.useContext(qf);function Gf(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=To(),i=C.useRef({}),[o]=C.useState(()=>Hf()),a=Wf()!=null,[c,u]=C.useState(r.reference),l=Lf((h,y,p)=>{i.current.openEvent=h?y:void 0,o.emit("openchange",{open:h,event:y,reason:p,nested:a}),n?.(h,y,p)}),f=C.useMemo(()=>({setPositionReference:u}),[]),d=C.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return C.useMemo(()=>({dataRef:i,open:t,onOpenChange:l,elements:d,events:o,floatingId:s,refs:f}),[t,l,d,o,s,f])}function pd(e){e===void 0&&(e={});const{nodeId:t}=e,n=Gf({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=C.useState(null),[a,c]=C.useState(null),l=s?.reference||i,f=C.useRef(null),d=zf();An(()=>{l&&(f.current=l)},[l]);const h=$f({...e,elements:{...s,...a&&{reference:a}}}),y=C.useCallback(E=>{const x=he(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;c(x),h.refs.setReference(x)},[h.refs]),p=C.useCallback(E=>{(he(E)||E===null)&&(f.current=E,o(E)),(he(h.refs.reference.current)||h.refs.reference.current===null||E!==null&&!he(E))&&h.refs.setReference(E)},[h.refs]),b=C.useMemo(()=>({...h.refs,setReference:p,setPositionReference:y,domReference:f}),[h.refs,p,y]),w=C.useMemo(()=>({...h.elements,domReference:l}),[h.elements,l]),$=C.useMemo(()=>({...h,...r,refs:b,elements:w,nodeId:t}),[h,b,w,t,r]);return An(()=>{r.dataRef.current.floatingContext=$;const E=d?.nodesRef.current.find(x=>x.id===t);E&&(E.context=$)}),C.useMemo(()=>({...h,context:$,refs:b,elements:w}),[h,b,w,$])}export{ad as A,Yf as B,Xf as C,Ho as F,nd as P,od as R,cd as a,ud as b,nu as c,ed as d,Jf as e,fd as f,rd as g,Zf as h,dd as i,td as j,id as k,hd as l,Uo as m,gd as n,Cn as o,Ja as p,ld as s,sd as t,pd as u};
