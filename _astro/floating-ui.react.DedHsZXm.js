import{R as ke,r as A,a as mi,g as Ko,b as Yo}from"./index.DL6A1vOd.js";import{c as ut,j as q}from"./createLucideIcon.DBaW4IZn.js";var yi={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys;function Qo(){if(ys)return It;ys=1;var e=ke,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,c){var l,f={},d=null,h=null;c!==void 0&&(d=""+c),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(l in u)r.call(u,l)&&!i.hasOwnProperty(l)&&(f[l]=u[l]);if(a&&a.defaultProps)for(l in u=a.defaultProps,u)f[l]===void 0&&(f[l]=u[l]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:s.current}}return It.Fragment=n,It.jsx=o,It.jsxs=o,It}yi.exports=Qo();var Xo=yi.exports,Jo=(e=>(e.EDIT="EDIT",e.SELECT="SELECT",e.NONE="NONE",e))(Jo||{});const Zo=[];for(let e=0;e<256;++e)Zo.push((e+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const eu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let tu=e=>crypto.getRandomValues(new Uint8Array(e)),nu=(e,t,n)=>{let r=(2<<Math.log2(e.length-1))-1,s=-~(1.6*r*t/e.length);return(i=t)=>{let o="";for(;;){let a=n(s),u=s|0;for(;u--;)if(o+=e[a[u]&r]||"",o.length>=i)return o}}},ru=(e,t=21)=>nu(e,t|0,tu),su=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=eu[n[e]&63];return t};const Zf=()=>({isGuest:!0,id:ru("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",20)()});su();const An=A.createContext({anno:void 0,setAnno:void 0,annotations:[],selection:{selected:[]}}),ed=A.forwardRef((e,t)=>{const[n,r]=A.useState(null),[s,i]=A.useState([]),[o,a]=A.useState({selected:[]});return A.useImperativeHandle(t,()=>n),A.useEffect(()=>{if(n){const{selection:u,store:c,hover:l}=n.state;c.all().length>0&&i(c.all());const f=()=>i(()=>c.all());c.observe(f);let d;const h=u.subscribe(({selected:p,...m})=>{d&&c.unobserve(d);const S=(p||[]).map(({id:v,editable:R})=>({annotation:c.getAnnotation(v),editable:R}));a({selected:S,...m}),d=v=>{const{updated:R}=v.changes;a(w=>({...w,selected:w.selected.map(({annotation:E,editable:M})=>{const k=R.find(B=>B.oldValue.id===E.id);return k?{annotation:k.newValue,editable:M}:{annotation:E,editable:M}})}))},c.observe(d,{annotations:p.map(({id:v})=>v)})});return()=>{c.unobserve(f),h()}}},[n]),Xo.jsx(An.Provider,{value:{anno:n,setAnno:r,annotations:s,selection:o},children:e.children})}),iu=()=>{const{anno:e}=A.useContext(An);return e},ou=()=>{const{annotations:e}=A.useContext(An);return e},uu=e=>ou(),au=()=>{const{selection:e}=A.useContext(An);return e};var cu=Object.defineProperty,lu=(e,t,n)=>t in e?cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vs=(e,t,n)=>lu(e,typeof t!="symbol"?t+"":t,n);function jt(){}function ar(e,t){for(const n in t)e[n]=t[n];return e}function vi(e){return e()}function bs(){return Object.create(null)}function He(e){e.forEach(vi)}function ae(e){return typeof e=="function"}function Rn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function fu(e){return Object.keys(e).length===0}function du(e,t,n,r){if(e){const s=bi(e,t,n,r);return e[0](s)}}function bi(e,t,n,r){return e[1]&&r?ar(n.ctx.slice(),e[1](r(t))):n.ctx}function hu(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(t.dirty.length,s.length);for(let a=0;a<o;a+=1)i[a]=t.dirty[a]|s[a];return i}return t.dirty|s}return t.dirty}function gu(e,t,n,r,s,i){if(s){const o=bi(t,n,r,i);e.p(o,s)}}function pu(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Ss(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function yn(e){return e??""}function ws(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function mu(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Si(e){return document.createTextNode(e)}function Ee(){return Si(" ")}function wi(){return Si("")}function ue(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function U(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function yu(e){return Array.from(e.childNodes)}function Es(e,t,n){e.classList.toggle(t,!!n)}function vu(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Nt;function Tt(e){Nt=e}function bu(){if(!Nt)throw new Error("Function called outside component initialization");return Nt}function Su(){const e=bu();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=vu(t,n,{cancelable:r});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function Ne(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const ht=[],xs=[];let gt=[];const _s=[],wu=Promise.resolve();let cr=!1;function Eu(){cr||(cr=!0,wu.then(Ei))}function lr(e){gt.push(e)}const Qn=new Set;let ft=0;function Ei(){if(ft!==0)return;const e=Nt;do{try{for(;ft<ht.length;){const t=ht[ft];ft++,Tt(t),xu(t.$$)}}catch(t){throw ht.length=0,ft=0,t}for(Tt(null),ht.length=0,ft=0;xs.length;)xs.pop()();for(let t=0;t<gt.length;t+=1){const n=gt[t];Qn.has(n)||(Qn.add(n),n())}gt.length=0}while(ht.length);for(;_s.length;)_s.pop()();cr=!1,Qn.clear(),Tt(e)}function xu(e){if(e.fragment!==null){e.update(),He(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(lr)}}function _u(e){const t=[],n=[];gt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),gt=t}const dn=new Set;let tt;function Ou(){tt={r:0,c:[],p:tt}}function Iu(){tt.r||He(tt.c),tt=tt.p}function be(e,t){e&&e.i&&(dn.delete(e),e.i(t))}function Ce(e,t,n,r){if(e&&e.o){if(dn.has(e))return;dn.add(e),tt.c.push(()=>{dn.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Os(e){return e?.length!==void 0?e:Array.from(e)}function nt(e){e&&e.c()}function qe(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),lr(()=>{const i=e.$$.on_mount.map(vi).filter(ae);e.$$.on_destroy?e.$$.on_destroy.push(...i):He(i),e.$$.on_mount=[]}),s.forEach(lr)}function We(e,t){const n=e.$$;n.fragment!==null&&(_u(n.after_update),He(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Cu(e,t){e.$$.dirty[0]===-1&&(ht.push(e),Eu(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Pn(e,t,n,r,s,i,o=null,a=[-1]){const u=Nt;Tt(e);const c=e.$$={fragment:null,ctx:[],props:i,update:jt,not_equal:s,bound:bs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:bs(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(f,d,...h)=>{const p=h.length?h[0]:d;return c.ctx&&s(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),l&&Cu(e,f)),d}):[],c.update(),l=!0,He(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const f=yu(t.target);c.fragment&&c.fragment.l(f),f.forEach(ee)}else c.fragment&&c.fragment.c();t.intro&&be(e.$$.fragment),qe(e,t.target,t.anchor),Ei()}Tt(u)}class Fn{constructor(){vs(this,"$$"),vs(this,"$$set")}$destroy(){We(this,1),this.$destroy=jt}$on(t,n){if(!ae(n))return jt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!fu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Au="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Au);var Se=(e=>(e.ELLIPSE="ELLIPSE",e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(Se||{});const $r=(e,t)=>t,xi=e=>{let t=1/0,n=1/0,r=-1/0,s=-1/0;return e.forEach(([i,o])=>{t=Math.min(t,i),n=Math.min(n,o),r=Math.max(r,i),s=Math.max(s,o)}),{minX:t,minY:n,maxX:r,maxY:s}},Ru={area:e=>Math.PI*e.geometry.rx*e.geometry.ry,intersects:(e,t,n)=>{const{cx:r,cy:s,rx:i,ry:o}=e.geometry,a=0,u=Math.cos(a),c=Math.sin(a),l=t-r,f=n-s,d=u*l+c*f,h=c*l-u*f;return d*d/(i*i)+h*h/(o*o)<=1}};$r(Se.ELLIPSE,Ru);const Pu={area:e=>{const{points:t}=e.geometry;let n=0,r=t.length-1;for(let s=0;s<t.length;s++)n+=(t[r][0]+t[s][0])*(t[r][1]-t[s][1]),r=s;return Math.abs(.5*n)},intersects:(e,t,n)=>{const{points:r}=e.geometry;let s=!1;for(let i=0,o=r.length-1;i<r.length;o=i++){const a=r[i][0],u=r[i][1],c=r[o][0],l=r[o][1];u>n!=l>n&&t<(c-a)*(n-u)/(l-u)+a&&(s=!s)}return s}};$r(Se.POLYGON,Pu);const Fu={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,n)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&n>=e.geometry.y&&n<=e.geometry.y+e.geometry.h};$r(Se.RECTANGLE,Fu);const Tu=(e,t=!1)=>{const n=typeof e=="string"?e:e.value,r=/^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,s=[...n.matchAll(r)][0],[i,o,a,u,c,l,f]=s;if(o!=="xywh")throw new Error("Unsupported MediaFragment: "+n);if(a&&a!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${a}`);const[d,h,p,m]=[u,c,l,f].map(parseFloat);return{type:Se.RECTANGLE,geometry:{x:d,y:h,w:p,h:m,bounds:{minX:d,minY:t?h-m:h,maxX:d+p,maxY:t?h:h+m}}}},Du=e=>{const{x:t,y:n,w:r,h:s}=e;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${t},${n},${r},${s}`}},_i="http://www.w3.org/2000/svg",Is=e=>{const t=r=>{Array.from(r.attributes).forEach(s=>{s.name.startsWith("on")&&r.removeAttribute(s.name)})},n=e.getElementsByTagName("script");return Array.from(n).reverse().forEach(r=>r.parentNode.removeChild(r)),Array.from(e.querySelectorAll("*")).forEach(t),e},Mu=e=>{const t=new XMLSerializer().serializeToString(e.documentElement).replace("<svg>",`<svg xmlns="${_i}">`);return new DOMParser().parseFromString(t,"image/svg+xml").documentElement},$u=e=>{const t=new DOMParser().parseFromString(e,"image/svg+xml"),n=t.lookupPrefix(_i),r=t.lookupNamespaceURI(null);return n||r?Is(t).firstChild:Is(Mu(t)).firstChild},ku=e=>{const[t,n,r]=e.match(/(<polygon points=["|'])([^("|')]*)/)||[],s=r.split(" ").map(i=>i.split(",").map(parseFloat));return{type:Se.POLYGON,geometry:{points:s,bounds:xi(s)}}},ju=e=>{const t=$u(e),n=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),s=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry")),o={minX:n-s,minY:r-i,maxX:n+s,maxY:r+i};return{type:Se.ELLIPSE,geometry:{cx:n,cy:r,rx:s,ry:i,bounds:o}}},Nu=e=>{const t=typeof e=="string"?e:e.value;if(t.includes("<polygon points="))return ku(t);if(t.includes("<ellipse "))return ju(t);throw"Unsupported SVG shape: "+t},Bu=e=>{let t;if(e.type===Se.POLYGON){const n=e.geometry,{points:r}=n;t=`<svg><polygon points="${r.map(s=>s.join(",")).join(" ")}" /></svg>`}else if(e.type===Se.ELLIPSE){const n=e.geometry;t=`<svg><ellipse cx="${n.cx}" cy="${n.cy}" rx="${n.rx}" ry="${n.ry}" /></svg>`}if(t)return{type:"SvgSelector",value:t};throw`Unsupported shape type: ${e.type}`},oe=[];for(let e=0;e<256;++e)oe.push((e+256).toString(16).slice(1));function Lu(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}let Xn;const Uu=new Uint8Array(16);function Hu(){if(!Xn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xn=crypto.getRandomValues.bind(crypto)}return Xn(Uu)}const Vu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cs={randomUUID:Vu};function qu(e,t,n){if(Cs.randomUUID&&!t&&!e)return Cs.randomUUID();e=e||{};const r=e.random||(e.rng||Hu)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Lu(r)}const Wu=[];for(let e=0;e<256;++e)Wu.push((e+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const zu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Gu=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=zu[n[e]&63];return t};const Ku=e=>{const t=JSON.stringify(e);let n=0;for(let r=0,s=t.length;r<s;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n|=0}return`${n}`},Oi=e=>e?typeof e=="object"?{...e}:e:void 0,Yu=(e,t)=>(Array.isArray(e)?e:[e]).map(n=>{const{id:r,type:s,purpose:i,value:o,created:a,modified:u,creator:c,...l}=n;return{id:r||`temp-${Ku(n)}`,annotation:t,type:s,purpose:i,value:o,creator:Oi(c),created:a?new Date(a):void 0,updated:u?new Date(u):void 0,...l}}),Qu=e=>e.map(t=>{var n;const{annotation:r,created:s,updated:i,...o}=t,a={...o,created:s?.toISOString(),modified:i?.toISOString()};return(n=a.id)!=null&&n.startsWith("temp-")&&delete a.id,a});Gu();const td=(e,t={strict:!0,invertY:!1})=>({parse:n=>Xu(n,t),serialize:n=>Ju(n,e,t)}),Xu=(e,t={strict:!0,invertY:!1})=>{const n=e.id||qu(),{creator:r,created:s,modified:i,body:o,...a}=e,u=Yu(o||[],n),c=Array.isArray(e.target)?e.target[0]:e.target,l=Array.isArray(c.selector)?c.selector[0]:c.selector,f=l?.type==="FragmentSelector"?Tu(l,t.invertY):l?.type==="SvgSelector"?Nu(l):void 0;return f||!t.strict?{parsed:{...a,id:n,bodies:u,target:{created:s?new Date(s):void 0,creator:Oi(r),updated:i?new Date(i):void 0,...Array.isArray(a.target)?a.target[0]:a.target,annotation:n,selector:f||l}}}:{error:Error(`Invalid selector: ${JSON.stringify(l)}`)}},Ju=(e,t,n={strict:!0,invertY:!1})=>{const{selector:r,creator:s,created:i,updated:o,updatedBy:a,...u}=e.target;let c;try{c=r.type==Se.RECTANGLE?Du(r.geometry):Bu(r)}catch(f){if(n.strict)throw f;c=r}const l={...e,"@context":"http://www.w3.org/ns/anno.jsonld",id:e.id,type:"Annotation",body:Qu(e.bodies),created:i?.toISOString(),creator:s,modified:o?.toISOString(),target:{...u,source:t,selector:c}};return delete l.bodies,"annotation"in l.target&&delete l.target.annotation,l};function As(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Rs(e){let t,n;return t=new Pt({props:{x:e[10][0],y:e[10][1],scale:e[3]}}),t.$on("pointerdown",function(){ae(e[9](`HANDLE-${e[12]}`))&&e[9](`HANDLE-${e[12]}`).apply(this,arguments)}),{c(){nt(t.$$.fragment)},m(r,s){qe(t,r,s),n=!0},p(r,s){e=r;const i={};s&16&&(i.x=e[10][0]),s&16&&(i.y=e[10][1]),s&8&&(i.scale=e[3]),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ce(t.$$.fragment,r),n=!1},d(r){We(t,r)}}}function Zu(e){let t,n,r,s,i,o,a,u,c,l,f,d=Os(e[4].points),h=[];for(let m=0;m<d.length;m+=1)h[m]=Rs(As(e,d,m));const p=m=>Ce(h[m],1,1,()=>{h[m]=null});return{c(){t=ge("polygon"),s=Ee(),i=ge("polygon"),a=Ee();for(let m=0;m<h.length;m+=1)h[m].c();u=wi(),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"points",r=e[4].points.map(Ps).join(" ")),U(i,"class","a9s-inner a9s-shape-handle"),U(i,"style",e[1]),U(i,"points",o=e[4].points.map(Fs).join(" "))},m(m,S){te(m,t,S),te(m,s,S),te(m,i,S),te(m,a,S);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(m,S);te(m,u,S),c=!0,l||(f=[ue(t,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ue(i,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)})],l=!0)},p(m,S){if(e=m,(!c||S&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!c||S&16&&r!==(r=e[4].points.map(Ps).join(" ")))&&U(t,"points",r),(!c||S&2)&&U(i,"style",e[1]),(!c||S&16&&o!==(o=e[4].points.map(Fs).join(" ")))&&U(i,"points",o),S&536){d=Os(e[4].points);let v;for(v=0;v<d.length;v+=1){const R=As(e,d,v);h[v]?(h[v].p(R,S),be(h[v],1)):(h[v]=Rs(R),h[v].c(),be(h[v],1),h[v].m(u.parentNode,u))}for(Ou(),v=d.length;v<h.length;v+=1)p(v);Iu()}},i(m){if(!c){for(let S=0;S<d.length;S+=1)be(h[S]);c=!0}},o(m){h=h.filter(Boolean);for(let S=0;S<h.length;S+=1)Ce(h[S]);c=!1},d(m){m&&(ee(t),ee(s),ee(i),ee(a),ee(u)),mu(h,m),l=!1,He(f)}}}function ea(e){let t,n;return t=new Ii({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Zu,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("change",e[6]),t.$on("grab",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){qe(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&8730&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ce(t.$$.fragment,r),n=!1},d(r){We(t,r)}}}const Ps=e=>e.join(","),Fs=e=>e.join(",");function ta(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:a=1}=t;const u=(d,h,p)=>{let m;const S=d.geometry;h==="SHAPE"?m=S.points.map(([R,w])=>[R+p[0],w+p[1]]):m=S.points.map(([R,w],E)=>h===`HANDLE-${E}`?[R+p[0],w+p[1]]:[R,w]);const v=xi(m);return{...d,geometry:{points:m,bounds:v}}};function c(d){Ne.call(this,e,d)}function l(d){Ne.call(this,e,d)}function f(d){Ne.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,a,r,u,c,l,f]}class na extends Fn{constructor(t){super(),Pn(this,t,ta,ea,Rn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}const ra=typeof window>"u"||typeof navigator>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function sa(e){let t,n,r,s,i,o;return{c(){t=ge("rect"),U(t,"class",n=yn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(t,"x",r=e[0]-e[5]/2),U(t,"y",s=e[1]-e[5]/2),U(t,"width",e[5]),U(t,"height",e[5])},m(a,u){te(a,t,u),i||(o=ue(t,"pointerdown",e[11]),i=!0)},p(a,u){u&256&&n!==(n=yn(`a9s-handle ${a[8].class||""}`.trim())+" svelte-1sgkh33")&&U(t,"class",n),u&33&&r!==(r=a[0]-a[5]/2)&&U(t,"x",r),u&34&&s!==(s=a[1]-a[5]/2)&&U(t,"y",s),u&32&&U(t,"width",a[5]),u&32&&U(t,"height",a[5])},d(a){a&&ee(t),i=!1,o()}}}function ia(e){let t,n,r,s,i,o,a,u,c;return{c(){t=ge("g"),n=ge("circle"),s=ge("rect"),U(n,"cx",e[0]),U(n,"cy",e[1]),U(n,"r",r=e[3]/e[2]),U(n,"class","a9s-touch-halo svelte-1sgkh33"),Es(n,"touched",e[4]),U(s,"class",i=yn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(s,"x",o=e[0]-e[5]/2),U(s,"y",a=e[1]-e[5]/2),U(s,"width",e[5]),U(s,"height",e[5]),U(t,"class","a9s-touch-handle")},m(l,f){te(l,t,f),ws(t,n),ws(t,s),u||(c=[ue(n,"pointerdown",e[10]),ue(n,"pointerdown",e[6]),ue(n,"pointerup",e[7]),ue(s,"pointerdown",e[9]),ue(s,"pointerdown",e[6]),ue(s,"pointerup",e[7])],u=!0)},p(l,f){f&1&&U(n,"cx",l[0]),f&2&&U(n,"cy",l[1]),f&12&&r!==(r=l[3]/l[2])&&U(n,"r",r),f&16&&Es(n,"touched",l[4]),f&256&&i!==(i=yn(`a9s-handle ${l[8].class||""}`.trim())+" svelte-1sgkh33")&&U(s,"class",i),f&33&&o!==(o=l[0]-l[5]/2)&&U(s,"x",o),f&34&&a!==(a=l[1]-l[5]/2)&&U(s,"y",a),f&32&&U(s,"width",l[5]),f&32&&U(s,"height",l[5])},d(l){l&&ee(t),u=!1,He(c)}}}function oa(e){let t;function n(s,i){return ra?ia:sa}let r=n()(e);return{c(){r.c(),t=wi()},m(s,i){r.m(s,i),te(s,t,i)},p(s,[i]){r.p(s,i)},i:jt,o:jt,d(s){s&&ee(t),r.d(s)}}}function ua(e,t,n){let r,{x:s}=t,{y:i}=t,{scale:o}=t,{radius:a=30}=t,u=!1;const c=p=>{p.pointerType==="touch"&&n(4,u=!0)},l=()=>n(4,u=!1);function f(p){Ne.call(this,e,p)}function d(p){Ne.call(this,e,p)}function h(p){Ne.call(this,e,p)}return e.$$set=p=>{n(8,t=ar(ar({},t),Ss(p))),"x"in p&&n(0,s=p.x),"y"in p&&n(1,i=p.y),"scale"in p&&n(2,o=p.scale),"radius"in p&&n(3,a=p.radius)},e.$$.update=()=>{e.$$.dirty&4&&n(5,r=10/o)},t=Ss(t),[s,i,o,a,u,r,c,l,t,f,d,h]}class Pt extends Fn{constructor(t){super(),Pn(this,t,ua,oa,Rn,{x:0,y:1,scale:2,radius:3})}}function aa(e){let t,n,r,s,i,o,a,u,c,l,f,d,h,p,m,S,v,R,w,E,M,k,B,O,b,x,P,$,N,j,V,G,K,_,y,I,F,g,C,T,D,z,Y;return _=new Pt({props:{class:"a9s-corner-handle-topleft",x:e[4].x,y:e[4].y,scale:e[3]}}),_.$on("pointerdown",function(){ae(e[9]("TOP_LEFT"))&&e[9]("TOP_LEFT").apply(this,arguments)}),I=new Pt({props:{class:"a9s-corner-handle-topright",x:e[4].x+e[4].w,y:e[4].y,scale:e[3]}}),I.$on("pointerdown",function(){ae(e[9]("TOP_RIGHT"))&&e[9]("TOP_RIGHT").apply(this,arguments)}),g=new Pt({props:{class:"a9s-corner-handle-bottomright",x:e[4].x+e[4].w,y:e[4].y+e[4].h,scale:e[3]}}),g.$on("pointerdown",function(){ae(e[9]("BOTTOM_RIGHT"))&&e[9]("BOTTOM_RIGHT").apply(this,arguments)}),T=new Pt({props:{class:"a9s-corner-handle-bottomleft",x:e[4].x,y:e[4].y+e[4].h,scale:e[3]}}),T.$on("pointerdown",function(){ae(e[9]("BOTTOM_LEFT"))&&e[9]("BOTTOM_LEFT").apply(this,arguments)}),{c(){t=ge("rect"),a=Ee(),u=ge("rect"),h=Ee(),p=ge("rect"),R=Ee(),w=ge("rect"),B=Ee(),O=ge("rect"),$=Ee(),N=ge("rect"),K=Ee(),nt(_.$$.fragment),y=Ee(),nt(I.$$.fragment),F=Ee(),nt(g.$$.fragment),C=Ee(),nt(T.$$.fragment),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"x",r=e[4].x),U(t,"y",s=e[4].y),U(t,"width",i=e[4].w),U(t,"height",o=e[4].h),U(u,"class","a9s-inner a9s-shape-handle"),U(u,"style",e[1]),U(u,"x",c=e[4].x),U(u,"y",l=e[4].y),U(u,"width",f=e[4].w),U(u,"height",d=e[4].h),U(p,"class","a9s-edge-handle a9s-edge-handle-top"),U(p,"x",m=e[4].x),U(p,"y",S=e[4].y),U(p,"height",1),U(p,"width",v=e[4].w),U(w,"class","a9s-edge-handle a9s-edge-handle-right"),U(w,"x",E=e[4].x+e[4].w),U(w,"y",M=e[4].y),U(w,"height",k=e[4].h),U(w,"width",1),U(O,"class","a9s-edge-handle a9s-edge-handle-bottom"),U(O,"x",b=e[4].x),U(O,"y",x=e[4].y+e[4].h),U(O,"height",1),U(O,"width",P=e[4].w),U(N,"class","a9s-edge-handle a9s-edge-handle-left"),U(N,"x",j=e[4].x),U(N,"y",V=e[4].y),U(N,"height",G=e[4].h),U(N,"width",1)},m(W,H){te(W,t,H),te(W,a,H),te(W,u,H),te(W,h,H),te(W,p,H),te(W,R,H),te(W,w,H),te(W,B,H),te(W,O,H),te(W,$,H),te(W,N,H),te(W,K,H),qe(_,W,H),te(W,y,H),qe(I,W,H),te(W,F,H),qe(g,W,H),te(W,C,H),qe(T,W,H),D=!0,z||(Y=[ue(t,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ue(u,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ue(p,"pointerdown",function(){ae(e[9]("TOP"))&&e[9]("TOP").apply(this,arguments)}),ue(w,"pointerdown",function(){ae(e[9]("RIGHT"))&&e[9]("RIGHT").apply(this,arguments)}),ue(O,"pointerdown",function(){ae(e[9]("BOTTOM"))&&e[9]("BOTTOM").apply(this,arguments)}),ue(N,"pointerdown",function(){ae(e[9]("LEFT"))&&e[9]("LEFT").apply(this,arguments)})],z=!0)},p(W,H){e=W,(!D||H&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!D||H&16&&r!==(r=e[4].x))&&U(t,"x",r),(!D||H&16&&s!==(s=e[4].y))&&U(t,"y",s),(!D||H&16&&i!==(i=e[4].w))&&U(t,"width",i),(!D||H&16&&o!==(o=e[4].h))&&U(t,"height",o),(!D||H&2)&&U(u,"style",e[1]),(!D||H&16&&c!==(c=e[4].x))&&U(u,"x",c),(!D||H&16&&l!==(l=e[4].y))&&U(u,"y",l),(!D||H&16&&f!==(f=e[4].w))&&U(u,"width",f),(!D||H&16&&d!==(d=e[4].h))&&U(u,"height",d),(!D||H&16&&m!==(m=e[4].x))&&U(p,"x",m),(!D||H&16&&S!==(S=e[4].y))&&U(p,"y",S),(!D||H&16&&v!==(v=e[4].w))&&U(p,"width",v),(!D||H&16&&E!==(E=e[4].x+e[4].w))&&U(w,"x",E),(!D||H&16&&M!==(M=e[4].y))&&U(w,"y",M),(!D||H&16&&k!==(k=e[4].h))&&U(w,"height",k),(!D||H&16&&b!==(b=e[4].x))&&U(O,"x",b),(!D||H&16&&x!==(x=e[4].y+e[4].h))&&U(O,"y",x),(!D||H&16&&P!==(P=e[4].w))&&U(O,"width",P),(!D||H&16&&j!==(j=e[4].x))&&U(N,"x",j),(!D||H&16&&V!==(V=e[4].y))&&U(N,"y",V),(!D||H&16&&G!==(G=e[4].h))&&U(N,"height",G);const Z={};H&16&&(Z.x=e[4].x),H&16&&(Z.y=e[4].y),H&8&&(Z.scale=e[3]),_.$set(Z);const ne={};H&16&&(ne.x=e[4].x+e[4].w),H&16&&(ne.y=e[4].y),H&8&&(ne.scale=e[3]),I.$set(ne);const se={};H&16&&(se.x=e[4].x+e[4].w),H&16&&(se.y=e[4].y+e[4].h),H&8&&(se.scale=e[3]),g.$set(se);const ie={};H&16&&(ie.x=e[4].x),H&16&&(ie.y=e[4].y+e[4].h),H&8&&(ie.scale=e[3]),T.$set(ie)},i(W){D||(be(_.$$.fragment,W),be(I.$$.fragment,W),be(g.$$.fragment,W),be(T.$$.fragment,W),D=!0)},o(W){Ce(_.$$.fragment,W),Ce(I.$$.fragment,W),Ce(g.$$.fragment,W),Ce(T.$$.fragment,W),D=!1},d(W){W&&(ee(t),ee(a),ee(u),ee(h),ee(p),ee(R),ee(w),ee(B),ee(O),ee($),ee(N),ee(K),ee(y),ee(F),ee(C)),We(_,W),We(I,W),We(g,W),We(T,W),z=!1,He(Y)}}}function ca(e){let t,n;return t=new Ii({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[aa,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("grab",e[6]),t.$on("change",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){qe(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&1562&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ce(t.$$.fragment,r),n=!1},d(r){We(t,r)}}}function la(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:a=1}=t;const u=(d,h,p)=>{const m=d.geometry.bounds;let[S,v]=[m.minX,m.minY],[R,w]=[m.maxX,m.maxY];const[E,M]=p;if(h==="SHAPE")S+=E,R+=E,v+=M,w+=M;else{switch(h){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{v+=M;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{w+=M;break}}switch(h){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{S+=E;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{R+=E;break}}}const k=Math.min(S,R),B=Math.min(v,w),O=Math.abs(R-S),b=Math.abs(w-v);return{...d,geometry:{x:k,y:B,w:O,h:b,bounds:{minX:k,minY:B,maxX:k+O,maxY:B+b}}}};function c(d){Ne.call(this,e,d)}function l(d){Ne.call(this,e,d)}function f(d){Ne.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,a,r,u,c,l,f]}class fa extends Fn{constructor(t){super(),Pn(this,t,la,ca,Rn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}Se.RECTANGLE,Se.POLYGON;const da=e=>({}),Ts=e=>({grab:e[0]});function ha(e){let t,n,r,s;const i=e[7].default,o=du(i,e,e[6],Ts);return{c(){t=ge("g"),o&&o.c(),U(t,"class","a9s-annotation selected")},m(a,u){te(a,t,u),o&&o.m(t,null),n=!0,r||(s=[ue(t,"pointerup",e[2]),ue(t,"pointermove",e[1])],r=!0)},p(a,[u]){o&&o.p&&(!n||u&64)&&gu(o,i,a,a[6],n?hu(i,a[6],u,da):pu(a[6]),Ts)},i(a){n||(be(o,a),n=!0)},o(a){Ce(o,a),n=!1},d(a){a&&ee(t),o&&o.d(a),r=!1,He(s)}}}function ga(e,t,n){let{$$slots:r={},$$scope:s}=t;const i=Su();let{shape:o}=t,{editor:a}=t,{transform:u}=t,c,l,f;const d=m=>S=>{c=m,l=u.elementToImage(S.offsetX,S.offsetY),f=o,S.target.setPointerCapture(S.pointerId),i("grab",S)},h=m=>{if(c){const[S,v]=u.elementToImage(m.offsetX,m.offsetY),R=[S-l[0],v-l[1]];n(3,o=a(f,c,R)),i("change",o)}},p=m=>{m.target.releasePointerCapture(m.pointerId),c=void 0,f=o,i("release",m)};return e.$$set=m=>{"shape"in m&&n(3,o=m.shape),"editor"in m&&n(4,a=m.editor),"transform"in m&&n(5,u=m.transform),"$$scope"in m&&n(6,s=m.$$scope)},[d,h,p,o,a,u,s,r]}class Ii extends Fn{constructor(t){super(),Pn(this,t,ga,ha,Rn,{shape:3,editor:4,transform:5})}}typeof navigator>"u"||navigator.userAgent.indexOf("Mac OS X");const nd=e=>{const[t,n]=A.useState();return A.useEffect(()=>{fetch(`../../${e}`).then(r=>r.json()).then(r=>{const s=r.filter(i=>{const a=(Array.isArray(i.body)?i.body:[i.body]).some(d=>d.purpose==="tagging"),u=Array.isArray(i.target)?i.target[0]:i.target,l=(Array.isArray(u.selector)?u.selector:[u.selector]).find(d=>d.type==="FragmentSelector"),f=l&&l.value.endsWith(",0,0");return a&&!f});n(s)}).catch(r=>{console.log("Error fetching annotations",r)})},[]),t},rd=(e,t)=>{const[n,r]=A.useState(t);return A.useEffect(()=>{const s=localStorage.getItem(e);if(s)try{r(JSON.parse(s))}catch(i){console.error("Error parsing stored state",i)}},[e]),A.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n]),[n,r]},sd=e=>{const[t,n]=A.useState([]),[r,s]=A.useState({images:void 0,verses:void 0});return A.useEffect(()=>{fetch("../../tag-index.json").then(i=>i.json()).then(n)},[]),A.useEffect(()=>{if(t)if(e){const i=e.bodies.filter(c=>c.purpose==="tagging"&&c.value).map(c=>c.id),o=t.filter(c=>c.id!==e.id&&c.tags.some(l=>i.includes(l.id))),a=o.filter(c=>c.type==="IMAGE"),u=o.filter(c=>c.type==="VERSE");s({images:a,verses:u})}else s({images:void 0,verses:void 0})},[t,e]),r},pa=()=>{const e=au();return A.useMemo(()=>e.selected.length>0?e.selected[0].annotation:void 0,[e.selected.map(n=>n.annotation.id).join(",")])},Ci=()=>{const[e,t]=A.useState();return A.useEffect(()=>{fetch("/thesaurus/all-concepts.json").then(n=>n.json()).then(n=>{const r=n.map(s=>({id:s.uri,label:s.prefLabel?.trim()})).filter(s=>s.label);t(r)})},[]),e},id=e=>{const t=iu(),n=pa(),[r,s]=A.useState(!1);return A.useEffect(()=>{if(r)if(n){const i=n.id.substring(n.id.lastIndexOf("/")+1);location.hash=`#${i}`}else location.hash=""},[n,r]),A.useEffect(()=>{if(!t||!e.loaded)return;const i=c=>{const l=`https://recogito.pelagios.org/annotation/${c}`;if(!(t.getSelected()||[]).map(d=>d.id).includes(l)&&(t.setSelected(l),"scrollIntoView"in t)){const d=t.getAnnotationById(`https://recogito.pelagios.org/annotation/${c}`);t.scrollIntoView(d)}},o=()=>{t.getSelected()?.length>0&&t.cancelSelected()},a=window.location.hash.substring(1);a?setTimeout(()=>{i(a),s(!0)}):s(!0);const u=()=>{const c=window.location.hash.substring(1);c?i(c):o()};return window.addEventListener("hashchange",u),()=>{window.removeEventListener("hashchange",u)}},[t,e.loaded]),null};/**
 * @license lucide-react v0.463.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ut("BookOpenText",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]);/**
 * @license lucide-react v0.463.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.463.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ut("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.463.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ut("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.463.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=ut("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.463.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ut("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.463.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var jr=Qt(),J=e=>Yt(e,jr),Nr=Qt();J.write=e=>Yt(e,Nr);var Tn=Qt();J.onStart=e=>Yt(e,Tn);var Br=Qt();J.onFrame=e=>Yt(e,Br);var Lr=Qt();J.onFinish=e=>Yt(e,Lr);var pt=[];J.setTimeout=(e,t)=>{const n=J.now()+t,r=()=>{const i=pt.findIndex(o=>o.cancel==r);~i&&pt.splice(i,1),Ge-=~i?1:0},s={time:n,handler:e,cancel:r};return pt.splice(Ai(n),0,s),Ge+=1,Ri(),s};var Ai=e=>~(~pt.findIndex(t=>t.time>e)||~pt.length);J.cancel=e=>{Tn.delete(e),Br.delete(e),Lr.delete(e),jr.delete(e),Nr.delete(e)};J.sync=e=>{fr=!0,J.batchedUpdates(e),fr=!1};J.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,J.onStart(n)}return r.handler=e,r.cancel=()=>{Tn.delete(n),t=null},r};var Ur=typeof window<"u"?window.requestAnimationFrame:()=>{};J.use=e=>Ur=e;J.now=typeof performance<"u"?()=>performance.now():Date.now;J.batchedUpdates=e=>e();J.catch=console.error;J.frameLoop="always";J.advance=()=>{J.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Fi()};var ze=-1,Ge=0,fr=!1;function Yt(e,t){fr?(t.delete(e),e(0)):(t.add(e),Ri())}function Ri(){ze<0&&(ze=0,J.frameLoop!=="demand"&&Ur(Pi))}function Ea(){ze=-1}function Pi(){~ze&&(Ur(Pi),J.batchedUpdates(Fi))}function Fi(){const e=ze;ze=J.now();const t=Ai(ze);if(t&&(Ti(pt.splice(0,t),n=>n.handler()),Ge-=t),!Ge){Ea();return}Tn.flush(),jr.flush(e?Math.min(64,ze-e):16.667),Br.flush(),Nr.flush(),Lr.flush()}function Qt(){let e=new Set,t=e;return{add(n){Ge+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Ge-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Ge-=t.size,Ti(t,r=>r(n)&&e.add(r)),Ge+=e.size,t=e)}}}function Ti(e,t){e.forEach(n=>{try{t(n)}catch(r){J.catch(r)}})}var xa=Object.defineProperty,_a=(e,t)=>{for(var n in t)xa(e,n,{get:t[n],enumerable:!0})},Oe={};_a(Oe,{assign:()=>Ia,colors:()=>Ke,createStringInterpolator:()=>Vr,skipAnimation:()=>Mi,to:()=>Di,willAdvance:()=>qr});function dr(){}var Oa=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),L={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function je(e,t){if(L.arr(e)){if(!L.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Q=(e,t)=>e.forEach(t);function Fe(e,t,n){if(L.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ce=e=>L.und(e)?[]:L.arr(e)?e:[e];function Dt(e,t){if(e.size){const n=Array.from(e);e.clear(),Q(n,t)}}var Ft=(e,...t)=>Dt(e,n=>n(...t)),Hr=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Vr,Di,Ke=null,Mi=!1,qr=dr,Ia=e=>{e.to&&(Di=e.to),e.now&&(J.now=e.now),e.colors!==void 0&&(Ke=e.colors),e.skipAnimation!=null&&(Mi=e.skipAnimation),e.createStringInterpolator&&(Vr=e.createStringInterpolator),e.requestAnimationFrame&&J.use(e.requestAnimationFrame),e.batchedUpdates&&(J.batchedUpdates=e.batchedUpdates),e.willAdvance&&(qr=e.willAdvance),e.frameLoop&&(J.frameLoop=e.frameLoop)},Mt=new Set,ve=[],Jn=[],vn=0,Dn={get idle(){return!Mt.size&&!ve.length},start(e){vn>e.priority?(Mt.add(e),J.onStart(Ca)):($i(e),J(hr))},advance:hr,sort(e){if(vn)J.onFrame(()=>Dn.sort(e));else{const t=ve.indexOf(e);~t&&(ve.splice(t,1),ki(e))}},clear(){ve=[],Mt.clear()}};function Ca(){Mt.forEach($i),Mt.clear(),J(hr)}function $i(e){ve.includes(e)||ki(e)}function ki(e){ve.splice(Aa(ve,t=>t.priority>e.priority),0,e)}function hr(e){const t=Jn;for(let n=0;n<ve.length;n++){const r=ve[n];vn=r.priority,r.idle||(qr(r),r.advance(e),r.idle||t.push(r))}return vn=0,Jn=ve,Jn.length=0,ve=t,ve.length>0}function Aa(e,t){const n=e.findIndex(t);return n<0?e.length:n}var Ra=(e,t,n)=>Math.min(Math.max(n,e),t),Pa={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_e="[-+]?\\d*\\.?\\d+",bn=_e+"%";function Mn(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Fa=new RegExp("rgb"+Mn(_e,_e,_e)),Ta=new RegExp("rgba"+Mn(_e,_e,_e,_e)),Da=new RegExp("hsl"+Mn(_e,bn,bn)),Ma=new RegExp("hsla"+Mn(_e,bn,bn,_e)),$a=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ka=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ja=/^#([0-9a-fA-F]{6})$/,Na=/^#([0-9a-fA-F]{8})$/;function Ba(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=ja.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ke&&Ke[e]!==void 0?Ke[e]:(t=Fa.exec(e))?(dt(t[1])<<24|dt(t[2])<<16|dt(t[3])<<8|255)>>>0:(t=Ta.exec(e))?(dt(t[1])<<24|dt(t[2])<<16|dt(t[3])<<8|$s(t[4]))>>>0:(t=$a.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Na.exec(e))?parseInt(t[1],16)>>>0:(t=ka.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Da.exec(e))?(Ds(Ms(t[1]),on(t[2]),on(t[3]))|255)>>>0:(t=Ma.exec(e))?(Ds(Ms(t[1]),on(t[2]),on(t[3]))|$s(t[4]))>>>0:null}function Zn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ds(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=Zn(s,r,e+1/3),o=Zn(s,r,e),a=Zn(s,r,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function dt(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Ms(e){return(parseFloat(e)%360+360)%360/360}function $s(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function on(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function ks(e){let t=Ba(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${i})`}var Bt=(e,t,n)=>{if(L.fun(e))return e;if(L.arr(e))return Bt({range:e,output:t,extrapolate:n});if(L.str(e.output[0]))return Vr(e);const r=e,s=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||(c=>c);return c=>{const l=Ua(c,i);return La(c,i[l],i[l+1],s[l],s[l+1],u,o,a,r.map)}};function La(e,t,n,r,s,i,o,a,u){let c=u?u(e):e;if(c<t){if(o==="identity")return c;o==="clamp"&&(c=t)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?c=-c:n===1/0?c=c-t:c=(c-t)/(n-t),c=i(c),r===-1/0?c=-c:s===1/0?c=c+r:c=c*(s-r)+r,c)}function Ua(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Ha=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,s=t==="end"?Math.floor(r):Math.ceil(r);return Ra(0,1,s/e)},Sn=1.70158,un=Sn*1.525,js=Sn+1,Ns=2*Math.PI/3,Bs=2*Math.PI/4.5,an=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,$n={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>js*e*e*e-Sn*e*e,easeOutBack:e=>1+js*Math.pow(e-1,3)+Sn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((un+1)*2*e-un)/2:(Math.pow(2*e-2,2)*((un+1)*(e*2-2)+un)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Ns),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Ns)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Bs))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Bs)/2+1,easeInBounce:e=>1-an(1-e),easeOutBounce:an,easeInOutBounce:e=>e<.5?(1-an(1-2*e))/2:(1+an(2*e-1))/2,steps:Ha},Lt=Symbol.for("FluidValue.get"),vt=Symbol.for("FluidValue.observers"),ye=e=>!!(e&&e[Lt]),de=e=>e&&e[Lt]?e[Lt]():e,Ls=e=>e[vt]||null;function Va(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Ut(e,t){const n=e[vt];n&&n.forEach(r=>{Va(r,t)})}var ji=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");qa(this,e)}},qa=(e,t)=>Ni(e,Lt,t);function Et(e,t){if(e[Lt]){let n=e[vt];n||Ni(e,vt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Ht(e,t){const n=e[vt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[vt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Ni=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),hn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Wa=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Us=new RegExp(`(${hn.source})(%|[a-z]+)`,"i"),za=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,kn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Bi=e=>{const[t,n]=Ga(e);if(!t||Hr())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&kn.test(n))return Bi(n);if(n)return n}return e},Ga=e=>{const t=kn.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},er,Ka=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Li=e=>{er||(er=Ke?new RegExp(`(${Object.keys(Ke).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>de(i).replace(kn,Bi).replace(Wa,ks).replace(er,ks)),n=t.map(i=>i.match(hn).map(Number)),s=n[0].map((i,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(i=>Bt({...e,output:i}));return i=>{const o=!Us.test(t[0])&&t.find(u=>Us.test(u))?.replace(hn,"");let a=0;return t[0].replace(hn,()=>`${s[a++](i)}${o||""}`).replace(za,Ka)}},Wr="react-spring: ",Ui=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Wr}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Ya=Ui(console.warn);function Qa(){Ya(`${Wr}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Xa=Ui(console.warn);function Ja(){Xa(`${Wr}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function jn(e){return L.str(e)&&(e[0]=="#"||/\d/.test(e)||!Hr()&&kn.test(e)||e in(Ke||{}))}var rt=Hr()?A.useEffect:A.useLayoutEffect,Za=()=>{const e=A.useRef(!1);return rt(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function zr(){const e=A.useState()[1],t=Za();return()=>{t.current&&e(Math.random())}}function ec(e,t){const[n]=A.useState(()=>({inputs:t,result:e()})),r=A.useRef(),s=r.current;let i=s;return i?t&&i.inputs&&tc(t,i.inputs)||(i={inputs:t,result:e()}):i=n,A.useEffect(()=>{r.current=i,s==n&&(n.inputs=n.result=void 0)},[i]),i.result}function tc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var Gr=e=>A.useEffect(e,nc),nc=[];function gr(e){const t=A.useRef();return A.useEffect(()=>{t.current=e}),t.current}var Vt=Symbol.for("Animated:node"),rc=e=>!!e&&e[Vt]===e,Ie=e=>e&&e[Vt],Kr=(e,t)=>Oa(e,Vt,t),Nn=e=>e&&e[Vt]&&e[Vt].getPayload(),Hi=class{constructor(){Kr(this,this)}getPayload(){return this.payload||[]}},Xt=class extends Hi{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,L.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Xt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return L.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,L.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},qt=class extends Xt{constructor(e){super(0),this._string=null,this._toString=Bt({output:[e,e]})}static create(e){return new qt(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(L.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Bt({output:[this.getValue(),e]})),this._value=0,super.reset()}},wn={dependencies:null},Bn=class extends Hi{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Fe(this.source,(n,r)=>{rc(n)?t[r]=n.getValue(e):ye(n)?t[r]=de(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Q(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Fe(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){wn.dependencies&&ye(e)&&wn.dependencies.add(e);const t=Nn(e);t&&Q(t,n=>this.add(n))}},Vi=class extends Bn{constructor(e){super(e)}static create(e){return new Vi(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(sc)),!0)}};function sc(e){return(jn(e)?qt:Xt).create(e)}function pr(e){const t=Ie(e);return t?t.constructor:L.arr(e)?Vi:jn(e)?qt:Xt}var Hs=(e,t)=>{const n=!L.fun(e)||e.prototype&&e.prototype.isReactComponent;return A.forwardRef((r,s)=>{const i=A.useRef(null),o=n&&A.useCallback(p=>{i.current=uc(s,p)},[s]),[a,u]=oc(r,t),c=zr(),l=()=>{const p=i.current;if(n&&!p)return;(p?t.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},f=new ic(l,u),d=A.useRef();rt(()=>(d.current=f,Q(u,p=>Et(p,f)),()=>{d.current&&(Q(d.current.deps,p=>Ht(p,d.current)),J.cancel(d.current.update))})),A.useEffect(l,[]),Gr(()=>()=>{const p=d.current;Q(p.deps,m=>Ht(m,p))});const h=t.getComponentProps(a.getValue());return A.createElement(e,{...h,ref:o})})},ic=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&J.write(this.update)}};function oc(e,t){const n=new Set;return wn.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Bn(e),wn.dependencies=null,[e,n]}function uc(e,t){return e&&(L.fun(e)?e(t):e.current=t),t}var Vs=Symbol.for("AnimatedComponent"),ac=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new Bn(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=o=>{const a=qs(o)||"Anonymous";return L.str(o)?o=i[o]||(i[o]=Hs(o,s)):o=o[Vs]||(o[Vs]=Hs(o,s)),o.displayName=`Animated(${a})`,o};return Fe(e,(o,a)=>{L.arr(e)&&(a=qs(o)),i[a]=i(o)}),{animated:i}},qs=e=>L.str(e)?e:e&&L.str(e.displayName)?e.displayName:L.fun(e)&&e.name||null;function he(e,...t){return L.fun(e)?e(...t):e}var $t=(e,t)=>e===!0||!!(t&&e&&(L.fun(e)?e(t):ce(e).includes(t))),qi=(e,t)=>L.obj(e)?t&&e[t]:e,Wi=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,cc=e=>e,Ln=(e,t=cc)=>{let n=lc;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const i=t(e[s],s);L.und(i)||(r[s]=i)}return r},lc=["config","onProps","onStart","onChange","onPause","onResume","onRest"],fc={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function dc(e){const t={};let n=0;if(Fe(e,(r,s)=>{fc[s]||(t[s]=r,n++)}),n)return t}function Yr(e){const t=dc(e);if(t){const n={to:t};return Fe(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Wt(e){return e=de(e),L.arr(e)?e.map(Wt):jn(e)?Oe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function zi(e){for(const t in e)return!0;return!1}function mr(e){return L.fun(e)||L.arr(e)&&L.obj(e[0])}function yr(e,t){e.ref?.delete(e),t?.delete(e)}function Gi(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var hc={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},vr={...hc.default,mass:1,damping:1,easing:$n.linear,clamp:!1},gc=class{constructor(){this.velocity=0,Object.assign(this,vr)}};function pc(e,t,n){n&&(n={...n},Ws(n,t),t={...n,...t}),Ws(e,t),Object.assign(e,t);for(const o in vr)e[o]==null&&(e[o]=vr[o]);let{frequency:r,damping:s}=e;const{mass:i}=e;return L.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*s*i/r),e}function Ws(e,t){if(!L.und(t.decay))e.duration=void 0;else{const n=!L.und(t.tension)||!L.und(t.friction);(n||!L.und(t.frequency)||!L.und(t.damping)||!L.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var zs=[],mc=class{constructor(){this.changed=!1,this.values=zs,this.toValues=null,this.fromValues=zs,this.config=new gc,this.immediate=!1}};function Ki(e,{key:t,props:n,defaultProps:r,state:s,actions:i}){return new Promise((o,a)=>{let u,c,l=$t(n.cancel??r?.cancel,t);if(l)h();else{L.und(n.pause)||(s.paused=$t(n.pause,t));let p=r?.pause;p!==!0&&(p=s.paused||$t(p,t)),u=he(n.delay||0,t),p?(s.resumeQueue.add(d),i.pause()):(i.resume(),d())}function f(){s.resumeQueue.add(d),s.timeouts.delete(c),c.cancel(),u=c.time-J.now()}function d(){u>0&&!Oe.skipAnimation?(s.delayed=!0,c=J.setTimeout(h,u),s.pauseQueue.add(f),s.timeouts.add(c)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(f),s.timeouts.delete(c),e<=(s.cancelId||0)&&(l=!0);try{i.start({...n,callId:e,cancel:l},o)}catch(p){a(p)}}})}var Qr=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?mt(e.get()):t.every(n=>n.noop)?Yi(e.get()):xe(e.get(),t.every(n=>n.finished)),Yi=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),xe=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),mt=e=>({value:e,cancelled:!0,finished:!1});function Qi(e,t,n,r){const{callId:s,parentId:i,onRest:o}=t,{asyncTo:a,promise:u}=n;return!i&&e===a&&!t.reset?u:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const c=Ln(t,(S,v)=>v==="onRest"?void 0:S);let l,f;const d=new Promise((S,v)=>(l=S,f=v)),h=S=>{const v=s<=(n.cancelId||0)&&mt(r)||s!==n.asyncId&&xe(r,!1);if(v)throw S.result=v,f(S),S},p=(S,v)=>{const R=new Gs,w=new Ks;return(async()=>{if(Oe.skipAnimation)throw zt(n),w.result=xe(r,!1),f(w),w;h(R);const E=L.obj(S)?{...S}:{...v,to:S};E.parentId=s,Fe(c,(k,B)=>{L.und(E[B])&&(E[B]=k)});const M=await r.start(E);return h(R),n.paused&&await new Promise(k=>{n.resumeQueue.add(k)}),M})()};let m;if(Oe.skipAnimation)return zt(n),xe(r,!1);try{let S;L.arr(e)?S=(async v=>{for(const R of v)await p(R)})(e):S=Promise.resolve(e(p,r.stop.bind(r))),await Promise.all([S.then(l),d]),m=xe(r.get(),!0,!1)}catch(S){if(S instanceof Gs)m=S.result;else if(S instanceof Ks)m=S.result;else throw S}finally{s==n.asyncId&&(n.asyncId=i,n.asyncTo=i?a:void 0,n.promise=i?u:void 0)}return L.fun(o)&&J.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function zt(e,t){Dt(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Gs=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Ks=class extends Error{constructor(){super("SkipAnimationSignal")}},br=e=>e instanceof Xr,yc=1,Xr=class extends ji{constructor(){super(...arguments),this.id=yc++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ie(this);return e&&e.getValue()}to(...e){return Oe.to(this,e)}interpolate(...e){return Qa(),Oe.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Ut(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Dn.sort(this),Ut(this,{type:"priority",parent:this,priority:e})}},st=Symbol.for("SpringPhase"),Xi=1,Sr=2,wr=4,tr=e=>(e[st]&Xi)>0,Ve=e=>(e[st]&Sr)>0,Ct=e=>(e[st]&wr)>0,Ys=(e,t)=>t?e[st]|=Sr|Xi:e[st]&=~Sr,Qs=(e,t)=>t?e[st]|=wr:e[st]&=~wr,vc=class extends Xr{constructor(e,t){if(super(),this.animation=new mc,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!L.und(e)||!L.und(t)){const n=L.obj(e)?{...e}:{...t,from:e};L.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ve(this)||this._state.asyncTo)||Ct(this)}get goal(){return de(this.animation.to)}get velocity(){const e=Ie(this);return e instanceof Xt?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return tr(this)}get isAnimating(){return Ve(this)}get isPaused(){return Ct(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:i}=r,o=Nn(r.to);!o&&ye(r.to)&&(s=ce(de(r.to))),r.values.forEach((c,l)=>{if(c.done)return;const f=c.constructor==qt?1:o?o[l].lastPosition:s[l];let d=r.immediate,h=f;if(!d){if(h=c.lastPosition,i.tension<=0){c.done=!0;return}let p=c.elapsedTime+=e;const m=r.fromValues[l],S=c.v0!=null?c.v0:c.v0=L.arr(i.velocity)?i.velocity[l]:i.velocity;let v;const R=i.precision||(m==f?.005:Math.min(1,Math.abs(f-m)*.001));if(L.und(i.duration))if(i.decay){const w=i.decay===!0?.998:i.decay,E=Math.exp(-(1-w)*p);h=m+S/(1-w)*(1-E),d=Math.abs(c.lastPosition-h)<=R,v=S*E}else{v=c.lastVelocity==null?S:c.lastVelocity;const w=i.restVelocity||R/10,E=i.clamp?0:i.bounce,M=!L.und(E),k=m==f?c.v0>0:m<f;let B,O=!1;const b=1,x=Math.ceil(e/b);for(let P=0;P<x&&(B=Math.abs(v)>w,!(!B&&(d=Math.abs(f-h)<=R,d)));++P){M&&(O=h==f||h>f==k,O&&(v=-v*E,h=f));const $=-i.tension*1e-6*(h-f),N=-i.friction*.001*v,j=($+N)/i.mass;v=v+j*b,h=h+v*b}}else{let w=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,c.durationProgress>0&&(c.elapsedTime=i.duration*c.durationProgress,p=c.elapsedTime+=e)),w=(i.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),h=m+i.easing(w)*(f-m),v=(h-c.lastPosition)/e,d=w==1}c.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[l].done&&(d=!1),d?c.done=!0:t=!1,c.setValue(h,i.round)&&(n=!0)});const a=Ie(this),u=a.getValue();if(t){const c=de(r.to);(u!==c||n)&&!i.decay?(a.setValue(c),this._onChange(c)):n&&i.decay&&this._onChange(u),this._stop()}else n&&this._onChange(u)}set(e){return J.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ve(this)){const{to:e,config:t}=this.animation;J.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return L.und(e)?(n=this.queue||[],this.queue=[]):n=[L.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Qr(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),zt(this._state,e&&this._lastCallId),J.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=L.obj(n)?n[t]:n,(n==null||mr(n))&&(n=void 0),r=L.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return tr(this)||(e.reverse&&([n,r]=[r,n]),r=de(r),L.und(r)?Ie(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Ln(e,(o,a)=>/^on/.test(a)?qi(o,n):o)),Js(this,e,"onProps"),Rt(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return Ki(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{Ct(this)||(Qs(this,!0),Ft(i.pauseQueue),Rt(this,"onPause",xe(this,At(this,this.animation.to)),this))},resume:()=>{Ct(this)&&(Qs(this,!1),Ve(this)&&this._resume(),Ft(i.resumeQueue),Rt(this,"onResume",xe(this,At(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const a=Ji(e);if(a)return this._update(a,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(mt(this));const r=!L.und(e.to),s=!L.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(mt(this));const{key:i,defaultProps:o,animation:a}=this,{to:u,from:c}=a;let{to:l=u,from:f=c}=e;s&&!r&&(!t.default||L.und(l))&&(l=f),t.reverse&&([l,f]=[f,l]);const d=!je(f,c);d&&(a.from=f),f=de(f);const h=!je(l,u);h&&this._focus(l);const p=mr(t.to),{config:m}=a,{decay:S,velocity:v}=m;(r||s)&&(m.velocity=0),t.config&&!p&&pc(m,he(t.config,i),t.config!==o.config?he(o.config,i):void 0);let R=Ie(this);if(!R||L.und(l))return n(xe(this,!0));const w=L.und(t.reset)?s&&!t.default:!L.und(f)&&$t(t.reset,i),E=w?f:this.get(),M=Wt(l),k=L.num(M)||L.arr(M)||jn(M),B=!p&&(!k||$t(o.immediate||t.immediate,i));if(h){const P=pr(l);if(P!==R.constructor)if(B)R=this._set(M);else throw Error(`Cannot animate between ${R.constructor.name} and ${P.name}, as the "to" prop suggests`)}const O=R.constructor;let b=ye(l),x=!1;if(!b){const P=w||!tr(this)&&d;(h||P)&&(x=je(Wt(E),M),b=!x),(!je(a.immediate,B)&&!B||!je(m.decay,S)||!je(m.velocity,v))&&(b=!0)}if(x&&Ve(this)&&(a.changed&&!w?b=!0:b||this._stop(u)),!p&&((b||ye(u))&&(a.values=R.getPayload(),a.toValues=ye(l)?null:O==qt?[1]:ce(M)),a.immediate!=B&&(a.immediate=B,!B&&!w&&this._set(u)),b)){const{onRest:P}=a;Q(Sc,N=>Js(this,t,N));const $=xe(this,At(this,u));Ft(this._pendingCalls,$),this._pendingCalls.add(n),a.changed&&J.batchedUpdates(()=>{a.changed=!w,P?.($,this),w?he(o.onRest,$):a.onStart?.($,this)})}w&&this._set(E),p?n(Qi(t.to,t,this._state,this)):b?this._start():Ve(this)&&!h?this._pendingCalls.add(n):n(Yi(E))}_focus(e){const t=this.animation;e!==t.to&&(Ls(this)&&this._detach(),t.to=e,Ls(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ye(t)&&(Et(t,this),br(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ye(e)&&Ht(e,this)}_set(e,t=!0){const n=de(e);if(!L.und(n)){const r=Ie(this);if(!r||!je(n,r.getValue())){const s=pr(n);!r||r.constructor!=s?Kr(this,s.create(n)):r.setValue(n),r&&J.batchedUpdates(()=>{this._onChange(n,t)})}}return Ie(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Rt(this,"onStart",xe(this,At(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),he(this.animation.onChange,e,this)),he(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Ie(this).reset(de(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ve(this)||(Ys(this,!0),Ct(this)||this._resume())}_resume(){Oe.skipAnimation?this.finish():Dn.start(this)}_stop(e,t){if(Ve(this)){Ys(this,!1);const n=this.animation;Q(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ut(this,{type:"idle",parent:this});const r=t?mt(this.get()):xe(this.get(),At(this,e??n.to));Ft(this._pendingCalls,r),n.changed&&(n.changed=!1,Rt(this,"onRest",r,this))}}};function At(e,t){const n=Wt(t),r=Wt(e.get());return je(r,n)}function Ji(e,t=e.loop,n=e.to){const r=he(t);if(r){const s=r!==!0&&Yr(r),i=(s||e).reverse,o=!s||s.reset;return Gt({...e,loop:t,default:!1,pause:void 0,to:!i||mr(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function Gt(e){const{to:t,from:n}=e=Yr(e),r=new Set;return L.obj(t)&&Xs(t,r),L.obj(n)&&Xs(n,r),e.keys=r.size?Array.from(r):null,e}function bc(e){const t=Gt(e);return L.und(t.default)&&(t.default=Ln(t)),t}function Xs(e,t){Fe(e,(n,r)=>n!=null&&t.add(r))}var Sc=["onStart","onRest","onChange","onPause","onResume"];function Js(e,t,n){e.animation[n]=t[n]!==Wi(t,n)?qi(t[n],e.key):void 0}function Rt(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var wc=["onStart","onChange","onRest"],Ec=1,Zi=class{constructor(e,t){this.id=Ec++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];L.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Gt(e)),this}start(e){let{queue:t}=this;return e?t=ce(e).map(Gt):this.queue=[],this._flush?this._flush(this,t):(so(this,t),Er(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Q(ce(t),r=>n[r].stop(!!e))}else zt(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(L.und(e))this.start({pause:!0});else{const t=this.springs;Q(ce(e),n=>t[n].pause())}return this}resume(e){if(L.und(e))this.start({pause:!1});else{const t=this.springs;Q(ce(e),n=>t[n].resume())}return this}each(e){Fe(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Dt(e,([a,u])=>{u.value=this.get(),a(u,this,this._item)}));const i=!r&&this._started,o=s||i&&n.size?this.get():null;s&&t.size&&Dt(t,([a,u])=>{u.value=o,a(u,this,this._item)}),i&&(this._started=!1,Dt(n,([a,u])=>{u.value=o,a(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;J.onFrame(this._onFrame)}};function Er(e,t){return Promise.all(t.map(n=>eo(e,n))).then(n=>Qr(e,n))}async function eo(e,t,n){const{keys:r,to:s,from:i,loop:o,onRest:a,onResolve:u}=t,c=L.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),i===!1&&(t.from=null);const l=L.arr(s)||L.fun(s)?s:void 0;l?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):Q(wc,m=>{const S=t[m];if(L.fun(S)){const v=e._events[m];t[m]=({finished:R,cancelled:w})=>{const E=v.get(S);E?(R||(E.finished=!1),w&&(E.cancelled=!0)):v.set(S,{value:null,finished:R||!1,cancelled:w||!1})},c&&(c[m]=t[m])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,Ft(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map(m=>e.springs[m].start(t)),h=t.cancel===!0||Wi(t,"cancel")===!0;(l||h&&f.asyncId)&&d.push(Ki(++e._lastAsyncId,{props:t,state:f,actions:{pause:dr,resume:dr,start(m,S){h?(zt(f,e._lastAsyncId),S(mt(e))):(m.onRest=a,S(Qi(l,m,f,e)))}}})),f.paused&&await new Promise(m=>{f.resumeQueue.add(m)});const p=Qr(e,await Promise.all(d));if(o&&p.finished&&!(n&&p.noop)){const m=Ji(t,o,s);if(m)return so(e,[m]),eo(e,m,!0)}return u&&J.batchedUpdates(()=>u(p,e,e.item)),p}function xr(e,t){const n={...e.springs};return t&&Q(ce(t),r=>{L.und(r.keys)&&(r=Gt(r)),L.obj(r.to)||(r={...r,to:void 0}),ro(n,r,s=>no(s))}),to(e,n),n}function to(e,t){Fe(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,Et(n,e))})}function no(e,t){const n=new vc;return n.key=e,t&&Et(n,t),n}function ro(e,t,n){t.keys&&Q(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function so(e,t){Q(t,n=>{ro(e.springs,n,r=>no(r,e))})}var Jt=({children:e,...t})=>{const n=A.useContext(En),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=ec(()=>({pause:r,immediate:s}),[r,s]);const{Provider:i}=En;return A.createElement(i,{value:t},e)},En=xc(Jt,{});Jt.Provider=En.Provider;Jt.Consumer=En.Consumer;function xc(e,t){return Object.assign(e,A.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var io=()=>{const e=[],t=function(r){Ja();const s=[];return Q(e,(i,o)=>{if(L.und(r))s.push(i.start());else{const a=n(r,i,o);a&&s.push(i.start(a))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Q(e,r=>r.pause(...arguments)),this},t.resume=function(){return Q(e,r=>r.resume(...arguments)),this},t.set=function(r){Q(e,(s,i)=>{const o=L.fun(r)?r(i,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return Q(e,(i,o)=>{if(L.und(r))s.push(i.start());else{const a=this._getProps(r,i,o);a&&s.push(i.start(a))}}),s},t.stop=function(){return Q(e,r=>r.stop(...arguments)),this},t.update=function(r){return Q(e,(s,i)=>s.update(this._getProps(r,s,i))),this};const n=function(r,s,i){return L.fun(r)?r(i,s):r};return t._getProps=n,t};function _c(e,t,n){const r=L.fun(t)&&t;r&&!n&&(n=[]);const s=A.useMemo(()=>r||arguments.length==3?io():void 0,[]),i=A.useRef(0),o=zr(),a=A.useMemo(()=>({ctrls:[],queue:[],flush(v,R){const w=xr(v,R);return i.current>0&&!a.queue.length&&!Object.keys(w).some(M=>!v.springs[M])?Er(v,R):new Promise(M=>{to(v,w),a.queue.push(()=>{M(Er(v,R))}),o()})}}),[]),u=A.useRef([...a.ctrls]),c=[],l=gr(e)||0;A.useMemo(()=>{Q(u.current.slice(e,l),v=>{yr(v,s),v.stop(!0)}),u.current.length=e,f(l,e)},[e]),A.useMemo(()=>{f(0,Math.min(l,e))},n);function f(v,R){for(let w=v;w<R;w++){const E=u.current[w]||(u.current[w]=new Zi(null,a.flush)),M=r?r(w,E):t[w];M&&(c[w]=bc(M))}}const d=u.current.map((v,R)=>xr(v,c[R])),h=A.useContext(Jt),p=gr(h),m=h!==p&&zi(h);rt(()=>{i.current++,a.ctrls=u.current;const{queue:v}=a;v.length&&(a.queue=[],Q(v,R=>R())),Q(u.current,(R,w)=>{s?.add(R),m&&R.start({default:h});const E=c[w];E&&(Gi(R,E.ref),R.ref?R.queue.push(E):R.start(E))})}),Gr(()=>()=>{Q(a.ctrls,v=>v.stop(!0))});const S=d.map(v=>({...v}));return s?[S,s]:S}function od(e,t){const n=L.fun(e),[[r],s]=_c(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function Jr(e,t,n){const r=L.fun(t)&&t,{reset:s,sort:i,trail:o=0,expires:a=!0,exitBeforeEnter:u=!1,onDestroyed:c,ref:l,config:f}=r?r():t,d=A.useMemo(()=>r||arguments.length==3?io():void 0,[]),h=ce(e),p=[],m=A.useRef(null),S=s?null:m.current;rt(()=>{m.current=p}),Gr(()=>(Q(p,j=>{d?.add(j.ctrl),j.ctrl.ref=d}),()=>{Q(m.current,j=>{j.expired&&clearTimeout(j.expirationId),yr(j.ctrl,d),j.ctrl.stop(!0)})}));const v=Ic(h,r?r():t,S),R=s&&m.current||[];rt(()=>Q(R,({ctrl:j,item:V,key:G})=>{yr(j,d),he(c,V,G)}));const w=[];if(S&&Q(S,(j,V)=>{j.expired?(clearTimeout(j.expirationId),R.push(j)):(V=w[V]=v.indexOf(j.key),~V&&(p[V]=j))}),Q(h,(j,V)=>{p[V]||(p[V]={key:v[V],item:j,phase:"mount",ctrl:new Zi},p[V].ctrl.item=j)}),w.length){let j=-1;const{leave:V}=r?r():t;Q(w,(G,K)=>{const _=S[K];~G?(j=p.indexOf(_),p[j]={..._,item:h[G]}):V&&p.splice(++j,0,_)})}L.fun(i)&&p.sort((j,V)=>i(j.item,V.item));let E=-o;const M=zr(),k=Ln(t),B=new Map,O=A.useRef(new Map),b=A.useRef(!1);Q(p,(j,V)=>{const G=j.key,K=j.phase,_=r?r():t;let y,I;const F=he(_.delay||0,G);if(K=="mount")y=_.enter,I="enter";else{const D=v.indexOf(G)<0;if(K!="leave")if(D)y=_.leave,I="leave";else if(y=_.update)I="update";else return;else if(!D)y=_.enter,I="enter";else return}if(y=he(y,j.item,V),y=L.obj(y)?Yr(y):{to:y},!y.config){const D=f||k.config;y.config=he(D,j.item,V,I)}E+=o;const g={...k,delay:F+E,ref:l,immediate:_.immediate,reset:!1,...y};if(I=="enter"&&L.und(g.from)){const D=r?r():t,z=L.und(D.initial)||S?D.from:D.initial;g.from=he(z,j.item,V)}const{onResolve:C}=g;g.onResolve=D=>{he(C,D);const z=m.current,Y=z.find(W=>W.key===G);if(Y&&!(D.cancelled&&Y.phase!="update")&&Y.ctrl.idle){const W=z.every(H=>H.ctrl.idle);if(Y.phase=="leave"){const H=he(a,Y.item);if(H!==!1){const Z=H===!0?0:H;if(Y.expired=!0,!W&&Z>0){Z<=2147483647&&(Y.expirationId=setTimeout(M,Z));return}}}W&&z.some(H=>H.expired)&&(O.current.delete(Y),u&&(b.current=!0),M())}};const T=xr(j.ctrl,g);I==="leave"&&u?O.current.set(j,{phase:I,springs:T,payload:g}):B.set(j,{phase:I,springs:T,payload:g})});const x=A.useContext(Jt),P=gr(x),$=x!==P&&zi(x);rt(()=>{$&&Q(p,j=>{j.ctrl.start({default:x})})},[x]),Q(B,(j,V)=>{if(O.current.size){const G=p.findIndex(K=>K.key===V.key);p.splice(G,1)}}),rt(()=>{Q(O.current.size?O.current:B,({phase:j,payload:V},G)=>{const{ctrl:K}=G;G.phase=j,d?.add(K),$&&j=="enter"&&K.start({default:x}),V&&(Gi(K,V.ref),(K.ref||d)&&!b.current?K.update(V):(K.start(V),b.current&&(b.current=!1)))})},s?void 0:n);const N=j=>A.createElement(A.Fragment,null,p.map((V,G)=>{const{springs:K}=B.get(V)||V.ctrl,_=j({...K},V.item,V,G);return _&&_.type?A.createElement(_.type,{..._.props,key:L.str(V.key)||L.num(V.key)?V.key:V.ctrl.id,ref:_.ref}):_}));return d?[N,d]:N}var Oc=1;function Ic(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(i=>{const o=r&&r.find(a=>a.item===i&&a.phase!=="leave"&&!s.has(a));return o?(s.add(o),o.key):Oc++})}return L.und(n)?e:L.fun(n)?e.map(n):ce(n)}var oo=class extends Xr{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Bt(...t);const n=this._get(),r=pr(n);Kr(this,r.create(n))}advance(e){const t=this._get(),n=this.get();je(t,n)||(Ie(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Zs(this._active)&&nr(this)}_get(){const e=L.arr(this.source)?this.source.map(de):ce(de(this.source));return this.calc(...e)}_start(){this.idle&&!Zs(this._active)&&(this.idle=!1,Q(Nn(this),e=>{e.done=!1}),Oe.skipAnimation?(J.batchedUpdates(()=>this.advance()),nr(this)):Dn.start(this))}_attach(){let e=1;Q(ce(this.source),t=>{ye(t)&&Et(t,this),br(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Q(ce(this.source),e=>{ye(e)&&Ht(e,this)}),this._active.clear(),nr(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ce(this.source).reduce((t,n)=>Math.max(t,(br(n)?n.priority:0)+1),0))}};function Cc(e){return e.idle!==!1}function Zs(e){return!e.size||Array.from(e).every(Cc)}function nr(e){e.idle||(e.idle=!0,Q(Nn(e),t=>{t.done=!0}),Ut(e,{type:"idle",parent:e}))}var ud=(e,...t)=>new oo(e,t);Oe.assign({createStringInterpolator:Li,to:(e,t)=>new oo(e,t)});var uo=/^--/;function Ac(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!uo.test(e)&&!(kt.hasOwnProperty(e)&&kt[e])?t+"px":(""+t).trim()}var ei={};function Rc(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:i,scrollTop:o,scrollLeft:a,viewBox:u,...c}=t,l=Object.values(c),f=Object.keys(c).map(d=>n||e.hasAttribute(d)?d:ei[d]||(ei[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));i!==void 0&&(e.textContent=i);for(const d in s)if(s.hasOwnProperty(d)){const h=Ac(d,s[d]);uo.test(d)?e.style.setProperty(d,h):e.style[d]=h}f.forEach((d,h)=>{e.setAttribute(d,l[h])}),r!==void 0&&(e.className=r),o!==void 0&&(e.scrollTop=o),a!==void 0&&(e.scrollLeft=a),u!==void 0&&e.setAttribute("viewBox",u)}var kt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pc=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Fc=["Webkit","Ms","Moz","O"];kt=Object.keys(kt).reduce((e,t)=>(Fc.forEach(n=>e[Pc(n,t)]=e[t]),e),kt);var Tc=/^(matrix|translate|scale|rotate|skew)/,Dc=/^(translate)/,Mc=/^(rotate|skew)/,rr=(e,t)=>L.num(e)&&e!==0?e+t:e,gn=(e,t)=>L.arr(e)?e.every(n=>gn(n,t)):L.num(e)?e===t:parseFloat(e)===t,$c=class extends Bn{constructor({x:e,y:t,z:n,...r}){const s=[],i=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),i.push(o=>[`translate3d(${o.map(a=>rr(a,"px")).join(",")})`,gn(o,0)])),Fe(r,(o,a)=>{if(a==="transform")s.push([o||""]),i.push(u=>[u,u===""]);else if(Tc.test(a)){if(delete r[a],L.und(o))return;const u=Dc.test(a)?"px":Mc.test(a)?"deg":"";s.push(ce(o)),i.push(a==="rotate3d"?([c,l,f,d])=>[`rotate3d(${c},${l},${f},${rr(d,u)})`,gn(d,0)]:c=>[`${a}(${c.map(l=>rr(l,u)).join(",")})`,gn(c,a.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new kc(s,i)),super(r)}},kc=class extends ji{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Q(this.inputs,(n,r)=>{const s=de(n[0]),[i,o]=this.transforms[r](L.arr(s)?s:n.map(de));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&Q(this.inputs,t=>Q(t,n=>ye(n)&&Et(n,this)))}observerRemoved(e){e==0&&Q(this.inputs,t=>Q(t,n=>ye(n)&&Ht(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Ut(this,e)}},jc=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Oe.assign({batchedUpdates:mi.unstable_batchedUpdates,createStringInterpolator:Li,colors:Pa});var Nc=ac(jc,{applyAnimatedValues:Rc,createAnimatedStyle:e=>new $c(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Zr=Nc.animated,ao={},co={exports:{}},Bc="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lc=Bc,Uc=Lc;function lo(){}function fo(){}fo.resetWarningCache=lo;var Hc=function(){function e(r,s,i,o,a,u){if(u!==Uc){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fo,resetWarningCache:lo};return n.PropTypes=n,n};co.exports=Hc();var Zt=co.exports;function Vc(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var qc=Vc,ho={},ti=function(){function e(t,n){var r=[],s=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),u;!(s=(u=a.next()).done)&&(r.push(u.value),!(n&&r.length===n));s=!0);}catch(c){i=!0,o=c}finally{try{!s&&a.return&&a.return()}finally{if(i)throw o}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Wc=function(e){var t=e.data,n=e.multiSection;function r(u){for(u===null?u=0:u++;u<t.length&&t[u]===0;)u++;return u===t.length?null:u}function s(u){for(u===null?u=t.length-1:u--;u>=0&&t[u]===0;)u--;return u===-1?null:u}function i(u){var c=ti(u,2),l=c[0],f=c[1];return n?f===null||f===t[l]-1?(l=r(l),l===null?[null,null]:[l,0]):[l,f+1]:t===0||f===t-1?[null,null]:f===null?[null,0]:[null,f+1]}function o(u){var c=ti(u,2),l=c[0],f=c[1];return n?f===null||f===0?(l=s(l),l===null?[null,null]:[l,t[l]-1]):[l,f-1]:t===0||f===0?[null,null]:f===null?[null,t-1]:[null,f-1]}function a(u){return i(u)[1]===null}return{next:i,prev:o,isLast:a}},_r={exports:{}},zc=Object.prototype.propertyIsEnumerable;function Gc(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Kc(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(n){return zc.call(e,n)})}var Yc=Object.assign||function(e,t){for(var n,r,s=Gc(e),i=1;i<arguments.length;i++){n=arguments[i],r=Kc(Object(n));for(var o=0;o<r.length;o++)s[r[o]]=n[r[o]]}return s};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function u(c,l){var f=[],d=!0,h=!1,p=void 0;try{for(var m=c[Symbol.iterator](),S;!(d=(S=m.next()).done)&&(f.push(S.value),!(l&&f.length===l));d=!0);}catch(v){h=!0,p=v}finally{try{!d&&m.return&&m.return()}finally{if(h)throw p}}return f}return function(c,l){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return u(c,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(u){return u&&u.__esModule?u:{default:u}}function s(u){if(Array.isArray(u)){for(var c=0,l=Array(u.length);c<u.length;c++)l[c]=u[c];return l}else return Array.from(u)}var i=Yc,o=r(i),a=function(c){return c};t.default=function(u){var c=Array.isArray(u)&&u.length===2?u:[u,null],l=n(c,2),f=l[0],d=l[1];return function(h){for(var p=arguments.length,m=Array(p>1?p-1:0),S=1;S<p;S++)m[S-1]=arguments[S];var v=m.map(function(R){return f[R]}).filter(a);return typeof v[0]=="string"||typeof d=="function"?{key:h,className:d?d.apply(void 0,s(v)):v.join(" ")}:{key:h,style:o.default.apply(void 0,[{}].concat(s(v)))}}},e.exports=t.default})(_r,_r.exports);var Qc=_r.exports,go={},Un={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(i){return typeof i}:t=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t(r)}function n(r,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===s)return!1;var o=Object.keys(r),a=Object.keys(s);if(o.length!==a.length)return!0;var u={},c,l;for(c=0,l=i.length;c<l;c++)u[i[c]]=!0;for(c=0,l=o.length;c<l;c++){var f=o[c],d=r[f],h=s[f];if(d!==h){if(!u[f]||d===null||h===null||t(d)!=="object"||t(h)!=="object")return!0;var p=Object.keys(d),m=Object.keys(h);if(p.length!==m.length)return!0;for(var S=0,v=p.length;S<v;S++){var R=p[S];if(d[R]!==h[R])return!0}}}return!1}})(Un);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(A),n=s(Zt),r=s(Un);function s(E){return E&&E.__esModule?E:{default:E}}function i(){if(typeof WeakMap!="function")return null;var E=new WeakMap;return i=function(){return E},E}function o(E){if(E&&E.__esModule)return E;if(E===null||a(E)!=="object"&&typeof E!="function")return{default:E};var M=i();if(M&&M.has(E))return M.get(E);var k={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in E)if(Object.prototype.hasOwnProperty.call(E,O)){var b=B?Object.getOwnPropertyDescriptor(E,O):null;b&&(b.get||b.set)?Object.defineProperty(k,O,b):k[O]=E[O]}return k.default=E,M&&M.set(E,k),k}function a(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(k){return typeof k}:a=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},a(E)}function u(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")}function c(E,M){for(var k=0;k<M.length;k++){var B=M[k];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(E,B.key,B)}}function l(E,M,k){return M&&c(E.prototype,M),E}function f(E){return function(){var M=m(E),k;if(p()){var B=m(this).constructor;k=Reflect.construct(M,arguments,B)}else k=M.apply(this,arguments);return d(this,k)}}function d(E,M){return M&&(a(M)==="object"||typeof M=="function")?M:h(E)}function h(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function m(E){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},m(E)}function S(E,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(M&&M.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),M&&v(E,M)}function v(E,M){return v=Object.setPrototypeOf||function(B,O){return B.__proto__=O,B},v(E,M)}function R(E,M,k){return M in E?Object.defineProperty(E,M,{value:k,enumerable:!0,configurable:!0,writable:!0}):E[M]=k,E}var w=function(E){S(k,E);var M=f(k);function k(){return u(this,k),M.apply(this,arguments)}return l(k,[{key:"shouldComponentUpdate",value:function(O){return(0,r.default)(O,this.props)}},{key:"render",value:function(){var O=this.props,b=O.section,x=O.renderSectionTitle,P=O.theme,$=O.sectionKeyPrefix,N=x(b);return N?t.default.createElement("div",P("".concat($,"title"),"sectionTitle"),N):null}}]),k}(t.Component);e.default=w,R(w,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})})(go);var po={},mo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(A),n=s(Zt),r=s(Un);function s(b){return b&&b.__esModule?b:{default:b}}function i(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return i=function(){return b},b}function o(b){if(b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var x=i();if(x&&x.has(b))return x.get(b);var P={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in b)if(Object.prototype.hasOwnProperty.call(b,N)){var j=$?Object.getOwnPropertyDescriptor(b,N):null;j&&(j.get||j.set)?Object.defineProperty(P,N,j):P[N]=b[N]}return P.default=b,x&&x.set(b,P),P}function a(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(P){return typeof P}:a=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},a(b)}function u(){return u=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var P=arguments[x];for(var $ in P)Object.prototype.hasOwnProperty.call(P,$)&&(b[$]=P[$])}return b},u.apply(this,arguments)}function c(b,x){var P=Object.keys(b);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(b);x&&($=$.filter(function(N){return Object.getOwnPropertyDescriptor(b,N).enumerable})),P.push.apply(P,$)}return P}function l(b){for(var x=1;x<arguments.length;x++){var P=arguments[x]!=null?arguments[x]:{};x%2?c(Object(P),!0).forEach(function($){B(b,$,P[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(P)):c(Object(P)).forEach(function($){Object.defineProperty(b,$,Object.getOwnPropertyDescriptor(P,$))})}return b}function f(b,x){if(b==null)return{};var P=d(b,x),$,N;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(b);for(N=0;N<j.length;N++)$=j[N],!(x.indexOf($)>=0)&&Object.prototype.propertyIsEnumerable.call(b,$)&&(P[$]=b[$])}return P}function d(b,x){if(b==null)return{};var P={},$=Object.keys(b),N,j;for(j=0;j<$.length;j++)N=$[j],!(x.indexOf(N)>=0)&&(P[N]=b[N]);return P}function h(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function p(b,x){for(var P=0;P<x.length;P++){var $=x[P];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(b,$.key,$)}}function m(b,x,P){return x&&p(b.prototype,x),b}function S(b){return function(){var x=E(b),P;if(w()){var $=E(this).constructor;P=Reflect.construct(x,arguments,$)}else P=x.apply(this,arguments);return v(this,P)}}function v(b,x){return x&&(a(x)==="object"||typeof x=="function")?x:R(b)}function R(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(b){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},E(b)}function M(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&k(b,x)}function k(b,x){return k=Object.setPrototypeOf||function($,N){return $.__proto__=N,$},k(b,x)}function B(b,x,P){return x in b?Object.defineProperty(b,x,{value:P,enumerable:!0,configurable:!0,writable:!0}):b[x]=P,b}var O=function(b){M(P,b);var x=S(P);function P(){var $;h(this,P);for(var N=arguments.length,j=new Array(N),V=0;V<N;V++)j[V]=arguments[V];return $=x.call.apply(x,[this].concat(j)),B(R($),"storeItemReference",function(G){G!==null&&($.item=G)}),B(R($),"onMouseEnter",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onMouseEnter(G,{sectionIndex:_,itemIndex:y})}),B(R($),"onMouseLeave",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onMouseLeave(G,{sectionIndex:_,itemIndex:y})}),B(R($),"onMouseDown",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onMouseDown(G,{sectionIndex:_,itemIndex:y})}),B(R($),"onClick",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onClick(G,{sectionIndex:_,itemIndex:y})}),$}return m(P,[{key:"shouldComponentUpdate",value:function(N){return(0,r.default)(N,this.props,["renderItemData"])}},{key:"render",value:function(){var N=this.props,j=N.isHighlighted,V=N.item,G=N.renderItem,K=N.renderItemData,_=f(N,["isHighlighted","item","renderItem","renderItemData"]);return delete _.sectionIndex,delete _.itemIndex,typeof _.onMouseEnter=="function"&&(_.onMouseEnter=this.onMouseEnter),typeof _.onMouseLeave=="function"&&(_.onMouseLeave=this.onMouseLeave),typeof _.onMouseDown=="function"&&(_.onMouseDown=this.onMouseDown),typeof _.onClick=="function"&&(_.onClick=this.onClick),t.default.createElement("li",u({role:"option"},_,{ref:this.storeItemReference}),G(V,l({isHighlighted:j},K)))}}]),P}(t.Component);e.default=O,B(O,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})})(mo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(A),n=i(Zt),r=i(mo),s=i(Un);function i(O){return O&&O.__esModule?O:{default:O}}function o(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return o=function(){return O},O}function a(O){if(O&&O.__esModule)return O;if(O===null||u(O)!=="object"&&typeof O!="function")return{default:O};var b=o();if(b&&b.has(O))return b.get(O);var x={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in O)if(Object.prototype.hasOwnProperty.call(O,$)){var N=P?Object.getOwnPropertyDescriptor(O,$):null;N&&(N.get||N.set)?Object.defineProperty(x,$,N):x[$]=O[$]}return x.default=O,b&&b.set(O,x),x}function u(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(x){return typeof x}:u=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(O)}function c(){return c=Object.assign||function(O){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&(O[P]=x[P])}return O},c.apply(this,arguments)}function l(O,b){var x=Object.keys(O);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(O);b&&(P=P.filter(function($){return Object.getOwnPropertyDescriptor(O,$).enumerable})),x.push.apply(x,P)}return x}function f(O){for(var b=1;b<arguments.length;b++){var x=arguments[b]!=null?arguments[b]:{};b%2?l(Object(x),!0).forEach(function(P){k(O,P,x[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):l(Object(x)).forEach(function(P){Object.defineProperty(O,P,Object.getOwnPropertyDescriptor(x,P))})}return O}function d(O,b){if(!(O instanceof b))throw new TypeError("Cannot call a class as a function")}function h(O,b){for(var x=0;x<b.length;x++){var P=b[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(O,P.key,P)}}function p(O,b,x){return b&&h(O.prototype,b),O}function m(O){return function(){var b=w(O),x;if(R()){var P=w(this).constructor;x=Reflect.construct(b,arguments,P)}else x=b.apply(this,arguments);return S(this,x)}}function S(O,b){return b&&(u(b)==="object"||typeof b=="function")?b:v(O)}function v(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},w(O)}function E(O,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(b&&b.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),b&&M(O,b)}function M(O,b){return M=Object.setPrototypeOf||function(P,$){return P.__proto__=$,P},M(O,b)}function k(O,b,x){return b in O?Object.defineProperty(O,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):O[b]=x,O}var B=function(O){E(x,O);var b=m(x);function x(){var P;d(this,x);for(var $=arguments.length,N=new Array($),j=0;j<$;j++)N[j]=arguments[j];return P=b.call.apply(b,[this].concat(N)),k(v(P),"storeHighlightedItemReference",function(V){P.props.onHighlightedItemChange(V===null?null:V.item)}),P}return p(x,[{key:"shouldComponentUpdate",value:function($){return(0,s.default)($,this.props,["itemProps"])}},{key:"render",value:function(){var $=this,N=this.props,j=N.items,V=N.itemProps,G=N.renderItem,K=N.renderItemData,_=N.sectionIndex,y=N.highlightedItemIndex,I=N.getItemId,F=N.theme,g=N.keyPrefix,C=_===null?g:"".concat(g,"section-").concat(_,"-"),T=typeof V=="function";return t.default.createElement("ul",c({role:"listbox"},F("".concat(C,"items-list"),"itemsList")),j.map(function(D,z){var Y=z===0,W=z===y,H="".concat(C,"item-").concat(z),Z=T?V({sectionIndex:_,itemIndex:z}):V,ne=f({id:I(_,z),"aria-selected":W},F(H,"item",Y&&"itemFirst",W&&"itemHighlighted"),{},Z);return W&&(ne.ref=$.storeHighlightedItemReference),t.default.createElement(r.default,c({},ne,{sectionIndex:_,isHighlighted:W,itemIndex:z,item:D,renderItem:G,renderItemData:K}))}))}}]),x}(t.Component);e.default=B,k(B,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),k(B,"defaultProps",{sectionIndex:null})})(po);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(A),n=a(Zt),r=a(Wc),s=a(Qc),i=a(go),o=a(po);function a(y){return y&&y.__esModule?y:{default:y}}function u(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return u=function(){return y},y}function c(y){if(y&&y.__esModule)return y;if(y===null||R(y)!=="object"&&typeof y!="function")return{default:y};var I=u();if(I&&I.has(y))return I.get(y);var F={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in y)if(Object.prototype.hasOwnProperty.call(y,C)){var T=g?Object.getOwnPropertyDescriptor(y,C):null;T&&(T.get||T.set)?Object.defineProperty(F,C,T):F[C]=y[C]}return F.default=y,I&&I.set(y,F),F}function l(y,I){var F=Object.keys(y);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(y);I&&(g=g.filter(function(C){return Object.getOwnPropertyDescriptor(y,C).enumerable})),F.push.apply(F,g)}return F}function f(y){for(var I=1;I<arguments.length;I++){var F=arguments[I]!=null?arguments[I]:{};I%2?l(Object(F),!0).forEach(function(g){N(y,g,F[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(F)):l(Object(F)).forEach(function(g){Object.defineProperty(y,g,Object.getOwnPropertyDescriptor(F,g))})}return y}function d(y,I){return v(y)||S(y,I)||p(y,I)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(y,I){if(y){if(typeof y=="string")return m(y,I);var F=Object.prototype.toString.call(y).slice(8,-1);if(F==="Object"&&y.constructor&&(F=y.constructor.name),F==="Map"||F==="Set")return Array.from(F);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return m(y,I)}}function m(y,I){(I==null||I>y.length)&&(I=y.length);for(var F=0,g=new Array(I);F<I;F++)g[F]=y[F];return g}function S(y,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(y)))){var F=[],g=!0,C=!1,T=void 0;try{for(var D=y[Symbol.iterator](),z;!(g=(z=D.next()).done)&&(F.push(z.value),!(I&&F.length===I));g=!0);}catch(Y){C=!0,T=Y}finally{try{!g&&D.return!=null&&D.return()}finally{if(C)throw T}}return F}}function v(y){if(Array.isArray(y))return y}function R(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(F){return typeof F}:R=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},R(y)}function w(y,I){if(!(y instanceof I))throw new TypeError("Cannot call a class as a function")}function E(y,I){for(var F=0;F<I.length;F++){var g=I[F];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function M(y,I,F){return I&&E(y.prototype,I),y}function k(y){return function(){var I=x(y),F;if(b()){var g=x(this).constructor;F=Reflect.construct(I,arguments,g)}else F=I.apply(this,arguments);return B(this,F)}}function B(y,I){return I&&(R(I)==="object"||typeof I=="function")?I:O(y)}function O(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(y){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},x(y)}function P(y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(I&&I.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),I&&$(y,I)}function $(y,I){return $=Object.setPrototypeOf||function(g,C){return g.__proto__=C,g},$(y,I)}function N(y,I,F){return I in y?Object.defineProperty(y,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):y[I]=F,y}var j={},V=function(I){return t.default.createElement("input",I)},G=function(I){var F=I.containerProps,g=I.children;return t.default.createElement("div",F,g)},K={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},_=function(y){P(F,y);var I=k(F);function F(g){var C;return w(this,F),C=I.call(this,g),N(O(C),"storeInputReference",function(T){T!==null&&(C.input=T);var D=C.props.inputProps.ref;D&&(typeof D=="function"?D(T):R(D)==="object"&&Object.prototype.hasOwnProperty.call(D,"current")&&(D.current=T))}),N(O(C),"storeItemsContainerReference",function(T){T!==null&&(C.itemsContainer=T)}),N(O(C),"onHighlightedItemChange",function(T){C.highlightedItem=T}),N(O(C),"getItemId",function(T,D){if(D===null)return null;var z=C.props.id,Y=T===null?"":"section-".concat(T);return"react-autowhatever-".concat(z,"-").concat(Y,"-item-").concat(D)}),N(O(C),"onFocus",function(T){var D=C.props.inputProps;C.setState({isInputFocused:!0}),D.onFocus&&D.onFocus(T)}),N(O(C),"onBlur",function(T){var D=C.props.inputProps;C.setState({isInputFocused:!1}),D.onBlur&&D.onBlur(T)}),N(O(C),"onKeyDown",function(T){var D=C.props,z=D.inputProps,Y=D.highlightedSectionIndex,W=D.highlightedItemIndex,H=T.keyCode;switch(H){case 40:case 38:{var Z=H===40?"next":"prev",ne=C.sectionIterator[Z]([Y,W]),se=d(ne,2),ie=se[0],Ze=se[1];z.onKeyDown(T,{newHighlightedSectionIndex:ie,newHighlightedItemIndex:Ze});break}default:z.onKeyDown(T,{highlightedSectionIndex:Y,highlightedItemIndex:W})}}),C.highlightedItem=null,C.state={isInputFocused:!1},C.setSectionsItems(g),C.setSectionIterator(g),C.setTheme(g),C}return M(F,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(C){C.items!==this.props.items&&this.setSectionsItems(C),(C.items!==this.props.items||C.multiSection!==this.props.multiSection)&&this.setSectionIterator(C),C.theme!==this.props.theme&&this.setTheme(C)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(C){C.multiSection&&(this.sectionsItems=C.items.map(function(T){return C.getSectionItems(T)}),this.sectionsLengths=this.sectionsItems.map(function(T){return T.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(T){return T===0}))}},{key:"setSectionIterator",value:function(C){this.sectionIterator=(0,r.default)({multiSection:C.multiSection,data:C.multiSection?this.sectionsLengths:C.items.length})}},{key:"setTheme",value:function(C){this.theme=(0,s.default)(C.theme)}},{key:"renderSections",value:function(){var C=this;if(this.allSectionsAreEmpty)return null;var T=this.theme,D=this.props,z=D.id,Y=D.items,W=D.renderItem,H=D.renderItemData,Z=D.renderSectionTitle,ne=D.highlightedSectionIndex,se=D.highlightedItemIndex,ie=D.itemProps;return Y.map(function(Ze,fe){var at="react-autowhatever-".concat(z,"-"),ct="".concat(at,"section-").concat(fe,"-"),Me=fe===0;return t.default.createElement("div",T("".concat(ct,"container"),"sectionContainer",Me&&"sectionContainerFirst"),t.default.createElement(i.default,{section:Ze,renderSectionTitle:Z,theme:T,sectionKeyPrefix:ct}),t.default.createElement(o.default,{items:C.sectionsItems[fe],itemProps:ie,renderItem:W,renderItemData:H,sectionIndex:fe,highlightedItemIndex:ne===fe?se:null,onHighlightedItemChange:C.onHighlightedItemChange,getItemId:C.getItemId,theme:T,keyPrefix:at,ref:C.storeItemsListReference}))})}},{key:"renderItems",value:function(){var C=this.props.items;if(C.length===0)return null;var T=this.theme,D=this.props,z=D.id,Y=D.renderItem,W=D.renderItemData,H=D.highlightedSectionIndex,Z=D.highlightedItemIndex,ne=D.itemProps;return t.default.createElement(o.default,{items:C,itemProps:ne,renderItem:Y,renderItemData:W,highlightedItemIndex:H===null?Z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:T,keyPrefix:"react-autowhatever-".concat(z,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var C=this.highlightedItem;if(C){var T=this.itemsContainer,D=C.offsetParent===T?C.offsetTop:C.offsetTop-T.offsetTop,z=T.scrollTop;D<z?z=D:D+C.offsetHeight>z+T.offsetHeight&&(z=D+C.offsetHeight-T.offsetHeight),z!==T.scrollTop&&(T.scrollTop=z)}}},{key:"render",value:function(){var C=this.theme,T=this.props,D=T.id,z=T.multiSection,Y=T.renderInputComponent,W=T.renderItemsContainer,H=T.highlightedSectionIndex,Z=T.highlightedItemIndex,ne=this.state.isInputFocused,se=z?this.renderSections():this.renderItems(),ie=se!==null,Ze=this.getItemId(H,Z),fe="react-autowhatever-".concat(D),at=f({role:"combobox","aria-haspopup":"listbox","aria-owns":fe,"aria-expanded":ie},C("react-autowhatever-".concat(D,"-container"),"container",ie&&"containerOpen"),{},this.props.containerProps),ct=Y(f({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":fe,"aria-activedescendant":Ze},C("react-autowhatever-".concat(D,"-input"),"input",ie&&"inputOpen",ne&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),Me=W({containerProps:f({id:fe,role:"listbox"},C("react-autowhatever-".concat(D,"-items-container"),"itemsContainer",ie&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:se});return t.default.createElement("div",at,ct,Me)}}]),F}(t.Component);e.default=_,N(_,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),N(_,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:V,renderItemsContainer:G,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:j,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:j,inputProps:j,itemProps:j,highlightedSectionIndex:null,highlightedItemIndex:null,theme:K})})(ho);var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.mapToAutowhateverTheme=bt.defaultTheme=void 0;var Xc={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};bt.defaultTheme=Xc;var Jc=function(t){var n={};for(var r in t)switch(r){case"suggestionsContainer":n.itemsContainer=t[r];break;case"suggestionsContainerOpen":n.itemsContainerOpen=t[r];break;case"suggestion":n.item=t[r];break;case"suggestionFirst":n.itemFirst=t[r];break;case"suggestionHighlighted":n.itemHighlighted=t[r];break;case"suggestionsList":n.itemsList=t[r];break;default:n[r]=t[r]}return n};bt.mapToAutowhateverTheme=Jc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(A),n=o(Zt),r=o(qc),s=o(ho),i=bt;function o(_){return _&&_.__esModule?_:{default:_}}function a(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return a=function(){return _},_}function u(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var y=a();if(y&&y.has(_))return y.get(_);var I={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in _)if(Object.prototype.hasOwnProperty.call(_,g)){var C=F?Object.getOwnPropertyDescriptor(_,g):null;C&&(C.get||C.set)?Object.defineProperty(I,g,C):I[g]=_[g]}return I.default=_,y&&y.set(_,I),I}function c(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(I){return typeof I}:c=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},c(_)}function l(_,y){var I=Object.keys(_);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(_);y&&(F=F.filter(function(g){return Object.getOwnPropertyDescriptor(_,g).enumerable})),I.push.apply(I,F)}return I}function f(_){for(var y=1;y<arguments.length;y++){var I=arguments[y]!=null?arguments[y]:{};y%2?l(Object(I),!0).forEach(function(F){k(_,F,I[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(I)):l(Object(I)).forEach(function(F){Object.defineProperty(_,F,Object.getOwnPropertyDescriptor(I,F))})}return _}function d(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function h(_,y){for(var I=0;I<y.length;I++){var F=y[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(_,F.key,F)}}function p(_,y,I){return y&&h(_.prototype,y),_}function m(_){return function(){var y=w(_),I;if(R()){var F=w(this).constructor;I=Reflect.construct(y,arguments,F)}else I=y.apply(this,arguments);return S(this,I)}}function S(_,y){return y&&(c(y)==="object"||typeof y=="function")?y:v(_)}function v(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(_){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},w(_)}function E(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),y&&M(_,y)}function M(_,y){return M=Object.setPrototypeOf||function(F,g){return F.__proto__=g,F},M(_,y)}function k(_,y,I){return y in _?Object.defineProperty(_,y,{value:I,enumerable:!0,configurable:!0,writable:!0}):_[y]=I,_}var B=function(){return!0},O=function(y){return y.trim().length>0},b=function(y){var I=y.containerProps,F=y.children;return t.default.createElement("div",I,F)},x="suggestions-revealed",P="suggestions-updated",$="suggestion-selected",N="input-focused",j="input-changed",V="input-blurred",G="escape-pressed",K=function(_){E(I,_);var y=m(I);function I(F){var g,C=F.alwaysRenderSuggestions;return d(this,I),g=y.call(this),k(v(g),"onDocumentMouseDown",function(T){g.justClickedOnSuggestionsContainer=!1;for(var D=T.detail&&T.detail.target||T.target;D!==null&&D!==document;){if(D.getAttribute&&D.getAttribute("data-suggestion-index")!==null)return;if(D===g.suggestionsContainer){g.justClickedOnSuggestionsContainer=!0;return}D=D.parentNode}}),k(v(g),"storeAutowhateverRef",function(T){T!==null&&(g.autowhatever=T)}),k(v(g),"onSuggestionMouseEnter",function(T,D){var z=D.sectionIndex,Y=D.itemIndex;g.updateHighlightedSuggestion(z,Y),T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!0),g.justMouseEntered=!0,setTimeout(function(){g.justMouseEntered=!1})}),k(v(g),"highlightFirstSuggestion",function(){g.updateHighlightedSuggestion(g.props.multiSection?0:null,0)}),k(v(g),"onDocumentMouseUp",function(){g.pressedSuggestion&&!g.justSelectedSuggestion&&g.input.focus(),g.pressedSuggestion=null}),k(v(g),"onSuggestionMouseDown",function(T){g.justSelectedSuggestion||(g.justSelectedSuggestion=!0,g.pressedSuggestion=T.target)}),k(v(g),"onSuggestionsClearRequested",function(){var T=g.props.onSuggestionsClearRequested;T&&T()}),k(v(g),"onSuggestionSelected",function(T,D){var z=g.props,Y=z.alwaysRenderSuggestions,W=z.onSuggestionSelected,H=z.onSuggestionsFetchRequested;W&&W(T,D);var Z=g.props.shouldKeepSuggestionsOnSelect(D.suggestion);Y||Z?H({value:D.suggestionValue,reason:$}):g.onSuggestionsClearRequested(),g.resetHighlightedSuggestion()}),k(v(g),"onSuggestionClick",function(T){var D=g.props,z=D.alwaysRenderSuggestions,Y=D.focusInputOnSuggestionClick,W=g.getSuggestionIndices(g.findSuggestionElement(T.target)),H=W.sectionIndex,Z=W.suggestionIndex,ne=g.getSuggestion(H,Z),se=g.props.getSuggestionValue(ne);g.maybeCallOnChange(T,se,"click"),g.onSuggestionSelected(T,{suggestion:ne,suggestionValue:se,suggestionIndex:Z,sectionIndex:H,method:"click"});var ie=g.props.shouldKeepSuggestionsOnSelect(ne);z||ie||g.closeSuggestions(),Y===!0?g.input.focus():g.onBlur(),setTimeout(function(){g.justSelectedSuggestion=!1})}),k(v(g),"onBlur",function(){var T=g.props,D=T.inputProps,z=T.shouldRenderSuggestions,Y=D.value,W=D.onBlur,H=g.getHighlightedSuggestion(),Z=z(Y,V);g.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Z}),W&&W(g.blurEvent,{highlightedSuggestion:H})}),k(v(g),"onSuggestionMouseLeave",function(T){g.resetHighlightedSuggestion(!1),g.justSelectedSuggestion&&T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!1)}),k(v(g),"onSuggestionTouchStart",function(){g.justSelectedSuggestion=!0}),k(v(g),"onSuggestionTouchMove",function(){g.justSelectedSuggestion=!1,g.pressedSuggestion=null,g.input.focus()}),k(v(g),"itemProps",function(T){var D=T.sectionIndex,z=T.itemIndex;return{"data-section-index":D,"data-suggestion-index":z,onMouseEnter:g.onSuggestionMouseEnter,onMouseLeave:g.onSuggestionMouseLeave,onMouseDown:g.onSuggestionMouseDown,onTouchStart:g.onSuggestionTouchStart,onTouchMove:g.onSuggestionTouchMove,onClick:g.onSuggestionClick}}),k(v(g),"renderSuggestionsContainer",function(T){var D=T.containerProps,z=T.children,Y=g.props.renderSuggestionsContainer;return Y({containerProps:D,children:z,query:g.getQuery()})}),g.state={isFocused:!1,isCollapsed:!C,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},g.justPressedUpDown=!1,g.justMouseEntered=!1,g.pressedSuggestion=null,g}return p(I,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(g){var C=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!g.highlightFirstSuggestion;(0,r.default)(g.suggestions,this.props.suggestions)?g.highlightFirstSuggestion&&g.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():C&&this.resetHighlightedSuggestion():this.willRenderSuggestions(g,P)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),C&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(g,C){var T=this.props,D=T.suggestions,z=T.onSuggestionHighlighted,Y=T.highlightFirstSuggestion;if(!(0,r.default)(D,g.suggestions)&&D.length>0&&Y){this.highlightFirstSuggestion();return}if(z){var W=this.getHighlightedSuggestion(),H=C.highlightedSuggestion;W!=H&&z({suggestion:W})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(g,C,T){var D=this;this.setState(function(z){var Y=z.valueBeforeUpDown;return C===null?Y=null:Y===null&&typeof T<"u"&&(Y=T),{highlightedSectionIndex:g,highlightedSuggestionIndex:C,highlightedSuggestion:C===null?null:D.getSuggestion(g,C),valueBeforeUpDown:Y}})}},{key:"resetHighlightedSuggestion",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(C){var T=C.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:g?null:T}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(g,C){var T=this.props,D=T.suggestions,z=T.multiSection,Y=T.getSectionSuggestions;return z?Y(D[g])[C]:D[C]}},{key:"getHighlightedSuggestion",value:function(){var g=this.state,C=g.highlightedSectionIndex,T=g.highlightedSuggestionIndex;return T===null?null:this.getSuggestion(C,T)}},{key:"getSuggestionValueByIndex",value:function(g,C){var T=this.props.getSuggestionValue;return T(this.getSuggestion(g,C))}},{key:"getSuggestionIndices",value:function(g){var C=g.getAttribute("data-section-index"),T=g.getAttribute("data-suggestion-index");return{sectionIndex:typeof C=="string"?parseInt(C,10):null,suggestionIndex:parseInt(T,10)}}},{key:"findSuggestionElement",value:function(g){var C=g;do{if(C.getAttribute&&C.getAttribute("data-suggestion-index")!==null)return C;C=C.parentNode}while(C!==null);throw console.error("Clicked element:",g),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(g,C,T){var D=this.props.inputProps,z=D.value,Y=D.onChange;C!==z&&Y(g,{newValue:C,method:T})}},{key:"willRenderSuggestions",value:function(g,C){var T=g.suggestions,D=g.inputProps,z=g.shouldRenderSuggestions,Y=D.value;return T.length>0&&z(Y,C)}},{key:"getQuery",value:function(){var g=this.props.inputProps,C=g.value,T=this.state.valueBeforeUpDown;return(T===null?C:T).trim()}},{key:"render",value:function(){var g=this,C=this.props,T=C.suggestions,D=C.renderInputComponent,z=C.onSuggestionsFetchRequested,Y=C.renderSuggestion,W=C.inputProps,H=C.multiSection,Z=C.renderSectionTitle,ne=C.id,se=C.getSectionSuggestions,ie=C.theme,Ze=C.getSuggestionValue,fe=C.alwaysRenderSuggestions,at=C.highlightFirstSuggestion,ct=C.containerProps,Me=this.state,Vo=Me.isFocused,cs=Me.isCollapsed,ls=Me.highlightedSectionIndex,fs=Me.highlightedSuggestionIndex,nn=Me.valueBeforeUpDown,rn=fe?B:this.props.shouldRenderSuggestions,lt=W.value,ds=W.onFocus,hs=W.onKeyDown,qo=this.willRenderSuggestions(this.props,"render"),sn=fe||Vo&&!cs&&qo,Wo=sn?T:[],zo=f({},W,{onFocus:function(re){if(!g.justSelectedSuggestion&&!g.justClickedOnSuggestionsContainer){var $e=rn(lt,N);g.setState({isFocused:!0,isCollapsed:!$e}),ds&&ds(re),$e&&z({value:lt,reason:N})}},onBlur:function(re){if(g.justClickedOnSuggestionsContainer){g.input.focus();return}g.blurEvent=re,g.justSelectedSuggestion||(g.onBlur(),g.onSuggestionsClearRequested())},onChange:function(re){var $e=re.target.value,Ot=rn($e,j);g.maybeCallOnChange(re,$e,"type"),g.suggestionsContainer&&(g.suggestionsContainer.scrollTop=0),g.setState(f({},at?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!Ot})),Ot?z({value:$e,reason:j}):g.onSuggestionsClearRequested()},onKeyDown:function(re,$e){var Ot=re.keyCode;switch(Ot){case 40:case 38:if(cs)rn(lt,x)&&(z({value:lt,reason:x}),g.revealSuggestions(),re.preventDefault());else if(T.length>0){var gs=$e.newHighlightedSectionIndex,zn=$e.newHighlightedItemIndex,Gn;zn===null?Gn=nn===null?lt:nn:Gn=g.getSuggestionValueByIndex(gs,zn),g.updateHighlightedSuggestion(gs,zn,lt),g.maybeCallOnChange(re,Gn,Ot===40?"down":"up"),re.preventDefault()}g.justPressedUpDown=!0,setTimeout(function(){g.justPressedUpDown=!1});break;case 13:{if(re.keyCode===229)break;var Kn=g.getHighlightedSuggestion();if(sn&&!fe&&g.closeSuggestions(),Kn!=null){re.preventDefault();var ps=Ze(Kn);g.maybeCallOnChange(re,ps,"enter"),g.onSuggestionSelected(re,{suggestion:Kn,suggestionValue:ps,suggestionIndex:fs,sectionIndex:ls,method:"enter"}),g.justSelectedSuggestion=!0,setTimeout(function(){g.justSelectedSuggestion=!1})}break}case 27:{sn&&re.preventDefault();var ms=sn&&!fe;if(nn===null){if(!ms){var Yn="";g.maybeCallOnChange(re,Yn,"escape"),rn(Yn,G)?z({value:Yn,reason:G}):g.onSuggestionsClearRequested()}}else g.maybeCallOnChange(re,nn,"escape");ms?(g.onSuggestionsClearRequested(),g.closeSuggestions()):g.resetHighlightedSuggestion();break}}hs&&hs(re)}}),Go={query:this.getQuery()};return t.default.createElement(s.default,{multiSection:H,items:Wo,renderInputComponent:D,renderItemsContainer:this.renderSuggestionsContainer,renderItem:Y,renderItemData:Go,renderSectionTitle:Z,getSectionItems:se,highlightedSectionIndex:ls,highlightedItemIndex:fs,containerProps:ct,inputProps:zo,itemProps:this.itemProps,theme:(0,i.mapToAutowhateverTheme)(ie),id:ne,ref:this.storeAutowhateverRef})}}]),I}(t.Component);e.default=K,k(K,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(y,I){var F=y[I];if(typeof F!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(y,I){var F=y[I];if(y.alwaysRenderSuggestions===!1&&typeof F!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(y,I){var F=y[I];if(!F)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(F,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(F,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(y,I){var F=y[I];if(y.multiSection===!0&&typeof F!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(y,I){var F=y[I];if(y.multiSection===!0&&typeof F!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),k(K,"defaultProps",{renderSuggestionsContainer:b,shouldRenderSuggestions:O,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:i.defaultTheme,id:"1",containerProps:{}})})(ao);var Zc=ao.default;const el=Ko(Zc),tl=e=>{const[t,n]=A.useState([]),r=({value:i})=>n(e.getSuggestions(i)),s=(i,{isHighlighted:o})=>q.jsx("div",{"data-highlighted":o?"true":void 0,children:i});return q.jsx(el,{suggestions:t,onSuggestionSelected:(i,o)=>e.onSelect&&e.onSelect(o.suggestion),onSuggestionsFetchRequested:r,onSuggestionsClearRequested:()=>n([]),getSuggestionValue:i=>i,renderSuggestionsContainer:({containerProps:i,children:o})=>A.Children.toArray(o).length>0?A.createElement("div",{...i,key:i.key,className:"react-autosuggest"},o):null,renderSuggestion:s,containerProps:{className:"relative"},inputProps:{disabled:e.disabled,placeholder:e.placeholder,value:e.value||"",onBlur:e.onBlur,onChange:(i,{newValue:o})=>e.onChange&&e.onChange(o),onFocus:e.onFocus,onKeyDown:e.onKeyDown}})};var Ye={};Ye.remove=nl;var pn=[{base:" ",chars:""},{base:"0",chars:""},{base:"A",chars:""},{base:"AA",chars:""},{base:"AE",chars:""},{base:"AO",chars:""},{base:"AU",chars:""},{base:"AV",chars:""},{base:"AY",chars:""},{base:"B",chars:""},{base:"C",chars:"C"},{base:"D",chars:""},{base:"Dh",chars:""},{base:"DZ",chars:""},{base:"Dz",chars:""},{base:"E",chars:""},{base:"F",chars:""},{base:"G",chars:""},{base:"H",chars:""},{base:"I",chars:""},{base:"J",chars:""},{base:"K",chars:""},{base:"L",chars:""},{base:"LJ",chars:""},{base:"Lj",chars:""},{base:"M",chars:""},{base:"N",chars:""},{base:"NJ",chars:""},{base:"Nj",chars:""},{base:"O",chars:""},{base:"OE",chars:""},{base:"OI",chars:""},{base:"OO",chars:""},{base:"OU",chars:""},{base:"P",chars:""},{base:"Q",chars:""},{base:"R",chars:""},{base:"S",chars:""},{base:"T",chars:""},{base:"Th",chars:""},{base:"TZ",chars:""},{base:"U",chars:""},{base:"V",chars:""},{base:"VY",chars:""},{base:"W",chars:""},{base:"X",chars:""},{base:"Y",chars:""},{base:"Z",chars:""},{base:"a",chars:""},{base:"aa",chars:""},{base:"ae",chars:""},{base:"ao",chars:""},{base:"au",chars:""},{base:"av",chars:""},{base:"ay",chars:""},{base:"b",chars:""},{base:"c",chars:""},{base:"d",chars:""},{base:"dh",chars:""},{base:"dz",chars:""},{base:"e",chars:""},{base:"f",chars:""},{base:"ff",chars:""},{base:"fi",chars:""},{base:"fl",chars:""},{base:"ffi",chars:""},{base:"ffl",chars:""},{base:"g",chars:""},{base:"h",chars:""},{base:"hv",chars:""},{base:"i",chars:""},{base:"j",chars:""},{base:"k",chars:""},{base:"l",chars:""},{base:"lj",chars:""},{base:"m",chars:""},{base:"n",chars:""},{base:"nj",chars:""},{base:"o",chars:""},{base:"oe",chars:""},{base:"oi",chars:""},{base:"oo",chars:""},{base:"ou",chars:""},{base:"p",chars:""},{base:"q",chars:""},{base:"r",chars:""},{base:"s",chars:""},{base:"ss",chars:""},{base:"t",chars:""},{base:"th",chars:""},{base:"tz",chars:""},{base:"u",chars:""},{base:"v",chars:""},{base:"vy",chars:""},{base:"w",chars:""},{base:"x",chars:""},{base:"y",chars:""},{base:"z",chars:""}],es={};for(var cn=0;cn<pn.length;cn+=1)for(var ni=pn[cn].chars,sr=0;sr<ni.length;sr+=1)es[ni[sr]]=pn[cn].base;function nl(e){return e.replace(/[^\u0000-\u007e]/g,function(t){return es[t]||t})}Ye.replacementList=pn;Ye.diacriticsMap=es;function Be(e){return Array.isArray?Array.isArray(e):bo(e)==="[object Array]"}const rl=1/0;function sl(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-rl?"-0":t}function il(e){return e==null?"":sl(e)}function Ae(e){return typeof e=="string"}function yo(e){return typeof e=="number"}function ol(e){return e===!0||e===!1||ul(e)&&bo(e)=="[object Boolean]"}function vo(e){return typeof e=="object"}function ul(e){return vo(e)&&e!==null}function pe(e){return e!=null}function ir(e){return!e.trim().length}function bo(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const al="Incorrect 'index' type",cl=e=>`Invalid value for key ${e}`,ll=e=>`Pattern length exceeds max of ${e}.`,fl=e=>`Missing ${e} property in key`,dl=e=>`Property 'weight' in key '${e}' must be a positive integer`,ri=Object.prototype.hasOwnProperty;class hl{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=So(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function So(e){let t=null,n=null,r=null,s=1,i=null;if(Ae(e)||Be(e))r=e,t=si(e),n=Or(e);else{if(!ri.call(e,"name"))throw new Error(fl("name"));const o=e.name;if(r=o,ri.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(dl(o));t=si(o),n=Or(o),i=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:i}}function si(e){return Be(e)?e:e.split(".")}function Or(e){return Be(e)?e.join("."):e}function gl(e,t){let n=[],r=!1;const s=(i,o,a)=>{if(pe(i))if(!o[a])n.push(i);else{let u=o[a];const c=i[u];if(!pe(c))return;if(a===o.length-1&&(Ae(c)||yo(c)||ol(c)))n.push(il(c));else if(Be(c)){r=!0;for(let l=0,f=c.length;l<f;l+=1)s(c[l],o,a+1)}else o.length&&s(c,o,a+1)}};return s(e,Ae(t)?t.split("."):t,0),r?n:n[0]}const pl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ml={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},yl={location:0,threshold:.6,distance:100},vl={useExtendedSearch:!1,getFn:gl,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var X={...ml,...pl,...yl,...vl};const bl=/[^ ]+/g;function Sl(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const i=s.match(bl).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class ts{constructor({getFn:t=X.getFn,fieldNormWeight:n=X.fieldNormWeight}={}){this.norm=Sl(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ae(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ae(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!pe(t)||ir(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(pe(o)){if(Be(o)){let a=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:c,value:l}=u.pop();if(pe(l))if(Ae(l)&&!ir(l)){let f={v:l,i:c,n:this.norm.get(l)};a.push(f)}else Be(l)&&l.forEach((f,d)=>{u.push({nestedArrIndex:d,value:f})})}r.$[i]=a}else if(Ae(o)&&!ir(o)){let a={v:o,n:this.norm.get(o)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function wo(e,t,{getFn:n=X.getFn,fieldNormWeight:r=X.fieldNormWeight}={}){const s=new ts({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(So)),s.setSources(t),s.create(),s}function wl(e,{getFn:t=X.getFn,fieldNormWeight:n=X.fieldNormWeight}={}){const{keys:r,records:s}=e,i=new ts({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function ln(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=X.distance,ignoreLocation:i=X.ignoreLocation}={}){const o=t/e.length;if(i)return o;const a=Math.abs(r-n);return s?o+a/s:a?1:o}function El(e=[],t=X.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=e.length;i<o;i+=1){let a=e[i];a&&r===-1?r=i:!a&&r!==-1&&(s=i-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const et=32;function xl(e,t,n,{location:r=X.location,distance:s=X.distance,threshold:i=X.threshold,findAllMatches:o=X.findAllMatches,minMatchCharLength:a=X.minMatchCharLength,includeMatches:u=X.includeMatches,ignoreLocation:c=X.ignoreLocation}={}){if(t.length>et)throw new Error(ll(et));const l=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=i,p=d;const m=a>1||u,S=m?Array(f):[];let v;for(;(v=e.indexOf(t,p))>-1;){let B=ln(t,{currentLocation:v,expectedLocation:d,distance:s,ignoreLocation:c});if(h=Math.min(B,h),p=v+l,m){let O=0;for(;O<l;)S[v+O]=1,O+=1}}p=-1;let R=[],w=1,E=l+f;const M=1<<l-1;for(let B=0;B<l;B+=1){let O=0,b=E;for(;O<b;)ln(t,{errors:B,currentLocation:d+b,expectedLocation:d,distance:s,ignoreLocation:c})<=h?O=b:E=b,b=Math.floor((E-O)/2+O);E=b;let x=Math.max(1,d-b+1),P=o?f:Math.min(d+b,f)+l,$=Array(P+2);$[P+1]=(1<<B)-1;for(let j=P;j>=x;j-=1){let V=j-1,G=n[e.charAt(V)];if(m&&(S[V]=+!!G),$[j]=($[j+1]<<1|1)&G,B&&($[j]|=(R[j+1]|R[j])<<1|1|R[j+1]),$[j]&M&&(w=ln(t,{errors:B,currentLocation:V,expectedLocation:d,distance:s,ignoreLocation:c}),w<=h)){if(h=w,p=V,p<=d)break;x=Math.max(1,2*d-p)}}if(ln(t,{errors:B+1,currentLocation:d,expectedLocation:d,distance:s,ignoreLocation:c})>h)break;R=$}const k={isMatch:p>=0,score:Math.max(.001,w)};if(m){const B=El(S,a);B.length?u&&(k.indices=B):k.isMatch=!1}return k}function _l(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class Eo{constructor(t,{location:n=X.location,threshold:r=X.threshold,distance:s=X.distance,includeMatches:i=X.includeMatches,findAllMatches:o=X.findAllMatches,minMatchCharLength:a=X.minMatchCharLength,isCaseSensitive:u=X.isCaseSensitive,ignoreLocation:c=X.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(d,h)=>{this.chunks.push({pattern:d,alphabet:_l(d),startIndex:h})},f=this.pattern.length;if(f>et){let d=0;const h=f%et,p=f-h;for(;d<p;)l(this.pattern.substr(d,et),d),d+=et;if(h){const m=f-et;l(this.pattern.substr(m),m)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:s,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,ignoreLocation:c}=this.options;let l=[],f=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:S})=>{const{isMatch:v,score:R,indices:w}=xl(t,p,m,{location:s+S,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,includeMatches:r,ignoreLocation:c});v&&(d=!0),f+=R,v&&w&&(l=[...l,...w])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=l),h}}class Xe{constructor(t){this.pattern=t}static isMultiMatch(t){return ii(t,this.multiRegex)}static isSingleMatch(t){return ii(t,this.singleRegex)}search(){}}function ii(e,t){const n=e.match(t);return n?n[1]:null}class Ol extends Xe{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Il extends Xe{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Cl extends Xe{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Al extends Xe{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Rl extends Xe{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Pl extends Xe{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class xo extends Xe{constructor(t,{location:n=X.location,threshold:r=X.threshold,distance:s=X.distance,includeMatches:i=X.includeMatches,findAllMatches:o=X.findAllMatches,minMatchCharLength:a=X.minMatchCharLength,isCaseSensitive:u=X.isCaseSensitive,ignoreLocation:c=X.ignoreLocation}={}){super(t),this._bitapSearch=new Eo(t,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class _o extends Xe{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Ir=[Ol,_o,Cl,Al,Pl,Rl,Il,xo],oi=Ir.length,Fl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Tl="|";function Dl(e,t={}){return e.split(Tl).map(n=>{let r=n.trim().split(Fl).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const a=r[i];let u=!1,c=-1;for(;!u&&++c<oi;){const l=Ir[c];let f=l.isMultiMatch(a);f&&(s.push(new l(f,t)),u=!0)}if(!u)for(c=-1;++c<oi;){const l=Ir[c];let f=l.isSingleMatch(a);if(f){s.push(new l(f,t));break}}}return s})}const Ml=new Set([xo.type,_o.type]);class $l{constructor(t,{isCaseSensitive:n=X.isCaseSensitive,includeMatches:r=X.includeMatches,minMatchCharLength:s=X.minMatchCharLength,ignoreLocation:i=X.ignoreLocation,findAllMatches:o=X.findAllMatches,location:a=X.location,threshold:u=X.threshold,distance:c=X.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:a,threshold:u,distance:c},this.pattern=n?t:t.toLowerCase(),this.query=Dl(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0,o=[],a=0;for(let u=0,c=n.length;u<c;u+=1){const l=n[u];o.length=0,i=0;for(let f=0,d=l.length;f<d;f+=1){const h=l[f],{isMatch:p,indices:m,score:S}=h.search(t);if(p){if(i+=1,a+=S,r){const v=h.constructor.type;Ml.has(v)?o=[...o,...m]:o.push(m)}}else{a=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:a/i};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Cr=[];function kl(...e){Cr.push(...e)}function Ar(e,t){for(let n=0,r=Cr.length;n<r;n+=1){let s=Cr[n];if(s.condition(e,t))return new s(e,t)}return new Eo(e,t)}const xn={AND:"$and",OR:"$or"},Rr={PATH:"$path",PATTERN:"$val"},Pr=e=>!!(e[xn.AND]||e[xn.OR]),jl=e=>!!e[Rr.PATH],Nl=e=>!Be(e)&&vo(e)&&!Pr(e),ui=e=>({[xn.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Oo(e,t,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=jl(s);if(!o&&i.length>1&&!Pr(s))return r(ui(s));if(Nl(s)){const u=o?s[Rr.PATH]:i[0],c=o?s[Rr.PATTERN]:s[u];if(!Ae(c))throw new Error(cl(u));const l={keyId:Or(u),pattern:c};return n&&(l.searcher=Ar(c,t)),l}let a={children:[],operator:i[0]};return i.forEach(u=>{const c=s[u];Be(c)&&c.forEach(l=>{a.children.push(r(l))})}),a};return Pr(e)||(e=ui(e)),r(e)}function Bl(e,{ignoreFieldNorm:t=X.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const a=s?s.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:i))}),n.score=r})}function Ll(e,t){const n=e.matches;t.matches=[],pe(n)&&n.forEach(r=>{if(!pe(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Ul(e,t){t.score=e.score}function Hl(e,t,{includeMatches:n=X.includeMatches,includeScore:r=X.includeScore}={}){const s=[];return n&&s.push(Ll),r&&s.push(Ul),e.map(i=>{const{idx:o}=i,a={item:t[o],refIndex:o};return s.length&&s.forEach(u=>{u(i,a)}),a})}class Je{constructor(t,n={},r){this.options={...X,...n},this.options.useExtendedSearch,this._keyStore=new hl(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof ts))throw new Error(al);this._myIndex=n||wo(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let u=Ae(t)?Ae(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Bl(u,{ignoreFieldNorm:a}),i&&u.sort(o),yo(n)&&n>-1&&(u=u.slice(0,n)),Hl(u,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=Ar(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:a})=>{if(!pe(i))return;const{isMatch:u,score:c,indices:l}=n.searchIn(i);u&&s.push({item:i,idx:o,matches:[{score:c,value:i,norm:a,indices:l}]})}),s}_searchLogical(t){const n=Oo(t,this.options),r=(a,u,c)=>{if(!a.children){const{keyId:f,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:d});return h&&h.length?[{idx:c,item:u,matches:h}]:[]}const l=[];for(let f=0,d=a.children.length;f<d;f+=1){const h=a.children[f],p=r(h,u,c);if(p.length)l.push(...p);else if(a.operator===xn.AND)return[]}return l},s=this._myIndex.records,i={},o=[];return s.forEach(({$:a,i:u})=>{if(pe(a)){let c=r(n,a,u);c.length&&(i[u]||(i[u]={idx:u,item:a,matches:[]},o.push(i[u])),c.forEach(({matches:l})=>{i[u].matches.push(...l)}))}}),o}_searchObjectList(t){const n=Ar(t,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:a})=>{if(!pe(o))return;let u=[];r.forEach((c,l)=>{u.push(...this._findMatches({key:c,value:o[l],searcher:n}))}),u.length&&i.push({idx:a,item:o,matches:u})}),i}_findMatches({key:t,value:n,searcher:r}){if(!pe(n))return[];let s=[];if(Be(n))n.forEach(({v:i,i:o,n:a})=>{if(!pe(i))return;const{isMatch:u,score:c,indices:l}=r.searchIn(i);u&&s.push({score:c,key:t,value:i,idx:o,norm:a,indices:l})});else{const{v:i,n:o}=n,{isMatch:a,score:u,indices:c}=r.searchIn(i);a&&s.push({score:u,key:t,value:i,norm:o,indices:c})}return s}}Je.version="7.0.0";Je.createIndex=wo;Je.parseIndex=wl;Je.config=X;Je.parseQuery=Oo;kl($l);const Io=.3,Vl=e=>{const n=[...new Set(e.reduce((r,s)=>{const i=s.bodies.filter(o=>o.purpose==="tagging"&&o.value);return[...r,...i.map(o=>o.value)]},[]))].map(r=>({value:r,normalized:Ye.remove(r)}));return new Je(n,{keys:["normalized"],shouldSort:!0,threshold:Io})},ql=()=>fetch("/thesaurus/all-concepts-compact.json").then(e=>e.json()).then(e=>{e.sort();const t=e.map(n=>({value:n,normalized:Ye.remove(n)}));return new Je(t,{keys:["normalized"],shouldSort:!0,threshold:Io})}),Wl=(e,t="THESAURUS")=>{const[n,r]=A.useState(),s=A.useMemo(()=>new Map(e.map(u=>[u.id,u])),[e]);A.useEffect(()=>{if(t==="FROM_ANNOTATIONS"){const u=Vl(e);r(u)}else ql().then(r)},[t,e]);const i=A.useMemo(()=>{const u=e.map(c=>{const l=c.id,f=c.bodies.filter(d=>d.purpose==="tagging"&&d.value).map(d=>({value:d.value,normalized:Ye.remove(d.value)}));return{annotationId:l,tags:f}}).filter(c=>c.tags.length>0);return new Je(u,{keys:["tags.normalized"],shouldSort:!0,threshold:0})},[e]);return{search:(u,c)=>i.search(Ye.remove(u),{limit:c||500}).map(l=>s.get(l.item.annotationId)).filter(Boolean),getSuggestions:(u,c)=>n?n.search(Ye.remove(u),{limit:c||10}).map(l=>l.item.value):[]}},zl=e=>{const t=uu(),[n,r]=A.useState(!0),{search:s,getSuggestions:i}=Wl(t),[o,a]=A.useState(""),[u,c]=A.useState(),[l,f]=A.useState(0),[d,h]=A.useState(!1),p=Jr([n],{from:{maxWidth:0,opacity:0},enter:{maxWidth:120,opacity:1},leave:{maxWidth:0,opacity:1},config:{duration:250,easing:$n.easeInOutCubic}});A.useEffect(()=>{if(o){const w=s(o);e.sorter&&w.sort(e.sorter),c(w),w.length>0?f(1):f(0),e.onSearch(w)}else c(void 0),f(1),e.onSearch([])},[o,e.sorter]),A.useEffect(()=>{if(!l||!u)return;const w=u[l-1];e.onHighlightResult(w)},[u,l]);const m=w=>{if(!u)return;const E=Math.min(Math.max(1,l+w),u.length);f(E)},S=()=>{a(""),c(void 0),f(1),r(!0),e.onClear()},v=w=>{w.key==="Enter"?d?m(1):h(!0):h(!1)},R=()=>{o||r(!0)};return q.jsxs("div",{className:"annotation-search",children:[q.jsx(wa,{size:20}),q.jsxs("div",{className:"searchbox-wrapper",children:[q.jsx(tl,{placeholder:"Search",value:o,onChange:a,onFocus:()=>r(!1),onBlur:R,onKeyDown:v,getSuggestions:i}),u&&q.jsxs("div",{className:"result-count",children:[l,"/",u.length]})]}),p((w,E)=>!E&&q.jsx(Zr.div,{style:w,className:"collapsible",children:q.jsxs("div",{className:"actions",children:[q.jsx("button",{onClick:()=>m(-1),children:q.jsx(ba,{size:18})}),q.jsx("button",{onClick:()=>m(1),children:q.jsx(ya,{size:18})}),q.jsx("button",{onClick:S,children:q.jsx(kr,{size:18,strokeWidth:2.2})})]})}))]})},ad=e=>{const[t,n]=A.useState([]);return A.useEffect(()=>{e.onSearch(t)},[t]),q.jsxs("header",{children:[q.jsxs("div",{className:"header-left",children:[q.jsxs("a",{href:`../..${e.backToTab?`?tab=${e.backToTab}`:""}`,children:[q.jsx(va,{}),q.jsx("span",{children:"Home"})]}),q.jsx("a",{href:"../../about",children:"About"})]}),q.jsxs("div",{className:"header-right",children:[q.jsx(zl,{sorter:e.searchSorter,onClear:e.onClearSearch,onHighlightResult:e.onHighlightSearchResult,onSearch:n}),q.jsx("button",{className:e.isRelatedVersesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedVerses,children:q.jsx(ma,{size:18})}),q.jsx("button",{className:e.isRelatedImagesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedImages,children:q.jsx(Sa,{size:18})})]})]})},Co=e=>e.bodies.filter(t=>t.purpose==="tagging"&&t.value&&t.id).map(t=>({id:t.id,label:t.value})),Gl=(e,t)=>{const n=new Set(e.map(o=>o.id)),s=t.map(o=>o.id).filter(o=>n.has(o)),i=new Set([...e,...t]);return s.length/i.size},Ao=(e,t)=>{const n=(i,o)=>i.length===o.length&&i.every(a=>o.some(u=>u.id===a.id)),r=i=>{i.sort((o,a)=>a.common.length-o.common.length),i.forEach(o=>o.related.sort((a,u)=>u.score-a.score))},s=[];return t.forEach(i=>{const o=i.tags.filter(c=>e.some(l=>l.id===c.id)),a=Gl(e,i.tags),u=s.find(({common:c})=>n(c,o));u?u.related=[...u.related,{annotation:i,score:a}]:s.push({common:o,related:[{annotation:i,score:a}]})}),r(s),s},cd=(e,t)=>{const n=[...e].filter(i=>i.width>0&&i.height>0);let r,s=Number.MAX_VALUE;return n.forEach(i=>{const o=i.top+i.height/2,a=Math.abs(o-t.y);a<s&&(s=a,r=i)}),r},ld=e=>({length:1,item:t=>t===0?e:void 0,[Symbol.iterator]:function*(){for(let t=0;t<this.length;t++)yield this.item(t)}}),Kl=ke.createContext({}),Ro=!0;function Yl({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:s,circle:i,direction:o,duration:a,enableAnimation:u=Ro,customHighlightBackground:c}){const l={};return o==="rtl"&&(l["--animation-direction"]="reverse"),typeof a=="number"&&(l["--animation-duration"]=`${a}s`),u||(l["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(l.width=n),(typeof r=="string"||typeof r=="number")&&(l.height=r),(typeof s=="string"||typeof s=="number")&&(l.borderRadius=s),i&&(l.borderRadius="50%"),typeof e<"u"&&(l["--base-color"]=e),typeof t<"u"&&(l["--highlight-color"]=t),typeof c=="string"&&(l["--custom-highlight-background"]=c),l}function Ql({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:s,circle:i=!1,style:o,...a}){var u,c,l;const f=ke.useContext(Kl),d={...a};for(const[w,E]of Object.entries(a))typeof E>"u"&&delete d[w];const h={...f,...d,circle:i},p={...o,...Yl(h)};let m="react-loading-skeleton";n&&(m+=` ${n}`);const S=(u=h.inline)!==null&&u!==void 0?u:!1,v=[],R=Math.ceil(e);for(let w=0;w<R;w++){let E=p;if(R>e&&w===R-1){const k=(c=E.width)!==null&&c!==void 0?c:"100%",B=e%1,O=typeof k=="number"?k*B:`calc(${k} * ${B})`;E={...E,width:O}}const M=ke.createElement("span",{className:m,style:E,key:w},"");S?v.push(M):v.push(ke.createElement(ke.Fragment,{key:w},M,ke.createElement("br",null)))}return ke.createElement("span",{className:r,"data-testid":s,"aria-live":"polite","aria-busy":(l=h.enableAnimation)!==null&&l!==void 0?l:Ro},t?v.map((w,E)=>ke.createElement(t,{key:E},w)):v)}const Xl=e=>{const[t,n]=A.useState(!1);return q.jsxs("a",{href:e.href,className:"thumbnail-wrapper",children:[!t&&q.jsx(Ql,{}),q.jsx("img",{src:e.src,style:{display:t?void 0:"none"},onLoad:()=>n(!0)})]})},fd=e=>{const[t,n]=A.useState(!1),r=Ci(),s=A.useMemo(()=>e.annotation?Co(e.annotation):[],[e.annotation]),i=A.useMemo(()=>Ao(s,e.related||[]),[s,e.related]),o=Jr([e.open&&r],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:$n.easeInCubic}});A.useLayoutEffect(()=>{setTimeout(()=>n(!0),1)},[]);const a=u=>u.id?u.slug===e.currentSlug?`#${u.id.substring(u.id.lastIndexOf("/")+1)}`:`/image/${u.slug}/#${u.id.substring(u.id.lastIndexOf("/")+1)}`:u.slug===e.currentSlug?"#":`/image/${u.slug}`;return o((u,c)=>c&&q.jsxs(Zr.aside,{style:u,className:"related related-images",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(kr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Images ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:i.map((l,f)=>l.related.map(({annotation:d})=>q.jsxs("li",{children:[q.jsxs("div",{className:"preview",children:[q.jsx(Xl,{href:a(d),src:d.thumbnail}),q.jsx("div",{className:"taglist-wrapper",children:q.jsx("ul",{className:"taglist",children:d.tags.map(h=>q.jsx("li",{className:s.some(p=>p.id===h.id)?"common":void 0,children:r?.find(p=>p.id===h.id)?.label||h.label},h.id))})})]}),q.jsx("a",{href:a(d),children:d.image})]},`${f}-${d.id}`)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},Jl=e=>{const{prefix:t,quote:n,suffix:r}=e.value,[s,i]=A.useMemo(()=>{const a=t&&(t.endsWith("|")?t:t+" "),u=r&&(r?.startsWith("|")?r:" "+r);return[a,u]},[t,n,r]),o=a=>a.replace(/\|/g,"|&#8203;");return q.jsxs(q.Fragment,{children:[s&&q.jsx("span",{dangerouslySetInnerHTML:{__html:o(s)}}),q.jsx("a",{href:e.href,className:"verse-snippet-quote",dangerouslySetInnerHTML:{__html:o(n)}}),i&&q.jsx("span",{dangerouslySetInnerHTML:{__html:o(i)}})]})},dd=e=>{const t=Ci(),[n,r]=A.useState(!1),s=A.useMemo(()=>e.annotation?Co(e.annotation):[],[e.annotation]),i=A.useMemo(()=>Ao(s,e.related||[]),[s,e.related]),o=Jr([e.open],{from:{width:n?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:$n.easeInCubic}});A.useLayoutEffect(()=>{setTimeout(()=>r(!0),10)},[]);const a=u=>u.slug===e.currentSlug?`#${u.id.substring(u.id.lastIndexOf("/")+1)}`:`/verse/${u.slug}/#${u.id.substring(u.id.lastIndexOf("/")+1)}`;return o((u,c)=>c&&q.jsxs(Zr.aside,{style:u,className:"related related-verses",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(kr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Verses ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:i.map(l=>l.related.map(({annotation:f})=>q.jsxs("li",{children:[q.jsx("ul",{className:"taglist",children:f.tags.map(d=>q.jsx("li",{className:s.some(h=>h.id===d.id)?"common":void 0,children:t?.find(h=>h.id===d.id)?.label||d.label},d.id))}),f.snippet&&q.jsx("p",{className:"snippet-preview",children:q.jsx(Jl,{value:f.snippet,href:a(f)})}),q.jsx("a",{href:a(f),children:f.verse})]},f.id)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},hd=e=>{const t=e.relatedImages.length,n=e.relatedVerses.length,r=A.useMemo(()=>e.annotation.bodies.filter(s=>s.purpose==="tagging"),[e.annotation]);return q.jsx("div",{className:"annotation-popup",children:q.jsxs("div",{className:"tags",children:[q.jsx("div",{children:r.map(s=>s.value).join("  ")}),e.type==="VERSE"?q.jsxs("div",{className:"related",children:[n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," other verse",n>1&&"s"]})}),t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," image",t>1&&"s"]})})]}):q.jsxs("div",{className:"related",children:[t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," other image",t>1&&"s"]})}),n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," verse",n>1&&"s"]})})]})]})})};function Hn(){return typeof window<"u"}function xt(e){return Po(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function De(e){var t;return(t=(Po(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Po(e){return Hn()?e instanceof Node||e instanceof me(e).Node:!1}function le(e){return Hn()?e instanceof Element||e instanceof me(e).Element:!1}function Te(e){return Hn()?e instanceof HTMLElement||e instanceof me(e).HTMLElement:!1}function ai(e){return!Hn()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}function en(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=we(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Zl(e){return["table","td","th"].includes(xt(e))}function Vn(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ns(e){const t=rs(),n=le(e)?we(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ef(e){let t=Qe(e);for(;Te(t)&&!St(t);){if(ns(t))return t;if(Vn(t))return null;t=Qe(t)}return null}function rs(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function St(e){return["html","body","#document"].includes(xt(e))}function we(e){return me(e).getComputedStyle(e)}function qn(e){return le(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qe(e){if(xt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ai(e)&&e.host||De(e);return ai(t)?t.host:t}function Fo(e){const t=Qe(e);return St(t)?e.ownerDocument?e.ownerDocument.body:e.body:Te(t)&&en(t)?t:Fo(t)}function Kt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Fo(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=me(s);if(i){const a=Fr(o);return t.concat(o,o.visualViewport||[],en(s)?s:[],a&&n?Kt(a):[])}return t.concat(s,Kt(s,[],n))}function Fr(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Le=Math.min,Re=Math.max,_n=Math.round,fn=Math.floor,Pe=e=>({x:e,y:e}),tf={left:"right",right:"left",bottom:"top",top:"bottom"},nf={start:"end",end:"start"};function Tr(e,t,n){return Re(e,Le(t,n))}function _t(e,t){return typeof e=="function"?e(t):e}function Ue(e){return e.split("-")[0]}function tn(e){return e.split("-")[1]}function To(e){return e==="x"?"y":"x"}function ss(e){return e==="y"?"height":"width"}function it(e){return["top","bottom"].includes(Ue(e))?"y":"x"}function is(e){return To(it(e))}function rf(e,t,n){n===void 0&&(n=!1);const r=tn(e),s=is(e),i=ss(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=On(o)),[o,On(o)]}function sf(e){const t=On(e);return[Dr(e),t,Dr(t)]}function Dr(e){return e.replace(/start|end/g,t=>nf[t])}function of(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function uf(e,t,n,r){const s=tn(e);let i=of(Ue(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Dr)))),i}function On(e){return e.replace(/left|right|bottom|top/g,t=>tf[t])}function af(e){return{top:0,right:0,bottom:0,left:0,...e}}function os(e){return typeof e!="number"?af(e):{top:e,right:e,bottom:e,left:e}}function wt(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ci(e,t,n){let{reference:r,floating:s}=e;const i=it(t),o=is(t),a=ss(o),u=Ue(t),c=i==="y",l=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,d=r[a]/2-s[a]/2;let h;switch(u){case"top":h={x:l,y:r.y-s.height};break;case"bottom":h={x:l,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-s.width,y:f};break;default:h={x:r.x,y:r.y}}switch(tn(t)){case"start":h[o]-=d*(n&&c?-1:1);break;case"end":h[o]+=d*(n&&c?-1:1);break}return h}const cf=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:l,y:f}=ci(c,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:S,fn:v}=a[m],{x:R,y:w,data:E,reset:M}=await v({x:l,y:f,initialPlacement:r,placement:d,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});l=R??l,f=w??f,h={...h,[S]:{...h[S],...E}},M&&p<=50&&(p++,typeof M=="object"&&(M.placement&&(d=M.placement),M.rects&&(c=M.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):M.rects),{x:l,y:f}=ci(c,d,u)),m=-1)}return{x:l,y:f,placement:d,strategy:s,middlewareData:h}};async function Do(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:l="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_t(t,e),p=os(h),S=a[d?f==="floating"?"reference":"floating":f],v=wt(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:l,strategy:u})),R=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},M=wt(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:R,offsetParent:w,strategy:u}):R);return{top:(v.top-M.top+p.top)/E.y,bottom:(M.bottom-v.bottom+p.bottom)/E.y,left:(v.left-M.left+p.left)/E.x,right:(M.right-v.right+p.right)/E.x}}const lf=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:u}=t,{element:c,padding:l=0}=_t(e,t)||{};if(c==null)return{};const f=os(l),d={x:n,y:r},h=is(s),p=ss(h),m=await o.getDimensions(c),S=h==="y",v=S?"top":"left",R=S?"bottom":"right",w=S?"clientHeight":"clientWidth",E=i.reference[p]+i.reference[h]-d[h]-i.floating[p],M=d[h]-i.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let B=k?k[w]:0;(!B||!await(o.isElement==null?void 0:o.isElement(k)))&&(B=a.floating[w]||i.floating[p]);const O=E/2-M/2,b=B/2-m[p]/2-1,x=Le(f[v],b),P=Le(f[R],b),$=x,N=B-m[p]-P,j=B/2-m[p]/2+O,V=Tr($,j,N),G=!u.arrow&&tn(s)!=null&&j!==V&&i.reference[p]/2-(j<$?x:P)-m[p]/2<0,K=G?j<$?j-$:j-N:0;return{[h]:d[h]+K,data:{[h]:V,centerOffset:j-V-K,...G&&{alignmentOffset:K}},reset:G}}}),ff=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:u,elements:c}=t,{mainAxis:l=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...S}=_t(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Ue(s),R=it(a),w=Ue(a)===a,E=await(u.isRTL==null?void 0:u.isRTL(c.floating)),M=d||(w||!m?[On(a)]:sf(a)),k=p!=="none";!d&&k&&M.push(...uf(a,m,p,E));const B=[a,...M],O=await Do(t,S),b=[];let x=((r=i.flip)==null?void 0:r.overflows)||[];if(l&&b.push(O[v]),f){const j=rf(s,o,E);b.push(O[j[0]],O[j[1]])}if(x=[...x,{placement:s,overflows:b}],!b.every(j=>j<=0)){var P,$;const j=(((P=i.flip)==null?void 0:P.index)||0)+1,V=B[j];if(V)return{data:{index:j,overflows:x},reset:{placement:V}};let G=($=x.filter(K=>K.overflows[0]<=0).sort((K,_)=>K.overflows[1]-_.overflows[1])[0])==null?void 0:$.placement;if(!G)switch(h){case"bestFit":{var N;const K=(N=x.filter(_=>{if(k){const y=it(_.placement);return y===R||y==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(y=>y>0).reduce((y,I)=>y+I,0)]).sort((_,y)=>_[1]-y[1])[0])==null?void 0:N[0];K&&(G=K);break}case"initialPlacement":G=a;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function Mo(e){const t=Le(...e.map(i=>i.left)),n=Le(...e.map(i=>i.top)),r=Re(...e.map(i=>i.right)),s=Re(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:s-n}}function df(e){const t=e.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<t.length;s++){const i=t[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>wt(Mo(s)))}const hf=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=t,{padding:a=2,x:u,y:c}=_t(e,t),l=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),f=df(l),d=wt(Mo(l)),h=os(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&c!=null)return f.find(S=>u>S.left-h.left&&u<S.right+h.right&&c>S.top-h.top&&c<S.bottom+h.bottom)||d;if(f.length>=2){if(it(n)==="y"){const x=f[0],P=f[f.length-1],$=Ue(n)==="top",N=x.top,j=P.bottom,V=$?x.left:P.left,G=$?x.right:P.right,K=G-V,_=j-N;return{top:N,bottom:j,left:V,right:G,width:K,height:_,x:V,y:N}}const S=Ue(n)==="left",v=Re(...f.map(x=>x.right)),R=Le(...f.map(x=>x.left)),w=f.filter(x=>S?x.left===R:x.right===v),E=w[0].top,M=w[w.length-1].bottom,k=R,B=v,O=B-k,b=M-E;return{top:E,bottom:M,left:k,right:B,width:O,height:b,x:k,y:E}}return d}const m=await i.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return s.reference.x!==m.reference.x||s.reference.y!==m.reference.y||s.reference.width!==m.reference.width||s.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function gf(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ue(n),a=tn(n),u=it(n)==="y",c=["left","top"].includes(o)?-1:1,l=i&&u?-1:1,f=_t(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*l,y:d*c}:{x:d*c,y:h*l}}const pf=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=t,u=await gf(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:o}}}}},mf=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:v,y:R}=S;return{x:v,y:R}}},...u}=_t(e,t),c={x:n,y:r},l=await Do(t,u),f=it(Ue(s)),d=To(f);let h=c[d],p=c[f];if(i){const S=d==="y"?"top":"left",v=d==="y"?"bottom":"right",R=h+l[S],w=h-l[v];h=Tr(R,h,w)}if(o){const S=f==="y"?"top":"left",v=f==="y"?"bottom":"right",R=p+l[S],w=p-l[v];p=Tr(R,p,w)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[d]:i,[f]:o}}}}}};function $o(e){const t=we(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Te(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,a=_n(n)!==i||_n(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function us(e){return le(e)?e:e.contextElement}function yt(e){const t=us(e);if(!Te(t))return Pe(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=$o(t);let o=(i?_n(n.width):n.width)/r,a=(i?_n(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const yf=Pe(0);function ko(e){const t=me(e);return!rs()||!t.visualViewport?yf:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vf(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function ot(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=us(e);let o=Pe(1);t&&(r?le(r)&&(o=yt(r)):o=yt(e));const a=vf(i,n,r)?ko(i):Pe(0);let u=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,l=s.width/o.x,f=s.height/o.y;if(i){const d=me(i),h=r&&le(r)?me(r):r;let p=d,m=Fr(p);for(;m&&r&&h!==p;){const S=yt(m),v=m.getBoundingClientRect(),R=we(m),w=v.left+(m.clientLeft+parseFloat(R.paddingLeft))*S.x,E=v.top+(m.clientTop+parseFloat(R.paddingTop))*S.y;u*=S.x,c*=S.y,l*=S.x,f*=S.y,u+=w,c+=E,p=me(m),m=Fr(p)}}return wt({width:l,height:f,x:u,y:c})}function as(e,t){const n=qn(e).scrollLeft;return t?t.left+n:ot(De(e)).left+n}function jo(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:as(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function bf(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=De(r),a=t?Vn(t.floating):!1;if(r===o||a&&i)return n;let u={scrollLeft:0,scrollTop:0},c=Pe(1);const l=Pe(0),f=Te(r);if((f||!f&&!i)&&((xt(r)!=="body"||en(o))&&(u=qn(r)),Te(r))){const h=ot(r);c=yt(r),l.x=h.x+r.clientLeft,l.y=h.y+r.clientTop}const d=o&&!f&&!i?jo(o,u,!0):Pe(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+l.x+d.x,y:n.y*c.y-u.scrollTop*c.y+l.y+d.y}}function Sf(e){return Array.from(e.getClientRects())}function wf(e){const t=De(e),n=qn(e),r=e.ownerDocument.body,s=Re(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Re(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+as(e);const a=-n.scrollTop;return we(r).direction==="rtl"&&(o+=Re(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Ef(e,t){const n=me(e),r=De(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,u=0;if(s){i=s.width,o=s.height;const c=rs();(!c||c&&t==="fixed")&&(a=s.offsetLeft,u=s.offsetTop)}return{width:i,height:o,x:a,y:u}}function xf(e,t){const n=ot(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Te(e)?yt(e):Pe(1),o=e.clientWidth*i.x,a=e.clientHeight*i.y,u=s*i.x,c=r*i.y;return{width:o,height:a,x:u,y:c}}function li(e,t,n){let r;if(t==="viewport")r=Ef(e,n);else if(t==="document")r=wf(De(e));else if(le(t))r=xf(t,n);else{const s=ko(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return wt(r)}function No(e,t){const n=Qe(e);return n===t||!le(n)||St(n)?!1:we(n).position==="fixed"||No(n,t)}function _f(e,t){const n=t.get(e);if(n)return n;let r=Kt(e,[],!1).filter(a=>le(a)&&xt(a)!=="body"),s=null;const i=we(e).position==="fixed";let o=i?Qe(e):e;for(;le(o)&&!St(o);){const a=we(o),u=ns(o);!u&&a.position==="fixed"&&(s=null),(i?!u&&!s:!u&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||en(o)&&!u&&No(e,o))?r=r.filter(l=>l!==o):s=a,o=Qe(o)}return t.set(e,r),r}function Of(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Vn(t)?[]:_f(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((c,l)=>{const f=li(t,l,s);return c.top=Re(f.top,c.top),c.right=Le(f.right,c.right),c.bottom=Le(f.bottom,c.bottom),c.left=Re(f.left,c.left),c},li(t,a,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function If(e){const{width:t,height:n}=$o(e);return{width:t,height:n}}function Cf(e,t,n){const r=Te(t),s=De(t),i=n==="fixed",o=ot(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const u=Pe(0);if(r||!r&&!i)if((xt(t)!=="body"||en(s))&&(a=qn(t)),r){const d=ot(t,!0,i,t);u.x=d.x+t.clientLeft,u.y=d.y+t.clientTop}else s&&(u.x=as(s));const c=s&&!r&&!i?jo(s,a):Pe(0),l=o.left+a.scrollLeft-u.x-c.x,f=o.top+a.scrollTop-u.y-c.y;return{x:l,y:f,width:o.width,height:o.height}}function or(e){return we(e).position==="static"}function fi(e,t){if(!Te(e)||we(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return De(e)===n&&(n=n.ownerDocument.body),n}function Bo(e,t){const n=me(e);if(Vn(e))return n;if(!Te(e)){let s=Qe(e);for(;s&&!St(s);){if(le(s)&&!or(s))return s;s=Qe(s)}return n}let r=fi(e,t);for(;r&&Zl(r)&&or(r);)r=fi(r,t);return r&&St(r)&&or(r)&&!ns(r)?n:r||ef(e)||n}const Af=async function(e){const t=this.getOffsetParent||Bo,n=this.getDimensions,r=await n(e.floating);return{reference:Cf(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rf(e){return we(e).direction==="rtl"}const Pf={convertOffsetParentRelativeRectToViewportRelativeRect:bf,getDocumentElement:De,getClippingRect:Of,getOffsetParent:Bo,getElementRects:Af,getClientRects:Sf,getDimensions:If,getScale:yt,isElement:le,isRTL:Rf};function Ff(e,t){let n=null,r;const s=De(e);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),i();const{left:c,top:l,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=fn(l),p=fn(s.clientWidth-(c+f)),m=fn(s.clientHeight-(l+d)),S=fn(c),R={rootMargin:-h+"px "+-p+"px "+-m+"px "+-S+"px",threshold:Re(0,Le(1,u))||1};let w=!0;function E(M){const k=M[0].intersectionRatio;if(k!==u){if(!w)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...R,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,R)}n.observe(e)}return o(!0),i}function gd(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=us(e),l=s||i?[...c?Kt(c):[],...Kt(t)]:[];l.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=c&&a?Ff(c,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(v=>{let[R]=v;R&&R.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),c&&!u&&h.observe(c),h.observe(t));let p,m=u?ot(e):null;u&&S();function S(){const v=ot(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(S)}return n(),()=>{var v;l.forEach(R=>{s&&R.removeEventListener("scroll",n),i&&R.removeEventListener("resize",n)}),f?.(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const Tf=pf,Df=mf,Mf=ff,di=lf,$f=hf,kf=(e,t,n)=>{const r=new Map,s={platform:Pf,...n},i={...s.platform,_c:r};return cf(e,t,{...s,platform:i})};var mn=typeof document<"u"?A.useLayoutEffect:A.useEffect;function In(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!In(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!In(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Lo(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function hi(e,t){const n=Lo(e);return Math.round(t*n)/n}function ur(e){const t=A.useRef(e);return mn(()=>{t.current=e}),t}function jf(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:u,open:c}=e,[l,f]=A.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=A.useState(r);In(d,r)||h(r);const[p,m]=A.useState(null),[S,v]=A.useState(null),R=A.useCallback(_=>{_!==k.current&&(k.current=_,m(_))},[]),w=A.useCallback(_=>{_!==B.current&&(B.current=_,v(_))},[]),E=i||p,M=o||S,k=A.useRef(null),B=A.useRef(null),O=A.useRef(l),b=u!=null,x=ur(u),P=ur(s),$=ur(c),N=A.useCallback(()=>{if(!k.current||!B.current)return;const _={placement:t,strategy:n,middleware:d};P.current&&(_.platform=P.current),kf(k.current,B.current,_).then(y=>{const I={...y,isPositioned:$.current!==!1};j.current&&!In(O.current,I)&&(O.current=I,mi.flushSync(()=>{f(I)}))})},[d,t,n,P,$]);mn(()=>{c===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(_=>({..._,isPositioned:!1})))},[c]);const j=A.useRef(!1);mn(()=>(j.current=!0,()=>{j.current=!1}),[]),mn(()=>{if(E&&(k.current=E),M&&(B.current=M),E&&M){if(x.current)return x.current(E,M,N);N()}},[E,M,N,x,b]);const V=A.useMemo(()=>({reference:k,floating:B,setReference:R,setFloating:w}),[R,w]),G=A.useMemo(()=>({reference:E,floating:M}),[E,M]),K=A.useMemo(()=>{const _={position:n,left:0,top:0};if(!G.floating)return _;const y=hi(G.floating,l.x),I=hi(G.floating,l.y);return a?{..._,transform:"translate("+y+"px, "+I+"px)",...Lo(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:y,top:I}},[n,a,G.floating,l.x,l.y]);return A.useMemo(()=>({...l,update:N,refs:V,elements:G,floatingStyles:K}),[l,N,V,G,K])}const Nf=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?di({element:r.current,padding:s}).fn(n):{}:r?di({element:r,padding:s}).fn(n):{}}}},pd=(e,t)=>({...Tf(e),options:[e,t]}),md=(e,t)=>({...Df(e),options:[e,t]}),yd=(e,t)=>({...Mf(e),options:[e,t]}),vd=(e,t)=>({...$f(e),options:[e,t]}),bd=(e,t)=>({...Nf(e),options:[e,t]}),Uo={...Yo},Bf=Uo.useInsertionEffect,Lf=Bf||(e=>e());function Uf(e){const t=A.useRef(()=>{});return Lf(()=>{t.current=e}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var Cn=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Mr(){return Mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mr.apply(this,arguments)}let gi=!1,Hf=0;const pi=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Hf++;function Vf(){const[e,t]=A.useState(()=>gi?pi():void 0);return Cn(()=>{e==null&&t(pi())},[]),A.useEffect(()=>{gi=!0},[]),e}const qf=Uo.useId,Ho=qf||Vf,Sd=A.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:a=14,height:u=7,tipRadius:c=0,strokeWidth:l=0,staticOffset:f,stroke:d,d:h,style:{transform:p,...m}={},...S}=t,v=Ho(),[R,w]=A.useState(!1);if(Cn(()=>{if(!s)return;we(s).direction==="rtl"&&w(!0)},[s]),!s)return null;const[E,M]=r.split("-"),k=E==="top"||E==="bottom";let B=f;(k&&o!=null&&o.x||!k&&o!=null&&o.y)&&(B=null);const O=l*2,b=O/2,x=a/2*(c/-8+1),P=u/2*c/4,$=!!h,N=B&&M==="end"?"bottom":"top";let j=B&&M==="end"?"right":"left";B&&R&&(j=M==="end"?"left":"right");const V=i?.x!=null?B||i.x:"",G=i?.y!=null?B||i.y:"",K=h||"M0,0"+(" H"+a)+(" L"+(a-x)+","+(u-P))+(" Q"+a/2+","+u+" "+x+","+(u-P))+" Z",_={top:$?"rotate(180deg)":"",left:$?"rotate(90deg)":"rotate(-90deg)",bottom:$?"":"rotate(180deg)",right:$?"rotate(-90deg)":"rotate(90deg)"}[E];return A.createElement("svg",Mr({},S,{"aria-hidden":!0,ref:n,width:$?a:a+O,height:a,viewBox:"0 0 "+a+" "+(u>a?u:a),style:{position:"absolute",pointerEvents:"none",[j]:V,[N]:G,[E]:k||$?"100%":"calc(100% - "+O/2+"px)",transform:[_,p].filter(y=>!!y).join(" "),...m}}),O>0&&A.createElement("path",{clipPath:"url(#"+v+")",fill:"none",stroke:d,strokeWidth:O+(h?0:1),d:K}),A.createElement("path",{stroke:O&&!h?S.fill:"none",d:K}),A.createElement("clipPath",{id:v},A.createElement("rect",{x:-b,y:b*($?-1:1),width:a+O,height:a})))});function Wf(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const zf=A.createContext(null),Gf=A.createContext(null),Kf=()=>{var e;return((e=A.useContext(zf))==null?void 0:e.id)||null},Yf=()=>A.useContext(Gf);function Qf(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=Ho(),i=A.useRef({}),[o]=A.useState(()=>Wf()),a=Kf()!=null,[u,c]=A.useState(r.reference),l=Uf((h,p,m)=>{i.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n?.(h,p,m)}),f=A.useMemo(()=>({setPositionReference:c}),[]),d=A.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return A.useMemo(()=>({dataRef:i,open:t,onOpenChange:l,elements:d,events:o,floatingId:s,refs:f}),[t,l,d,o,s,f])}function wd(e){e===void 0&&(e={});const{nodeId:t}=e,n=Qf({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=A.useState(null),[a,u]=A.useState(null),l=s?.domReference||i,f=A.useRef(null),d=Yf();Cn(()=>{l&&(f.current=l)},[l]);const h=jf({...e,elements:{...s,...a&&{reference:a}}}),p=A.useCallback(w=>{const E=le(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),m=A.useCallback(w=>{(le(w)||w===null)&&(f.current=w,o(w)),(le(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!le(w))&&h.refs.setReference(w)},[h.refs]),S=A.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),v=A.useMemo(()=>({...h.elements,domReference:l}),[h.elements,l]),R=A.useMemo(()=>({...h,...r,refs:S,elements:v,nodeId:t}),[h,S,v,t,r]);return Cn(()=>{r.dataRef.current.floatingContext=R;const w=d?.nodesRef.current.find(E=>E.id===t);w&&(w.context=R)}),A.useMemo(()=>({...h,context:R,refs:S,elements:v}),[h,S,v,R])}export{hd as A,Sd as F,ed as L,iu as M,ad as P,dd as R,Zf as V,Jo as Z,vd as a,gd as b,pa as c,sd as d,nd as e,yd as f,cd as g,rd as h,An as i,id as j,fd as k,bd as l,Xo as m,od as n,pd as o,Zr as p,td as q,ud as r,md as s,ld as t,wd as u};
