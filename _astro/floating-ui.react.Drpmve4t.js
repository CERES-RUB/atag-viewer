import{r as E,R as Me,a as os,g as Fo,b as Do}from"./index.DL6A1vOd.js";var as={exports:{}},On={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=E,No=Symbol.for("react.element"),Uo=Symbol.for("react.fragment"),Ho=Object.prototype.hasOwnProperty,Vo=Lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bo={key:!0,ref:!0,__self:!0,__source:!0};function cs(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Ho.call(t,r)&&!Bo.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:No,type:e,key:s,ref:o,props:i,_owner:Vo.current}}On.Fragment=Uo;On.jsx=cs;On.jsxs=cs;as.exports=On;var G=as.exports,us={exports:{}},Ot={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oi;function qo(){if(oi)return Ot;oi=1;var e=Me,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var l,f={},d=null,h=null;u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),c.ref!==void 0&&(h=c.ref);for(l in c)r.call(c,l)&&!s.hasOwnProperty(l)&&(f[l]=c[l]);if(a&&a.defaultProps)for(l in c=a.defaultProps,c)f[l]===void 0&&(f[l]=c[l]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return Ot.Fragment=n,Ot.jsx=o,Ot.jsxs=o,Ot}us.exports=qo();var Wo=us.exports;const In=E.createContext({anno:void 0,setAnno:void 0,annotations:[],selection:{selected:[]}}),Qf=E.forwardRef((e,t)=>{const[n,r]=E.useState(null),[i,s]=E.useState([]),[o,a]=E.useState({selected:[]});return E.useImperativeHandle(t,()=>n),E.useEffect(()=>{if(n){const{selection:c,store:u}=n.state;u.all().length>0&&s(u.all());const l=()=>s(()=>u.all());u.observe(l);let f;const d=c.subscribe(({selected:h,pointerEvent:m})=>{f&&u.unobserve(f);const p=(h||[]).map(({id:S,editable:w})=>({annotation:u.getAnnotation(S),editable:w}));a({selected:p,pointerEvent:m}),f=S=>{const{updated:w}=S.changes;a(({selected:M})=>({selected:M.map(({annotation:x,editable:_})=>{const F=w.find(j=>j.oldValue.id===x.id);return F?{annotation:F.newValue,editable:_}:{annotation:x,editable:_}})}))},u.observe(f,{annotations:h.map(({id:S})=>S)})});return()=>{u.unobserve(l),d()}}},[n]),Wo.jsx(In.Provider,{value:{anno:n,setAnno:r,annotations:i,selection:o},children:e.children})}),zo=()=>{const{anno:e}=E.useContext(In);return e},Go=()=>{const{annotations:e}=E.useContext(In);return e},Ko=e=>Go(),Qo=()=>{const{selection:e}=E.useContext(In);return e};var Yo=Object.defineProperty,Xo=(e,t,n)=>t in e?Yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ai=(e,t,n)=>(Xo(e,typeof t!="symbol"?t+"":t,n),n);function jt(){}function rr(e,t){for(const n in t)e[n]=t[n];return e}function ls(e){return e()}function ci(){return Object.create(null)}function Ue(e){e.forEach(ls)}function ce(e){return typeof e=="function"}function Pn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Jo(e){return Object.keys(e).length===0}function Zo(e,t,n,r){if(e){const i=fs(e,t,n,r);return e[0](i)}}function fs(e,t,n,r){return e[1]&&r?rr(n.ctx.slice(),e[1](r(t))):n.ctx}function ea(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=t.dirty[a]|i[a];return s}return t.dirty|i}return t.dirty}function ta(e,t,n,r,i,s){if(i){const o=fs(t,n,r,s);e.p(o,i)}}function na(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function ui(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function hn(e){return e??""}function li(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function ra(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ds(e){return document.createTextNode(e)}function be(){return ds(" ")}function hs(){return ds("")}function ae(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function U(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ia(e){return Array.from(e.childNodes)}function fi(e,t,n){e.classList.toggle(t,!!n)}function sa(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Ft;function At(e){Ft=e}function oa(){if(!Ft)throw new Error("Function called outside component initialization");return Ft}function aa(){const e=oa();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=sa(t,n,{cancelable:r});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}function Fe(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const lt=[],di=[];let dt=[];const hi=[],ca=Promise.resolve();let ir=!1;function ua(){ir||(ir=!0,ca.then(gs))}function sr(e){dt.push(e)}const Wn=new Set;let ct=0;function gs(){if(ct!==0)return;const e=Ft;do{try{for(;ct<lt.length;){const t=lt[ct];ct++,At(t),la(t.$$)}}catch(t){throw lt.length=0,ct=0,t}for(At(null),lt.length=0,ct=0;di.length;)di.pop()();for(let t=0;t<dt.length;t+=1){const n=dt[t];Wn.has(n)||(Wn.add(n),n())}dt.length=0}while(lt.length);for(;hi.length;)hi.pop()();ir=!1,Wn.clear(),At(e)}function la(e){if(e.fragment!==null){e.update(),Ue(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(sr)}}function fa(e){const t=[],n=[];dt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),dt=t}const un=new Set;let Ze;function da(){Ze={r:0,c:[],p:Ze}}function ha(){Ze.r||Ue(Ze.c),Ze=Ze.p}function we(e,t){e&&e.i&&(un.delete(e),e.i(t))}function Re(e,t,n,r){if(e&&e.o){if(un.has(e))return;un.add(e),Ze.c.push(()=>{un.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function gi(e){return e?.length!==void 0?e:Array.from(e)}function et(e){e&&e.c()}function Be(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),sr(()=>{const s=e.$$.on_mount.map(ls).filter(ce);e.$$.on_destroy?e.$$.on_destroy.push(...s):Ue(s),e.$$.on_mount=[]}),i.forEach(sr)}function qe(e,t){const n=e.$$;n.fragment!==null&&(fa(n.after_update),Ue(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ga(e,t){e.$$.dirty[0]===-1&&(lt.push(e),ua(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Rn(e,t,n,r,i,s,o=null,a=[-1]){const c=Ft;At(e);const u=e.$$={fragment:null,ctx:[],props:s,update:jt,not_equal:i,bound:ci(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ci(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(u.root);let l=!1;if(u.ctx=n?n(e,t.props||{},(f,d,...h)=>{const m=h.length?h[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),l&&ga(e,f)),d}):[],u.update(),l=!0,Ue(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const f=ia(t.target);u.fragment&&u.fragment.l(f),f.forEach(ee)}else u.fragment&&u.fragment.c();t.intro&&we(e.$$.fragment),Be(e,t.target,t.anchor),gs()}At(c)}class En{constructor(){ai(this,"$$"),ai(this,"$$set")}$destroy(){qe(this,1),this.$destroy=jt}$on(t,n){if(!ce(n))return jt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Jo(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pa);var Se=(e=>(e.ELLIPSE="ELLIPSE",e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(Se||{});const Pr=(e,t)=>t,ps=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;return e.forEach(([s,o])=>{t=Math.min(t,s),n=Math.min(n,o),r=Math.max(r,s),i=Math.max(i,o)}),{minX:t,minY:n,maxX:r,maxY:i}},ma={area:e=>Math.PI*e.geometry.rx*e.geometry.ry,intersects:(e,t,n)=>{const{cx:r,cy:i,rx:s,ry:o}=e.geometry,a=0,c=Math.cos(a),u=Math.sin(a),l=t-r,f=n-i,d=c*l+u*f,h=u*l-c*f;return d*d/(s*s)+h*h/(o*o)<=1}};Pr(Se.ELLIPSE,ma);const ya={area:e=>{const{points:t}=e.geometry;let n=0,r=t.length-1;for(let i=0;i<t.length;i++)n+=(t[r][0]+t[i][0])*(t[r][1]-t[i][1]),r=i;return Math.abs(.5*n)},intersects:(e,t,n)=>{const{points:r}=e.geometry;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s][0],c=r[s][1],u=r[o][0],l=r[o][1];c>n!=l>n&&t<(u-a)*(n-c)/(l-c)+a&&(i=!i)}return i}};Pr(Se.POLYGON,ya);const va={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,n)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&n>=e.geometry.y&&n<=e.geometry.y+e.geometry.h};Pr(Se.RECTANGLE,va);const wa=(e,t=!1)=>{const n=typeof e=="string"?e:e.value,r=/^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,i=[...n.matchAll(r)][0],[s,o,a,c,u,l,f]=i;if(o!=="xywh")throw new Error("Unsupported MediaFragment: "+n);if(a&&a!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${a}`);const[d,h,m,p]=[c,u,l,f].map(parseFloat);return{type:Se.RECTANGLE,geometry:{x:d,y:h,w:m,h:p,bounds:{minX:d,minY:t?h-p:h,maxX:d+m,maxY:t?h:h+p}}}},Sa=e=>{const{x:t,y:n,w:r,h:i}=e;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${t},${n},${r},${i}`}},ms="http://www.w3.org/2000/svg",pi=e=>{const t=r=>{Array.from(r.attributes).forEach(i=>{i.name.startsWith("on")&&r.removeAttribute(i.name)})},n=e.getElementsByTagName("script");return Array.from(n).reverse().forEach(r=>r.parentNode.removeChild(r)),Array.from(e.querySelectorAll("*")).forEach(t),e},ba=e=>{const t=new XMLSerializer().serializeToString(e.documentElement).replace("<svg>",`<svg xmlns="${ms}">`);return new DOMParser().parseFromString(t,"image/svg+xml").documentElement},_a=e=>{const t=new DOMParser().parseFromString(e,"image/svg+xml"),n=t.lookupPrefix(ms),r=t.lookupNamespaceURI(null);return n||r?pi(t).firstChild:pi(ba(t)).firstChild},xa=e=>{const[t,n,r]=e.match(/(<polygon points=["|'])([^("|')]*)/)||[],i=r.split(" ").map(s=>s.split(",").map(parseFloat));return{type:Se.POLYGON,geometry:{points:i,bounds:ps(i)}}},Oa=e=>{const t=_a(e),n=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),i=parseFloat(t.getAttribute("rx")),s=parseFloat(t.getAttribute("ry")),o={minX:n-i,minY:r-s,maxX:n+i,maxY:r+s};return{type:Se.ELLIPSE,geometry:{cx:n,cy:r,rx:i,ry:s,bounds:o}}},Ia=e=>{const t=typeof e=="string"?e:e.value;if(t.includes("<polygon points="))return xa(t);if(t.includes("<ellipse "))return Oa(t);throw"Unsupported SVG shape: "+t},Pa=e=>{let t;if(e.type===Se.POLYGON){const n=e.geometry,{points:r}=n;t=`<svg><polygon points="${r.map(i=>i.join(",")).join(" ")}" /></svg>`}else if(e.type===Se.ELLIPSE){const n=e.geometry;t=`<svg><ellipse cx="${n.cx}" cy="${n.cy}" rx="${n.rx}" ry="${n.ry}" /></svg>`}if(t)return{type:"SvgSelector",value:t};throw`Unsupported shape type: ${e.type}`};var oe=[];for(var zn=0;zn<256;++zn)oe.push((zn+256).toString(16).slice(1));function Ra(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}var nn,Ea=new Uint8Array(16);function Ca(){if(!nn&&(nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nn(Ea)}var Aa=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const mi={randomUUID:Aa};function Ta(e,t,n){if(mi.randomUUID&&!t&&!e)return mi.randomUUID();e=e||{};var r=e.random||(e.rng||Ca)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ra(r)}var $a=[];for(var Gn=0;Gn<256;++Gn)$a.push((Gn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ka="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ma=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=ka[n[e]&63];return t};const ja=e=>{const t=JSON.stringify(e);let n=0;for(let r=0,i=t.length;r<i;r++){let s=t.charCodeAt(r);n=(n<<5)-n+s,n|=0}return`${n}`},ys=e=>e?typeof e=="object"?{...e}:e:void 0,Fa=(e,t)=>(Array.isArray(e)?e:[e]).map(n=>{const{id:r,type:i,purpose:s,value:o,created:a,modified:c,creator:u,...l}=n;return{id:r||`temp-${ja(n)}`,annotation:t,type:i,purpose:s,value:o,creator:ys(u),created:a?new Date(a):void 0,updated:c?new Date(c):void 0,...l}}),Da=e=>e.map(t=>{var n;const{annotation:r,created:i,updated:s,...o}=t,a={...o,created:i?.toISOString(),modified:s?.toISOString()};return(n=a.id)!=null&&n.startsWith("temp-")&&delete a.id,a});Ma();const Yf=(e,t=!1)=>({parse:n=>La(n,t),serialize:n=>Na(n,e)}),La=(e,t=!1)=>{const n=e.id||Ta(),{creator:r,created:i,modified:s,body:o,...a}=e,c=Fa(o,n),u=Array.isArray(e.target)?e.target[0]:e.target,l=Array.isArray(u.selector)?u.selector[0]:u.selector,f=l?.type==="FragmentSelector"?wa(l,t):l?.type==="SvgSelector"?Ia(l):void 0;return f?{parsed:{...a,id:n,bodies:c,target:{created:i?new Date(i):void 0,creator:ys(r),updated:s?new Date(s):void 0,...Array.isArray(a.target)?a.target[0]:a.target,annotation:n,selector:f}}}:{error:Error(`Invalid selector: ${JSON.stringify(l)}`)}},Na=(e,t)=>{const{selector:n,creator:r,created:i,updated:s,updatedBy:o,...a}=e.target,c=n.type==Se.RECTANGLE?Sa(n.geometry):Pa(n),u={...e,"@context":"http://www.w3.org/ns/anno.jsonld",id:e.id,type:"Annotation",body:Da(e.bodies),created:i?.toISOString(),creator:r,modified:s?.toISOString(),target:{...a,source:t,selector:c}};return delete u.bodies,"annotation"in u.target&&delete u.target.annotation,u};function yi(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function vi(e){let t,n;return t=new Et({props:{x:e[10][0],y:e[10][1],scale:e[3]}}),t.$on("pointerdown",function(){ce(e[9](`HANDLE-${e[12]}`))&&e[9](`HANDLE-${e[12]}`).apply(this,arguments)}),{c(){et(t.$$.fragment)},m(r,i){Be(t,r,i),n=!0},p(r,i){e=r;const s={};i&16&&(s.x=e[10][0]),i&16&&(s.y=e[10][1]),i&8&&(s.scale=e[3]),t.$set(s)},i(r){n||(we(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Ua(e){let t,n,r,i,s,o,a,c,u,l,f,d=gi(e[4].points),h=[];for(let p=0;p<d.length;p+=1)h[p]=vi(yi(e,d,p));const m=p=>Re(h[p],1,1,()=>{h[p]=null});return{c(){t=ge("polygon"),i=be(),s=ge("polygon"),a=be();for(let p=0;p<h.length;p+=1)h[p].c();c=hs(),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"points",r=e[4].points.map(wi).join(" ")),U(s,"class","a9s-inner a9s-shape-handle"),U(s,"style",e[1]),U(s,"points",o=e[4].points.map(Si).join(" "))},m(p,S){te(p,t,S),te(p,i,S),te(p,s,S),te(p,a,S);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(p,S);te(p,c,S),u=!0,l||(f=[ae(t,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(s,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)})],l=!0)},p(p,S){if(e=p,(!u||S&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!u||S&16&&r!==(r=e[4].points.map(wi).join(" ")))&&U(t,"points",r),(!u||S&2)&&U(s,"style",e[1]),(!u||S&16&&o!==(o=e[4].points.map(Si).join(" ")))&&U(s,"points",o),S&536){d=gi(e[4].points);let w;for(w=0;w<d.length;w+=1){const M=yi(e,d,w);h[w]?(h[w].p(M,S),we(h[w],1)):(h[w]=vi(M),h[w].c(),we(h[w],1),h[w].m(c.parentNode,c))}for(da(),w=d.length;w<h.length;w+=1)m(w);ha()}},i(p){if(!u){for(let S=0;S<d.length;S+=1)we(h[S]);u=!0}},o(p){h=h.filter(Boolean);for(let S=0;S<h.length;S+=1)Re(h[S]);u=!1},d(p){p&&(ee(t),ee(i),ee(s),ee(a),ee(c)),ra(h,p),l=!1,Ue(f)}}}function Ha(e){let t,n;return t=new vs({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Ua,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("change",e[6]),t.$on("grab",e[7]),t.$on("release",e[8]),{c(){et(t.$$.fragment)},m(r,i){Be(t,r,i),n=!0},p(r,[i]){const s={};i&1&&(s.shape=r[0]),i&4&&(s.transform=r[2]),i&8730&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(we(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}const wi=e=>e.join(","),Si=e=>e.join(",");function Va(e,t,n){let r,{shape:i}=t,{computedStyle:s}=t,{transform:o}=t,{viewportScale:a=1}=t;const c=(d,h,m)=>{let p;const S=d.geometry;h==="SHAPE"?p=S.points.map(([M,x])=>[M+m[0],x+m[1]]):p=S.points.map(([M,x],_)=>h===`HANDLE-${_}`?[M+m[0],x+m[1]]:[M,x]);const w=ps(p);return{...d,geometry:{points:p,bounds:w}}};function u(d){Fe.call(this,e,d)}function l(d){Fe.call(this,e,d)}function f(d){Fe.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,i=d.shape),"computedStyle"in d&&n(1,s=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=i.geometry)},[i,s,o,a,r,c,u,l,f]}class Ba extends En{constructor(t){super(),Rn(this,t,Va,Ha,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}const qa="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function Wa(e){let t,n,r,i,s,o;return{c(){t=ge("rect"),U(t,"class",n=hn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(t,"x",r=e[0]-e[5]/2),U(t,"y",i=e[1]-e[5]/2),U(t,"width",e[5]),U(t,"height",e[5])},m(a,c){te(a,t,c),s||(o=ae(t,"pointerdown",e[11]),s=!0)},p(a,c){c&256&&n!==(n=hn(`a9s-handle ${a[8].class||""}`.trim())+" svelte-1sgkh33")&&U(t,"class",n),c&33&&r!==(r=a[0]-a[5]/2)&&U(t,"x",r),c&34&&i!==(i=a[1]-a[5]/2)&&U(t,"y",i),c&32&&U(t,"width",a[5]),c&32&&U(t,"height",a[5])},d(a){a&&ee(t),s=!1,o()}}}function za(e){let t,n,r,i,s,o,a,c,u;return{c(){t=ge("g"),n=ge("circle"),i=ge("rect"),U(n,"cx",e[0]),U(n,"cy",e[1]),U(n,"r",r=e[3]/e[2]),U(n,"class","a9s-touch-halo svelte-1sgkh33"),fi(n,"touched",e[4]),U(i,"class",s=hn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(i,"x",o=e[0]-e[5]/2),U(i,"y",a=e[1]-e[5]/2),U(i,"width",e[5]),U(i,"height",e[5]),U(t,"class","a9s-touch-handle")},m(l,f){te(l,t,f),li(t,n),li(t,i),c||(u=[ae(n,"pointerdown",e[10]),ae(n,"pointerdown",e[6]),ae(n,"pointerup",e[7]),ae(i,"pointerdown",e[9]),ae(i,"pointerdown",e[6]),ae(i,"pointerup",e[7])],c=!0)},p(l,f){f&1&&U(n,"cx",l[0]),f&2&&U(n,"cy",l[1]),f&12&&r!==(r=l[3]/l[2])&&U(n,"r",r),f&16&&fi(n,"touched",l[4]),f&256&&s!==(s=hn(`a9s-handle ${l[8].class||""}`.trim())+" svelte-1sgkh33")&&U(i,"class",s),f&33&&o!==(o=l[0]-l[5]/2)&&U(i,"x",o),f&34&&a!==(a=l[1]-l[5]/2)&&U(i,"y",a),f&32&&U(i,"width",l[5]),f&32&&U(i,"height",l[5])},d(l){l&&ee(t),c=!1,Ue(u)}}}function Ga(e){let t;function n(i,s){return qa?za:Wa}let r=n()(e);return{c(){r.c(),t=hs()},m(i,s){r.m(i,s),te(i,t,s)},p(i,[s]){r.p(i,s)},i:jt,o:jt,d(i){i&&ee(t),r.d(i)}}}function Ka(e,t,n){let r,{x:i}=t,{y:s}=t,{scale:o}=t,{radius:a=30}=t,c=!1;const u=m=>{m.pointerType==="touch"&&n(4,c=!0)},l=()=>n(4,c=!1);function f(m){Fe.call(this,e,m)}function d(m){Fe.call(this,e,m)}function h(m){Fe.call(this,e,m)}return e.$$set=m=>{n(8,t=rr(rr({},t),ui(m))),"x"in m&&n(0,i=m.x),"y"in m&&n(1,s=m.y),"scale"in m&&n(2,o=m.scale),"radius"in m&&n(3,a=m.radius)},e.$$.update=()=>{e.$$.dirty&4&&n(5,r=10/o)},t=ui(t),[i,s,o,a,c,r,u,l,t,f,d,h]}class Et extends En{constructor(t){super(),Rn(this,t,Ka,Ga,Pn,{x:0,y:1,scale:2,radius:3})}}function Qa(e){let t,n,r,i,s,o,a,c,u,l,f,d,h,m,p,S,w,M,x,_,F,j,N,O,v,b,C,k,L,D,V,K,W,R,y,I,A,g,P,T,$,z,Q;return R=new Et({props:{class:"a9s-corner-handle-topleft",x:e[4].x,y:e[4].y,scale:e[3]}}),R.$on("pointerdown",function(){ce(e[9]("TOP_LEFT"))&&e[9]("TOP_LEFT").apply(this,arguments)}),I=new Et({props:{class:"a9s-corner-handle-topright",x:e[4].x+e[4].w,y:e[4].y,scale:e[3]}}),I.$on("pointerdown",function(){ce(e[9]("TOP_RIGHT"))&&e[9]("TOP_RIGHT").apply(this,arguments)}),g=new Et({props:{class:"a9s-corner-handle-bottomright",x:e[4].x+e[4].w,y:e[4].y+e[4].h,scale:e[3]}}),g.$on("pointerdown",function(){ce(e[9]("BOTTOM_RIGHT"))&&e[9]("BOTTOM_RIGHT").apply(this,arguments)}),T=new Et({props:{class:"a9s-corner-handle-bottomleft",x:e[4].x,y:e[4].y+e[4].h,scale:e[3]}}),T.$on("pointerdown",function(){ce(e[9]("BOTTOM_LEFT"))&&e[9]("BOTTOM_LEFT").apply(this,arguments)}),{c(){t=ge("rect"),a=be(),c=ge("rect"),h=be(),m=ge("rect"),M=be(),x=ge("rect"),N=be(),O=ge("rect"),k=be(),L=ge("rect"),W=be(),et(R.$$.fragment),y=be(),et(I.$$.fragment),A=be(),et(g.$$.fragment),P=be(),et(T.$$.fragment),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"x",r=e[4].x),U(t,"y",i=e[4].y),U(t,"width",s=e[4].w),U(t,"height",o=e[4].h),U(c,"class","a9s-inner a9s-shape-handle"),U(c,"style",e[1]),U(c,"x",u=e[4].x),U(c,"y",l=e[4].y),U(c,"width",f=e[4].w),U(c,"height",d=e[4].h),U(m,"class","a9s-edge-handle a9s-edge-handle-top"),U(m,"x",p=e[4].x),U(m,"y",S=e[4].y),U(m,"height",1),U(m,"width",w=e[4].w),U(x,"class","a9s-edge-handle a9s-edge-handle-right"),U(x,"x",_=e[4].x+e[4].w),U(x,"y",F=e[4].y),U(x,"height",j=e[4].h),U(x,"width",1),U(O,"class","a9s-edge-handle a9s-edge-handle-bottom"),U(O,"x",v=e[4].x),U(O,"y",b=e[4].y+e[4].h),U(O,"height",1),U(O,"width",C=e[4].w),U(L,"class","a9s-edge-handle a9s-edge-handle-left"),U(L,"x",D=e[4].x),U(L,"y",V=e[4].y),U(L,"height",K=e[4].h),U(L,"width",1)},m(q,B){te(q,t,B),te(q,a,B),te(q,c,B),te(q,h,B),te(q,m,B),te(q,M,B),te(q,x,B),te(q,N,B),te(q,O,B),te(q,k,B),te(q,L,B),te(q,W,B),Be(R,q,B),te(q,y,B),Be(I,q,B),te(q,A,B),Be(g,q,B),te(q,P,B),Be(T,q,B),$=!0,z||(Q=[ae(t,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(c,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(m,"pointerdown",function(){ce(e[9]("TOP"))&&e[9]("TOP").apply(this,arguments)}),ae(x,"pointerdown",function(){ce(e[9]("RIGHT"))&&e[9]("RIGHT").apply(this,arguments)}),ae(O,"pointerdown",function(){ce(e[9]("BOTTOM"))&&e[9]("BOTTOM").apply(this,arguments)}),ae(L,"pointerdown",function(){ce(e[9]("LEFT"))&&e[9]("LEFT").apply(this,arguments)})],z=!0)},p(q,B){e=q,(!$||B&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!$||B&16&&r!==(r=e[4].x))&&U(t,"x",r),(!$||B&16&&i!==(i=e[4].y))&&U(t,"y",i),(!$||B&16&&s!==(s=e[4].w))&&U(t,"width",s),(!$||B&16&&o!==(o=e[4].h))&&U(t,"height",o),(!$||B&2)&&U(c,"style",e[1]),(!$||B&16&&u!==(u=e[4].x))&&U(c,"x",u),(!$||B&16&&l!==(l=e[4].y))&&U(c,"y",l),(!$||B&16&&f!==(f=e[4].w))&&U(c,"width",f),(!$||B&16&&d!==(d=e[4].h))&&U(c,"height",d),(!$||B&16&&p!==(p=e[4].x))&&U(m,"x",p),(!$||B&16&&S!==(S=e[4].y))&&U(m,"y",S),(!$||B&16&&w!==(w=e[4].w))&&U(m,"width",w),(!$||B&16&&_!==(_=e[4].x+e[4].w))&&U(x,"x",_),(!$||B&16&&F!==(F=e[4].y))&&U(x,"y",F),(!$||B&16&&j!==(j=e[4].h))&&U(x,"height",j),(!$||B&16&&v!==(v=e[4].x))&&U(O,"x",v),(!$||B&16&&b!==(b=e[4].y+e[4].h))&&U(O,"y",b),(!$||B&16&&C!==(C=e[4].w))&&U(O,"width",C),(!$||B&16&&D!==(D=e[4].x))&&U(L,"x",D),(!$||B&16&&V!==(V=e[4].y))&&U(L,"y",V),(!$||B&16&&K!==(K=e[4].h))&&U(L,"height",K);const Z={};B&16&&(Z.x=e[4].x),B&16&&(Z.y=e[4].y),B&8&&(Z.scale=e[3]),R.$set(Z);const ne={};B&16&&(ne.x=e[4].x+e[4].w),B&16&&(ne.y=e[4].y),B&8&&(ne.scale=e[3]),I.$set(ne);const ie={};B&16&&(ie.x=e[4].x+e[4].w),B&16&&(ie.y=e[4].y+e[4].h),B&8&&(ie.scale=e[3]),g.$set(ie);const se={};B&16&&(se.x=e[4].x),B&16&&(se.y=e[4].y+e[4].h),B&8&&(se.scale=e[3]),T.$set(se)},i(q){$||(we(R.$$.fragment,q),we(I.$$.fragment,q),we(g.$$.fragment,q),we(T.$$.fragment,q),$=!0)},o(q){Re(R.$$.fragment,q),Re(I.$$.fragment,q),Re(g.$$.fragment,q),Re(T.$$.fragment,q),$=!1},d(q){q&&(ee(t),ee(a),ee(c),ee(h),ee(m),ee(M),ee(x),ee(N),ee(O),ee(k),ee(L),ee(W),ee(y),ee(A),ee(P)),qe(R,q),qe(I,q),qe(g,q),qe(T,q),z=!1,Ue(Q)}}}function Ya(e){let t,n;return t=new vs({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Qa,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("grab",e[6]),t.$on("change",e[7]),t.$on("release",e[8]),{c(){et(t.$$.fragment)},m(r,i){Be(t,r,i),n=!0},p(r,[i]){const s={};i&1&&(s.shape=r[0]),i&4&&(s.transform=r[2]),i&1562&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(we(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Xa(e,t,n){let r,{shape:i}=t,{computedStyle:s}=t,{transform:o}=t,{viewportScale:a=1}=t;const c=(d,h,m)=>{const p=d.geometry.bounds;let[S,w]=[p.minX,p.minY],[M,x]=[p.maxX,p.maxY];const[_,F]=m;if(h==="SHAPE")S+=_,M+=_,w+=F,x+=F;else{switch(h){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{w+=F;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{x+=F;break}}switch(h){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{S+=_;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{M+=_;break}}}const j=Math.min(S,M),N=Math.min(w,x),O=Math.abs(M-S),v=Math.abs(x-w);return{...d,geometry:{x:j,y:N,w:O,h:v,bounds:{minX:j,minY:N,maxX:j+O,maxY:N+v}}}};function u(d){Fe.call(this,e,d)}function l(d){Fe.call(this,e,d)}function f(d){Fe.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,i=d.shape),"computedStyle"in d&&n(1,s=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=i.geometry)},[i,s,o,a,r,c,u,l,f]}class Ja extends En{constructor(t){super(),Rn(this,t,Xa,Ya,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}Se.RECTANGLE,Se.POLYGON;const Za=e=>({}),bi=e=>({grab:e[0]});function ec(e){let t,n,r,i;const s=e[7].default,o=Zo(s,e,e[6],bi);return{c(){t=ge("g"),o&&o.c(),U(t,"class","a9s-annotation selected")},m(a,c){te(a,t,c),o&&o.m(t,null),n=!0,r||(i=[ae(t,"pointerup",e[2]),ae(t,"pointermove",e[1])],r=!0)},p(a,[c]){o&&o.p&&(!n||c&64)&&ta(o,s,a,a[6],n?ea(s,a[6],c,Za):na(a[6]),bi)},i(a){n||(we(o,a),n=!0)},o(a){Re(o,a),n=!1},d(a){a&&ee(t),o&&o.d(a),r=!1,Ue(i)}}}function tc(e,t,n){let{$$slots:r={},$$scope:i}=t;const s=aa();let{shape:o}=t,{editor:a}=t,{transform:c}=t,u,l,f;const d=p=>S=>{u=p,l=c.elementToImage(S.offsetX,S.offsetY),f=o,S.target.setPointerCapture(S.pointerId),s("grab",S)},h=p=>{if(u){const[S,w]=c.elementToImage(p.offsetX,p.offsetY),M=[S-l[0],w-l[1]];n(3,o=a(f,u,M)),s("change",o)}},m=p=>{p.target.releasePointerCapture(p.pointerId),u=void 0,f=o,s("release",p)};return e.$$set=p=>{"shape"in p&&n(3,o=p.shape),"editor"in p&&n(4,a=p.editor),"transform"in p&&n(5,c=p.transform),"$$scope"in p&&n(6,i=p.$$scope)},[d,h,m,o,a,c,i,r]}class vs extends En{constructor(t){super(),Rn(this,t,tc,ec,Pn,{shape:3,editor:4,transform:5})}}navigator.userAgent.indexOf("Mac OS X");var nc=(e=>(e.EDIT="EDIT",e.SELECT="SELECT",e.NONE="NONE",e))(nc||{}),rc=[];for(var Kn=0;Kn<256;++Kn)rc.push((Kn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ic="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let sc=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=ic[n[e]&63];return t};sc();const Xf=e=>{const[t,n]=E.useState();return E.useEffect(()=>{fetch(`../../${e}`).then(r=>r.json()).then(r=>{const i=r.filter(s=>{const a=(Array.isArray(s.body)?s.body:[s.body]).some(d=>d.purpose==="tagging"),c=Array.isArray(s.target)?s.target[0]:s.target,l=(Array.isArray(c.selector)?c.selector:[c.selector]).find(d=>d.type==="FragmentSelector"),f=l&&l.value.endsWith(",0,0");return a&&!f});n(i)}).catch(r=>{console.log("Error fetching annotations",r)})},[]),t},Jf=(e,t)=>{const[n,r]=E.useState(t);return E.useEffect(()=>{const i=localStorage.getItem(e);if(i)try{r(JSON.parse(i))}catch(s){console.error("Error parsing stored state",s)}},[e]),E.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n]),[n,r]},Zf=e=>{const[t,n]=E.useState([]),[r,i]=E.useState({images:void 0,verses:void 0});return E.useEffect(()=>{fetch("../../tag-index.json").then(s=>s.json()).then(n)},[]),E.useEffect(()=>{if(t)if(e){const s=e.bodies.filter(u=>u.purpose==="tagging"&&u.value).map(u=>u.value),o=t.filter(u=>u.id!==e.id&&u.tags.some(l=>s.includes(l))),a=o.filter(u=>u.type==="IMAGE"),c=o.filter(u=>u.type==="VERSE");i({images:a,verses:c})}else i({images:void 0,verses:void 0})},[t,e]),r},oc=()=>{const e=Qo();return E.useMemo(()=>e.selected.length>0?e.selected[0].annotation:void 0,[e.selected.map(n=>n.annotation.id).join(",")])},ed=e=>{const t=zo(),n=oc(),[r,i]=E.useState(!1);return E.useEffect(()=>{if(r)if(n){const s=n.id.substring(n.id.lastIndexOf("/")+1);location.hash=`#${s}`}else location.hash=""},[n,r]),E.useEffect(()=>{if(!t||!e.loaded)return;const s=c=>{const u=`https://recogito.pelagios.org/annotation/${c}`;if(!(t.getSelected()||[]).map(f=>f.id).includes(u)&&(t.setSelected(u),"scrollIntoView"in t)){const f=t.getAnnotationById(`https://recogito.pelagios.org/annotation/${c}`);t.scrollIntoView(f)}},o=window.location.hash.substring(1);o?setTimeout(()=>{s(o),i(!0)}):i(!0);const a=()=>{const c=window.location.hash.substring(1);c&&s(c)};return window.addEventListener("hashchange",a),()=>{window.removeEventListener("hashchange",a)}},[t,e.loaded]),null};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ws=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>E.createElement("svg",{ref:c,...cc,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ws("lucide",i),...a},[...o.map(([u,l])=>E.createElement(u,l)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(uc,{ref:s,iconNode:t,className:ws(`lucide-${ac(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=it("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=it("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=it("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=it("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=it("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var mc=Object.defineProperty,yc=(e,t)=>{for(var n in t)mc(e,n,{get:t[n],enumerable:!0})},Oe={};yc(Oe,{assign:()=>Sc,colors:()=>Ge,createStringInterpolator:()=>Mr,skipAnimation:()=>Ps,to:()=>Is,willAdvance:()=>jr});var Er=Gt(),X=e=>zt(e,Er),Cr=Gt();X.write=e=>zt(e,Cr);var Cn=Gt();X.onStart=e=>zt(e,Cn);var Ar=Gt();X.onFrame=e=>zt(e,Ar);var Tr=Gt();X.onFinish=e=>zt(e,Tr);var ht=[];X.setTimeout=(e,t)=>{const n=X.now()+t,r=()=>{const s=ht.findIndex(o=>o.cancel==r);~s&&ht.splice(s,1),ze-=~s?1:0},i={time:n,handler:e,cancel:r};return ht.splice(Ss(n),0,i),ze+=1,bs(),i};var Ss=e=>~(~ht.findIndex(t=>t.time>e)||~ht.length);X.cancel=e=>{Cn.delete(e),Ar.delete(e),Tr.delete(e),Er.delete(e),Cr.delete(e)};X.sync=e=>{or=!0,X.batchedUpdates(e),or=!1};X.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...i){t=i,X.onStart(n)}return r.handler=e,r.cancel=()=>{Cn.delete(n),t=null},r};var $r=typeof window<"u"?window.requestAnimationFrame:()=>{};X.use=e=>$r=e;X.now=typeof performance<"u"?()=>performance.now():Date.now;X.batchedUpdates=e=>e();X.catch=console.error;X.frameLoop="always";X.advance=()=>{X.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):xs()};var We=-1,ze=0,or=!1;function zt(e,t){or?(t.delete(e),e(0)):(t.add(e),bs())}function bs(){We<0&&(We=0,X.frameLoop!=="demand"&&$r(_s))}function vc(){We=-1}function _s(){~We&&($r(_s),X.batchedUpdates(xs))}function xs(){const e=We;We=X.now();const t=Ss(We);if(t&&(Os(ht.splice(0,t),n=>n.handler()),ze-=t),!ze){vc();return}Cn.flush(),Er.flush(e?Math.min(64,We-e):16.667),Ar.flush(),Cr.flush(),Tr.flush()}function Gt(){let e=new Set,t=e;return{add(n){ze+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return ze-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,ze-=t.size,Os(t,r=>r(n)&&e.add(r)),ze+=e.size,t=e)}}}function Os(e,t){e.forEach(n=>{try{t(n)}catch(r){X.catch(r)}})}function ar(){}var wc=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),H={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function je(e,t){if(H.arr(e)){if(!H.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var J=(e,t)=>e.forEach(t);function Ae(e,t,n){if(H.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ue=e=>H.und(e)?[]:H.arr(e)?e:[e];function Tt(e,t){if(e.size){const n=Array.from(e);e.clear(),J(n,t)}}var Ct=(e,...t)=>Tt(e,n=>n(...t)),kr=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Mr,Is,Ge=null,Ps=!1,jr=ar,Sc=e=>{e.to&&(Is=e.to),e.now&&(X.now=e.now),e.colors!==void 0&&(Ge=e.colors),e.skipAnimation!=null&&(Ps=e.skipAnimation),e.createStringInterpolator&&(Mr=e.createStringInterpolator),e.requestAnimationFrame&&X.use(e.requestAnimationFrame),e.batchedUpdates&&(X.batchedUpdates=e.batchedUpdates),e.willAdvance&&(jr=e.willAdvance),e.frameLoop&&(X.frameLoop=e.frameLoop)},$t=new Set,ve=[],Qn=[],gn=0,An={get idle(){return!$t.size&&!ve.length},start(e){gn>e.priority?($t.add(e),X.onStart(bc)):(Rs(e),X(cr))},advance:cr,sort(e){if(gn)X.onFrame(()=>An.sort(e));else{const t=ve.indexOf(e);~t&&(ve.splice(t,1),Es(e))}},clear(){ve=[],$t.clear()}};function bc(){$t.forEach(Rs),$t.clear(),X(cr)}function Rs(e){ve.includes(e)||Es(e)}function Es(e){ve.splice(_c(ve,t=>t.priority>e.priority),0,e)}function cr(e){const t=Qn;for(let n=0;n<ve.length;n++){const r=ve[n];gn=r.priority,r.idle||(jr(r),r.advance(e),r.idle||t.push(r))}return gn=0,Qn=ve,Qn.length=0,ve=t,ve.length>0}function _c(e,t){const n=e.findIndex(t);return n<0?e.length:n}var xc=(e,t,n)=>Math.min(Math.max(n,e),t),Oc={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},xe="[-+]?\\d*\\.?\\d+",pn=xe+"%";function Tn(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Ic=new RegExp("rgb"+Tn(xe,xe,xe)),Pc=new RegExp("rgba"+Tn(xe,xe,xe,xe)),Rc=new RegExp("hsl"+Tn(xe,pn,pn)),Ec=new RegExp("hsla"+Tn(xe,pn,pn,xe)),Cc=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ac=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Tc=/^#([0-9a-fA-F]{6})$/,$c=/^#([0-9a-fA-F]{8})$/;function kc(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Tc.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ge&&Ge[e]!==void 0?Ge[e]:(t=Ic.exec(e))?(ut(t[1])<<24|ut(t[2])<<16|ut(t[3])<<8|255)>>>0:(t=Pc.exec(e))?(ut(t[1])<<24|ut(t[2])<<16|ut(t[3])<<8|Oi(t[4]))>>>0:(t=Cc.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=$c.exec(e))?parseInt(t[1],16)>>>0:(t=Ac.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Rc.exec(e))?(_i(xi(t[1]),rn(t[2]),rn(t[3]))|255)>>>0:(t=Ec.exec(e))?(_i(xi(t[1]),rn(t[2]),rn(t[3]))|Oi(t[4]))>>>0:null}function Yn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _i(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,s=Yn(i,r,e+1/3),o=Yn(i,r,e),a=Yn(i,r,e-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function ut(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function xi(e){return(parseFloat(e)%360+360)%360/360}function Oi(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function rn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Ii(e){let t=kc(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,i=(t&65280)>>>8,s=(t&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Dt=(e,t,n)=>{if(H.fun(e))return e;if(H.arr(e))return Dt({range:e,output:t,extrapolate:n});if(H.str(e.output[0]))return Mr(e);const r=e,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const l=jc(u,s);return Mc(u,s[l],s[l+1],i[l],i[l+1],c,o,a,r.map)}};function Mc(e,t,n,r,i,s,o,a,c){let u=c?c(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return r===i?r:t===n?e<=t?r:i:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function jc(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Fc=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,i=t==="end"?Math.floor(r):Math.ceil(r);return xc(0,1,i/e)},mn=1.70158,sn=mn*1.525,Pi=mn+1,Ri=2*Math.PI/3,Ei=2*Math.PI/4.5,on=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,$n={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Pi*e*e*e-mn*e*e,easeOutBack:e=>1+Pi*Math.pow(e-1,3)+mn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((sn+1)*2*e-sn)/2:(Math.pow(2*e-2,2)*((sn+1)*(e*2-2)+sn)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Ri),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Ri)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Ei))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Ei)/2+1,easeInBounce:e=>1-on(1-e),easeOutBounce:on,easeInOutBounce:e=>e<.5?(1-on(1-2*e))/2:(1+on(2*e-1))/2,steps:Fc},Lt=Symbol.for("FluidValue.get"),mt=Symbol.for("FluidValue.observers"),ye=e=>!!(e&&e[Lt]),fe=e=>e&&e[Lt]?e[Lt]():e,Ci=e=>e[mt]||null;function Dc(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Nt(e,t){const n=e[mt];n&&n.forEach(r=>{Dc(r,t)})}var Cs=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Lc(this,e)}},Lc=(e,t)=>As(e,Lt,t);function St(e,t){if(e[Lt]){let n=e[mt];n||As(e,mt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Ut(e,t){const n=e[mt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[mt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var As=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),ln=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Nc=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ai=new RegExp(`(${ln.source})(%|[a-z]+)`,"i"),Uc=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,kn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ts=e=>{const[t,n]=Hc(e);if(!t||kr())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||e}else{if(n&&kn.test(n))return Ts(n);if(n)return n}return e},Hc=e=>{const t=kn.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},Xn,Vc=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,$s=e=>{Xn||(Xn=Ge?new RegExp(`(${Object.keys(Ge).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(s=>fe(s).replace(kn,Ts).replace(Nc,Ii).replace(Xn,Ii)),n=t.map(s=>s.match(ln).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Dt({...e,output:s}));return s=>{const o=!Ai.test(t[0])&&t.find(c=>Ai.test(c))?.replace(ln,"");let a=0;return t[0].replace(ln,()=>`${i[a++](s)}${o||""}`).replace(Uc,Vc)}},Fr="react-spring: ",ks=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Fr}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Bc=ks(console.warn);function qc(){Bc(`${Fr}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Wc=ks(console.warn);function zc(){Wc(`${Fr}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Mn(e){return H.str(e)&&(e[0]=="#"||/\d/.test(e)||!kr()&&kn.test(e)||e in(Ge||{}))}var ft=kr()?E.useEffect:E.useLayoutEffect,Gc=()=>{const e=E.useRef(!1);return ft(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Ms(){const e=E.useState()[1],t=Gc();return()=>{t.current&&e(Math.random())}}function Kc(e,t){const[n]=E.useState(()=>({inputs:t,result:e()})),r=E.useRef(),i=r.current;let s=i;return s?t&&s.inputs&&Qc(t,s.inputs)||(s={inputs:t,result:e()}):s=n,E.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Qc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var js=e=>E.useEffect(e,Yc),Yc=[];function Xc(e){const t=E.useRef();return E.useEffect(()=>{t.current=e}),t.current}var Ht=Symbol.for("Animated:node"),Jc=e=>!!e&&e[Ht]===e,Pe=e=>e&&e[Ht],Dr=(e,t)=>wc(e,Ht,t),jn=e=>e&&e[Ht]&&e[Ht].getPayload(),Fs=class{constructor(){Dr(this,this)}getPayload(){return this.payload||[]}},Kt=class extends Fs{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,H.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Kt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return H.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,H.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Vt=class extends Kt{constructor(e){super(0),this._string=null,this._toString=Dt({output:[e,e]})}static create(e){return new Vt(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(H.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Dt({output:[this.getValue(),e]})),this._value=0,super.reset()}},yn={dependencies:null},Fn=class extends Fs{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Ae(this.source,(n,r)=>{Jc(n)?t[r]=n.getValue(e):ye(n)?t[r]=fe(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&J(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Ae(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){yn.dependencies&&ye(e)&&yn.dependencies.add(e);const t=jn(e);t&&J(t,n=>this.add(n))}},Ds=class extends Fn{constructor(e){super(e)}static create(e){return new Ds(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Zc)),!0)}};function Zc(e){return(Mn(e)?Vt:Kt).create(e)}function ur(e){const t=Pe(e);return t?t.constructor:H.arr(e)?Ds:Mn(e)?Vt:Kt}var Ti=(e,t)=>{const n=!H.fun(e)||e.prototype&&e.prototype.isReactComponent;return E.forwardRef((r,i)=>{const s=E.useRef(null),o=n&&E.useCallback(m=>{s.current=nu(i,m)},[i]),[a,c]=tu(r,t),u=Ms(),l=()=>{const m=s.current;if(n&&!m)return;(m?t.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&u()},f=new eu(l,c),d=E.useRef();ft(()=>(d.current=f,J(c,m=>St(m,f)),()=>{d.current&&(J(d.current.deps,m=>Ut(m,d.current)),X.cancel(d.current.update))})),E.useEffect(l,[]),js(()=>()=>{const m=d.current;J(m.deps,p=>Ut(p,m))});const h=t.getComponentProps(a.getValue());return E.createElement(e,{...h,ref:o})})},eu=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&X.write(this.update)}};function tu(e,t){const n=new Set;return yn.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Fn(e),yn.dependencies=null,[e,n]}function nu(e,t){return e&&(H.fun(e)?e(t):e.current=t),t}var $i=Symbol.for("AnimatedComponent"),ru=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=i=>new Fn(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=ki(o)||"Anonymous";return H.str(o)?o=s[o]||(s[o]=Ti(o,i)):o=o[$i]||(o[$i]=Ti(o,i)),o.displayName=`Animated(${a})`,o};return Ae(e,(o,a)=>{H.arr(e)&&(a=ki(o)),s[a]=s(o)}),{animated:s}},ki=e=>H.str(e)?e:e&&H.str(e.displayName)?e.displayName:H.fun(e)&&e.name||null;function de(e,...t){return H.fun(e)?e(...t):e}var kt=(e,t)=>e===!0||!!(t&&e&&(H.fun(e)?e(t):ue(e).includes(t))),Ls=(e,t)=>H.obj(e)?t&&e[t]:e,Ns=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,iu=e=>e,Lr=(e,t=iu)=>{let n=su;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const s=t(e[i],i);H.und(s)||(r[i]=s)}return r},su=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ou={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function au(e){const t={};let n=0;if(Ae(e,(r,i)=>{ou[i]||(t[i]=r,n++)}),n)return t}function Nr(e){const t=au(e);if(t){const n={to:t};return Ae(e,(r,i)=>i in t||(n[i]=r)),n}return{...e}}function Bt(e){return e=fe(e),H.arr(e)?e.map(Bt):Mn(e)?Oe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function cu(e){for(const t in e)return!0;return!1}function lr(e){return H.fun(e)||H.arr(e)&&H.obj(e[0])}function Mi(e,t){e.ref?.delete(e),t?.delete(e)}function uu(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var lu={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},fr={...lu.default,mass:1,damping:1,easing:$n.linear,clamp:!1},fu=class{constructor(){this.velocity=0,Object.assign(this,fr)}};function du(e,t,n){n&&(n={...n},ji(n,t),t={...n,...t}),ji(e,t),Object.assign(e,t);for(const o in fr)e[o]==null&&(e[o]=fr[o]);let{frequency:r,damping:i}=e;const{mass:s}=e;return H.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*s,e.friction=4*Math.PI*i*s/r),e}function ji(e,t){if(!H.und(t.decay))e.duration=void 0;else{const n=!H.und(t.tension)||!H.und(t.friction);(n||!H.und(t.frequency)||!H.und(t.damping)||!H.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var Fi=[],hu=class{constructor(){this.changed=!1,this.values=Fi,this.toValues=null,this.fromValues=Fi,this.config=new fu,this.immediate=!1}};function Us(e,{key:t,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let c,u,l=kt(n.cancel??r?.cancel,t);if(l)h();else{H.und(n.pause)||(i.paused=kt(n.pause,t));let m=r?.pause;m!==!0&&(m=i.paused||kt(m,t)),c=de(n.delay||0,t),m?(i.resumeQueue.add(d),s.pause()):(s.resume(),d())}function f(){i.resumeQueue.add(d),i.timeouts.delete(u),u.cancel(),c=u.time-X.now()}function d(){c>0&&!Oe.skipAnimation?(i.delayed=!0,u=X.setTimeout(h,c),i.pauseQueue.add(f),i.timeouts.add(u)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(u),e<=(i.cancelId||0)&&(l=!0);try{s.start({...n,callId:e,cancel:l},o)}catch(m){a(m)}}})}var Ur=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?gt(e.get()):t.every(n=>n.noop)?Hs(e.get()):_e(e.get(),t.every(n=>n.finished)),Hs=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),_e=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),gt=e=>({value:e,cancelled:!0,finished:!1});function Vs(e,t,n,r){const{callId:i,parentId:s,onRest:o}=t,{asyncTo:a,promise:c}=n;return!s&&e===a&&!t.reset?c:n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const u=Lr(t,(S,w)=>w==="onRest"?void 0:S);let l,f;const d=new Promise((S,w)=>(l=S,f=w)),h=S=>{const w=i<=(n.cancelId||0)&&gt(r)||i!==n.asyncId&&_e(r,!1);if(w)throw S.result=w,f(S),S},m=(S,w)=>{const M=new Di,x=new Li;return(async()=>{if(Oe.skipAnimation)throw qt(n),x.result=_e(r,!1),f(x),x;h(M);const _=H.obj(S)?{...S}:{...w,to:S};_.parentId=i,Ae(u,(j,N)=>{H.und(_[N])&&(_[N]=j)});const F=await r.start(_);return h(M),n.paused&&await new Promise(j=>{n.resumeQueue.add(j)}),F})()};let p;if(Oe.skipAnimation)return qt(n),_e(r,!1);try{let S;H.arr(e)?S=(async w=>{for(const M of w)await m(M)})(e):S=Promise.resolve(e(m,r.stop.bind(r))),await Promise.all([S.then(l),d]),p=_e(r.get(),!0,!1)}catch(S){if(S instanceof Di)p=S.result;else if(S instanceof Li)p=S.result;else throw S}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?c:void 0)}return H.fun(o)&&X.batchedUpdates(()=>{o(p,r,r.item)}),p})()}function qt(e,t){Tt(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Di=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Li=class extends Error{constructor(){super("SkipAnimationSignal")}},dr=e=>e instanceof Hr,gu=1,Hr=class extends Cs{constructor(){super(...arguments),this.id=gu++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Pe(this);return e&&e.getValue()}to(...e){return Oe.to(this,e)}interpolate(...e){return qc(),Oe.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Nt(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||An.sort(this),Nt(this,{type:"priority",parent:this,priority:e})}},tt=Symbol.for("SpringPhase"),Bs=1,hr=2,gr=4,Jn=e=>(e[tt]&Bs)>0,Ve=e=>(e[tt]&hr)>0,It=e=>(e[tt]&gr)>0,Ni=(e,t)=>t?e[tt]|=hr|Bs:e[tt]&=~hr,Ui=(e,t)=>t?e[tt]|=gr:e[tt]&=~gr,pu=class extends Hr{constructor(e,t){if(super(),this.animation=new hu,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!H.und(e)||!H.und(t)){const n=H.obj(e)?{...e}:{...t,from:e};H.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ve(this)||this._state.asyncTo)||It(this)}get goal(){return fe(this.animation.to)}get velocity(){const e=Pe(this);return e instanceof Kt?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Jn(this)}get isAnimating(){return Ve(this)}get isPaused(){return It(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=jn(r.to);!o&&ye(r.to)&&(i=ue(fe(r.to))),r.values.forEach((u,l)=>{if(u.done)return;const f=u.constructor==Vt?1:o?o[l].lastPosition:i[l];let d=r.immediate,h=f;if(!d){if(h=u.lastPosition,s.tension<=0){u.done=!0;return}let m=u.elapsedTime+=e;const p=r.fromValues[l],S=u.v0!=null?u.v0:u.v0=H.arr(s.velocity)?s.velocity[l]:s.velocity;let w;const M=s.precision||(p==f?.005:Math.min(1,Math.abs(f-p)*.001));if(H.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,_=Math.exp(-(1-x)*m);h=p+S/(1-x)*(1-_),d=Math.abs(u.lastPosition-h)<=M,w=S*_}else{w=u.lastVelocity==null?S:u.lastVelocity;const x=s.restVelocity||M/10,_=s.clamp?0:s.bounce,F=!H.und(_),j=p==f?u.v0>0:p<f;let N,O=!1;const v=1,b=Math.ceil(e/v);for(let C=0;C<b&&(N=Math.abs(w)>x,!(!N&&(d=Math.abs(f-h)<=M,d)));++C){F&&(O=h==f||h>f==j,O&&(w=-w*_,h=f));const k=-s.tension*1e-6*(h-f),L=-s.friction*.001*w,D=(k+L)/s.mass;w=w+D*v,h=h+w*v}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,m=u.elapsedTime+=e)),x=(s.progress||0)+m/this._memoizedDuration,x=x>1?1:x<0?0:x,u.durationProgress=x),h=p+s.easing(x)*(f-p),w=(h-u.lastPosition)/e,d=x==1}u.lastVelocity=w,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[l].done&&(d=!1),d?u.done=!0:t=!1,u.setValue(h,s.round)&&(n=!0)});const a=Pe(this),c=a.getValue();if(t){const u=fe(r.to);(c!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return X.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ve(this)){const{to:e,config:t}=this.animation;X.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return H.und(e)?(n=this.queue||[],this.queue=[]):n=[H.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Ur(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),qt(this._state,e&&this._lastCallId),X.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=H.obj(n)?n[t]:n,(n==null||lr(n))&&(n=void 0),r=H.obj(r)?r[t]:r,r==null&&(r=void 0);const i={to:n,from:r};return Jn(this)||(e.reverse&&([n,r]=[r,n]),r=fe(r),H.und(r)?Pe(this)||this._set(n):this._set(r)),i}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Lr(e,(o,a)=>/^on/.test(a)?Ls(o,n):o)),Vi(this,e,"onProps"),Rt(this,"onProps",e,this);const i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Us(++this._lastCallId,{key:n,props:e,defaultProps:r,state:s,actions:{pause:()=>{It(this)||(Ui(this,!0),Ct(s.pauseQueue),Rt(this,"onPause",_e(this,Pt(this,this.animation.to)),this))},resume:()=>{It(this)&&(Ui(this,!1),Ve(this)&&this._resume(),Ct(s.resumeQueue),Rt(this,"onResume",_e(this,Pt(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const a=qs(e);if(a)return this._update(a,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(gt(this));const r=!H.und(e.to),i=!H.und(e.from);if(r||i)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(gt(this));const{key:s,defaultProps:o,animation:a}=this,{to:c,from:u}=a;let{to:l=c,from:f=u}=e;i&&!r&&(!t.default||H.und(l))&&(l=f),t.reverse&&([l,f]=[f,l]);const d=!je(f,u);d&&(a.from=f),f=fe(f);const h=!je(l,c);h&&this._focus(l);const m=lr(t.to),{config:p}=a,{decay:S,velocity:w}=p;(r||i)&&(p.velocity=0),t.config&&!m&&du(p,de(t.config,s),t.config!==o.config?de(o.config,s):void 0);let M=Pe(this);if(!M||H.und(l))return n(_e(this,!0));const x=H.und(t.reset)?i&&!t.default:!H.und(f)&&kt(t.reset,s),_=x?f:this.get(),F=Bt(l),j=H.num(F)||H.arr(F)||Mn(F),N=!m&&(!j||kt(o.immediate||t.immediate,s));if(h){const C=ur(l);if(C!==M.constructor)if(N)M=this._set(F);else throw Error(`Cannot animate between ${M.constructor.name} and ${C.name}, as the "to" prop suggests`)}const O=M.constructor;let v=ye(l),b=!1;if(!v){const C=x||!Jn(this)&&d;(h||C)&&(b=je(Bt(_),F),v=!b),(!je(a.immediate,N)&&!N||!je(p.decay,S)||!je(p.velocity,w))&&(v=!0)}if(b&&Ve(this)&&(a.changed&&!x?v=!0:v||this._stop(c)),!m&&((v||ye(c))&&(a.values=M.getPayload(),a.toValues=ye(l)?null:O==Vt?[1]:ue(F)),a.immediate!=N&&(a.immediate=N,!N&&!x&&this._set(c)),v)){const{onRest:C}=a;J(mu,L=>Vi(this,t,L));const k=_e(this,Pt(this,c));Ct(this._pendingCalls,k),this._pendingCalls.add(n),a.changed&&X.batchedUpdates(()=>{a.changed=!x,C?.(k,this),x?de(o.onRest,k):a.onStart?.(k,this)})}x&&this._set(_),m?n(Vs(t.to,t,this._state,this)):v?this._start():Ve(this)&&!h?this._pendingCalls.add(n):n(Hs(_))}_focus(e){const t=this.animation;e!==t.to&&(Ci(this)&&this._detach(),t.to=e,Ci(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ye(t)&&(St(t,this),dr(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ye(e)&&Ut(e,this)}_set(e,t=!0){const n=fe(e);if(!H.und(n)){const r=Pe(this);if(!r||!je(n,r.getValue())){const i=ur(n);!r||r.constructor!=i?Dr(this,i.create(n)):r.setValue(n),r&&X.batchedUpdates(()=>{this._onChange(n,t)})}}return Pe(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Rt(this,"onStart",_e(this,Pt(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),de(this.animation.onChange,e,this)),de(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Pe(this).reset(fe(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ve(this)||(Ni(this,!0),It(this)||this._resume())}_resume(){Oe.skipAnimation?this.finish():An.start(this)}_stop(e,t){if(Ve(this)){Ni(this,!1);const n=this.animation;J(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Nt(this,{type:"idle",parent:this});const r=t?gt(this.get()):_e(this.get(),Pt(this,e??n.to));Ct(this._pendingCalls,r),n.changed&&(n.changed=!1,Rt(this,"onRest",r,this))}}};function Pt(e,t){const n=Bt(t),r=Bt(e.get());return je(r,n)}function qs(e,t=e.loop,n=e.to){const r=de(t);if(r){const i=r!==!0&&Nr(r),s=(i||e).reverse,o=!i||i.reset;return vn({...e,loop:t,default:!1,pause:void 0,to:!s||lr(n)?n:void 0,from:o?e.from:void 0,reset:o,...i})}}function vn(e){const{to:t,from:n}=e=Nr(e),r=new Set;return H.obj(t)&&Hi(t,r),H.obj(n)&&Hi(n,r),e.keys=r.size?Array.from(r):null,e}function Hi(e,t){Ae(e,(n,r)=>n!=null&&t.add(r))}var mu=["onStart","onRest","onChange","onPause","onResume"];function Vi(e,t,n){e.animation[n]=t[n]!==Ns(t,n)?Ls(t[n],e.key):void 0}function Rt(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var yu=["onStart","onChange","onRest"],vu=1,wu=class{constructor(e,t){this.id=vu++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];H.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(vn(e)),this}start(e){let{queue:t}=this;return e?t=ue(e).map(vn):this.queue=[],this._flush?this._flush(this,t):(Ks(this,t),Su(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;J(ue(t),r=>n[r].stop(!!e))}else qt(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(H.und(e))this.start({pause:!0});else{const t=this.springs;J(ue(e),n=>t[n].pause())}return this}resume(e){if(H.und(e))this.start({pause:!1});else{const t=this.springs;J(ue(e),n=>t[n].resume())}return this}each(e){Ae(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Tt(e,([a,c])=>{c.value=this.get(),a(c,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&t.size&&Tt(t,([a,c])=>{c.value=o,a(c,this,this._item)}),s&&(this._started=!1,Tt(n,([a,c])=>{c.value=o,a(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;X.onFrame(this._onFrame)}};function Su(e,t){return Promise.all(t.map(n=>Ws(e,n))).then(n=>Ur(e,n))}async function Ws(e,t,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:c}=t,u=H.obj(t.default)&&t.default;o&&(t.loop=!1),i===!1&&(t.to=null),s===!1&&(t.from=null);const l=H.arr(i)||H.fun(i)?i:void 0;l?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):J(yu,p=>{const S=t[p];if(H.fun(S)){const w=e._events[p];t[p]=({finished:M,cancelled:x})=>{const _=w.get(S);_?(M||(_.finished=!1),x&&(_.cancelled=!0)):w.set(S,{value:null,finished:M||!1,cancelled:x||!1})},u&&(u[p]=t[p])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,Ct(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map(p=>e.springs[p].start(t)),h=t.cancel===!0||Ns(t,"cancel")===!0;(l||h&&f.asyncId)&&d.push(Us(++e._lastAsyncId,{props:t,state:f,actions:{pause:ar,resume:ar,start(p,S){h?(qt(f,e._lastAsyncId),S(gt(e))):(p.onRest=a,S(Vs(l,p,f,e)))}}})),f.paused&&await new Promise(p=>{f.resumeQueue.add(p)});const m=Ur(e,await Promise.all(d));if(o&&m.finished&&!(n&&m.noop)){const p=qs(t,o,i);if(p)return Ks(e,[p]),Ws(e,p,!0)}return c&&X.batchedUpdates(()=>c(m,e,e.item)),m}function bu(e,t){const n={...e.springs};return t&&J(ue(t),r=>{H.und(r.keys)&&(r=vn(r)),H.obj(r.to)||(r={...r,to:void 0}),Gs(n,r,i=>zs(i))}),_u(e,n),n}function _u(e,t){Ae(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,St(n,e))})}function zs(e,t){const n=new pu;return n.key=e,t&&St(n,t),n}function Gs(e,t,n){t.keys&&J(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Ks(e,t){J(t,n=>{Gs(e.springs,n,r=>zs(r,e))})}var Dn=({children:e,...t})=>{const n=E.useContext(wn),r=t.pause||!!n.pause,i=t.immediate||!!n.immediate;t=Kc(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=wn;return E.createElement(s,{value:t},e)},wn=xu(Dn,{});Dn.Provider=wn.Provider;Dn.Consumer=wn.Consumer;function xu(e,t){return Object.assign(e,E.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var Ou=()=>{const e=[],t=function(r){zc();const i=[];return J(e,(s,o)=>{if(H.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const i=e.indexOf(r);~i&&e.splice(i,1)},t.pause=function(){return J(e,r=>r.pause(...arguments)),this},t.resume=function(){return J(e,r=>r.resume(...arguments)),this},t.set=function(r){J(e,(i,s)=>{const o=H.fun(r)?r(s,i):r;o&&i.set(o)})},t.start=function(r){const i=[];return J(e,(s,o)=>{if(H.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},t.stop=function(){return J(e,r=>r.stop(...arguments)),this},t.update=function(r){return J(e,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return H.fun(r)?r(s,i):r};return t._getProps=n,t};function Vr(e,t,n){const r=H.fun(t)&&t,{reset:i,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:l,config:f}=r?r():t,d=E.useMemo(()=>r||arguments.length==3?Ou():void 0,[]),h=ue(e),m=[],p=E.useRef(null),S=i?null:p.current;ft(()=>{p.current=m}),js(()=>(J(m,D=>{d?.add(D.ctrl),D.ctrl.ref=d}),()=>{J(p.current,D=>{D.expired&&clearTimeout(D.expirationId),Mi(D.ctrl,d),D.ctrl.stop(!0)})}));const w=Pu(h,r?r():t,S),M=i&&p.current||[];ft(()=>J(M,({ctrl:D,item:V,key:K})=>{Mi(D,d),de(u,V,K)}));const x=[];if(S&&J(S,(D,V)=>{D.expired?(clearTimeout(D.expirationId),M.push(D)):(V=x[V]=w.indexOf(D.key),~V&&(m[V]=D))}),J(h,(D,V)=>{m[V]||(m[V]={key:w[V],item:D,phase:"mount",ctrl:new wu},m[V].ctrl.item=D)}),x.length){let D=-1;const{leave:V}=r?r():t;J(x,(K,W)=>{const R=S[W];~K?(D=m.indexOf(R),m[D]={...R,item:h[K]}):V&&m.splice(++D,0,R)})}H.fun(s)&&m.sort((D,V)=>s(D.item,V.item));let _=-o;const F=Ms(),j=Lr(t),N=new Map,O=E.useRef(new Map),v=E.useRef(!1);J(m,(D,V)=>{const K=D.key,W=D.phase,R=r?r():t;let y,I;const A=de(R.delay||0,K);if(W=="mount")y=R.enter,I="enter";else{const $=w.indexOf(K)<0;if(W!="leave")if($)y=R.leave,I="leave";else if(y=R.update)I="update";else return;else if(!$)y=R.enter,I="enter";else return}if(y=de(y,D.item,V),y=H.obj(y)?Nr(y):{to:y},!y.config){const $=f||j.config;y.config=de($,D.item,V,I)}_+=o;const g={...j,delay:A+_,ref:l,immediate:R.immediate,reset:!1,...y};if(I=="enter"&&H.und(g.from)){const $=r?r():t,z=H.und($.initial)||S?$.from:$.initial;g.from=de(z,D.item,V)}const{onResolve:P}=g;g.onResolve=$=>{de(P,$);const z=p.current,Q=z.find(q=>q.key===K);if(Q&&!($.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const q=z.every(B=>B.ctrl.idle);if(Q.phase=="leave"){const B=de(a,Q.item);if(B!==!1){const Z=B===!0?0:B;if(Q.expired=!0,!q&&Z>0){Z<=2147483647&&(Q.expirationId=setTimeout(F,Z));return}}}q&&z.some(B=>B.expired)&&(O.current.delete(Q),c&&(v.current=!0),F())}};const T=bu(D.ctrl,g);I==="leave"&&c?O.current.set(D,{phase:I,springs:T,payload:g}):N.set(D,{phase:I,springs:T,payload:g})});const b=E.useContext(Dn),C=Xc(b),k=b!==C&&cu(b);ft(()=>{k&&J(m,D=>{D.ctrl.start({default:b})})},[b]),J(N,(D,V)=>{if(O.current.size){const K=m.findIndex(W=>W.key===V.key);m.splice(K,1)}}),ft(()=>{J(O.current.size?O.current:N,({phase:D,payload:V},K)=>{const{ctrl:W}=K;K.phase=D,d?.add(W),k&&D=="enter"&&W.start({default:b}),V&&(uu(W,V.ref),(W.ref||d)&&!v.current?W.update(V):(W.start(V),v.current&&(v.current=!1)))})},i?void 0:n);const L=D=>E.createElement(E.Fragment,null,m.map((V,K)=>{const{springs:W}=N.get(V)||V.ctrl,R=D({...W},V.item,V,K);return R&&R.type?E.createElement(R.type,{...R.props,key:H.str(V.key)||H.num(V.key)?V.key:V.ctrl.id,ref:R.ref}):R}));return d?[L,d]:L}var Iu=1;function Pu(e,{key:t,keys:n=t},r){if(n===null){const i=new Set;return e.map(s=>{const o=r&&r.find(a=>a.item===s&&a.phase!=="leave"&&!i.has(a));return o?(i.add(o),o.key):Iu++})}return H.und(n)?e:H.fun(n)?e.map(n):ue(n)}var Ru=class extends Hr{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Dt(...t);const n=this._get(),r=ur(n);Dr(this,r.create(n))}advance(e){const t=this._get(),n=this.get();je(t,n)||(Pe(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Bi(this._active)&&Zn(this)}_get(){const e=H.arr(this.source)?this.source.map(fe):ue(fe(this.source));return this.calc(...e)}_start(){this.idle&&!Bi(this._active)&&(this.idle=!1,J(jn(this),e=>{e.done=!1}),Oe.skipAnimation?(X.batchedUpdates(()=>this.advance()),Zn(this)):An.start(this))}_attach(){let e=1;J(ue(this.source),t=>{ye(t)&&St(t,this),dr(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){J(ue(this.source),e=>{ye(e)&&Ut(e,this)}),this._active.clear(),Zn(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ue(this.source).reduce((t,n)=>Math.max(t,(dr(n)?n.priority:0)+1),0))}};function Eu(e){return e.idle!==!1}function Bi(e){return!e.size||Array.from(e).every(Eu)}function Zn(e){e.idle||(e.idle=!0,J(jn(e),t=>{t.done=!0}),Nt(e,{type:"idle",parent:e}))}Oe.assign({createStringInterpolator:$s,to:(e,t)=>new Ru(e,t)});var Qs=/^--/;function Cu(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Qs.test(e)&&!(Mt.hasOwnProperty(e)&&Mt[e])?t+"px":(""+t).trim()}var qi={};function Au(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...c}=t,u=Object.values(c),l=Object.keys(c).map(f=>n||e.hasAttribute(f)?f:qi[f]||(qi[f]=f.replace(/([A-Z])/g,d=>"-"+d.toLowerCase())));i!==void 0&&(e.textContent=i);for(const f in r)if(r.hasOwnProperty(f)){const d=Cu(f,r[f]);Qs.test(f)?e.style.setProperty(f,d):e.style[f]=d}l.forEach((f,d)=>{e.setAttribute(f,u[d])}),s!==void 0&&(e.scrollTop=s),o!==void 0&&(e.scrollLeft=o),a!==void 0&&e.setAttribute("viewBox",a)}var Mt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tu=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),$u=["Webkit","Ms","Moz","O"];Mt=Object.keys(Mt).reduce((e,t)=>($u.forEach(n=>e[Tu(n,t)]=e[t]),e),Mt);var ku=/^(matrix|translate|scale|rotate|skew)/,Mu=/^(translate)/,ju=/^(rotate|skew)/,er=(e,t)=>H.num(e)&&e!==0?e+t:e,fn=(e,t)=>H.arr(e)?e.every(n=>fn(n,t)):H.num(e)?e===t:parseFloat(e)===t,Fu=class extends Fn{constructor({x:e,y:t,z:n,...r}){const i=[],s=[];(e||t||n)&&(i.push([e||0,t||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>er(a,"px")).join(",")})`,fn(o,0)])),Ae(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(c=>[c,c===""]);else if(ku.test(a)){if(delete r[a],H.und(o))return;const c=Mu.test(a)?"px":ju.test(a)?"deg":"";i.push(ue(o)),s.push(a==="rotate3d"?([u,l,f,d])=>[`rotate3d(${u},${l},${f},${er(d,c)})`,fn(d,0)]:u=>[`${a}(${u.map(l=>er(l,c)).join(",")})`,fn(u,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new Du(i,s)),super(r)}},Du=class extends Cs{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return J(this.inputs,(n,r)=>{const i=fe(n[0]),[s,o]=this.transforms[r](H.arr(i)?i:n.map(fe));e+=" "+s,t=t&&o}),t?"none":e}observerAdded(e){e==1&&J(this.inputs,t=>J(t,n=>ye(n)&&St(n,this)))}observerRemoved(e){e==0&&J(this.inputs,t=>J(t,n=>ye(n)&&Ut(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Nt(this,e)}},Lu=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Oe.assign({batchedUpdates:os.unstable_batchedUpdates,createStringInterpolator:$s,colors:Oc});var Nu=ru(Lu,{applyAnimatedValues:Au,createAnimatedStyle:e=>new Fu(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Br=Nu.animated,Ys={},Xs={exports:{}},Uu="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Hu=Uu,Vu=Hu;function Js(){}function Zs(){}Zs.resetWarningCache=Js;var Bu=function(){function e(r,i,s,o,a,c){if(c!==Vu){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Zs,resetWarningCache:Js};return n.PropTypes=n,n};Xs.exports=Bu();var Qt=Xs.exports;function qu(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Wu=qu,eo={},Wi=function(){function e(t,n){var r=[],i=!0,s=!1,o=void 0;try{for(var a=t[Symbol.iterator](),c;!(i=(c=a.next()).done)&&(r.push(c.value),!(n&&r.length===n));i=!0);}catch(u){s=!0,o=u}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),zu=function(e){var t=e.data,n=e.multiSection;function r(c){for(c===null?c=0:c++;c<t.length&&t[c]===0;)c++;return c===t.length?null:c}function i(c){for(c===null?c=t.length-1:c--;c>=0&&t[c]===0;)c--;return c===-1?null:c}function s(c){var u=Wi(c,2),l=u[0],f=u[1];return n?f===null||f===t[l]-1?(l=r(l),l===null?[null,null]:[l,0]):[l,f+1]:t===0||f===t-1?[null,null]:f===null?[null,0]:[null,f+1]}function o(c){var u=Wi(c,2),l=u[0],f=u[1];return n?f===null||f===0?(l=i(l),l===null?[null,null]:[l,t[l]-1]):[l,f-1]:t===0||f===0?[null,null]:f===null?[null,t-1]:[null,f-1]}function a(c){return s(c)[1]===null}return{next:s,prev:o,isLast:a}},pr={exports:{}},Gu=Object.prototype.propertyIsEnumerable;function Ku(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Qu(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(n){return Gu.call(e,n)})}var Yu=Object.assign||function(e,t){for(var n,r,i=Ku(e),s=1;s<arguments.length;s++){n=arguments[s],r=Qu(Object(n));for(var o=0;o<r.length;o++)i[r[o]]=n[r[o]]}return i};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function c(u,l){var f=[],d=!0,h=!1,m=void 0;try{for(var p=u[Symbol.iterator](),S;!(d=(S=p.next()).done)&&(f.push(S.value),!(l&&f.length===l));d=!0);}catch(w){h=!0,m=w}finally{try{!d&&p.return&&p.return()}finally{if(h)throw m}}return f}return function(u,l){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return c(u,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(c){return c&&c.__esModule?c:{default:c}}function i(c){if(Array.isArray(c)){for(var u=0,l=Array(c.length);u<c.length;u++)l[u]=c[u];return l}else return Array.from(c)}var s=Yu,o=r(s),a=function(u){return u};t.default=function(c){var u=Array.isArray(c)&&c.length===2?c:[c,null],l=n(u,2),f=l[0],d=l[1];return function(h){for(var m=arguments.length,p=Array(m>1?m-1:0),S=1;S<m;S++)p[S-1]=arguments[S];var w=p.map(function(M){return f[M]}).filter(a);return typeof w[0]=="string"||typeof d=="function"?{key:h,className:d?d.apply(void 0,i(w)):w.join(" ")}:{key:h,style:o.default.apply(void 0,[{}].concat(i(w)))}}},e.exports=t.default})(pr,pr.exports);var Xu=pr.exports,to={},Ln={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(s){return typeof s}:t=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(r)}function n(r,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===i)return!1;var o=Object.keys(r),a=Object.keys(i);if(o.length!==a.length)return!0;var c={},u,l;for(u=0,l=s.length;u<l;u++)c[s[u]]=!0;for(u=0,l=o.length;u<l;u++){var f=o[u],d=r[f],h=i[f];if(d!==h){if(!c[f]||d===null||h===null||t(d)!=="object"||t(h)!=="object")return!0;var m=Object.keys(d),p=Object.keys(h);if(m.length!==p.length)return!0;for(var S=0,w=m.length;S<w;S++){var M=m[S];if(d[M]!==h[M])return!0}}}return!1}})(Ln);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(E),n=i(Qt),r=i(Ln);function i(_){return _&&_.__esModule?_:{default:_}}function s(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return s=function(){return _},_}function o(_){if(_&&_.__esModule)return _;if(_===null||a(_)!=="object"&&typeof _!="function")return{default:_};var F=s();if(F&&F.has(_))return F.get(_);var j={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in _)if(Object.prototype.hasOwnProperty.call(_,O)){var v=N?Object.getOwnPropertyDescriptor(_,O):null;v&&(v.get||v.set)?Object.defineProperty(j,O,v):j[O]=_[O]}return j.default=_,F&&F.set(_,j),j}function a(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(j){return typeof j}:a=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},a(_)}function c(_,F){if(!(_ instanceof F))throw new TypeError("Cannot call a class as a function")}function u(_,F){for(var j=0;j<F.length;j++){var N=F[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(_,N.key,N)}}function l(_,F,j){return F&&u(_.prototype,F),_}function f(_){return function(){var F=p(_),j;if(m()){var N=p(this).constructor;j=Reflect.construct(F,arguments,N)}else j=F.apply(this,arguments);return d(this,j)}}function d(_,F){return F&&(a(F)==="object"||typeof F=="function")?F:h(_)}function h(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(_){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},p(_)}function S(_,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(F&&F.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),F&&w(_,F)}function w(_,F){return w=Object.setPrototypeOf||function(N,O){return N.__proto__=O,N},w(_,F)}function M(_,F,j){return F in _?Object.defineProperty(_,F,{value:j,enumerable:!0,configurable:!0,writable:!0}):_[F]=j,_}var x=function(_){S(j,_);var F=f(j);function j(){return c(this,j),F.apply(this,arguments)}return l(j,[{key:"shouldComponentUpdate",value:function(O){return(0,r.default)(O,this.props)}},{key:"render",value:function(){var O=this.props,v=O.section,b=O.renderSectionTitle,C=O.theme,k=O.sectionKeyPrefix,L=b(v);return L?t.default.createElement("div",C("".concat(k,"title"),"sectionTitle"),L):null}}]),j}(t.Component);e.default=x,M(x,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})})(to);var no={},ro={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(E),n=i(Qt),r=i(Ln);function i(v){return v&&v.__esModule?v:{default:v}}function s(){if(typeof WeakMap!="function")return null;var v=new WeakMap;return s=function(){return v},v}function o(v){if(v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var b=s();if(b&&b.has(v))return b.get(v);var C={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in v)if(Object.prototype.hasOwnProperty.call(v,L)){var D=k?Object.getOwnPropertyDescriptor(v,L):null;D&&(D.get||D.set)?Object.defineProperty(C,L,D):C[L]=v[L]}return C.default=v,b&&b.set(v,C),C}function a(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(C){return typeof C}:a=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},a(v)}function c(){return c=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var C=arguments[b];for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(v[k]=C[k])}return v},c.apply(this,arguments)}function u(v,b){var C=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);b&&(k=k.filter(function(L){return Object.getOwnPropertyDescriptor(v,L).enumerable})),C.push.apply(C,k)}return C}function l(v){for(var b=1;b<arguments.length;b++){var C=arguments[b]!=null?arguments[b]:{};b%2?u(Object(C),!0).forEach(function(k){N(v,k,C[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(C)):u(Object(C)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(C,k))})}return v}function f(v,b){if(v==null)return{};var C=d(v,b),k,L;if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(v);for(L=0;L<D.length;L++)k=D[L],!(b.indexOf(k)>=0)&&Object.prototype.propertyIsEnumerable.call(v,k)&&(C[k]=v[k])}return C}function d(v,b){if(v==null)return{};var C={},k=Object.keys(v),L,D;for(D=0;D<k.length;D++)L=k[D],!(b.indexOf(L)>=0)&&(C[L]=v[L]);return C}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function m(v,b){for(var C=0;C<b.length;C++){var k=b[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(v,k.key,k)}}function p(v,b,C){return b&&m(v.prototype,b),v}function S(v){return function(){var b=_(v),C;if(x()){var k=_(this).constructor;C=Reflect.construct(b,arguments,k)}else C=b.apply(this,arguments);return w(this,C)}}function w(v,b){return b&&(a(b)==="object"||typeof b=="function")?b:M(v)}function M(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _(v){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},_(v)}function F(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),b&&j(v,b)}function j(v,b){return j=Object.setPrototypeOf||function(k,L){return k.__proto__=L,k},j(v,b)}function N(v,b,C){return b in v?Object.defineProperty(v,b,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[b]=C,v}var O=function(v){F(C,v);var b=S(C);function C(){var k;h(this,C);for(var L=arguments.length,D=new Array(L),V=0;V<L;V++)D[V]=arguments[V];return k=b.call.apply(b,[this].concat(D)),N(M(k),"storeItemReference",function(K){K!==null&&(k.item=K)}),N(M(k),"onMouseEnter",function(K){var W=k.props,R=W.sectionIndex,y=W.itemIndex;k.props.onMouseEnter(K,{sectionIndex:R,itemIndex:y})}),N(M(k),"onMouseLeave",function(K){var W=k.props,R=W.sectionIndex,y=W.itemIndex;k.props.onMouseLeave(K,{sectionIndex:R,itemIndex:y})}),N(M(k),"onMouseDown",function(K){var W=k.props,R=W.sectionIndex,y=W.itemIndex;k.props.onMouseDown(K,{sectionIndex:R,itemIndex:y})}),N(M(k),"onClick",function(K){var W=k.props,R=W.sectionIndex,y=W.itemIndex;k.props.onClick(K,{sectionIndex:R,itemIndex:y})}),k}return p(C,[{key:"shouldComponentUpdate",value:function(L){return(0,r.default)(L,this.props,["renderItemData"])}},{key:"render",value:function(){var L=this.props,D=L.isHighlighted,V=L.item,K=L.renderItem,W=L.renderItemData,R=f(L,["isHighlighted","item","renderItem","renderItemData"]);return delete R.sectionIndex,delete R.itemIndex,typeof R.onMouseEnter=="function"&&(R.onMouseEnter=this.onMouseEnter),typeof R.onMouseLeave=="function"&&(R.onMouseLeave=this.onMouseLeave),typeof R.onMouseDown=="function"&&(R.onMouseDown=this.onMouseDown),typeof R.onClick=="function"&&(R.onClick=this.onClick),t.default.createElement("li",c({role:"option"},R,{ref:this.storeItemReference}),K(V,l({isHighlighted:D},W)))}}]),C}(t.Component);e.default=O,N(O,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})})(ro);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(E),n=s(Qt),r=s(ro),i=s(Ln);function s(O){return O&&O.__esModule?O:{default:O}}function o(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return o=function(){return O},O}function a(O){if(O&&O.__esModule)return O;if(O===null||c(O)!=="object"&&typeof O!="function")return{default:O};var v=o();if(v&&v.has(O))return v.get(O);var b={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in O)if(Object.prototype.hasOwnProperty.call(O,k)){var L=C?Object.getOwnPropertyDescriptor(O,k):null;L&&(L.get||L.set)?Object.defineProperty(b,k,L):b[k]=O[k]}return b.default=O,v&&v.set(O,b),b}function c(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(b){return typeof b}:c=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},c(O)}function u(){return u=Object.assign||function(O){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(O[C]=b[C])}return O},u.apply(this,arguments)}function l(O,v){var b=Object.keys(O);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(O);v&&(C=C.filter(function(k){return Object.getOwnPropertyDescriptor(O,k).enumerable})),b.push.apply(b,C)}return b}function f(O){for(var v=1;v<arguments.length;v++){var b=arguments[v]!=null?arguments[v]:{};v%2?l(Object(b),!0).forEach(function(C){j(O,C,b[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(b)):l(Object(b)).forEach(function(C){Object.defineProperty(O,C,Object.getOwnPropertyDescriptor(b,C))})}return O}function d(O,v){if(!(O instanceof v))throw new TypeError("Cannot call a class as a function")}function h(O,v){for(var b=0;b<v.length;b++){var C=v[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(O,C.key,C)}}function m(O,v,b){return v&&h(O.prototype,v),O}function p(O){return function(){var v=x(O),b;if(M()){var C=x(this).constructor;b=Reflect.construct(v,arguments,C)}else b=v.apply(this,arguments);return S(this,b)}}function S(O,v){return v&&(c(v)==="object"||typeof v=="function")?v:w(O)}function w(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(O){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},x(O)}function _(O,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(v&&v.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),v&&F(O,v)}function F(O,v){return F=Object.setPrototypeOf||function(C,k){return C.__proto__=k,C},F(O,v)}function j(O,v,b){return v in O?Object.defineProperty(O,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):O[v]=b,O}var N=function(O){_(b,O);var v=p(b);function b(){var C;d(this,b);for(var k=arguments.length,L=new Array(k),D=0;D<k;D++)L[D]=arguments[D];return C=v.call.apply(v,[this].concat(L)),j(w(C),"storeHighlightedItemReference",function(V){C.props.onHighlightedItemChange(V===null?null:V.item)}),C}return m(b,[{key:"shouldComponentUpdate",value:function(k){return(0,i.default)(k,this.props,["itemProps"])}},{key:"render",value:function(){var k=this,L=this.props,D=L.items,V=L.itemProps,K=L.renderItem,W=L.renderItemData,R=L.sectionIndex,y=L.highlightedItemIndex,I=L.getItemId,A=L.theme,g=L.keyPrefix,P=R===null?g:"".concat(g,"section-").concat(R,"-"),T=typeof V=="function";return t.default.createElement("ul",u({role:"listbox"},A("".concat(P,"items-list"),"itemsList")),D.map(function($,z){var Q=z===0,q=z===y,B="".concat(P,"item-").concat(z),Z=T?V({sectionIndex:R,itemIndex:z}):V,ne=f({id:I(R,z),"aria-selected":q},A(B,"item",Q&&"itemFirst",q&&"itemHighlighted"),{},Z);return q&&(ne.ref=k.storeHighlightedItemReference),t.default.createElement(r.default,u({},ne,{sectionIndex:R,isHighlighted:q,itemIndex:z,item:$,renderItem:K,renderItemData:W}))}))}}]),b}(t.Component);e.default=N,j(N,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),j(N,"defaultProps",{sectionIndex:null})})(no);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(E),n=a(Qt),r=a(zu),i=a(Xu),s=a(to),o=a(no);function a(y){return y&&y.__esModule?y:{default:y}}function c(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return c=function(){return y},y}function u(y){if(y&&y.__esModule)return y;if(y===null||M(y)!=="object"&&typeof y!="function")return{default:y};var I=c();if(I&&I.has(y))return I.get(y);var A={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in y)if(Object.prototype.hasOwnProperty.call(y,P)){var T=g?Object.getOwnPropertyDescriptor(y,P):null;T&&(T.get||T.set)?Object.defineProperty(A,P,T):A[P]=y[P]}return A.default=y,I&&I.set(y,A),A}function l(y,I){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(y);I&&(g=g.filter(function(P){return Object.getOwnPropertyDescriptor(y,P).enumerable})),A.push.apply(A,g)}return A}function f(y){for(var I=1;I<arguments.length;I++){var A=arguments[I]!=null?arguments[I]:{};I%2?l(Object(A),!0).forEach(function(g){L(y,g,A[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(A)):l(Object(A)).forEach(function(g){Object.defineProperty(y,g,Object.getOwnPropertyDescriptor(A,g))})}return y}function d(y,I){return w(y)||S(y,I)||m(y,I)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(y,I){if(y){if(typeof y=="string")return p(y,I);var A=Object.prototype.toString.call(y).slice(8,-1);if(A==="Object"&&y.constructor&&(A=y.constructor.name),A==="Map"||A==="Set")return Array.from(A);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return p(y,I)}}function p(y,I){(I==null||I>y.length)&&(I=y.length);for(var A=0,g=new Array(I);A<I;A++)g[A]=y[A];return g}function S(y,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(y)))){var A=[],g=!0,P=!1,T=void 0;try{for(var $=y[Symbol.iterator](),z;!(g=(z=$.next()).done)&&(A.push(z.value),!(I&&A.length===I));g=!0);}catch(Q){P=!0,T=Q}finally{try{!g&&$.return!=null&&$.return()}finally{if(P)throw T}}return A}}function w(y){if(Array.isArray(y))return y}function M(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(A){return typeof A}:M=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},M(y)}function x(y,I){if(!(y instanceof I))throw new TypeError("Cannot call a class as a function")}function _(y,I){for(var A=0;A<I.length;A++){var g=I[A];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function F(y,I,A){return I&&_(y.prototype,I),y}function j(y){return function(){var I=b(y),A;if(v()){var g=b(this).constructor;A=Reflect.construct(I,arguments,g)}else A=I.apply(this,arguments);return N(this,A)}}function N(y,I){return I&&(M(I)==="object"||typeof I=="function")?I:O(y)}function O(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(y){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},b(y)}function C(y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(I&&I.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),I&&k(y,I)}function k(y,I){return k=Object.setPrototypeOf||function(g,P){return g.__proto__=P,g},k(y,I)}function L(y,I,A){return I in y?Object.defineProperty(y,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[I]=A,y}var D={},V=function(I){return t.default.createElement("input",I)},K=function(I){var A=I.containerProps,g=I.children;return t.default.createElement("div",A,g)},W={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},R=function(y){C(A,y);var I=j(A);function A(g){var P;return x(this,A),P=I.call(this,g),L(O(P),"storeInputReference",function(T){T!==null&&(P.input=T);var $=P.props.inputProps.ref;$&&(typeof $=="function"?$(T):M($)==="object"&&Object.prototype.hasOwnProperty.call($,"current")&&($.current=T))}),L(O(P),"storeItemsContainerReference",function(T){T!==null&&(P.itemsContainer=T)}),L(O(P),"onHighlightedItemChange",function(T){P.highlightedItem=T}),L(O(P),"getItemId",function(T,$){if($===null)return null;var z=P.props.id,Q=T===null?"":"section-".concat(T);return"react-autowhatever-".concat(z,"-").concat(Q,"-item-").concat($)}),L(O(P),"onFocus",function(T){var $=P.props.inputProps;P.setState({isInputFocused:!0}),$.onFocus&&$.onFocus(T)}),L(O(P),"onBlur",function(T){var $=P.props.inputProps;P.setState({isInputFocused:!1}),$.onBlur&&$.onBlur(T)}),L(O(P),"onKeyDown",function(T){var $=P.props,z=$.inputProps,Q=$.highlightedSectionIndex,q=$.highlightedItemIndex,B=T.keyCode;switch(B){case 40:case 38:{var Z=B===40?"next":"prev",ne=P.sectionIterator[Z]([Q,q]),ie=d(ne,2),se=ie[0],Xe=ie[1];z.onKeyDown(T,{newHighlightedSectionIndex:se,newHighlightedItemIndex:Xe});break}default:z.onKeyDown(T,{highlightedSectionIndex:Q,highlightedItemIndex:q})}}),P.highlightedItem=null,P.state={isInputFocused:!1},P.setSectionsItems(g),P.setSectionIterator(g),P.setTheme(g),P}return F(A,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(P){P.items!==this.props.items&&this.setSectionsItems(P),(P.items!==this.props.items||P.multiSection!==this.props.multiSection)&&this.setSectionIterator(P),P.theme!==this.props.theme&&this.setTheme(P)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(P){P.multiSection&&(this.sectionsItems=P.items.map(function(T){return P.getSectionItems(T)}),this.sectionsLengths=this.sectionsItems.map(function(T){return T.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(T){return T===0}))}},{key:"setSectionIterator",value:function(P){this.sectionIterator=(0,r.default)({multiSection:P.multiSection,data:P.multiSection?this.sectionsLengths:P.items.length})}},{key:"setTheme",value:function(P){this.theme=(0,i.default)(P.theme)}},{key:"renderSections",value:function(){var P=this;if(this.allSectionsAreEmpty)return null;var T=this.theme,$=this.props,z=$.id,Q=$.items,q=$.renderItem,B=$.renderItemData,Z=$.renderSectionTitle,ne=$.highlightedSectionIndex,ie=$.highlightedItemIndex,se=$.itemProps;return Q.map(function(Xe,le){var st="react-autowhatever-".concat(z,"-"),ot="".concat(st,"section-").concat(le,"-"),$e=le===0;return t.default.createElement("div",T("".concat(ot,"container"),"sectionContainer",$e&&"sectionContainerFirst"),t.default.createElement(s.default,{section:Xe,renderSectionTitle:Z,theme:T,sectionKeyPrefix:ot}),t.default.createElement(o.default,{items:P.sectionsItems[le],itemProps:se,renderItem:q,renderItemData:B,sectionIndex:le,highlightedItemIndex:ne===le?ie:null,onHighlightedItemChange:P.onHighlightedItemChange,getItemId:P.getItemId,theme:T,keyPrefix:st,ref:P.storeItemsListReference}))})}},{key:"renderItems",value:function(){var P=this.props.items;if(P.length===0)return null;var T=this.theme,$=this.props,z=$.id,Q=$.renderItem,q=$.renderItemData,B=$.highlightedSectionIndex,Z=$.highlightedItemIndex,ne=$.itemProps;return t.default.createElement(o.default,{items:P,itemProps:ne,renderItem:Q,renderItemData:q,highlightedItemIndex:B===null?Z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:T,keyPrefix:"react-autowhatever-".concat(z,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var P=this.highlightedItem;if(P){var T=this.itemsContainer,$=P.offsetParent===T?P.offsetTop:P.offsetTop-T.offsetTop,z=T.scrollTop;$<z?z=$:$+P.offsetHeight>z+T.offsetHeight&&(z=$+P.offsetHeight-T.offsetHeight),z!==T.scrollTop&&(T.scrollTop=z)}}},{key:"render",value:function(){var P=this.theme,T=this.props,$=T.id,z=T.multiSection,Q=T.renderInputComponent,q=T.renderItemsContainer,B=T.highlightedSectionIndex,Z=T.highlightedItemIndex,ne=this.state.isInputFocused,ie=z?this.renderSections():this.renderItems(),se=ie!==null,Xe=this.getItemId(B,Z),le="react-autowhatever-".concat($),st=f({role:"combobox","aria-haspopup":"listbox","aria-owns":le,"aria-expanded":se},P("react-autowhatever-".concat($,"-container"),"container",se&&"containerOpen"),{},this.props.containerProps),ot=Q(f({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":le,"aria-activedescendant":Xe},P("react-autowhatever-".concat($,"-input"),"input",se&&"inputOpen",ne&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),$e=q({containerProps:f({id:le,role:"listbox"},P("react-autowhatever-".concat($,"-items-container"),"itemsContainer",se&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:ie});return t.default.createElement("div",st,ot,$e)}}]),A}(t.Component);e.default=R,L(R,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),L(R,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:V,renderItemsContainer:K,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:D,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:D,inputProps:D,itemProps:D,highlightedSectionIndex:null,highlightedItemIndex:null,theme:W})})(eo);var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.mapToAutowhateverTheme=yt.defaultTheme=void 0;var Ju={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};yt.defaultTheme=Ju;var Zu=function(t){var n={};for(var r in t)switch(r){case"suggestionsContainer":n.itemsContainer=t[r];break;case"suggestionsContainerOpen":n.itemsContainerOpen=t[r];break;case"suggestion":n.item=t[r];break;case"suggestionFirst":n.itemFirst=t[r];break;case"suggestionHighlighted":n.itemHighlighted=t[r];break;case"suggestionsList":n.itemsList=t[r];break;default:n[r]=t[r]}return n};yt.mapToAutowhateverTheme=Zu;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(E),n=o(Qt),r=o(Wu),i=o(eo),s=yt;function o(R){return R&&R.__esModule?R:{default:R}}function a(){if(typeof WeakMap!="function")return null;var R=new WeakMap;return a=function(){return R},R}function c(R){if(R&&R.__esModule)return R;if(R===null||u(R)!=="object"&&typeof R!="function")return{default:R};var y=a();if(y&&y.has(R))return y.get(R);var I={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in R)if(Object.prototype.hasOwnProperty.call(R,g)){var P=A?Object.getOwnPropertyDescriptor(R,g):null;P&&(P.get||P.set)?Object.defineProperty(I,g,P):I[g]=R[g]}return I.default=R,y&&y.set(R,I),I}function u(R){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(I){return typeof I}:u=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},u(R)}function l(R,y){var I=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);y&&(A=A.filter(function(g){return Object.getOwnPropertyDescriptor(R,g).enumerable})),I.push.apply(I,A)}return I}function f(R){for(var y=1;y<arguments.length;y++){var I=arguments[y]!=null?arguments[y]:{};y%2?l(Object(I),!0).forEach(function(A){j(R,A,I[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(I)):l(Object(I)).forEach(function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(I,A))})}return R}function d(R,y){if(!(R instanceof y))throw new TypeError("Cannot call a class as a function")}function h(R,y){for(var I=0;I<y.length;I++){var A=y[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,A.key,A)}}function m(R,y,I){return y&&h(R.prototype,y),R}function p(R){return function(){var y=x(R),I;if(M()){var A=x(this).constructor;I=Reflect.construct(y,arguments,A)}else I=y.apply(this,arguments);return S(this,I)}}function S(R,y){return y&&(u(y)==="object"||typeof y=="function")?y:w(R)}function w(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(R){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},x(R)}function _(R,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(y&&y.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),y&&F(R,y)}function F(R,y){return F=Object.setPrototypeOf||function(A,g){return A.__proto__=g,A},F(R,y)}function j(R,y,I){return y in R?Object.defineProperty(R,y,{value:I,enumerable:!0,configurable:!0,writable:!0}):R[y]=I,R}var N=function(){return!0},O=function(y){return y.trim().length>0},v=function(y){var I=y.containerProps,A=y.children;return t.default.createElement("div",I,A)},b="suggestions-revealed",C="suggestions-updated",k="suggestion-selected",L="input-focused",D="input-changed",V="input-blurred",K="escape-pressed",W=function(R){_(I,R);var y=p(I);function I(A){var g,P=A.alwaysRenderSuggestions;return d(this,I),g=y.call(this),j(w(g),"onDocumentMouseDown",function(T){g.justClickedOnSuggestionsContainer=!1;for(var $=T.detail&&T.detail.target||T.target;$!==null&&$!==document;){if($.getAttribute&&$.getAttribute("data-suggestion-index")!==null)return;if($===g.suggestionsContainer){g.justClickedOnSuggestionsContainer=!0;return}$=$.parentNode}}),j(w(g),"storeAutowhateverRef",function(T){T!==null&&(g.autowhatever=T)}),j(w(g),"onSuggestionMouseEnter",function(T,$){var z=$.sectionIndex,Q=$.itemIndex;g.updateHighlightedSuggestion(z,Q),T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!0),g.justMouseEntered=!0,setTimeout(function(){g.justMouseEntered=!1})}),j(w(g),"highlightFirstSuggestion",function(){g.updateHighlightedSuggestion(g.props.multiSection?0:null,0)}),j(w(g),"onDocumentMouseUp",function(){g.pressedSuggestion&&!g.justSelectedSuggestion&&g.input.focus(),g.pressedSuggestion=null}),j(w(g),"onSuggestionMouseDown",function(T){g.justSelectedSuggestion||(g.justSelectedSuggestion=!0,g.pressedSuggestion=T.target)}),j(w(g),"onSuggestionsClearRequested",function(){var T=g.props.onSuggestionsClearRequested;T&&T()}),j(w(g),"onSuggestionSelected",function(T,$){var z=g.props,Q=z.alwaysRenderSuggestions,q=z.onSuggestionSelected,B=z.onSuggestionsFetchRequested;q&&q(T,$);var Z=g.props.shouldKeepSuggestionsOnSelect($.suggestion);Q||Z?B({value:$.suggestionValue,reason:k}):g.onSuggestionsClearRequested(),g.resetHighlightedSuggestion()}),j(w(g),"onSuggestionClick",function(T){var $=g.props,z=$.alwaysRenderSuggestions,Q=$.focusInputOnSuggestionClick,q=g.getSuggestionIndices(g.findSuggestionElement(T.target)),B=q.sectionIndex,Z=q.suggestionIndex,ne=g.getSuggestion(B,Z),ie=g.props.getSuggestionValue(ne);g.maybeCallOnChange(T,ie,"click"),g.onSuggestionSelected(T,{suggestion:ne,suggestionValue:ie,suggestionIndex:Z,sectionIndex:B,method:"click"});var se=g.props.shouldKeepSuggestionsOnSelect(ne);z||se||g.closeSuggestions(),Q===!0?g.input.focus():g.onBlur(),setTimeout(function(){g.justSelectedSuggestion=!1})}),j(w(g),"onBlur",function(){var T=g.props,$=T.inputProps,z=T.shouldRenderSuggestions,Q=$.value,q=$.onBlur,B=g.getHighlightedSuggestion(),Z=z(Q,V);g.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Z}),q&&q(g.blurEvent,{highlightedSuggestion:B})}),j(w(g),"onSuggestionMouseLeave",function(T){g.resetHighlightedSuggestion(!1),g.justSelectedSuggestion&&T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!1)}),j(w(g),"onSuggestionTouchStart",function(){g.justSelectedSuggestion=!0}),j(w(g),"onSuggestionTouchMove",function(){g.justSelectedSuggestion=!1,g.pressedSuggestion=null,g.input.focus()}),j(w(g),"itemProps",function(T){var $=T.sectionIndex,z=T.itemIndex;return{"data-section-index":$,"data-suggestion-index":z,onMouseEnter:g.onSuggestionMouseEnter,onMouseLeave:g.onSuggestionMouseLeave,onMouseDown:g.onSuggestionMouseDown,onTouchStart:g.onSuggestionTouchStart,onTouchMove:g.onSuggestionTouchMove,onClick:g.onSuggestionClick}}),j(w(g),"renderSuggestionsContainer",function(T){var $=T.containerProps,z=T.children,Q=g.props.renderSuggestionsContainer;return Q({containerProps:$,children:z,query:g.getQuery()})}),g.state={isFocused:!1,isCollapsed:!P,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},g.justPressedUpDown=!1,g.justMouseEntered=!1,g.pressedSuggestion=null,g}return m(I,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(g){var P=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!g.highlightFirstSuggestion;(0,r.default)(g.suggestions,this.props.suggestions)?g.highlightFirstSuggestion&&g.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():P&&this.resetHighlightedSuggestion():this.willRenderSuggestions(g,C)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),P&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(g,P){var T=this.props,$=T.suggestions,z=T.onSuggestionHighlighted,Q=T.highlightFirstSuggestion;if(!(0,r.default)($,g.suggestions)&&$.length>0&&Q){this.highlightFirstSuggestion();return}if(z){var q=this.getHighlightedSuggestion(),B=P.highlightedSuggestion;q!=B&&z({suggestion:q})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(g,P,T){var $=this;this.setState(function(z){var Q=z.valueBeforeUpDown;return P===null?Q=null:Q===null&&typeof T<"u"&&(Q=T),{highlightedSectionIndex:g,highlightedSuggestionIndex:P,highlightedSuggestion:P===null?null:$.getSuggestion(g,P),valueBeforeUpDown:Q}})}},{key:"resetHighlightedSuggestion",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(P){var T=P.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:g?null:T}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(g,P){var T=this.props,$=T.suggestions,z=T.multiSection,Q=T.getSectionSuggestions;return z?Q($[g])[P]:$[P]}},{key:"getHighlightedSuggestion",value:function(){var g=this.state,P=g.highlightedSectionIndex,T=g.highlightedSuggestionIndex;return T===null?null:this.getSuggestion(P,T)}},{key:"getSuggestionValueByIndex",value:function(g,P){var T=this.props.getSuggestionValue;return T(this.getSuggestion(g,P))}},{key:"getSuggestionIndices",value:function(g){var P=g.getAttribute("data-section-index"),T=g.getAttribute("data-suggestion-index");return{sectionIndex:typeof P=="string"?parseInt(P,10):null,suggestionIndex:parseInt(T,10)}}},{key:"findSuggestionElement",value:function(g){var P=g;do{if(P.getAttribute&&P.getAttribute("data-suggestion-index")!==null)return P;P=P.parentNode}while(P!==null);throw console.error("Clicked element:",g),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(g,P,T){var $=this.props.inputProps,z=$.value,Q=$.onChange;P!==z&&Q(g,{newValue:P,method:T})}},{key:"willRenderSuggestions",value:function(g,P){var T=g.suggestions,$=g.inputProps,z=g.shouldRenderSuggestions,Q=$.value;return T.length>0&&z(Q,P)}},{key:"getQuery",value:function(){var g=this.props.inputProps,P=g.value,T=this.state.valueBeforeUpDown;return(T===null?P:T).trim()}},{key:"render",value:function(){var g=this,P=this.props,T=P.suggestions,$=P.renderInputComponent,z=P.onSuggestionsFetchRequested,Q=P.renderSuggestion,q=P.inputProps,B=P.multiSection,Z=P.renderSectionTitle,ne=P.id,ie=P.getSectionSuggestions,se=P.theme,Xe=P.getSuggestionValue,le=P.alwaysRenderSuggestions,st=P.highlightFirstSuggestion,ot=P.containerProps,$e=this.state,To=$e.isFocused,Jr=$e.isCollapsed,Zr=$e.highlightedSectionIndex,ei=$e.highlightedSuggestionIndex,Zt=$e.valueBeforeUpDown,en=le?N:this.props.shouldRenderSuggestions,at=q.value,ti=q.onFocus,ni=q.onKeyDown,$o=this.willRenderSuggestions(this.props,"render"),tn=le||To&&!Jr&&$o,ko=tn?T:[],Mo=f({},q,{onFocus:function(re){if(!g.justSelectedSuggestion&&!g.justClickedOnSuggestionsContainer){var ke=en(at,L);g.setState({isFocused:!0,isCollapsed:!ke}),ti&&ti(re),ke&&z({value:at,reason:L})}},onBlur:function(re){if(g.justClickedOnSuggestionsContainer){g.input.focus();return}g.blurEvent=re,g.justSelectedSuggestion||(g.onBlur(),g.onSuggestionsClearRequested())},onChange:function(re){var ke=re.target.value,xt=en(ke,D);g.maybeCallOnChange(re,ke,"type"),g.suggestionsContainer&&(g.suggestionsContainer.scrollTop=0),g.setState(f({},st?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!xt})),xt?z({value:ke,reason:D}):g.onSuggestionsClearRequested()},onKeyDown:function(re,ke){var xt=re.keyCode;switch(xt){case 40:case 38:if(Jr)en(at,b)&&(z({value:at,reason:b}),g.revealSuggestions(),re.preventDefault());else if(T.length>0){var ri=ke.newHighlightedSectionIndex,Hn=ke.newHighlightedItemIndex,Vn;Hn===null?Vn=Zt===null?at:Zt:Vn=g.getSuggestionValueByIndex(ri,Hn),g.updateHighlightedSuggestion(ri,Hn,at),g.maybeCallOnChange(re,Vn,xt===40?"down":"up"),re.preventDefault()}g.justPressedUpDown=!0,setTimeout(function(){g.justPressedUpDown=!1});break;case 13:{if(re.keyCode===229)break;var Bn=g.getHighlightedSuggestion();if(tn&&!le&&g.closeSuggestions(),Bn!=null){re.preventDefault();var ii=Xe(Bn);g.maybeCallOnChange(re,ii,"enter"),g.onSuggestionSelected(re,{suggestion:Bn,suggestionValue:ii,suggestionIndex:ei,sectionIndex:Zr,method:"enter"}),g.justSelectedSuggestion=!0,setTimeout(function(){g.justSelectedSuggestion=!1})}break}case 27:{tn&&re.preventDefault();var si=tn&&!le;if(Zt===null){if(!si){var qn="";g.maybeCallOnChange(re,qn,"escape"),en(qn,K)?z({value:qn,reason:K}):g.onSuggestionsClearRequested()}}else g.maybeCallOnChange(re,Zt,"escape");si?(g.onSuggestionsClearRequested(),g.closeSuggestions()):g.resetHighlightedSuggestion();break}}ni&&ni(re)}}),jo={query:this.getQuery()};return t.default.createElement(i.default,{multiSection:B,items:ko,renderInputComponent:$,renderItemsContainer:this.renderSuggestionsContainer,renderItem:Q,renderItemData:jo,renderSectionTitle:Z,getSectionItems:ie,highlightedSectionIndex:Zr,highlightedItemIndex:ei,containerProps:ot,inputProps:Mo,itemProps:this.itemProps,theme:(0,s.mapToAutowhateverTheme)(se),id:ne,ref:this.storeAutowhateverRef})}}]),I}(t.Component);e.default=W,j(W,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(y,I){var A=y[I];if(typeof A!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(y,I){var A=y[I];if(y.alwaysRenderSuggestions===!1&&typeof A!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(y,I){var A=y[I];if(!A)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(A,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(A,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(y,I){var A=y[I];if(y.multiSection===!0&&typeof A!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(y,I){var A=y[I];if(y.multiSection===!0&&typeof A!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),j(W,"defaultProps",{renderSuggestionsContainer:v,shouldRenderSuggestions:O,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:s.defaultTheme,id:"1",containerProps:{}})})(Ys);var el=Ys.default;const tl=Fo(el),nl=e=>{const[t,n]=E.useState([]),r=({value:s})=>n(e.getSuggestions(s)),i=(s,{isHighlighted:o})=>G.jsx("div",{"data-highlighted":o?"true":void 0,children:s});return G.jsx(tl,{suggestions:t,onSuggestionSelected:(s,o)=>e.onSelect&&e.onSelect(o.suggestion),onSuggestionsFetchRequested:r,onSuggestionsClearRequested:()=>n([]),getSuggestionValue:s=>s,renderSuggestionsContainer:({containerProps:s,children:o})=>E.Children.toArray(o).length>0?E.createElement("div",{...s,key:s.key,className:"react-autosuggest"},o):null,renderSuggestion:i,containerProps:{className:"relative"},inputProps:{disabled:e.disabled,placeholder:e.placeholder,value:e.value||"",onBlur:e.onBlur,onChange:(s,{newValue:o})=>e.onChange&&e.onChange(o),onFocus:e.onFocus,onKeyDown:e.onKeyDown}})};function De(e){return Array.isArray?Array.isArray(e):oo(e)==="[object Array]"}const rl=1/0;function il(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-rl?"-0":t}function sl(e){return e==null?"":il(e)}function Ee(e){return typeof e=="string"}function io(e){return typeof e=="number"}function ol(e){return e===!0||e===!1||al(e)&&oo(e)=="[object Boolean]"}function so(e){return typeof e=="object"}function al(e){return so(e)&&e!==null}function pe(e){return e!=null}function tr(e){return!e.trim().length}function oo(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const cl="Incorrect 'index' type",ul=e=>`Invalid value for key ${e}`,ll=e=>`Pattern length exceeds max of ${e}.`,fl=e=>`Missing ${e} property in key`,dl=e=>`Property 'weight' in key '${e}' must be a positive integer`,zi=Object.prototype.hasOwnProperty;class hl{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=ao(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ao(e){let t=null,n=null,r=null,i=1,s=null;if(Ee(e)||De(e))r=e,t=Gi(e),n=mr(e);else{if(!zi.call(e,"name"))throw new Error(fl("name"));const o=e.name;if(r=o,zi.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(dl(o));t=Gi(o),n=mr(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function Gi(e){return De(e)?e:e.split(".")}function mr(e){return De(e)?e.join("."):e}function gl(e,t){let n=[],r=!1;const i=(s,o,a)=>{if(pe(s))if(!o[a])n.push(s);else{let c=o[a];const u=s[c];if(!pe(u))return;if(a===o.length-1&&(Ee(u)||io(u)||ol(u)))n.push(sl(u));else if(De(u)){r=!0;for(let l=0,f=u.length;l<f;l+=1)i(u[l],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,Ee(t)?t.split("."):t,0),r?n:n[0]}const pl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ml={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},yl={location:0,threshold:.6,distance:100},vl={useExtendedSearch:!1,getFn:gl,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Y={...ml,...pl,...yl,...vl};const wl=/[^ ]+/g;function Sl(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(wl).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(s,a),a},clear(){n.clear()}}}class qr{constructor({getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){this.norm=Sl(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ee(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ee(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!pe(t)||tr(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(pe(o)){if(De(o)){let a=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:l}=c.pop();if(pe(l))if(Ee(l)&&!tr(l)){let f={v:l,i:u,n:this.norm.get(l)};a.push(f)}else De(l)&&l.forEach((f,d)=>{c.push({nestedArrIndex:d,value:f})})}r.$[s]=a}else if(Ee(o)&&!tr(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function co(e,t,{getFn:n=Y.getFn,fieldNormWeight:r=Y.fieldNormWeight}={}){const i=new qr({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(ao)),i.setSources(t),i.create(),i}function bl(e,{getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new qr({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function an(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Y.distance,ignoreLocation:s=Y.ignoreLocation}={}){const o=t/e.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}function _l(e=[],t=Y.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&r===-1?r=s:!a&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Je=32;function xl(e,t,n,{location:r=Y.location,distance:i=Y.distance,threshold:s=Y.threshold,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,includeMatches:c=Y.includeMatches,ignoreLocation:u=Y.ignoreLocation}={}){if(t.length>Je)throw new Error(ll(Je));const l=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=s,m=d;const p=a>1||c,S=p?Array(f):[];let w;for(;(w=e.indexOf(t,m))>-1;){let N=an(t,{currentLocation:w,expectedLocation:d,distance:i,ignoreLocation:u});if(h=Math.min(N,h),m=w+l,p){let O=0;for(;O<l;)S[w+O]=1,O+=1}}m=-1;let M=[],x=1,_=l+f;const F=1<<l-1;for(let N=0;N<l;N+=1){let O=0,v=_;for(;O<v;)an(t,{errors:N,currentLocation:d+v,expectedLocation:d,distance:i,ignoreLocation:u})<=h?O=v:_=v,v=Math.floor((_-O)/2+O);_=v;let b=Math.max(1,d-v+1),C=o?f:Math.min(d+v,f)+l,k=Array(C+2);k[C+1]=(1<<N)-1;for(let D=C;D>=b;D-=1){let V=D-1,K=n[e.charAt(V)];if(p&&(S[V]=+!!K),k[D]=(k[D+1]<<1|1)&K,N&&(k[D]|=(M[D+1]|M[D])<<1|1|M[D+1]),k[D]&F&&(x=an(t,{errors:N,currentLocation:V,expectedLocation:d,distance:i,ignoreLocation:u}),x<=h)){if(h=x,m=V,m<=d)break;b=Math.max(1,2*d-m)}}if(an(t,{errors:N+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>h)break;M=k}const j={isMatch:m>=0,score:Math.max(.001,x)};if(p){const N=_l(S,a);N.length?c&&(j.indices=N):j.isMatch=!1}return j}function Ol(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class uo{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:i=Y.distance,includeMatches:s=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,isCaseSensitive:c=Y.isCaseSensitive,ignoreLocation:u=Y.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(d,h)=>{this.chunks.push({pattern:d,alphabet:Ol(d),startIndex:h})},f=this.pattern.length;if(f>Je){let d=0;const h=f%Je,m=f-h;for(;d<m;)l(this.pattern.substr(d,Je),d),d+=Je;if(h){const p=f-Je;l(this.pattern.substr(p),p)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let m={isMatch:!0,score:0};return r&&(m.indices=[[0,t.length-1]]),m}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:c,ignoreLocation:u}=this.options;let l=[],f=0,d=!1;this.chunks.forEach(({pattern:m,alphabet:p,startIndex:S})=>{const{isMatch:w,score:M,indices:x}=xl(t,m,p,{location:i+S,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});w&&(d=!0),f+=M,w&&x&&(l=[...l,...x])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=l),h}}class Ye{constructor(t){this.pattern=t}static isMultiMatch(t){return Ki(t,this.multiRegex)}static isSingleMatch(t){return Ki(t,this.singleRegex)}search(){}}function Ki(e,t){const n=e.match(t);return n?n[1]:null}class Il extends Ye{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Pl extends Ye{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Rl extends Ye{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class El extends Ye{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Cl extends Ye{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Al extends Ye{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class lo extends Ye{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:i=Y.distance,includeMatches:s=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,isCaseSensitive:c=Y.isCaseSensitive,ignoreLocation:u=Y.ignoreLocation}={}){super(t),this._bitapSearch=new uo(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class fo extends Ye{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const yr=[Il,fo,Rl,El,Al,Cl,Pl,lo],Qi=yr.length,Tl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$l="|";function kl(e,t={}){return e.split($l).map(n=>{let r=n.trim().split(Tl).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let c=!1,u=-1;for(;!c&&++u<Qi;){const l=yr[u];let f=l.isMultiMatch(a);f&&(i.push(new l(f,t)),c=!0)}if(!c)for(u=-1;++u<Qi;){const l=yr[u];let f=l.isSingleMatch(a);if(f){i.push(new l(f,t));break}}}return i})}const Ml=new Set([lo.type,fo.type]);class jl{constructor(t,{isCaseSensitive:n=Y.isCaseSensitive,includeMatches:r=Y.includeMatches,minMatchCharLength:i=Y.minMatchCharLength,ignoreLocation:s=Y.ignoreLocation,findAllMatches:o=Y.findAllMatches,location:a=Y.location,threshold:c=Y.threshold,distance:u=Y.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:c,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=kl(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],a=0;for(let c=0,u=n.length;c<u;c+=1){const l=n[c];o.length=0,s=0;for(let f=0,d=l.length;f<d;f+=1){const h=l[f],{isMatch:m,indices:p,score:S}=h.search(t);if(m){if(s+=1,a+=S,r){const w=h.constructor.type;Ml.has(w)?o=[...o,...p]:o.push(p)}}else{a=0,s=0,o.length=0;break}}if(s){let f={isMatch:!0,score:a/s};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const vr=[];function Fl(...e){vr.push(...e)}function wr(e,t){for(let n=0,r=vr.length;n<r;n+=1){let i=vr[n];if(i.condition(e,t))return new i(e,t)}return new uo(e,t)}const Sn={AND:"$and",OR:"$or"},Sr={PATH:"$path",PATTERN:"$val"},br=e=>!!(e[Sn.AND]||e[Sn.OR]),Dl=e=>!!e[Sr.PATH],Ll=e=>!De(e)&&so(e)&&!br(e),Yi=e=>({[Sn.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function ho(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=Dl(i);if(!o&&s.length>1&&!br(i))return r(Yi(i));if(Ll(i)){const c=o?i[Sr.PATH]:s[0],u=o?i[Sr.PATTERN]:i[c];if(!Ee(u))throw new Error(ul(c));const l={keyId:mr(c),pattern:u};return n&&(l.searcher=wr(u,t)),l}let a={children:[],operator:s[0]};return s.forEach(c=>{const u=i[c];De(u)&&u.forEach(l=>{a.children.push(r(l))})}),a};return br(e)||(e=Yi(e)),r(e)}function Nl(e,{ignoreFieldNorm:t=Y.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),n.score=r})}function Ul(e,t){const n=e.matches;t.matches=[],pe(n)&&n.forEach(r=>{if(!pe(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Hl(e,t){t.score=e.score}function Vl(e,t,{includeMatches:n=Y.includeMatches,includeScore:r=Y.includeScore}={}){const i=[];return n&&i.push(Ul),r&&i.push(Hl),e.map(s=>{const{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,a)}),a})}class nt{constructor(t,n={},r){this.options={...Y,...n},this.options.useExtendedSearch,this._keyStore=new hl(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof qr))throw new Error(cl);this._myIndex=n||co(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let c=Ee(t)?Ee(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Nl(c,{ignoreFieldNorm:a}),s&&c.sort(o),io(n)&&n>-1&&(c=c.slice(0,n)),Vl(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=wr(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:a})=>{if(!pe(s))return;const{isMatch:c,score:u,indices:l}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:l}]})}),i}_searchLogical(t){const n=ho(t,this.options),r=(a,c,u)=>{if(!a.children){const{keyId:f,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:d});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const l=[];for(let f=0,d=a.children.length;f<d;f+=1){const h=a.children[f],m=r(h,c,u);if(m.length)l.push(...m);else if(a.operator===Sn.AND)return[]}return l},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:c})=>{if(pe(a)){let u=r(n,a,c);u.length&&(s[c]||(s[c]={idx:c,item:a,matches:[]},o.push(s[c])),u.forEach(({matches:l})=>{s[c].matches.push(...l)}))}}),o}_searchObjectList(t){const n=wr(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!pe(o))return;let c=[];r.forEach((u,l)=>{c.push(...this._findMatches({key:u,value:o[l],searcher:n}))}),c.length&&s.push({idx:a,item:o,matches:c})}),s}_findMatches({key:t,value:n,searcher:r}){if(!pe(n))return[];let i=[];if(De(n))n.forEach(({v:s,i:o,n:a})=>{if(!pe(s))return;const{isMatch:c,score:u,indices:l}=r.searchIn(s);c&&i.push({score:u,key:t,value:s,idx:o,norm:a,indices:l})});else{const{v:s,n:o}=n,{isMatch:a,score:c,indices:u}=r.searchIn(s);a&&i.push({score:c,key:t,value:s,norm:o,indices:u})}return i}}nt.version="7.0.0";nt.createIndex=co;nt.parseIndex=bl;nt.config=Y;nt.parseQuery=ho;Fl(jl);const Bl=e=>{const t=E.useMemo(()=>new Map(e.map(o=>[o.id,o])),[e]),n=E.useMemo(()=>{const o=new Set(e.reduce((a,c)=>{const u=c.bodies.filter(l=>l.purpose==="tagging"&&l.value);return[...a,...u.map(l=>l.value)]},[]));return new nt([...o],{shouldSort:!0,threshold:.5})},[e]),r=E.useMemo(()=>{const o=e.map(a=>{const c=a.id,u=a.bodies.filter(l=>l.purpose==="tagging"&&l.value).map(l=>l.value);return{annotationId:c,tags:u}}).filter(a=>a.tags.length>0);return new nt(o,{keys:["tags"],shouldSort:!0,threshold:.2})},[e]);return{search:(o,a)=>r.search(o,{limit:a||500}).map(c=>t.get(c.item.annotationId)).filter(Boolean),getSuggestions:(o,a)=>n.search(o,{limit:a||10}).map(c=>c.item)}},ql=e=>{const t=Ko(),[n,r]=E.useState(!0),{search:i,getSuggestions:s}=Bl(t),[o,a]=E.useState(""),[c,u]=E.useState(),[l,f]=E.useState(0),[d,h]=E.useState(!1),m=Vr([n],{from:{maxWidth:0,opacity:0},enter:{maxWidth:120,opacity:1},leave:{maxWidth:0,opacity:1},config:{duration:250,easing:$n.easeInOutCubic}});E.useEffect(()=>{if(o){const x=i(o);e.sorter&&x.sort(e.sorter),u(x),x.length>0?f(1):f(0),e.onSearch(x)}else u(void 0),f(1),e.onSearch([])},[o,e.sorter]),E.useEffect(()=>{if(!l||!c)return;const x=c[l-1];e.onHighlightResult(x)},[c,l]);const p=x=>{if(!c)return;const _=Math.min(Math.max(1,l+x),c.length);f(_)},S=()=>{a(""),u(void 0),f(1),r(!0),e.onClear()},w=x=>{x.key==="Enter"?d?p(1):h(!0):h(!1)},M=()=>{o||r(!0)};return G.jsxs("div",{className:"annotation-search",children:[G.jsx(pc,{size:20}),G.jsxs("div",{className:"searchbox-wrapper",children:[G.jsx(nl,{placeholder:"Search",value:o,onChange:a,onFocus:()=>r(!1),onBlur:M,onKeyDown:w,getSuggestions:s}),c&&G.jsxs("div",{className:"result-count",children:[l,"/",c.length]})]}),m((x,_)=>!_&&G.jsx(Br.div,{style:x,className:"collapsible",children:G.jsxs("div",{className:"actions",children:[G.jsx("button",{onClick:()=>p(-1),children:G.jsx(hc,{size:18})}),G.jsx("button",{onClick:()=>p(1),children:G.jsx(fc,{size:18})}),G.jsx("button",{onClick:S,children:G.jsx(Rr,{size:18,strokeWidth:2.2})})]})}))]})},td=e=>{const[t,n]=E.useState([]);return E.useEffect(()=>{e.onSearch(t)},[t]),G.jsxs("header",{children:[G.jsxs("div",{className:"header-left",children:[G.jsxs("a",{href:"../..",children:[G.jsx(dc,{}),G.jsx("span",{children:"Home"})]}),G.jsx("a",{href:"../../about",children:"About"})]}),G.jsxs("div",{className:"header-right",children:[G.jsx(ql,{sorter:e.searchSorter,onClear:e.onClearSearch,onHighlightResult:e.onHighlightSearchResult,onSearch:n}),G.jsx("button",{className:e.isRelatedVersesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedVerses,children:G.jsx(lc,{size:18})}),G.jsx("button",{className:e.isRelatedImagesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedImages,children:G.jsx(gc,{size:18})})]})]})},go=e=>e.bodies.filter(t=>t.purpose==="tagging"&&t.value).map(t=>t.value),Wl=(e,t)=>{const n=Array.from(t).filter(i=>e.has(i)),r=new Set([...e,...t]);return n.length/r.size},po=(e,t)=>{const n=(s,o)=>s.size===o.size&&[...s].every(a=>o.has(a)),r=s=>{s.sort((o,a)=>a.common.size-o.common.size),s.forEach(o=>o.related.sort((a,c)=>c.score-a.score))},i=[];return t.forEach(s=>{const o=new Set(s.tags),a=new Set(Array.from(o).filter(l=>e.has(l))),c=Wl(e,o),u=i.find(({common:l})=>n(l,a));u?u.related=[...u.related,{annotation:s,score:c}]:i.push({common:a,related:[{annotation:s,score:c}]})}),r(i),i},nd=(e,t)=>{const n=[...e].filter(s=>s.width>0&&s.height>0);let r,i=Number.MAX_VALUE;return n.forEach(s=>{const o=s.top+s.height/2,a=Math.abs(o-t.y);a<i&&(i=a,r=s)}),r},rd=e=>({length:1,item:t=>t===0?e:void 0,[Symbol.iterator]:function*(){for(let t=0;t<this.length;t++)yield this.item(t)}}),zl=Me.createContext({}),mo=!0;function Gl({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:i,circle:s,direction:o,duration:a,enableAnimation:c=mo}){const u={};return o==="rtl"&&(u["--animation-direction"]="reverse"),typeof a=="number"&&(u["--animation-duration"]=`${a}s`),c||(u["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(u.width=n),(typeof r=="string"||typeof r=="number")&&(u.height=r),(typeof i=="string"||typeof i=="number")&&(u.borderRadius=i),s&&(u.borderRadius="50%"),typeof e<"u"&&(u["--base-color"]=e),typeof t<"u"&&(u["--highlight-color"]=t),u}function Kl({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:i,circle:s=!1,style:o,...a}){var c,u,l;const f=Me.useContext(zl),d={...a};for(const[x,_]of Object.entries(a))typeof _>"u"&&delete d[x];const h={...f,...d,circle:s},m={...o,...Gl(h)};let p="react-loading-skeleton";n&&(p+=` ${n}`);const S=(c=h.inline)!==null&&c!==void 0?c:!1,w=[],M=Math.ceil(e);for(let x=0;x<M;x++){let _=m;if(M>e&&x===M-1){const j=(u=_.width)!==null&&u!==void 0?u:"100%",N=e%1,O=typeof j=="number"?j*N:`calc(${j} * ${N})`;_={..._,width:O}}const F=Me.createElement("span",{className:p,style:_,key:x},"");S?w.push(F):w.push(Me.createElement(Me.Fragment,{key:x},F,Me.createElement("br",null)))}return Me.createElement("span",{className:r,"data-testid":i,"aria-live":"polite","aria-busy":(l=h.enableAnimation)!==null&&l!==void 0?l:mo},t?w.map((x,_)=>Me.createElement(t,{key:_},x)):w)}const Ql=e=>{const[t,n]=E.useState(!1);return G.jsxs("div",{className:"thumbnail-wrapper",children:[!t&&G.jsx(Kl,{}),G.jsx("img",{src:e.src,style:{display:t?void 0:"none"},onLoad:()=>n(!0)})]})},id=e=>{const[t,n]=E.useState(!1),r=E.useMemo(()=>e.annotation?new Set(go(e.annotation)):new Set,[e.annotation]),i=E.useMemo(()=>po(r,e.related||[]),[r,e.related]),s=Vr([e.open],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:$n.easeInCubic}});E.useLayoutEffect(()=>{setTimeout(()=>n(!0),1)},[]);const o=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/image/${a.slug}#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return s((a,c)=>c&&G.jsxs(Br.aside,{style:a,className:"related related-images",children:[G.jsx("button",{onClick:e.onClose,className:"close",children:G.jsx(Rr,{size:20,strokeWidth:1.5})}),G.jsxs("div",{className:"related-verses-wrapper",children:[G.jsxs("h3",{children:["Images (",e.related?e.related.length:0,")"]}),G.jsx("ul",{children:i.map(u=>u.related.map(({annotation:l})=>G.jsxs("li",{children:[G.jsxs("div",{className:"preview",children:[G.jsx(Ql,{src:l.thumbnail}),G.jsx("div",{className:"taglist-wrapper",children:G.jsx("ul",{className:"taglist",children:l.tags.map(f=>G.jsx("li",{className:r.has(f)?"common":void 0,children:f},f))})})]}),G.jsx("a",{href:o(l),children:l.image})]},l.id)))})]})]}))},sd=e=>{const[t,n]=E.useState(!1),r=E.useMemo(()=>e.annotation?new Set(go(e.annotation)):new Set,[e.annotation]),i=E.useMemo(()=>po(r,e.related||[]),[r,e.related]),s=Vr([e.open],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:$n.easeInCubic}});E.useLayoutEffect(()=>{setTimeout(()=>n(!0),10)},[]);const o=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/image/${a.slug}#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return s((a,c)=>c&&G.jsxs(Br.aside,{style:a,className:"related related-verses",children:[G.jsx("button",{onClick:e.onClose,className:"close",children:G.jsx(Rr,{size:20,strokeWidth:1.5})}),G.jsxs("div",{className:"related-verses-wrapper",children:[G.jsxs("h3",{children:["Verses (",e.related?e.related.length:0,")"]}),G.jsx("ul",{children:i.map(u=>u.related.map(({annotation:l})=>G.jsxs("li",{children:[G.jsx("ul",{className:"taglist",children:l.tags.map(f=>G.jsx("li",{className:r.has(f)?"common":void 0,children:f},f))}),G.jsx("p",{className:"snippet-preview",children:l.snippet}),G.jsx("a",{href:o(l),children:l.verse})]},l.id)))})]})]}))},od=e=>{const t=e.relatedImages.length,n=e.relatedVerses.length,r=E.useMemo(()=>e.annotation.bodies.filter(i=>i.purpose==="tagging"),[e.annotation]);return G.jsx("div",{className:"annotation-popup",children:G.jsxs("div",{className:"tags",children:[G.jsx("div",{children:r.map(i=>i.value).join("  ")}),e.type==="VERSE"?G.jsxs("div",{className:"related",children:[n>0&&G.jsx("button",{onClick:e.onClickVerses,children:G.jsxs("span",{children:[n," other verse",n>1&&"s"]})}),t>0&&G.jsx("button",{onClick:e.onClickImages,children:G.jsxs("span",{children:[t," image",t>1&&"s"]})})]}):G.jsxs("div",{className:"related",children:[t>0&&G.jsx("button",{onClick:e.onClickImages,children:G.jsxs("span",{children:[t," other image",t>1&&"s"]})}),n>0&&G.jsx("button",{onClick:e.onClickVerses,children:G.jsxs("span",{children:[n," verse",n>1&&"s"]})})]})]})})};function bt(e){return yo(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function He(e){var t;return(t=(yo(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yo(e){return e instanceof Node||e instanceof me(e).Node}function he(e){return e instanceof Element||e instanceof me(e).Element}function Te(e){return e instanceof HTMLElement||e instanceof me(e).HTMLElement}function Xi(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}function Yt(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ie(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Yl(e){return["table","td","th"].includes(bt(e))}function Wr(e){const t=zr(),n=Ie(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Xl(e){let t=Ke(e);for(;Te(t)&&!vt(t);){if(Wr(t))return t;t=Ke(t)}return null}function zr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vt(e){return["html","body","#document"].includes(bt(e))}function Ie(e){return me(e).getComputedStyle(e)}function Nn(e){return he(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ke(e){if(bt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xi(e)&&e.host||He(e);return Xi(t)?t.host:t}function vo(e){const t=Ke(e);return vt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Te(t)&&Yt(t)?t:vo(t)}function Wt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=vo(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=me(i);return s?t.concat(o,o.visualViewport||[],Yt(i)?i:[],o.frameElement&&n?Wt(o.frameElement):[]):t.concat(i,Wt(i,[],n))}const Le=Math.min,Ce=Math.max,bn=Math.round,cn=Math.floor,Qe=e=>({x:e,y:e}),Jl={left:"right",right:"left",bottom:"top",top:"bottom"},Zl={start:"end",end:"start"};function _r(e,t,n){return Ce(e,Le(t,n))}function _t(e,t){return typeof e=="function"?e(t):e}function Ne(e){return e.split("-")[0]}function Xt(e){return e.split("-")[1]}function wo(e){return e==="x"?"y":"x"}function Gr(e){return e==="y"?"height":"width"}function Jt(e){return["top","bottom"].includes(Ne(e))?"y":"x"}function Kr(e){return wo(Jt(e))}function ef(e,t,n){n===void 0&&(n=!1);const r=Xt(e),i=Kr(e),s=Gr(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=_n(o)),[o,_n(o)]}function tf(e){const t=_n(e);return[xr(e),t,xr(t)]}function xr(e){return e.replace(/start|end/g,t=>Zl[t])}function nf(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function rf(e,t,n,r){const i=Xt(e);let s=nf(Ne(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(xr)))),s}function _n(e){return e.replace(/left|right|bottom|top/g,t=>Jl[t])}function sf(e){return{top:0,right:0,bottom:0,left:0,...e}}function Qr(e){return typeof e!="number"?sf(e):{top:e,right:e,bottom:e,left:e}}function wt(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ji(e,t,n){let{reference:r,floating:i}=e;const s=Jt(t),o=Kr(t),a=Gr(o),c=Ne(t),u=s==="y",l=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(c){case"top":h={x:l,y:r.y-i.height};break;case"bottom":h={x:l,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Xt(t)){case"start":h[o]-=d*(n&&u?-1:1);break;case"end":h[o]+=d*(n&&u?-1:1);break}return h}const of=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:l,y:f}=Ji(u,r,c),d=r,h={},m=0;for(let p=0;p<a.length;p++){const{name:S,fn:w}=a[p],{x:M,y:x,data:_,reset:F}=await w({x:l,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});l=M??l,f=x??f,h={...h,[S]:{...h[S],..._}},F&&m<=50&&(m++,typeof F=="object"&&(F.placement&&(d=F.placement),F.rects&&(u=F.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):F.rects),{x:l,y:f}=Ji(u,d,c)),p=-1)}return{x:l,y:f,placement:d,strategy:i,middlewareData:h}};async function So(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_t(t,e),m=Qr(h),S=a[d?f==="floating"?"reference":"floating":f],w=wt(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(S)))==null||n?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:l,strategy:c})),M=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},F=wt(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:x,strategy:c}):M);return{top:(w.top-F.top+m.top)/_.y,bottom:(F.bottom-w.bottom+m.bottom)/_.y,left:(w.left-F.left+m.left)/_.x,right:(F.right-w.right+m.right)/_.x}}const af=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=t,{element:u,padding:l=0}=_t(e,t)||{};if(u==null)return{};const f=Qr(l),d={x:n,y:r},h=Kr(i),m=Gr(h),p=await o.getDimensions(u),S=h==="y",w=S?"top":"left",M=S?"bottom":"right",x=S?"clientHeight":"clientWidth",_=s.reference[m]+s.reference[h]-d[h]-s.floating[m],F=d[h]-s.reference[h],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=j?j[x]:0;(!N||!await(o.isElement==null?void 0:o.isElement(j)))&&(N=a.floating[x]||s.floating[m]);const O=_/2-F/2,v=N/2-p[m]/2-1,b=Le(f[w],v),C=Le(f[M],v),k=b,L=N-p[m]-C,D=N/2-p[m]/2+O,V=_r(k,D,L),K=!c.arrow&&Xt(i)!=null&&D!==V&&s.reference[m]/2-(D<k?b:C)-p[m]/2<0,W=K?D<k?D-k:D-L:0;return{[h]:d[h]+W,data:{[h]:V,centerOffset:D-V-W,...K&&{alignmentOffset:W}},reset:K}}}),cf=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:l=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...S}=_t(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=Ne(i),M=Ne(a)===a,x=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=d||(M||!p?[_n(a)]:tf(a));!d&&m!=="none"&&_.push(...rf(a,p,m,x));const F=[a,..._],j=await So(t,S),N=[];let O=((r=s.flip)==null?void 0:r.overflows)||[];if(l&&N.push(j[w]),f){const k=ef(i,o,x);N.push(j[k[0]],j[k[1]])}if(O=[...O,{placement:i,overflows:N}],!N.every(k=>k<=0)){var v,b;const k=(((v=s.flip)==null?void 0:v.index)||0)+1,L=F[k];if(L)return{data:{index:k,overflows:O},reset:{placement:L}};let D=(b=O.filter(V=>V.overflows[0]<=0).sort((V,K)=>V.overflows[1]-K.overflows[1])[0])==null?void 0:b.placement;if(!D)switch(h){case"bestFit":{var C;const V=(C=O.map(K=>[K.placement,K.overflows.filter(W=>W>0).reduce((W,R)=>W+R,0)]).sort((K,W)=>K[1]-W[1])[0])==null?void 0:C[0];V&&(D=V);break}case"initialPlacement":D=a;break}if(i!==D)return{reset:{placement:D}}}return{}}}};function bo(e){const t=Le(...e.map(s=>s.left)),n=Le(...e.map(s=>s.top)),r=Ce(...e.map(s=>s.right)),i=Ce(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function uf(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>wt(bo(i)))}const lf=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:c,y:u}=_t(e,t),l=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=uf(l),d=wt(bo(l)),h=Qr(a);function m(){if(f.length===2&&f[0].left>f[1].right&&c!=null&&u!=null)return f.find(S=>c>S.left-h.left&&c<S.right+h.right&&u>S.top-h.top&&u<S.bottom+h.bottom)||d;if(f.length>=2){if(Jt(n)==="y"){const b=f[0],C=f[f.length-1],k=Ne(n)==="top",L=b.top,D=C.bottom,V=k?b.left:C.left,K=k?b.right:C.right,W=K-V,R=D-L;return{top:L,bottom:D,left:V,right:K,width:W,height:R,x:V,y:L}}const S=Ne(n)==="left",w=Ce(...f.map(b=>b.right)),M=Le(...f.map(b=>b.left)),x=f.filter(b=>S?b.left===M:b.right===w),_=x[0].top,F=x[x.length-1].bottom,j=M,N=w,O=N-j,v=F-_;return{top:_,bottom:F,left:j,right:N,width:O,height:v,x:j,y:_}}return d}const p=await s.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:o});return i.reference.x!==p.reference.x||i.reference.y!==p.reference.y||i.reference.width!==p.reference.width||i.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function ff(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ne(n),a=Xt(n),c=Jt(n)==="y",u=["left","top"].includes(o)?-1:1,l=s&&c?-1:1,f=_t(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),c?{x:h*l,y:d*u}:{x:d*u,y:h*l}}const df=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,c=await ff(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},hf=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:w,y:M}=S;return{x:w,y:M}}},...c}=_t(e,t),u={x:n,y:r},l=await So(t,c),f=Jt(Ne(i)),d=wo(f);let h=u[d],m=u[f];if(s){const S=d==="y"?"top":"left",w=d==="y"?"bottom":"right",M=h+l[S],x=h-l[w];h=_r(M,h,x)}if(o){const S=f==="y"?"top":"left",w=f==="y"?"bottom":"right",M=m+l[S],x=m-l[w];m=_r(M,m,x)}const p=a.fn({...t,[d]:h,[f]:m});return{...p,data:{x:p.x-n,y:p.y-r}}}}};function _o(e){const t=Ie(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Te(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=bn(n)!==s||bn(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Yr(e){return he(e)?e:e.contextElement}function pt(e){const t=Yr(e);if(!Te(t))return Qe(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=_o(t);let o=(s?bn(n.width):n.width)/r,a=(s?bn(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gf=Qe(0);function xo(e){const t=me(e);return!zr()||!t.visualViewport?gf:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function pf(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function rt(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Yr(e);let o=Qe(1);t&&(r?he(r)&&(o=pt(r)):o=pt(e));const a=pf(s,n,r)?xo(s):Qe(0);let c=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,l=i.width/o.x,f=i.height/o.y;if(s){const d=me(s),h=r&&he(r)?me(r):r;let m=d,p=m.frameElement;for(;p&&r&&h!==m;){const S=pt(p),w=p.getBoundingClientRect(),M=Ie(p),x=w.left+(p.clientLeft+parseFloat(M.paddingLeft))*S.x,_=w.top+(p.clientTop+parseFloat(M.paddingTop))*S.y;c*=S.x,u*=S.y,l*=S.x,f*=S.y,c+=x,u+=_,m=me(p),p=m.frameElement}}return wt({width:l,height:f,x:c,y:u})}const mf=[":popover-open",":modal"];function Xr(e){return mf.some(t=>{try{return e.matches(t)}catch{return!1}})}function yf(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=He(r),a=t?Xr(t.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},u=Qe(1);const l=Qe(0),f=Te(r);if((f||!f&&!s)&&((bt(r)!=="body"||Yt(o))&&(c=Nn(r)),Te(r))){const d=rt(r);u=pt(r),l.x=d.x+r.clientLeft,l.y=d.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+l.x,y:n.y*u.y-c.scrollTop*u.y+l.y}}function vf(e){return Array.from(e.getClientRects())}function Oo(e){return rt(He(e)).left+Nn(e).scrollLeft}function wf(e){const t=He(e),n=Nn(e),r=e.ownerDocument.body,i=Ce(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ce(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Oo(e);const a=-n.scrollTop;return Ie(r).direction==="rtl"&&(o+=Ce(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Sf(e,t){const n=me(e),r=He(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const u=zr();(!u||u&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function bf(e,t){const n=rt(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Te(e)?pt(e):Qe(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:o,height:a,x:c,y:u}}function Zi(e,t,n){let r;if(t==="viewport")r=Sf(e,n);else if(t==="document")r=wf(He(e));else if(he(t))r=bf(t,n);else{const i=xo(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return wt(r)}function Io(e,t){const n=Ke(e);return n===t||!he(n)||vt(n)?!1:Ie(n).position==="fixed"||Io(n,t)}function _f(e,t){const n=t.get(e);if(n)return n;let r=Wt(e,[],!1).filter(a=>he(a)&&bt(a)!=="body"),i=null;const s=Ie(e).position==="fixed";let o=s?Ke(e):e;for(;he(o)&&!vt(o);){const a=Ie(o),c=Wr(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Yt(o)&&!c&&Io(e,o))?r=r.filter(l=>l!==o):i=a,o=Ke(o)}return t.set(e,r),r}function xf(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Xr(t)?[]:_f(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,l)=>{const f=Zi(t,l,i);return u.top=Ce(f.top,u.top),u.right=Le(f.right,u.right),u.bottom=Le(f.bottom,u.bottom),u.left=Ce(f.left,u.left),u},Zi(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Of(e){const{width:t,height:n}=_o(e);return{width:t,height:n}}function If(e,t,n){const r=Te(t),i=He(t),s=n==="fixed",o=rt(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=Qe(0);if(r||!r&&!s)if((bt(t)!=="body"||Yt(i))&&(a=Nn(t)),r){const f=rt(t,!0,s,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else i&&(c.x=Oo(i));const u=o.left+a.scrollLeft-c.x,l=o.top+a.scrollTop-c.y;return{x:u,y:l,width:o.width,height:o.height}}function nr(e){return Ie(e).position==="static"}function es(e,t){return!Te(e)||Ie(e).position==="fixed"?null:t?t(e):e.offsetParent}function Po(e,t){const n=me(e);if(Xr(e))return n;if(!Te(e)){let i=Ke(e);for(;i&&!vt(i);){if(he(i)&&!nr(i))return i;i=Ke(i)}return n}let r=es(e,t);for(;r&&Yl(r)&&nr(r);)r=es(r,t);return r&&vt(r)&&nr(r)&&!Wr(r)?n:r||Xl(e)||n}const Pf=async function(e){const t=this.getOffsetParent||Po,n=this.getDimensions,r=await n(e.floating);return{reference:If(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rf(e){return Ie(e).direction==="rtl"}const Ro={convertOffsetParentRelativeRectToViewportRelativeRect:yf,getDocumentElement:He,getClippingRect:xf,getOffsetParent:Po,getElementRects:Pf,getClientRects:vf,getDimensions:Of,getScale:pt,isElement:he,isRTL:Rf};function Ef(e,t){let n=null,r;const i=He(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const{left:u,top:l,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=cn(l),m=cn(i.clientWidth-(u+f)),p=cn(i.clientHeight-(l+d)),S=cn(u),M={rootMargin:-h+"px "+-m+"px "+-p+"px "+-S+"px",threshold:Ce(0,Le(1,c))||1};let x=!0;function _(F){const j=F[0].intersectionRatio;if(j!==c){if(!x)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(_,{...M,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,M)}n.observe(e)}return o(!0),s}function ad(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Yr(e),l=i||s?[...u?Wt(u):[],...Wt(t)]:[];l.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const f=u&&a?Ef(u,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(w=>{let[M]=w;M&&M.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let m,p=c?rt(e):null;c&&S();function S(){const w=rt(e);p&&(w.x!==p.x||w.y!==p.y||w.width!==p.width||w.height!==p.height)&&n(),p=w,m=requestAnimationFrame(S)}return n(),()=>{var w;l.forEach(M=>{i&&M.removeEventListener("scroll",n),s&&M.removeEventListener("resize",n)}),f?.(),(w=h)==null||w.disconnect(),h=null,c&&cancelAnimationFrame(m)}}const Cf=df,Af=hf,Tf=cf,ts=af,$f=lf,kf=(e,t,n)=>{const r=new Map,i={platform:Ro,...n},s={...i.platform,_c:r};return of(e,t,{...i,platform:s})};var dn=typeof document<"u"?E.useLayoutEffect:E.useEffect;function xn(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!xn(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!xn(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Eo(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ns(e,t){const n=Eo(e);return Math.round(t*n)/n}function rs(e){const t=E.useRef(e);return dn(()=>{t.current=e}),t}function Mf(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=e,[l,f]=E.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=E.useState(r);xn(d,r)||h(r);const[m,p]=E.useState(null),[S,w]=E.useState(null),M=E.useCallback(W=>{W!==j.current&&(j.current=W,p(W))},[]),x=E.useCallback(W=>{W!==N.current&&(N.current=W,w(W))},[]),_=s||m,F=o||S,j=E.useRef(null),N=E.useRef(null),O=E.useRef(l),v=c!=null,b=rs(c),C=rs(i),k=E.useCallback(()=>{if(!j.current||!N.current)return;const W={placement:t,strategy:n,middleware:d};C.current&&(W.platform=C.current),kf(j.current,N.current,W).then(R=>{const y={...R,isPositioned:!0};L.current&&!xn(O.current,y)&&(O.current=y,os.flushSync(()=>{f(y)}))})},[d,t,n,C]);dn(()=>{u===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(W=>({...W,isPositioned:!1})))},[u]);const L=E.useRef(!1);dn(()=>(L.current=!0,()=>{L.current=!1}),[]),dn(()=>{if(_&&(j.current=_),F&&(N.current=F),_&&F){if(b.current)return b.current(_,F,k);k()}},[_,F,k,b,v]);const D=E.useMemo(()=>({reference:j,floating:N,setReference:M,setFloating:x}),[M,x]),V=E.useMemo(()=>({reference:_,floating:F}),[_,F]),K=E.useMemo(()=>{const W={position:n,left:0,top:0};if(!V.floating)return W;const R=ns(V.floating,l.x),y=ns(V.floating,l.y);return a?{...W,transform:"translate("+R+"px, "+y+"px)",...Eo(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:y}},[n,a,V.floating,l.x,l.y]);return E.useMemo(()=>({...l,update:k,refs:D,elements:V,floatingStyles:K}),[l,k,D,V,K])}const jf=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ts({element:r.current,padding:i}).fn(n):{}:r?ts({element:r,padding:i}).fn(n):{}}}},cd=(e,t)=>({...Cf(e),options:[e,t]}),ud=(e,t)=>({...Af(e),options:[e,t]}),ld=(e,t)=>({...Tf(e),options:[e,t]}),fd=(e,t)=>({...$f(e),options:[e,t]}),dd=(e,t)=>({...jf(e),options:[e,t]}),Co={...Do},Ff=Co.useInsertionEffect,Df=Ff||(e=>e());function Lf(e){const t=E.useRef(()=>{});return Df(()=>{t.current=e}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Or=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(this,arguments)}let is=!1,Nf=0;const ss=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Nf++;function Uf(){const[e,t]=E.useState(()=>is?ss():void 0);return Or(()=>{e==null&&t(ss())},[]),E.useEffect(()=>{is=!0},[]),e}const Hf=Co.useId,Ao=Hf||Uf,hd=E.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s}},width:o=14,height:a=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:l,stroke:f,d,style:{transform:h,...m}={},...p}=t,S=Ao();if(!i)return null;const w=u*2,M=w/2,x=o/2*(c/-8+1),_=a/2*c/4,[F,j]=r.split("-"),N=Ro.isRTL(i),O=!!d,v=F==="top"||F==="bottom",b=l&&j==="end"?"bottom":"top";let C=l&&j==="end"?"right":"left";l&&N&&(C=j==="end"?"left":"right");const k=s?.x!=null?l||s.x:"",L=s?.y!=null?l||s.y:"",D=d||"M0,0"+(" H"+o)+(" L"+(o-x)+","+(a-_))+(" Q"+o/2+","+a+" "+x+","+(a-_))+" Z",V={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[F];return E.createElement("svg",Ir({},p,{"aria-hidden":!0,ref:n,width:O?o:o+w,height:o,viewBox:"0 0 "+o+" "+(a>o?a:o),style:{position:"absolute",pointerEvents:"none",[C]:k,[b]:L,[F]:v||O?"100%":"calc(100% - "+w/2+"px)",transform:""+V+(h??""),...m}}),w>0&&E.createElement("path",{clipPath:"url(#"+S+")",fill:"none",stroke:f,strokeWidth:w+(d?0:1),d:D}),E.createElement("path",{stroke:w&&!d?p.fill:"none",d:D}),E.createElement("clipPath",{id:S},E.createElement("rect",{x:-M,y:M*(O?-1:1),width:o+w,height:o})))});function Vf(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Bf=E.createContext(null),qf=E.createContext(null),Wf=()=>{var e;return((e=E.useContext(Bf))==null?void 0:e.id)||null},zf=()=>E.useContext(qf);function Gf(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Ao(),s=E.useRef({}),[o]=E.useState(()=>Vf()),a=Wf()!=null,[c,u]=E.useState(r.reference),l=Lf((h,m,p)=>{s.current.openEvent=h?m:void 0,o.emit("openchange",{open:h,event:m,reason:p,nested:a}),n?.(h,m,p)}),f=E.useMemo(()=>({setPositionReference:u}),[]),d=E.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return E.useMemo(()=>({dataRef:s,open:t,onOpenChange:l,elements:d,events:o,floatingId:i,refs:f}),[t,l,d,o,i,f])}function gd(e){e===void 0&&(e={});const{nodeId:t}=e,n=Gf({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=E.useState(null),[a,c]=E.useState(null),l=i?.reference||s,f=E.useRef(null),d=zf();Or(()=>{l&&(f.current=l)},[l]);const h=Mf({...e,elements:{...i,...a&&{reference:a}}}),m=E.useCallback(x=>{const _=he(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;c(_),h.refs.setReference(_)},[h.refs]),p=E.useCallback(x=>{(he(x)||x===null)&&(f.current=x,o(x)),(he(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!he(x))&&h.refs.setReference(x)},[h.refs]),S=E.useMemo(()=>({...h.refs,setReference:p,setPositionReference:m,domReference:f}),[h.refs,p,m]),w=E.useMemo(()=>({...h.elements,domReference:l}),[h.elements,l]),M=E.useMemo(()=>({...h,...r,refs:S,elements:w,nodeId:t}),[h,S,w,t,r]);return Or(()=>{r.dataRef.current.floatingContext=M;const x=d?.nodesRef.current.find(_=>_.id===t);x&&(x.context=M)}),E.useMemo(()=>({...h,context:M,refs:S,elements:w}),[h,S,w,M])}export{od as A,Qf as B,Yf as C,hd as F,td as P,sd as R,cd as a,dd as b,ad as c,zo as d,oc as e,ld as f,Zf as g,nc as h,fd as i,G as j,Xf as k,Jf as l,Wo as m,ed as n,In as o,id as p,nd as q,ud as s,rd as t,gd as u};
