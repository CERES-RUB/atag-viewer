import{R as $e,r as C,b as di,g as Uo,a as Ho}from"./index.BLZuVVrN.js";import{j as q}from"./jsx-runtime.DHyoM1g7.js";var hi={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs;function Vo(){if(fs)return It;fs=1;var e=$e,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,a,c){var l,f={},d=null,h=null;c!==void 0&&(d=""+c),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(h=a.ref);for(l in a)r.call(a,l)&&!i.hasOwnProperty(l)&&(f[l]=a[l]);if(u&&u.defaultProps)for(l in a=u.defaultProps,a)f[l]===void 0&&(f[l]=a[l]);return{$$typeof:t,type:u,key:d,ref:h,props:f,_owner:s.current}}return It.Fragment=n,It.jsx=o,It.jsxs=o,It}hi.exports=Vo();var qo=hi.exports,Wo=(e=>(e.EDIT="EDIT",e.SELECT="SELECT",e.NONE="NONE",e))(Wo||{}),zo=[];for(var Qn=0;Qn<256;++Qn)zo.push((Qn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Go="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ko=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=Go[n[e]&63];return t};Ko();const Cn=C.createContext({anno:void 0,setAnno:void 0,annotations:[],selection:{selected:[]}}),Zf=C.forwardRef((e,t)=>{const[n,r]=C.useState(null),[s,i]=C.useState([]),[o,u]=C.useState({selected:[]});return C.useImperativeHandle(t,()=>n),C.useEffect(()=>{if(n){const{selection:a,store:c}=n.state;c.all().length>0&&i(c.all());const l=()=>i(()=>c.all());c.observe(l);let f;const d=a.subscribe(({selected:h,...y})=>{f&&c.unobserve(f);const p=(h||[]).map(({id:S,editable:b})=>({annotation:c.getAnnotation(S),editable:b}));u({selected:p,...y}),f=S=>{const{updated:b}=S.changes;u($=>({...$,selected:$.selected.map(({annotation:x,editable:E})=>{const k=b.find(M=>M.oldValue.id===x.id);return k?{annotation:k.newValue,editable:E}:{annotation:x,editable:E}})}))},c.observe(f,{annotations:h.map(({id:S})=>S)})});return()=>{c.unobserve(l),d()}}},[n]),qo.jsx(Cn.Provider,{value:{anno:n,setAnno:r,annotations:s,selection:o},children:e.children})}),Qo=()=>{const{anno:e}=C.useContext(Cn);return e},Yo=()=>{const{annotations:e}=C.useContext(Cn);return e},Xo=e=>Yo(),Jo=()=>{const{selection:e}=C.useContext(Cn);return e};var Zo=Object.defineProperty,ea=(e,t,n)=>t in e?Zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ds=(e,t,n)=>ea(e,typeof t!="symbol"?t+"":t,n);function jt(){}function ur(e,t){for(const n in t)e[n]=t[n];return e}function gi(e){return e()}function hs(){return Object.create(null)}function Be(e){e.forEach(gi)}function ue(e){return typeof e=="function"}function Pn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ta(e){return Object.keys(e).length===0}function na(e,t,n,r){if(e){const s=pi(e,t,n,r);return e[0](s)}}function pi(e,t,n,r){return e[1]&&r?ur(n.ctx.slice(),e[1](r(t))):n.ctx}function ra(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(t.dirty.length,s.length);for(let u=0;u<o;u+=1)i[u]=t.dirty[u]|s[u];return i}return t.dirty|s}return t.dirty}function sa(e,t,n,r,s,i){if(s){const o=pi(t,n,r,i);e.p(o,s)}}function ia(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function gs(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function mn(e){return e??""}function ps(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function oa(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function mi(e){return document.createTextNode(e)}function Ee(){return mi(" ")}function yi(){return mi("")}function ae(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function B(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function aa(e){return Array.from(e.childNodes)}function ms(e,t,n){e.classList.toggle(t,!!n)}function ua(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Lt;function Tt(e){Lt=e}function ca(){if(!Lt)throw new Error("Function called outside component initialization");return Lt}function la(){const e=ca();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=ua(t,n,{cancelable:r});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function Me(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const dt=[],ys=[];let gt=[];const vs=[],fa=Promise.resolve();let cr=!1;function da(){cr||(cr=!0,fa.then(vi))}function lr(e){gt.push(e)}const Yn=new Set;let lt=0;function vi(){if(lt!==0)return;const e=Lt;do{try{for(;lt<dt.length;){const t=dt[lt];lt++,Tt(t),ha(t.$$)}}catch(t){throw dt.length=0,lt=0,t}for(Tt(null),dt.length=0,lt=0;ys.length;)ys.pop()();for(let t=0;t<gt.length;t+=1){const n=gt[t];Yn.has(n)||(Yn.add(n),n())}gt.length=0}while(dt.length);for(;vs.length;)vs.pop()();cr=!1,Yn.clear(),Tt(e)}function ha(e){if(e.fragment!==null){e.update(),Be(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(lr)}}function ga(e){const t=[],n=[];gt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),gt=t}const fn=new Set;let tt;function pa(){tt={r:0,c:[],p:tt}}function ma(){tt.r||Be(tt.c),tt=tt.p}function be(e,t){e&&e.i&&(fn.delete(e),e.i(t))}function Ae(e,t,n,r){if(e&&e.o){if(fn.has(e))return;fn.add(e),tt.c.push(()=>{fn.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function bs(e){return e?.length!==void 0?e:Array.from(e)}function nt(e){e&&e.c()}function Ve(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),lr(()=>{const i=e.$$.on_mount.map(gi).filter(ue);e.$$.on_destroy?e.$$.on_destroy.push(...i):Be(i),e.$$.on_mount=[]}),s.forEach(lr)}function qe(e,t){const n=e.$$;n.fragment!==null&&(ga(n.after_update),Be(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ya(e,t){e.$$.dirty[0]===-1&&(dt.push(e),da(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Rn(e,t,n,r,s,i,o=null,u=[-1]){const a=Lt;Tt(e);const c=e.$$={fragment:null,ctx:[],props:i,update:jt,not_equal:s,bound:hs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:hs(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(f,d,...h)=>{const y=h.length?h[0]:d;return c.ctx&&s(c.ctx[f],c.ctx[f]=y)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](y),l&&ya(e,f)),d}):[],c.update(),l=!0,Be(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const f=aa(t.target);c.fragment&&c.fragment.l(f),f.forEach(ee)}else c.fragment&&c.fragment.c();t.intro&&be(e.$$.fragment),Ve(e,t.target,t.anchor),vi()}Tt(a)}class Fn{constructor(){ds(this,"$$"),ds(this,"$$set")}$destroy(){qe(this,1),this.$destroy=jt}$on(t,n){if(!ue(n))return jt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!ta(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const va="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(va);var Se=(e=>(e.ELLIPSE="ELLIPSE",e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(Se||{});const Fr=(e,t)=>t,bi=e=>{let t=1/0,n=1/0,r=-1/0,s=-1/0;return e.forEach(([i,o])=>{t=Math.min(t,i),n=Math.min(n,o),r=Math.max(r,i),s=Math.max(s,o)}),{minX:t,minY:n,maxX:r,maxY:s}},ba={area:e=>Math.PI*e.geometry.rx*e.geometry.ry,intersects:(e,t,n)=>{const{cx:r,cy:s,rx:i,ry:o}=e.geometry,u=0,a=Math.cos(u),c=Math.sin(u),l=t-r,f=n-s,d=a*l+c*f,h=c*l-a*f;return d*d/(i*i)+h*h/(o*o)<=1}};Fr(Se.ELLIPSE,ba);const Sa={area:e=>{const{points:t}=e.geometry;let n=0,r=t.length-1;for(let s=0;s<t.length;s++)n+=(t[r][0]+t[s][0])*(t[r][1]-t[s][1]),r=s;return Math.abs(.5*n)},intersects:(e,t,n)=>{const{points:r}=e.geometry;let s=!1;for(let i=0,o=r.length-1;i<r.length;o=i++){const u=r[i][0],a=r[i][1],c=r[o][0],l=r[o][1];a>n!=l>n&&t<(c-u)*(n-a)/(l-a)+u&&(s=!s)}return s}};Fr(Se.POLYGON,Sa);const wa={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,n)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&n>=e.geometry.y&&n<=e.geometry.y+e.geometry.h};Fr(Se.RECTANGLE,wa);const Ea=(e,t=!1)=>{const n=typeof e=="string"?e:e.value,r=/^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,s=[...n.matchAll(r)][0],[i,o,u,a,c,l,f]=s;if(o!=="xywh")throw new Error("Unsupported MediaFragment: "+n);if(u&&u!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${u}`);const[d,h,y,p]=[a,c,l,f].map(parseFloat);return{type:Se.RECTANGLE,geometry:{x:d,y:h,w:y,h:p,bounds:{minX:d,minY:t?h-p:h,maxX:d+y,maxY:t?h:h+p}}}},xa=e=>{const{x:t,y:n,w:r,h:s}=e;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${t},${n},${r},${s}`}},Si="http://www.w3.org/2000/svg",Ss=e=>{const t=r=>{Array.from(r.attributes).forEach(s=>{s.name.startsWith("on")&&r.removeAttribute(s.name)})},n=e.getElementsByTagName("script");return Array.from(n).reverse().forEach(r=>r.parentNode.removeChild(r)),Array.from(e.querySelectorAll("*")).forEach(t),e},_a=e=>{const t=new XMLSerializer().serializeToString(e.documentElement).replace("<svg>",`<svg xmlns="${Si}">`);return new DOMParser().parseFromString(t,"image/svg+xml").documentElement},Oa=e=>{const t=new DOMParser().parseFromString(e,"image/svg+xml"),n=t.lookupPrefix(Si),r=t.lookupNamespaceURI(null);return n||r?Ss(t).firstChild:Ss(_a(t)).firstChild},Ia=e=>{const[t,n,r]=e.match(/(<polygon points=["|'])([^("|')]*)/)||[],s=r.split(" ").map(i=>i.split(",").map(parseFloat));return{type:Se.POLYGON,geometry:{points:s,bounds:bi(s)}}},Aa=e=>{const t=Oa(e),n=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),s=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry")),o={minX:n-s,minY:r-i,maxX:n+s,maxY:r+i};return{type:Se.ELLIPSE,geometry:{cx:n,cy:r,rx:s,ry:i,bounds:o}}},Ca=e=>{const t=typeof e=="string"?e:e.value;if(t.includes("<polygon points="))return Ia(t);if(t.includes("<ellipse "))return Aa(t);throw"Unsupported SVG shape: "+t},Pa=e=>{let t;if(e.type===Se.POLYGON){const n=e.geometry,{points:r}=n;t=`<svg><polygon points="${r.map(s=>s.join(",")).join(" ")}" /></svg>`}else if(e.type===Se.ELLIPSE){const n=e.geometry;t=`<svg><ellipse cx="${n.cx}" cy="${n.cy}" rx="${n.rx}" ry="${n.ry}" /></svg>`}if(t)return{type:"SvgSelector",value:t};throw`Unsupported shape type: ${e.type}`};var oe=[];for(var Xn=0;Xn<256;++Xn)oe.push((Xn+256).toString(16).slice(1));function Ra(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}var rn,Fa=new Uint8Array(16);function Ta(){if(!rn&&(rn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rn(Fa)}var Da=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ws={randomUUID:Da};function $a(e,t,n){if(ws.randomUUID&&!t&&!e)return ws.randomUUID();e=e||{};var r=e.random||(e.rng||Ta)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ra(r)}var ka=[];for(var Jn=0;Jn<256;++Jn)ka.push((Jn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ma="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ja=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=Ma[n[e]&63];return t};const La=e=>{const t=JSON.stringify(e);let n=0;for(let r=0,s=t.length;r<s;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n|=0}return`${n}`},wi=e=>e?typeof e=="object"?{...e}:e:void 0,Na=(e,t)=>(Array.isArray(e)?e:[e]).map(n=>{const{id:r,type:s,purpose:i,value:o,created:u,modified:a,creator:c,...l}=n;return{id:r||`temp-${La(n)}`,annotation:t,type:s,purpose:i,value:o,creator:wi(c),created:u?new Date(u):void 0,updated:a?new Date(a):void 0,...l}}),Ba=e=>e.map(t=>{var n;const{annotation:r,created:s,updated:i,...o}=t,u={...o,created:s?.toISOString(),modified:i?.toISOString()};return(n=u.id)!=null&&n.startsWith("temp-")&&delete u.id,u});ja();const ed=(e,t={strict:!0,invertY:!1})=>({parse:n=>Ua(n,t),serialize:n=>Ha(n,e,t)}),Ua=(e,t={strict:!0,invertY:!1})=>{const n=e.id||$a(),{creator:r,created:s,modified:i,body:o,...u}=e,a=Na(o||[],n),c=Array.isArray(e.target)?e.target[0]:e.target,l=Array.isArray(c.selector)?c.selector[0]:c.selector,f=l?.type==="FragmentSelector"?Ea(l,t.invertY):l?.type==="SvgSelector"?Ca(l):void 0;return f||!t.strict?{parsed:{...u,id:n,bodies:a,target:{created:s?new Date(s):void 0,creator:wi(r),updated:i?new Date(i):void 0,...Array.isArray(u.target)?u.target[0]:u.target,annotation:n,selector:f||l}}}:{error:Error(`Invalid selector: ${JSON.stringify(l)}`)}},Ha=(e,t,n={strict:!0,invertY:!1})=>{const{selector:r,creator:s,created:i,updated:o,updatedBy:u,...a}=e.target;let c;try{c=r.type==Se.RECTANGLE?xa(r.geometry):Pa(r)}catch(f){if(n.strict)throw f;c=r}const l={...e,"@context":"http://www.w3.org/ns/anno.jsonld",id:e.id,type:"Annotation",body:Ba(e.bodies),created:i?.toISOString(),creator:s,modified:o?.toISOString(),target:{...a,source:t,selector:c}};return delete l.bodies,"annotation"in l.target&&delete l.target.annotation,l};function Es(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function xs(e){let t,n;return t=new Rt({props:{x:e[10][0],y:e[10][1],scale:e[3]}}),t.$on("pointerdown",function(){ue(e[9](`HANDLE-${e[12]}`))&&e[9](`HANDLE-${e[12]}`).apply(this,arguments)}),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,s){e=r;const i={};s&16&&(i.x=e[10][0]),s&16&&(i.y=e[10][1]),s&8&&(i.scale=e[3]),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Va(e){let t,n,r,s,i,o,u,a,c,l,f,d=bs(e[4].points),h=[];for(let p=0;p<d.length;p+=1)h[p]=xs(Es(e,d,p));const y=p=>Ae(h[p],1,1,()=>{h[p]=null});return{c(){t=ge("polygon"),s=Ee(),i=ge("polygon"),u=Ee();for(let p=0;p<h.length;p+=1)h[p].c();a=yi(),B(t,"class","a9s-outer"),B(t,"style",n=e[1]?"display:none;":void 0),B(t,"points",r=e[4].points.map(_s).join(" ")),B(i,"class","a9s-inner a9s-shape-handle"),B(i,"style",e[1]),B(i,"points",o=e[4].points.map(Os).join(" "))},m(p,S){te(p,t,S),te(p,s,S),te(p,i,S),te(p,u,S);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(p,S);te(p,a,S),c=!0,l||(f=[ae(t,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(i,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)})],l=!0)},p(p,S){if(e=p,(!c||S&2&&n!==(n=e[1]?"display:none;":void 0))&&B(t,"style",n),(!c||S&16&&r!==(r=e[4].points.map(_s).join(" ")))&&B(t,"points",r),(!c||S&2)&&B(i,"style",e[1]),(!c||S&16&&o!==(o=e[4].points.map(Os).join(" ")))&&B(i,"points",o),S&536){d=bs(e[4].points);let b;for(b=0;b<d.length;b+=1){const $=Es(e,d,b);h[b]?(h[b].p($,S),be(h[b],1)):(h[b]=xs($),h[b].c(),be(h[b],1),h[b].m(a.parentNode,a))}for(pa(),b=d.length;b<h.length;b+=1)y(b);ma()}},i(p){if(!c){for(let S=0;S<d.length;S+=1)be(h[S]);c=!0}},o(p){h=h.filter(Boolean);for(let S=0;S<h.length;S+=1)Ae(h[S]);c=!1},d(p){p&&(ee(t),ee(s),ee(i),ee(u),ee(a)),oa(h,p),l=!1,Be(f)}}}function qa(e){let t,n;return t=new Ei({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Va,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("change",e[6]),t.$on("grab",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&8730&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}const _s=e=>e.join(","),Os=e=>e.join(",");function Wa(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:u=1}=t;const a=(d,h,y)=>{let p;const S=d.geometry;h==="SHAPE"?p=S.points.map(([$,x])=>[$+y[0],x+y[1]]):p=S.points.map(([$,x],E)=>h===`HANDLE-${E}`?[$+y[0],x+y[1]]:[$,x]);const b=bi(p);return{...d,geometry:{points:p,bounds:b}}};function c(d){Me.call(this,e,d)}function l(d){Me.call(this,e,d)}function f(d){Me.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,u=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,u,r,a,c,l,f]}class za extends Fn{constructor(t){super(),Rn(this,t,Wa,qa,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}const Ga=typeof window>"u"||typeof navigator>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function Ka(e){let t,n,r,s,i,o;return{c(){t=ge("rect"),B(t,"class",n=mn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),B(t,"x",r=e[0]-e[5]/2),B(t,"y",s=e[1]-e[5]/2),B(t,"width",e[5]),B(t,"height",e[5])},m(u,a){te(u,t,a),i||(o=ae(t,"pointerdown",e[11]),i=!0)},p(u,a){a&256&&n!==(n=mn(`a9s-handle ${u[8].class||""}`.trim())+" svelte-1sgkh33")&&B(t,"class",n),a&33&&r!==(r=u[0]-u[5]/2)&&B(t,"x",r),a&34&&s!==(s=u[1]-u[5]/2)&&B(t,"y",s),a&32&&B(t,"width",u[5]),a&32&&B(t,"height",u[5])},d(u){u&&ee(t),i=!1,o()}}}function Qa(e){let t,n,r,s,i,o,u,a,c;return{c(){t=ge("g"),n=ge("circle"),s=ge("rect"),B(n,"cx",e[0]),B(n,"cy",e[1]),B(n,"r",r=e[3]/e[2]),B(n,"class","a9s-touch-halo svelte-1sgkh33"),ms(n,"touched",e[4]),B(s,"class",i=mn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),B(s,"x",o=e[0]-e[5]/2),B(s,"y",u=e[1]-e[5]/2),B(s,"width",e[5]),B(s,"height",e[5]),B(t,"class","a9s-touch-handle")},m(l,f){te(l,t,f),ps(t,n),ps(t,s),a||(c=[ae(n,"pointerdown",e[10]),ae(n,"pointerdown",e[6]),ae(n,"pointerup",e[7]),ae(s,"pointerdown",e[9]),ae(s,"pointerdown",e[6]),ae(s,"pointerup",e[7])],a=!0)},p(l,f){f&1&&B(n,"cx",l[0]),f&2&&B(n,"cy",l[1]),f&12&&r!==(r=l[3]/l[2])&&B(n,"r",r),f&16&&ms(n,"touched",l[4]),f&256&&i!==(i=mn(`a9s-handle ${l[8].class||""}`.trim())+" svelte-1sgkh33")&&B(s,"class",i),f&33&&o!==(o=l[0]-l[5]/2)&&B(s,"x",o),f&34&&u!==(u=l[1]-l[5]/2)&&B(s,"y",u),f&32&&B(s,"width",l[5]),f&32&&B(s,"height",l[5])},d(l){l&&ee(t),a=!1,Be(c)}}}function Ya(e){let t;function n(s,i){return Ga?Qa:Ka}let r=n()(e);return{c(){r.c(),t=yi()},m(s,i){r.m(s,i),te(s,t,i)},p(s,[i]){r.p(s,i)},i:jt,o:jt,d(s){s&&ee(t),r.d(s)}}}function Xa(e,t,n){let r,{x:s}=t,{y:i}=t,{scale:o}=t,{radius:u=30}=t,a=!1;const c=y=>{y.pointerType==="touch"&&n(4,a=!0)},l=()=>n(4,a=!1);function f(y){Me.call(this,e,y)}function d(y){Me.call(this,e,y)}function h(y){Me.call(this,e,y)}return e.$$set=y=>{n(8,t=ur(ur({},t),gs(y))),"x"in y&&n(0,s=y.x),"y"in y&&n(1,i=y.y),"scale"in y&&n(2,o=y.scale),"radius"in y&&n(3,u=y.radius)},e.$$.update=()=>{e.$$.dirty&4&&n(5,r=10/o)},t=gs(t),[s,i,o,u,a,r,c,l,t,f,d,h]}class Rt extends Fn{constructor(t){super(),Rn(this,t,Xa,Ya,Pn,{x:0,y:1,scale:2,radius:3})}}function Ja(e){let t,n,r,s,i,o,u,a,c,l,f,d,h,y,p,S,b,$,x,E,k,M,N,_,v,w,P,D,L,j,H,K,W,O,m,I,R,g,A,F,T,G,Q;return O=new Rt({props:{class:"a9s-corner-handle-topleft",x:e[4].x,y:e[4].y,scale:e[3]}}),O.$on("pointerdown",function(){ue(e[9]("TOP_LEFT"))&&e[9]("TOP_LEFT").apply(this,arguments)}),I=new Rt({props:{class:"a9s-corner-handle-topright",x:e[4].x+e[4].w,y:e[4].y,scale:e[3]}}),I.$on("pointerdown",function(){ue(e[9]("TOP_RIGHT"))&&e[9]("TOP_RIGHT").apply(this,arguments)}),g=new Rt({props:{class:"a9s-corner-handle-bottomright",x:e[4].x+e[4].w,y:e[4].y+e[4].h,scale:e[3]}}),g.$on("pointerdown",function(){ue(e[9]("BOTTOM_RIGHT"))&&e[9]("BOTTOM_RIGHT").apply(this,arguments)}),F=new Rt({props:{class:"a9s-corner-handle-bottomleft",x:e[4].x,y:e[4].y+e[4].h,scale:e[3]}}),F.$on("pointerdown",function(){ue(e[9]("BOTTOM_LEFT"))&&e[9]("BOTTOM_LEFT").apply(this,arguments)}),{c(){t=ge("rect"),u=Ee(),a=ge("rect"),h=Ee(),y=ge("rect"),$=Ee(),x=ge("rect"),N=Ee(),_=ge("rect"),D=Ee(),L=ge("rect"),W=Ee(),nt(O.$$.fragment),m=Ee(),nt(I.$$.fragment),R=Ee(),nt(g.$$.fragment),A=Ee(),nt(F.$$.fragment),B(t,"class","a9s-outer"),B(t,"style",n=e[1]?"display:none;":void 0),B(t,"x",r=e[4].x),B(t,"y",s=e[4].y),B(t,"width",i=e[4].w),B(t,"height",o=e[4].h),B(a,"class","a9s-inner a9s-shape-handle"),B(a,"style",e[1]),B(a,"x",c=e[4].x),B(a,"y",l=e[4].y),B(a,"width",f=e[4].w),B(a,"height",d=e[4].h),B(y,"class","a9s-edge-handle a9s-edge-handle-top"),B(y,"x",p=e[4].x),B(y,"y",S=e[4].y),B(y,"height",1),B(y,"width",b=e[4].w),B(x,"class","a9s-edge-handle a9s-edge-handle-right"),B(x,"x",E=e[4].x+e[4].w),B(x,"y",k=e[4].y),B(x,"height",M=e[4].h),B(x,"width",1),B(_,"class","a9s-edge-handle a9s-edge-handle-bottom"),B(_,"x",v=e[4].x),B(_,"y",w=e[4].y+e[4].h),B(_,"height",1),B(_,"width",P=e[4].w),B(L,"class","a9s-edge-handle a9s-edge-handle-left"),B(L,"x",j=e[4].x),B(L,"y",H=e[4].y),B(L,"height",K=e[4].h),B(L,"width",1)},m(z,V){te(z,t,V),te(z,u,V),te(z,a,V),te(z,h,V),te(z,y,V),te(z,$,V),te(z,x,V),te(z,N,V),te(z,_,V),te(z,D,V),te(z,L,V),te(z,W,V),Ve(O,z,V),te(z,m,V),Ve(I,z,V),te(z,R,V),Ve(g,z,V),te(z,A,V),Ve(F,z,V),T=!0,G||(Q=[ae(t,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(a,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(y,"pointerdown",function(){ue(e[9]("TOP"))&&e[9]("TOP").apply(this,arguments)}),ae(x,"pointerdown",function(){ue(e[9]("RIGHT"))&&e[9]("RIGHT").apply(this,arguments)}),ae(_,"pointerdown",function(){ue(e[9]("BOTTOM"))&&e[9]("BOTTOM").apply(this,arguments)}),ae(L,"pointerdown",function(){ue(e[9]("LEFT"))&&e[9]("LEFT").apply(this,arguments)})],G=!0)},p(z,V){e=z,(!T||V&2&&n!==(n=e[1]?"display:none;":void 0))&&B(t,"style",n),(!T||V&16&&r!==(r=e[4].x))&&B(t,"x",r),(!T||V&16&&s!==(s=e[4].y))&&B(t,"y",s),(!T||V&16&&i!==(i=e[4].w))&&B(t,"width",i),(!T||V&16&&o!==(o=e[4].h))&&B(t,"height",o),(!T||V&2)&&B(a,"style",e[1]),(!T||V&16&&c!==(c=e[4].x))&&B(a,"x",c),(!T||V&16&&l!==(l=e[4].y))&&B(a,"y",l),(!T||V&16&&f!==(f=e[4].w))&&B(a,"width",f),(!T||V&16&&d!==(d=e[4].h))&&B(a,"height",d),(!T||V&16&&p!==(p=e[4].x))&&B(y,"x",p),(!T||V&16&&S!==(S=e[4].y))&&B(y,"y",S),(!T||V&16&&b!==(b=e[4].w))&&B(y,"width",b),(!T||V&16&&E!==(E=e[4].x+e[4].w))&&B(x,"x",E),(!T||V&16&&k!==(k=e[4].y))&&B(x,"y",k),(!T||V&16&&M!==(M=e[4].h))&&B(x,"height",M),(!T||V&16&&v!==(v=e[4].x))&&B(_,"x",v),(!T||V&16&&w!==(w=e[4].y+e[4].h))&&B(_,"y",w),(!T||V&16&&P!==(P=e[4].w))&&B(_,"width",P),(!T||V&16&&j!==(j=e[4].x))&&B(L,"x",j),(!T||V&16&&H!==(H=e[4].y))&&B(L,"y",H),(!T||V&16&&K!==(K=e[4].h))&&B(L,"height",K);const Z={};V&16&&(Z.x=e[4].x),V&16&&(Z.y=e[4].y),V&8&&(Z.scale=e[3]),O.$set(Z);const ne={};V&16&&(ne.x=e[4].x+e[4].w),V&16&&(ne.y=e[4].y),V&8&&(ne.scale=e[3]),I.$set(ne);const se={};V&16&&(se.x=e[4].x+e[4].w),V&16&&(se.y=e[4].y+e[4].h),V&8&&(se.scale=e[3]),g.$set(se);const ie={};V&16&&(ie.x=e[4].x),V&16&&(ie.y=e[4].y+e[4].h),V&8&&(ie.scale=e[3]),F.$set(ie)},i(z){T||(be(O.$$.fragment,z),be(I.$$.fragment,z),be(g.$$.fragment,z),be(F.$$.fragment,z),T=!0)},o(z){Ae(O.$$.fragment,z),Ae(I.$$.fragment,z),Ae(g.$$.fragment,z),Ae(F.$$.fragment,z),T=!1},d(z){z&&(ee(t),ee(u),ee(a),ee(h),ee(y),ee($),ee(x),ee(N),ee(_),ee(D),ee(L),ee(W),ee(m),ee(R),ee(A)),qe(O,z),qe(I,z),qe(g,z),qe(F,z),G=!1,Be(Q)}}}function Za(e){let t,n;return t=new Ei({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Ja,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("grab",e[6]),t.$on("change",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&1562&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function eu(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:u=1}=t;const a=(d,h,y)=>{const p=d.geometry.bounds;let[S,b]=[p.minX,p.minY],[$,x]=[p.maxX,p.maxY];const[E,k]=y;if(h==="SHAPE")S+=E,$+=E,b+=k,x+=k;else{switch(h){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{b+=k;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{x+=k;break}}switch(h){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{S+=E;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{$+=E;break}}}const M=Math.min(S,$),N=Math.min(b,x),_=Math.abs($-S),v=Math.abs(x-b);return{...d,geometry:{x:M,y:N,w:_,h:v,bounds:{minX:M,minY:N,maxX:M+_,maxY:N+v}}}};function c(d){Me.call(this,e,d)}function l(d){Me.call(this,e,d)}function f(d){Me.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,u=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,u,r,a,c,l,f]}class tu extends Fn{constructor(t){super(),Rn(this,t,eu,Za,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}Se.RECTANGLE,Se.POLYGON;const nu=e=>({}),Is=e=>({grab:e[0]});function ru(e){let t,n,r,s;const i=e[7].default,o=na(i,e,e[6],Is);return{c(){t=ge("g"),o&&o.c(),B(t,"class","a9s-annotation selected")},m(u,a){te(u,t,a),o&&o.m(t,null),n=!0,r||(s=[ae(t,"pointerup",e[2]),ae(t,"pointermove",e[1])],r=!0)},p(u,[a]){o&&o.p&&(!n||a&64)&&sa(o,i,u,u[6],n?ra(i,u[6],a,nu):ia(u[6]),Is)},i(u){n||(be(o,u),n=!0)},o(u){Ae(o,u),n=!1},d(u){u&&ee(t),o&&o.d(u),r=!1,Be(s)}}}function su(e,t,n){let{$$slots:r={},$$scope:s}=t;const i=la();let{shape:o}=t,{editor:u}=t,{transform:a}=t,c,l,f;const d=p=>S=>{c=p,l=a.elementToImage(S.offsetX,S.offsetY),f=o,S.target.setPointerCapture(S.pointerId),i("grab",S)},h=p=>{if(c){const[S,b]=a.elementToImage(p.offsetX,p.offsetY),$=[S-l[0],b-l[1]];n(3,o=u(f,c,$)),i("change",o)}},y=p=>{p.target.releasePointerCapture(p.pointerId),c=void 0,f=o,i("release",p)};return e.$$set=p=>{"shape"in p&&n(3,o=p.shape),"editor"in p&&n(4,u=p.editor),"transform"in p&&n(5,a=p.transform),"$$scope"in p&&n(6,s=p.$$scope)},[d,h,y,o,u,a,s,r]}class Ei extends Fn{constructor(t){super(),Rn(this,t,su,ru,Pn,{shape:3,editor:4,transform:5})}}typeof navigator>"u"||navigator.userAgent.indexOf("Mac OS X");const td=e=>{const[t,n]=C.useState();return C.useEffect(()=>{fetch(`../../${e}`).then(r=>r.json()).then(r=>{const s=r.filter(i=>{const u=(Array.isArray(i.body)?i.body:[i.body]).some(d=>d.purpose==="tagging"),a=Array.isArray(i.target)?i.target[0]:i.target,l=(Array.isArray(a.selector)?a.selector:[a.selector]).find(d=>d.type==="FragmentSelector"),f=l&&l.value.endsWith(",0,0");return u&&!f});n(s)}).catch(r=>{console.log("Error fetching annotations",r)})},[]),t},nd=(e,t)=>{const[n,r]=C.useState(t);return C.useEffect(()=>{const s=localStorage.getItem(e);if(s)try{r(JSON.parse(s))}catch(i){console.error("Error parsing stored state",i)}},[e]),C.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n]),[n,r]},rd=e=>{const[t,n]=C.useState([]),[r,s]=C.useState({images:void 0,verses:void 0});return C.useEffect(()=>{fetch("../../tag-index.json").then(i=>i.json()).then(n)},[]),C.useEffect(()=>{if(t)if(e){const i=e.bodies.filter(c=>c.purpose==="tagging"&&c.value).map(c=>c.id),o=t.filter(c=>c.id!==e.id&&c.tags.some(l=>i.includes(l.id))),u=o.filter(c=>c.type==="IMAGE"),a=o.filter(c=>c.type==="VERSE");s({images:u,verses:a})}else s({images:void 0,verses:void 0})},[t,e]),r},iu=()=>{const e=Jo();return C.useMemo(()=>e.selected.length>0?e.selected[0].annotation:void 0,[e.selected.map(n=>n.annotation.id).join(",")])},xi=()=>{const[e,t]=C.useState();return C.useEffect(()=>{fetch("/thesaurus/all-concepts.json").then(n=>n.json()).then(n=>{const r=n.map(s=>({id:s.uri,label:s.prefLabel?.trim()})).filter(s=>s.label);t(r)})},[]),e},sd=e=>{const t=Qo(),n=iu(),[r,s]=C.useState(!1);return C.useEffect(()=>{if(r)if(n){const i=n.id.substring(n.id.lastIndexOf("/")+1);location.hash=`#${i}`}else location.hash=""},[n,r]),C.useEffect(()=>{if(!t||!e.loaded)return;const i=c=>{const l=`https://recogito.pelagios.org/annotation/${c}`;if(!(t.getSelected()||[]).map(d=>d.id).includes(l)&&(t.setSelected(l),"scrollIntoView"in t)){const d=t.getAnnotationById(`https://recogito.pelagios.org/annotation/${c}`);t.scrollIntoView(d)}},o=()=>{t.getSelected()?.length>0&&t.cancelSelected()},u=window.location.hash.substring(1);u?setTimeout(()=>{i(u),s(!0)}):s(!0);const a=()=>{const c=window.location.hash.substring(1);c?i(c):o()};return window.addEventListener("hashchange",a),()=>{window.removeEventListener("hashchange",a)}},[t,e.loaded]),null};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_i=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var au={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...u},a)=>C.createElement("svg",{ref:a,...au,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:_i("lucide",s),...u},[...o.map(([c,l])=>C.createElement(c,l)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(e,t)=>{const n=C.forwardRef(({className:r,...s},i)=>C.createElement(uu,{ref:i,iconNode:t,className:_i(`lucide-${ou(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ot("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ot("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=ot("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Dr=Qt(),X=e=>Kt(e,Dr),$r=Qt();X.write=e=>Kt(e,$r);var Tn=Qt();X.onStart=e=>Kt(e,Tn);var kr=Qt();X.onFrame=e=>Kt(e,kr);var Mr=Qt();X.onFinish=e=>Kt(e,Mr);var pt=[];X.setTimeout=(e,t)=>{const n=X.now()+t,r=()=>{const i=pt.findIndex(o=>o.cancel==r);~i&&pt.splice(i,1),ze-=~i?1:0},s={time:n,handler:e,cancel:r};return pt.splice(Oi(n),0,s),ze+=1,Ii(),s};var Oi=e=>~(~pt.findIndex(t=>t.time>e)||~pt.length);X.cancel=e=>{Tn.delete(e),kr.delete(e),Mr.delete(e),Dr.delete(e),$r.delete(e)};X.sync=e=>{fr=!0,X.batchedUpdates(e),fr=!1};X.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,X.onStart(n)}return r.handler=e,r.cancel=()=>{Tn.delete(n),t=null},r};var jr=typeof window<"u"?window.requestAnimationFrame:()=>{};X.use=e=>jr=e;X.now=typeof performance<"u"?()=>performance.now():Date.now;X.batchedUpdates=e=>e();X.catch=console.error;X.frameLoop="always";X.advance=()=>{X.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ci()};var We=-1,ze=0,fr=!1;function Kt(e,t){fr?(t.delete(e),e(0)):(t.add(e),Ii())}function Ii(){We<0&&(We=0,X.frameLoop!=="demand"&&jr(Ai))}function pu(){We=-1}function Ai(){~We&&(jr(Ai),X.batchedUpdates(Ci))}function Ci(){const e=We;We=X.now();const t=Oi(We);if(t&&(Pi(pt.splice(0,t),n=>n.handler()),ze-=t),!ze){pu();return}Tn.flush(),Dr.flush(e?Math.min(64,We-e):16.667),kr.flush(),$r.flush(),Mr.flush()}function Qt(){let e=new Set,t=e;return{add(n){ze+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return ze-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,ze-=t.size,Pi(t,r=>r(n)&&e.add(r)),ze+=e.size,t=e)}}}function Pi(e,t){e.forEach(n=>{try{t(n)}catch(r){X.catch(r)}})}var mu=Object.defineProperty,yu=(e,t)=>{for(var n in t)mu(e,n,{get:t[n],enumerable:!0})},Oe={};yu(Oe,{assign:()=>bu,colors:()=>Ge,createStringInterpolator:()=>Nr,skipAnimation:()=>Fi,to:()=>Ri,willAdvance:()=>Br});function dr(){}var vu=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),U={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function ke(e,t){if(U.arr(e)){if(!U.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var J=(e,t)=>e.forEach(t);function Re(e,t,n){if(U.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ce=e=>U.und(e)?[]:U.arr(e)?e:[e];function Dt(e,t){if(e.size){const n=Array.from(e);e.clear(),J(n,t)}}var Ft=(e,...t)=>Dt(e,n=>n(...t)),Lr=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Nr,Ri,Ge=null,Fi=!1,Br=dr,bu=e=>{e.to&&(Ri=e.to),e.now&&(X.now=e.now),e.colors!==void 0&&(Ge=e.colors),e.skipAnimation!=null&&(Fi=e.skipAnimation),e.createStringInterpolator&&(Nr=e.createStringInterpolator),e.requestAnimationFrame&&X.use(e.requestAnimationFrame),e.batchedUpdates&&(X.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Br=e.willAdvance),e.frameLoop&&(X.frameLoop=e.frameLoop)},$t=new Set,ve=[],Zn=[],yn=0,Dn={get idle(){return!$t.size&&!ve.length},start(e){yn>e.priority?($t.add(e),X.onStart(Su)):(Ti(e),X(hr))},advance:hr,sort(e){if(yn)X.onFrame(()=>Dn.sort(e));else{const t=ve.indexOf(e);~t&&(ve.splice(t,1),Di(e))}},clear(){ve=[],$t.clear()}};function Su(){$t.forEach(Ti),$t.clear(),X(hr)}function Ti(e){ve.includes(e)||Di(e)}function Di(e){ve.splice(wu(ve,t=>t.priority>e.priority),0,e)}function hr(e){const t=Zn;for(let n=0;n<ve.length;n++){const r=ve[n];yn=r.priority,r.idle||(Br(r),r.advance(e),r.idle||t.push(r))}return yn=0,Zn=ve,Zn.length=0,ve=t,ve.length>0}function wu(e,t){const n=e.findIndex(t);return n<0?e.length:n}var Eu=(e,t,n)=>Math.min(Math.max(n,e),t),xu={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_e="[-+]?\\d*\\.?\\d+",vn=_e+"%";function $n(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var _u=new RegExp("rgb"+$n(_e,_e,_e)),Ou=new RegExp("rgba"+$n(_e,_e,_e,_e)),Iu=new RegExp("hsl"+$n(_e,vn,vn)),Au=new RegExp("hsla"+$n(_e,vn,vn,_e)),Cu=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Pu=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ru=/^#([0-9a-fA-F]{6})$/,Fu=/^#([0-9a-fA-F]{8})$/;function Tu(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Ru.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ge&&Ge[e]!==void 0?Ge[e]:(t=_u.exec(e))?(ft(t[1])<<24|ft(t[2])<<16|ft(t[3])<<8|255)>>>0:(t=Ou.exec(e))?(ft(t[1])<<24|ft(t[2])<<16|ft(t[3])<<8|Ps(t[4]))>>>0:(t=Cu.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Fu.exec(e))?parseInt(t[1],16)>>>0:(t=Pu.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Iu.exec(e))?(As(Cs(t[1]),sn(t[2]),sn(t[3]))|255)>>>0:(t=Au.exec(e))?(As(Cs(t[1]),sn(t[2]),sn(t[3]))|Ps(t[4]))>>>0:null}function er(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function As(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=er(s,r,e+1/3),o=er(s,r,e),u=er(s,r,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(u*255)<<8}function ft(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Cs(e){return(parseFloat(e)%360+360)%360/360}function Ps(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function sn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Rs(e){let t=Tu(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${i})`}var Nt=(e,t,n)=>{if(U.fun(e))return e;if(U.arr(e))return Nt({range:e,output:t,extrapolate:n});if(U.str(e.output[0]))return Nr(e);const r=e,s=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",u=r.extrapolateRight||r.extrapolate||"extend",a=r.easing||(c=>c);return c=>{const l=$u(c,i);return Du(c,i[l],i[l+1],s[l],s[l+1],a,o,u,r.map)}};function Du(e,t,n,r,s,i,o,u,a){let c=a?a(e):e;if(c<t){if(o==="identity")return c;o==="clamp"&&(c=t)}if(c>n){if(u==="identity")return c;u==="clamp"&&(c=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?c=-c:n===1/0?c=c-t:c=(c-t)/(n-t),c=i(c),r===-1/0?c=-c:s===1/0?c=c+r:c=c*(s-r)+r,c)}function $u(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var ku=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,s=t==="end"?Math.floor(r):Math.ceil(r);return Eu(0,1,s/e)},bn=1.70158,on=bn*1.525,Fs=bn+1,Ts=2*Math.PI/3,Ds=2*Math.PI/4.5,an=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,kn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Fs*e*e*e-bn*e*e,easeOutBack:e=>1+Fs*Math.pow(e-1,3)+bn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((on+1)*2*e-on)/2:(Math.pow(2*e-2,2)*((on+1)*(e*2-2)+on)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Ts),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Ts)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Ds))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Ds)/2+1,easeInBounce:e=>1-an(1-e),easeOutBounce:an,easeInOutBounce:e=>e<.5?(1-an(1-2*e))/2:(1+an(2*e-1))/2,steps:ku},Bt=Symbol.for("FluidValue.get"),vt=Symbol.for("FluidValue.observers"),ye=e=>!!(e&&e[Bt]),de=e=>e&&e[Bt]?e[Bt]():e,$s=e=>e[vt]||null;function Mu(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Ut(e,t){const n=e[vt];n&&n.forEach(r=>{Mu(r,t)})}var $i=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");ju(this,e)}},ju=(e,t)=>ki(e,Bt,t);function Et(e,t){if(e[Bt]){let n=e[vt];n||ki(e,vt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Ht(e,t){const n=e[vt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[vt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var ki=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),dn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Lu=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ks=new RegExp(`(${dn.source})(%|[a-z]+)`,"i"),Nu=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Mn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Mi=e=>{const[t,n]=Bu(e);if(!t||Lr())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&Mn.test(n))return Mi(n);if(n)return n}return e},Bu=e=>{const t=Mn.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},tr,Uu=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,ji=e=>{tr||(tr=Ge?new RegExp(`(${Object.keys(Ge).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>de(i).replace(Mn,Mi).replace(Lu,Rs).replace(tr,Rs)),n=t.map(i=>i.match(dn).map(Number)),s=n[0].map((i,o)=>n.map(u=>{if(!(o in u))throw Error('The arity of each "output" value must be equal');return u[o]})).map(i=>Nt({...e,output:i}));return i=>{const o=!ks.test(t[0])&&t.find(a=>ks.test(a))?.replace(dn,"");let u=0;return t[0].replace(dn,()=>`${s[u++](i)}${o||""}`).replace(Nu,Uu)}},Ur="react-spring: ",Li=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Ur}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Hu=Li(console.warn);function Vu(){Hu(`${Ur}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var qu=Li(console.warn);function Wu(){qu(`${Ur}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function jn(e){return U.str(e)&&(e[0]=="#"||/\d/.test(e)||!Lr()&&Mn.test(e)||e in(Ge||{}))}var ht=Lr()?C.useEffect:C.useLayoutEffect,zu=()=>{const e=C.useRef(!1);return ht(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Ni(){const e=C.useState()[1],t=zu();return()=>{t.current&&e(Math.random())}}function Gu(e,t){const[n]=C.useState(()=>({inputs:t,result:e()})),r=C.useRef(),s=r.current;let i=s;return i?t&&i.inputs&&Ku(t,i.inputs)||(i={inputs:t,result:e()}):i=n,C.useEffect(()=>{r.current=i,s==n&&(n.inputs=n.result=void 0)},[i]),i.result}function Ku(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var Bi=e=>C.useEffect(e,Qu),Qu=[];function Yu(e){const t=C.useRef();return C.useEffect(()=>{t.current=e}),t.current}var Vt=Symbol.for("Animated:node"),Xu=e=>!!e&&e[Vt]===e,Ie=e=>e&&e[Vt],Hr=(e,t)=>vu(e,Vt,t),Ln=e=>e&&e[Vt]&&e[Vt].getPayload(),Ui=class{constructor(){Hr(this,this)}getPayload(){return this.payload||[]}},Yt=class extends Ui{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,U.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Yt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return U.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,U.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},qt=class extends Yt{constructor(e){super(0),this._string=null,this._toString=Nt({output:[e,e]})}static create(e){return new qt(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(U.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Nt({output:[this.getValue(),e]})),this._value=0,super.reset()}},Sn={dependencies:null},Nn=class extends Ui{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Re(this.source,(n,r)=>{Xu(n)?t[r]=n.getValue(e):ye(n)?t[r]=de(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&J(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Re(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Sn.dependencies&&ye(e)&&Sn.dependencies.add(e);const t=Ln(e);t&&J(t,n=>this.add(n))}},Hi=class extends Nn{constructor(e){super(e)}static create(e){return new Hi(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Ju)),!0)}};function Ju(e){return(jn(e)?qt:Yt).create(e)}function gr(e){const t=Ie(e);return t?t.constructor:U.arr(e)?Hi:jn(e)?qt:Yt}var Ms=(e,t)=>{const n=!U.fun(e)||e.prototype&&e.prototype.isReactComponent;return C.forwardRef((r,s)=>{const i=C.useRef(null),o=n&&C.useCallback(y=>{i.current=tc(s,y)},[s]),[u,a]=ec(r,t),c=Ni(),l=()=>{const y=i.current;if(n&&!y)return;(y?t.applyAnimatedValues(y,u.getValue(!0)):!1)===!1&&c()},f=new Zu(l,a),d=C.useRef();ht(()=>(d.current=f,J(a,y=>Et(y,f)),()=>{d.current&&(J(d.current.deps,y=>Ht(y,d.current)),X.cancel(d.current.update))})),C.useEffect(l,[]),Bi(()=>()=>{const y=d.current;J(y.deps,p=>Ht(p,y))});const h=t.getComponentProps(u.getValue());return C.createElement(e,{...h,ref:o})})},Zu=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&X.write(this.update)}};function ec(e,t){const n=new Set;return Sn.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Nn(e),Sn.dependencies=null,[e,n]}function tc(e,t){return e&&(U.fun(e)?e(t):e.current=t),t}var js=Symbol.for("AnimatedComponent"),nc=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new Nn(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=o=>{const u=Ls(o)||"Anonymous";return U.str(o)?o=i[o]||(i[o]=Ms(o,s)):o=o[js]||(o[js]=Ms(o,s)),o.displayName=`Animated(${u})`,o};return Re(e,(o,u)=>{U.arr(e)&&(u=Ls(o)),i[u]=i(o)}),{animated:i}},Ls=e=>U.str(e)?e:e&&U.str(e.displayName)?e.displayName:U.fun(e)&&e.name||null;function he(e,...t){return U.fun(e)?e(...t):e}var kt=(e,t)=>e===!0||!!(t&&e&&(U.fun(e)?e(t):ce(e).includes(t))),Vi=(e,t)=>U.obj(e)?t&&e[t]:e,qi=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,rc=e=>e,Vr=(e,t=rc)=>{let n=sc;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const i=t(e[s],s);U.und(i)||(r[s]=i)}return r},sc=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ic={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function oc(e){const t={};let n=0;if(Re(e,(r,s)=>{ic[s]||(t[s]=r,n++)}),n)return t}function qr(e){const t=oc(e);if(t){const n={to:t};return Re(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Wt(e){return e=de(e),U.arr(e)?e.map(Wt):jn(e)?Oe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function ac(e){for(const t in e)return!0;return!1}function pr(e){return U.fun(e)||U.arr(e)&&U.obj(e[0])}function Ns(e,t){e.ref?.delete(e),t?.delete(e)}function uc(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var cc={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},mr={...cc.default,mass:1,damping:1,easing:kn.linear,clamp:!1},lc=class{constructor(){this.velocity=0,Object.assign(this,mr)}};function fc(e,t,n){n&&(n={...n},Bs(n,t),t={...n,...t}),Bs(e,t),Object.assign(e,t);for(const o in mr)e[o]==null&&(e[o]=mr[o]);let{frequency:r,damping:s}=e;const{mass:i}=e;return U.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*s*i/r),e}function Bs(e,t){if(!U.und(t.decay))e.duration=void 0;else{const n=!U.und(t.tension)||!U.und(t.friction);(n||!U.und(t.frequency)||!U.und(t.damping)||!U.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var Us=[],dc=class{constructor(){this.changed=!1,this.values=Us,this.toValues=null,this.fromValues=Us,this.config=new lc,this.immediate=!1}};function Wi(e,{key:t,props:n,defaultProps:r,state:s,actions:i}){return new Promise((o,u)=>{let a,c,l=kt(n.cancel??r?.cancel,t);if(l)h();else{U.und(n.pause)||(s.paused=kt(n.pause,t));let y=r?.pause;y!==!0&&(y=s.paused||kt(y,t)),a=he(n.delay||0,t),y?(s.resumeQueue.add(d),i.pause()):(i.resume(),d())}function f(){s.resumeQueue.add(d),s.timeouts.delete(c),c.cancel(),a=c.time-X.now()}function d(){a>0&&!Oe.skipAnimation?(s.delayed=!0,c=X.setTimeout(h,a),s.pauseQueue.add(f),s.timeouts.add(c)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(f),s.timeouts.delete(c),e<=(s.cancelId||0)&&(l=!0);try{i.start({...n,callId:e,cancel:l},o)}catch(y){u(y)}}})}var Wr=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?mt(e.get()):t.every(n=>n.noop)?zi(e.get()):xe(e.get(),t.every(n=>n.finished)),zi=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),xe=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),mt=e=>({value:e,cancelled:!0,finished:!1});function Gi(e,t,n,r){const{callId:s,parentId:i,onRest:o}=t,{asyncTo:u,promise:a}=n;return!i&&e===u&&!t.reset?a:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const c=Vr(t,(S,b)=>b==="onRest"?void 0:S);let l,f;const d=new Promise((S,b)=>(l=S,f=b)),h=S=>{const b=s<=(n.cancelId||0)&&mt(r)||s!==n.asyncId&&xe(r,!1);if(b)throw S.result=b,f(S),S},y=(S,b)=>{const $=new Hs,x=new Vs;return(async()=>{if(Oe.skipAnimation)throw zt(n),x.result=xe(r,!1),f(x),x;h($);const E=U.obj(S)?{...S}:{...b,to:S};E.parentId=s,Re(c,(M,N)=>{U.und(E[N])&&(E[N]=M)});const k=await r.start(E);return h($),n.paused&&await new Promise(M=>{n.resumeQueue.add(M)}),k})()};let p;if(Oe.skipAnimation)return zt(n),xe(r,!1);try{let S;U.arr(e)?S=(async b=>{for(const $ of b)await y($)})(e):S=Promise.resolve(e(y,r.stop.bind(r))),await Promise.all([S.then(l),d]),p=xe(r.get(),!0,!1)}catch(S){if(S instanceof Hs)p=S.result;else if(S instanceof Vs)p=S.result;else throw S}finally{s==n.asyncId&&(n.asyncId=i,n.asyncTo=i?u:void 0,n.promise=i?a:void 0)}return U.fun(o)&&X.batchedUpdates(()=>{o(p,r,r.item)}),p})()}function zt(e,t){Dt(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Hs=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Vs=class extends Error{constructor(){super("SkipAnimationSignal")}},yr=e=>e instanceof zr,hc=1,zr=class extends $i{constructor(){super(...arguments),this.id=hc++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ie(this);return e&&e.getValue()}to(...e){return Oe.to(this,e)}interpolate(...e){return Vu(),Oe.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Ut(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Dn.sort(this),Ut(this,{type:"priority",parent:this,priority:e})}},rt=Symbol.for("SpringPhase"),Ki=1,vr=2,br=4,nr=e=>(e[rt]&Ki)>0,He=e=>(e[rt]&vr)>0,At=e=>(e[rt]&br)>0,qs=(e,t)=>t?e[rt]|=vr|Ki:e[rt]&=~vr,Ws=(e,t)=>t?e[rt]|=br:e[rt]&=~br,gc=class extends zr{constructor(e,t){if(super(),this.animation=new dc,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!U.und(e)||!U.und(t)){const n=U.obj(e)?{...e}:{...t,from:e};U.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(He(this)||this._state.asyncTo)||At(this)}get goal(){return de(this.animation.to)}get velocity(){const e=Ie(this);return e instanceof Yt?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return nr(this)}get isAnimating(){return He(this)}get isPaused(){return At(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:i}=r,o=Ln(r.to);!o&&ye(r.to)&&(s=ce(de(r.to))),r.values.forEach((c,l)=>{if(c.done)return;const f=c.constructor==qt?1:o?o[l].lastPosition:s[l];let d=r.immediate,h=f;if(!d){if(h=c.lastPosition,i.tension<=0){c.done=!0;return}let y=c.elapsedTime+=e;const p=r.fromValues[l],S=c.v0!=null?c.v0:c.v0=U.arr(i.velocity)?i.velocity[l]:i.velocity;let b;const $=i.precision||(p==f?.005:Math.min(1,Math.abs(f-p)*.001));if(U.und(i.duration))if(i.decay){const x=i.decay===!0?.998:i.decay,E=Math.exp(-(1-x)*y);h=p+S/(1-x)*(1-E),d=Math.abs(c.lastPosition-h)<=$,b=S*E}else{b=c.lastVelocity==null?S:c.lastVelocity;const x=i.restVelocity||$/10,E=i.clamp?0:i.bounce,k=!U.und(E),M=p==f?c.v0>0:p<f;let N,_=!1;const v=1,w=Math.ceil(e/v);for(let P=0;P<w&&(N=Math.abs(b)>x,!(!N&&(d=Math.abs(f-h)<=$,d)));++P){k&&(_=h==f||h>f==M,_&&(b=-b*E,h=f));const D=-i.tension*1e-6*(h-f),L=-i.friction*.001*b,j=(D+L)/i.mass;b=b+j*v,h=h+b*v}}else{let x=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,c.durationProgress>0&&(c.elapsedTime=i.duration*c.durationProgress,y=c.elapsedTime+=e)),x=(i.progress||0)+y/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=p+i.easing(x)*(f-p),b=(h-c.lastPosition)/e,d=x==1}c.lastVelocity=b,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[l].done&&(d=!1),d?c.done=!0:t=!1,c.setValue(h,i.round)&&(n=!0)});const u=Ie(this),a=u.getValue();if(t){const c=de(r.to);(a!==c||n)&&!i.decay?(u.setValue(c),this._onChange(c)):n&&i.decay&&this._onChange(a),this._stop()}else n&&this._onChange(a)}set(e){return X.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(He(this)){const{to:e,config:t}=this.animation;X.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return U.und(e)?(n=this.queue||[],this.queue=[]):n=[U.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Wr(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),zt(this._state,e&&this._lastCallId),X.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=U.obj(n)?n[t]:n,(n==null||pr(n))&&(n=void 0),r=U.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return nr(this)||(e.reverse&&([n,r]=[r,n]),r=de(r),U.und(r)?Ie(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Vr(e,(o,u)=>/^on/.test(u)?Vi(o,n):o)),Gs(this,e,"onProps"),Pt(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return Wi(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{At(this)||(Ws(this,!0),Ft(i.pauseQueue),Pt(this,"onPause",xe(this,Ct(this,this.animation.to)),this))},resume:()=>{At(this)&&(Ws(this,!1),He(this)&&this._resume(),Ft(i.resumeQueue),Pt(this,"onResume",xe(this,Ct(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const u=Qi(e);if(u)return this._update(u,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(mt(this));const r=!U.und(e.to),s=!U.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(mt(this));const{key:i,defaultProps:o,animation:u}=this,{to:a,from:c}=u;let{to:l=a,from:f=c}=e;s&&!r&&(!t.default||U.und(l))&&(l=f),t.reverse&&([l,f]=[f,l]);const d=!ke(f,c);d&&(u.from=f),f=de(f);const h=!ke(l,a);h&&this._focus(l);const y=pr(t.to),{config:p}=u,{decay:S,velocity:b}=p;(r||s)&&(p.velocity=0),t.config&&!y&&fc(p,he(t.config,i),t.config!==o.config?he(o.config,i):void 0);let $=Ie(this);if(!$||U.und(l))return n(xe(this,!0));const x=U.und(t.reset)?s&&!t.default:!U.und(f)&&kt(t.reset,i),E=x?f:this.get(),k=Wt(l),M=U.num(k)||U.arr(k)||jn(k),N=!y&&(!M||kt(o.immediate||t.immediate,i));if(h){const P=gr(l);if(P!==$.constructor)if(N)$=this._set(k);else throw Error(`Cannot animate between ${$.constructor.name} and ${P.name}, as the "to" prop suggests`)}const _=$.constructor;let v=ye(l),w=!1;if(!v){const P=x||!nr(this)&&d;(h||P)&&(w=ke(Wt(E),k),v=!w),(!ke(u.immediate,N)&&!N||!ke(p.decay,S)||!ke(p.velocity,b))&&(v=!0)}if(w&&He(this)&&(u.changed&&!x?v=!0:v||this._stop(a)),!y&&((v||ye(a))&&(u.values=$.getPayload(),u.toValues=ye(l)?null:_==qt?[1]:ce(k)),u.immediate!=N&&(u.immediate=N,!N&&!x&&this._set(a)),v)){const{onRest:P}=u;J(pc,L=>Gs(this,t,L));const D=xe(this,Ct(this,a));Ft(this._pendingCalls,D),this._pendingCalls.add(n),u.changed&&X.batchedUpdates(()=>{u.changed=!x,P?.(D,this),x?he(o.onRest,D):u.onStart?.(D,this)})}x&&this._set(E),y?n(Gi(t.to,t,this._state,this)):v?this._start():He(this)&&!h?this._pendingCalls.add(n):n(zi(E))}_focus(e){const t=this.animation;e!==t.to&&($s(this)&&this._detach(),t.to=e,$s(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ye(t)&&(Et(t,this),yr(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ye(e)&&Ht(e,this)}_set(e,t=!0){const n=de(e);if(!U.und(n)){const r=Ie(this);if(!r||!ke(n,r.getValue())){const s=gr(n);!r||r.constructor!=s?Hr(this,s.create(n)):r.setValue(n),r&&X.batchedUpdates(()=>{this._onChange(n,t)})}}return Ie(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Pt(this,"onStart",xe(this,Ct(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),he(this.animation.onChange,e,this)),he(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Ie(this).reset(de(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),He(this)||(qs(this,!0),At(this)||this._resume())}_resume(){Oe.skipAnimation?this.finish():Dn.start(this)}_stop(e,t){if(He(this)){qs(this,!1);const n=this.animation;J(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ut(this,{type:"idle",parent:this});const r=t?mt(this.get()):xe(this.get(),Ct(this,e??n.to));Ft(this._pendingCalls,r),n.changed&&(n.changed=!1,Pt(this,"onRest",r,this))}}};function Ct(e,t){const n=Wt(t),r=Wt(e.get());return ke(r,n)}function Qi(e,t=e.loop,n=e.to){const r=he(t);if(r){const s=r!==!0&&qr(r),i=(s||e).reverse,o=!s||s.reset;return wn({...e,loop:t,default:!1,pause:void 0,to:!i||pr(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function wn(e){const{to:t,from:n}=e=qr(e),r=new Set;return U.obj(t)&&zs(t,r),U.obj(n)&&zs(n,r),e.keys=r.size?Array.from(r):null,e}function zs(e,t){Re(e,(n,r)=>n!=null&&t.add(r))}var pc=["onStart","onRest","onChange","onPause","onResume"];function Gs(e,t,n){e.animation[n]=t[n]!==qi(t,n)?Vi(t[n],e.key):void 0}function Pt(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var mc=["onStart","onChange","onRest"],yc=1,vc=class{constructor(e,t){this.id=yc++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];U.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(wn(e)),this}start(e){let{queue:t}=this;return e?t=ce(e).map(wn):this.queue=[],this._flush?this._flush(this,t):(Zi(this,t),bc(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;J(ce(t),r=>n[r].stop(!!e))}else zt(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(U.und(e))this.start({pause:!0});else{const t=this.springs;J(ce(e),n=>t[n].pause())}return this}resume(e){if(U.und(e))this.start({pause:!1});else{const t=this.springs;J(ce(e),n=>t[n].resume())}return this}each(e){Re(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Dt(e,([u,a])=>{a.value=this.get(),u(a,this,this._item)}));const i=!r&&this._started,o=s||i&&n.size?this.get():null;s&&t.size&&Dt(t,([u,a])=>{a.value=o,u(a,this,this._item)}),i&&(this._started=!1,Dt(n,([u,a])=>{a.value=o,u(a,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;X.onFrame(this._onFrame)}};function bc(e,t){return Promise.all(t.map(n=>Yi(e,n))).then(n=>Wr(e,n))}async function Yi(e,t,n){const{keys:r,to:s,from:i,loop:o,onRest:u,onResolve:a}=t,c=U.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),i===!1&&(t.from=null);const l=U.arr(s)||U.fun(s)?s:void 0;l?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):J(mc,p=>{const S=t[p];if(U.fun(S)){const b=e._events[p];t[p]=({finished:$,cancelled:x})=>{const E=b.get(S);E?($||(E.finished=!1),x&&(E.cancelled=!0)):b.set(S,{value:null,finished:$||!1,cancelled:x||!1})},c&&(c[p]=t[p])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,Ft(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map(p=>e.springs[p].start(t)),h=t.cancel===!0||qi(t,"cancel")===!0;(l||h&&f.asyncId)&&d.push(Wi(++e._lastAsyncId,{props:t,state:f,actions:{pause:dr,resume:dr,start(p,S){h?(zt(f,e._lastAsyncId),S(mt(e))):(p.onRest=u,S(Gi(l,p,f,e)))}}})),f.paused&&await new Promise(p=>{f.resumeQueue.add(p)});const y=Wr(e,await Promise.all(d));if(o&&y.finished&&!(n&&y.noop)){const p=Qi(t,o,s);if(p)return Zi(e,[p]),Yi(e,p,!0)}return a&&X.batchedUpdates(()=>a(y,e,e.item)),y}function Sc(e,t){const n={...e.springs};return t&&J(ce(t),r=>{U.und(r.keys)&&(r=wn(r)),U.obj(r.to)||(r={...r,to:void 0}),Ji(n,r,s=>Xi(s))}),wc(e,n),n}function wc(e,t){Re(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,Et(n,e))})}function Xi(e,t){const n=new gc;return n.key=e,t&&Et(n,t),n}function Ji(e,t,n){t.keys&&J(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Zi(e,t){J(t,n=>{Ji(e.springs,n,r=>Xi(r,e))})}var Bn=({children:e,...t})=>{const n=C.useContext(En),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=Gu(()=>({pause:r,immediate:s}),[r,s]);const{Provider:i}=En;return C.createElement(i,{value:t},e)},En=Ec(Bn,{});Bn.Provider=En.Provider;Bn.Consumer=En.Consumer;function Ec(e,t){return Object.assign(e,C.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var xc=()=>{const e=[],t=function(r){Wu();const s=[];return J(e,(i,o)=>{if(U.und(r))s.push(i.start());else{const u=n(r,i,o);u&&s.push(i.start(u))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return J(e,r=>r.pause(...arguments)),this},t.resume=function(){return J(e,r=>r.resume(...arguments)),this},t.set=function(r){J(e,(s,i)=>{const o=U.fun(r)?r(i,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return J(e,(i,o)=>{if(U.und(r))s.push(i.start());else{const u=this._getProps(r,i,o);u&&s.push(i.start(u))}}),s},t.stop=function(){return J(e,r=>r.stop(...arguments)),this},t.update=function(r){return J(e,(s,i)=>s.update(this._getProps(r,s,i))),this};const n=function(r,s,i){return U.fun(r)?r(i,s):r};return t._getProps=n,t};function Gr(e,t,n){const r=U.fun(t)&&t,{reset:s,sort:i,trail:o=0,expires:u=!0,exitBeforeEnter:a=!1,onDestroyed:c,ref:l,config:f}=r?r():t,d=C.useMemo(()=>r||arguments.length==3?xc():void 0,[]),h=ce(e),y=[],p=C.useRef(null),S=s?null:p.current;ht(()=>{p.current=y}),Bi(()=>(J(y,j=>{d?.add(j.ctrl),j.ctrl.ref=d}),()=>{J(p.current,j=>{j.expired&&clearTimeout(j.expirationId),Ns(j.ctrl,d),j.ctrl.stop(!0)})}));const b=Oc(h,r?r():t,S),$=s&&p.current||[];ht(()=>J($,({ctrl:j,item:H,key:K})=>{Ns(j,d),he(c,H,K)}));const x=[];if(S&&J(S,(j,H)=>{j.expired?(clearTimeout(j.expirationId),$.push(j)):(H=x[H]=b.indexOf(j.key),~H&&(y[H]=j))}),J(h,(j,H)=>{y[H]||(y[H]={key:b[H],item:j,phase:"mount",ctrl:new vc},y[H].ctrl.item=j)}),x.length){let j=-1;const{leave:H}=r?r():t;J(x,(K,W)=>{const O=S[W];~K?(j=y.indexOf(O),y[j]={...O,item:h[K]}):H&&y.splice(++j,0,O)})}U.fun(i)&&y.sort((j,H)=>i(j.item,H.item));let E=-o;const k=Ni(),M=Vr(t),N=new Map,_=C.useRef(new Map),v=C.useRef(!1);J(y,(j,H)=>{const K=j.key,W=j.phase,O=r?r():t;let m,I;const R=he(O.delay||0,K);if(W=="mount")m=O.enter,I="enter";else{const T=b.indexOf(K)<0;if(W!="leave")if(T)m=O.leave,I="leave";else if(m=O.update)I="update";else return;else if(!T)m=O.enter,I="enter";else return}if(m=he(m,j.item,H),m=U.obj(m)?qr(m):{to:m},!m.config){const T=f||M.config;m.config=he(T,j.item,H,I)}E+=o;const g={...M,delay:R+E,ref:l,immediate:O.immediate,reset:!1,...m};if(I=="enter"&&U.und(g.from)){const T=r?r():t,G=U.und(T.initial)||S?T.from:T.initial;g.from=he(G,j.item,H)}const{onResolve:A}=g;g.onResolve=T=>{he(A,T);const G=p.current,Q=G.find(z=>z.key===K);if(Q&&!(T.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const z=G.every(V=>V.ctrl.idle);if(Q.phase=="leave"){const V=he(u,Q.item);if(V!==!1){const Z=V===!0?0:V;if(Q.expired=!0,!z&&Z>0){Z<=2147483647&&(Q.expirationId=setTimeout(k,Z));return}}}z&&G.some(V=>V.expired)&&(_.current.delete(Q),a&&(v.current=!0),k())}};const F=Sc(j.ctrl,g);I==="leave"&&a?_.current.set(j,{phase:I,springs:F,payload:g}):N.set(j,{phase:I,springs:F,payload:g})});const w=C.useContext(Bn),P=Yu(w),D=w!==P&&ac(w);ht(()=>{D&&J(y,j=>{j.ctrl.start({default:w})})},[w]),J(N,(j,H)=>{if(_.current.size){const K=y.findIndex(W=>W.key===H.key);y.splice(K,1)}}),ht(()=>{J(_.current.size?_.current:N,({phase:j,payload:H},K)=>{const{ctrl:W}=K;K.phase=j,d?.add(W),D&&j=="enter"&&W.start({default:w}),H&&(uc(W,H.ref),(W.ref||d)&&!v.current?W.update(H):(W.start(H),v.current&&(v.current=!1)))})},s?void 0:n);const L=j=>C.createElement(C.Fragment,null,y.map((H,K)=>{const{springs:W}=N.get(H)||H.ctrl,O=j({...W},H.item,H,K);return O&&O.type?C.createElement(O.type,{...O.props,key:U.str(H.key)||U.num(H.key)?H.key:H.ctrl.id,ref:O.ref}):O}));return d?[L,d]:L}var _c=1;function Oc(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(i=>{const o=r&&r.find(u=>u.item===i&&u.phase!=="leave"&&!s.has(u));return o?(s.add(o),o.key):_c++})}return U.und(n)?e:U.fun(n)?e.map(n):ce(n)}var Ic=class extends zr{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Nt(...t);const n=this._get(),r=gr(n);Hr(this,r.create(n))}advance(e){const t=this._get(),n=this.get();ke(t,n)||(Ie(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Ks(this._active)&&rr(this)}_get(){const e=U.arr(this.source)?this.source.map(de):ce(de(this.source));return this.calc(...e)}_start(){this.idle&&!Ks(this._active)&&(this.idle=!1,J(Ln(this),e=>{e.done=!1}),Oe.skipAnimation?(X.batchedUpdates(()=>this.advance()),rr(this)):Dn.start(this))}_attach(){let e=1;J(ce(this.source),t=>{ye(t)&&Et(t,this),yr(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){J(ce(this.source),e=>{ye(e)&&Ht(e,this)}),this._active.clear(),rr(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ce(this.source).reduce((t,n)=>Math.max(t,(yr(n)?n.priority:0)+1),0))}};function Ac(e){return e.idle!==!1}function Ks(e){return!e.size||Array.from(e).every(Ac)}function rr(e){e.idle||(e.idle=!0,J(Ln(e),t=>{t.done=!0}),Ut(e,{type:"idle",parent:e}))}Oe.assign({createStringInterpolator:ji,to:(e,t)=>new Ic(e,t)});var eo=/^--/;function Cc(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!eo.test(e)&&!(Mt.hasOwnProperty(e)&&Mt[e])?t+"px":(""+t).trim()}var Qs={};function Pc(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:r,children:s,scrollTop:i,scrollLeft:o,viewBox:u,...a}=t,c=Object.values(a),l=Object.keys(a).map(f=>n||e.hasAttribute(f)?f:Qs[f]||(Qs[f]=f.replace(/([A-Z])/g,d=>"-"+d.toLowerCase())));s!==void 0&&(e.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const d=Cc(f,r[f]);eo.test(f)?e.style.setProperty(f,d):e.style[f]=d}l.forEach((f,d)=>{e.setAttribute(f,c[d])}),i!==void 0&&(e.scrollTop=i),o!==void 0&&(e.scrollLeft=o),u!==void 0&&e.setAttribute("viewBox",u)}var Mt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rc=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Fc=["Webkit","Ms","Moz","O"];Mt=Object.keys(Mt).reduce((e,t)=>(Fc.forEach(n=>e[Rc(n,t)]=e[t]),e),Mt);var Tc=/^(matrix|translate|scale|rotate|skew)/,Dc=/^(translate)/,$c=/^(rotate|skew)/,sr=(e,t)=>U.num(e)&&e!==0?e+t:e,hn=(e,t)=>U.arr(e)?e.every(n=>hn(n,t)):U.num(e)?e===t:parseFloat(e)===t,kc=class extends Nn{constructor({x:e,y:t,z:n,...r}){const s=[],i=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),i.push(o=>[`translate3d(${o.map(u=>sr(u,"px")).join(",")})`,hn(o,0)])),Re(r,(o,u)=>{if(u==="transform")s.push([o||""]),i.push(a=>[a,a===""]);else if(Tc.test(u)){if(delete r[u],U.und(o))return;const a=Dc.test(u)?"px":$c.test(u)?"deg":"";s.push(ce(o)),i.push(u==="rotate3d"?([c,l,f,d])=>[`rotate3d(${c},${l},${f},${sr(d,a)})`,hn(d,0)]:c=>[`${u}(${c.map(l=>sr(l,a)).join(",")})`,hn(c,u.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new Mc(s,i)),super(r)}},Mc=class extends $i{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return J(this.inputs,(n,r)=>{const s=de(n[0]),[i,o]=this.transforms[r](U.arr(s)?s:n.map(de));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&J(this.inputs,t=>J(t,n=>ye(n)&&Et(n,this)))}observerRemoved(e){e==0&&J(this.inputs,t=>J(t,n=>ye(n)&&Ht(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Ut(this,e)}},jc=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Oe.assign({batchedUpdates:di.unstable_batchedUpdates,createStringInterpolator:ji,colors:xu});var Lc=nc(jc,{applyAnimatedValues:Pc,createAnimatedStyle:e=>new kc(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Kr=Lc.animated,to={},no={exports:{}},Nc="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Bc=Nc,Uc=Bc;function ro(){}function so(){}so.resetWarningCache=ro;var Hc=function(){function e(r,s,i,o,u,a){if(a!==Uc){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:so,resetWarningCache:ro};return n.PropTypes=n,n};no.exports=Hc();var Xt=no.exports;function Vc(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var qc=Vc,io={},Ys=function(){function e(t,n){var r=[],s=!0,i=!1,o=void 0;try{for(var u=t[Symbol.iterator](),a;!(s=(a=u.next()).done)&&(r.push(a.value),!(n&&r.length===n));s=!0);}catch(c){i=!0,o=c}finally{try{!s&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Wc=function(e){var t=e.data,n=e.multiSection;function r(a){for(a===null?a=0:a++;a<t.length&&t[a]===0;)a++;return a===t.length?null:a}function s(a){for(a===null?a=t.length-1:a--;a>=0&&t[a]===0;)a--;return a===-1?null:a}function i(a){var c=Ys(a,2),l=c[0],f=c[1];return n?f===null||f===t[l]-1?(l=r(l),l===null?[null,null]:[l,0]):[l,f+1]:t===0||f===t-1?[null,null]:f===null?[null,0]:[null,f+1]}function o(a){var c=Ys(a,2),l=c[0],f=c[1];return n?f===null||f===0?(l=s(l),l===null?[null,null]:[l,t[l]-1]):[l,f-1]:t===0||f===0?[null,null]:f===null?[null,t-1]:[null,f-1]}function u(a){return i(a)[1]===null}return{next:i,prev:o,isLast:u}},Sr={exports:{}},zc=Object.prototype.propertyIsEnumerable;function Gc(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Kc(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(n){return zc.call(e,n)})}var Qc=Object.assign||function(e,t){for(var n,r,s=Gc(e),i=1;i<arguments.length;i++){n=arguments[i],r=Kc(Object(n));for(var o=0;o<r.length;o++)s[r[o]]=n[r[o]]}return s};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function a(c,l){var f=[],d=!0,h=!1,y=void 0;try{for(var p=c[Symbol.iterator](),S;!(d=(S=p.next()).done)&&(f.push(S.value),!(l&&f.length===l));d=!0);}catch(b){h=!0,y=b}finally{try{!d&&p.return&&p.return()}finally{if(h)throw y}}return f}return function(c,l){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return a(c,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(a){return a&&a.__esModule?a:{default:a}}function s(a){if(Array.isArray(a)){for(var c=0,l=Array(a.length);c<a.length;c++)l[c]=a[c];return l}else return Array.from(a)}var i=Qc,o=r(i),u=function(c){return c};t.default=function(a){var c=Array.isArray(a)&&a.length===2?a:[a,null],l=n(c,2),f=l[0],d=l[1];return function(h){for(var y=arguments.length,p=Array(y>1?y-1:0),S=1;S<y;S++)p[S-1]=arguments[S];var b=p.map(function($){return f[$]}).filter(u);return typeof b[0]=="string"||typeof d=="function"?{key:h,className:d?d.apply(void 0,s(b)):b.join(" ")}:{key:h,style:o.default.apply(void 0,[{}].concat(s(b)))}}},e.exports=t.default})(Sr,Sr.exports);var Yc=Sr.exports,oo={},Un={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(i){return typeof i}:t=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t(r)}function n(r,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===s)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!0;var a={},c,l;for(c=0,l=i.length;c<l;c++)a[i[c]]=!0;for(c=0,l=o.length;c<l;c++){var f=o[c],d=r[f],h=s[f];if(d!==h){if(!a[f]||d===null||h===null||t(d)!=="object"||t(h)!=="object")return!0;var y=Object.keys(d),p=Object.keys(h);if(y.length!==p.length)return!0;for(var S=0,b=y.length;S<b;S++){var $=y[S];if(d[$]!==h[$])return!0}}}return!1}})(Un);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(C),n=s(Xt),r=s(Un);function s(E){return E&&E.__esModule?E:{default:E}}function i(){if(typeof WeakMap!="function")return null;var E=new WeakMap;return i=function(){return E},E}function o(E){if(E&&E.__esModule)return E;if(E===null||u(E)!=="object"&&typeof E!="function")return{default:E};var k=i();if(k&&k.has(E))return k.get(E);var M={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in E)if(Object.prototype.hasOwnProperty.call(E,_)){var v=N?Object.getOwnPropertyDescriptor(E,_):null;v&&(v.get||v.set)?Object.defineProperty(M,_,v):M[_]=E[_]}return M.default=E,k&&k.set(E,M),M}function u(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(M){return typeof M}:u=function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},u(E)}function a(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")}function c(E,k){for(var M=0;M<k.length;M++){var N=k[M];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(E,N.key,N)}}function l(E,k,M){return k&&c(E.prototype,k),E}function f(E){return function(){var k=p(E),M;if(y()){var N=p(this).constructor;M=Reflect.construct(k,arguments,N)}else M=k.apply(this,arguments);return d(this,M)}}function d(E,k){return k&&(u(k)==="object"||typeof k=="function")?k:h(E)}function h(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(E){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},p(E)}function S(E,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(k&&k.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),k&&b(E,k)}function b(E,k){return b=Object.setPrototypeOf||function(N,_){return N.__proto__=_,N},b(E,k)}function $(E,k,M){return k in E?Object.defineProperty(E,k,{value:M,enumerable:!0,configurable:!0,writable:!0}):E[k]=M,E}var x=function(E){S(M,E);var k=f(M);function M(){return a(this,M),k.apply(this,arguments)}return l(M,[{key:"shouldComponentUpdate",value:function(_){return(0,r.default)(_,this.props)}},{key:"render",value:function(){var _=this.props,v=_.section,w=_.renderSectionTitle,P=_.theme,D=_.sectionKeyPrefix,L=w(v);return L?t.default.createElement("div",P("".concat(D,"title"),"sectionTitle"),L):null}}]),M}(t.Component);e.default=x,$(x,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})})(oo);var ao={},uo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(C),n=s(Xt),r=s(Un);function s(v){return v&&v.__esModule?v:{default:v}}function i(){if(typeof WeakMap!="function")return null;var v=new WeakMap;return i=function(){return v},v}function o(v){if(v&&v.__esModule)return v;if(v===null||u(v)!=="object"&&typeof v!="function")return{default:v};var w=i();if(w&&w.has(v))return w.get(v);var P={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in v)if(Object.prototype.hasOwnProperty.call(v,L)){var j=D?Object.getOwnPropertyDescriptor(v,L):null;j&&(j.get||j.set)?Object.defineProperty(P,L,j):P[L]=v[L]}return P.default=v,w&&w.set(v,P),P}function u(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(P){return typeof P}:u=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},u(v)}function a(){return a=Object.assign||function(v){for(var w=1;w<arguments.length;w++){var P=arguments[w];for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&(v[D]=P[D])}return v},a.apply(this,arguments)}function c(v,w){var P=Object.keys(v);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(v);w&&(D=D.filter(function(L){return Object.getOwnPropertyDescriptor(v,L).enumerable})),P.push.apply(P,D)}return P}function l(v){for(var w=1;w<arguments.length;w++){var P=arguments[w]!=null?arguments[w]:{};w%2?c(Object(P),!0).forEach(function(D){N(v,D,P[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(P)):c(Object(P)).forEach(function(D){Object.defineProperty(v,D,Object.getOwnPropertyDescriptor(P,D))})}return v}function f(v,w){if(v==null)return{};var P=d(v,w),D,L;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(v);for(L=0;L<j.length;L++)D=j[L],!(w.indexOf(D)>=0)&&Object.prototype.propertyIsEnumerable.call(v,D)&&(P[D]=v[D])}return P}function d(v,w){if(v==null)return{};var P={},D=Object.keys(v),L,j;for(j=0;j<D.length;j++)L=D[j],!(w.indexOf(L)>=0)&&(P[L]=v[L]);return P}function h(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function y(v,w){for(var P=0;P<w.length;P++){var D=w[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,D.key,D)}}function p(v,w,P){return w&&y(v.prototype,w),v}function S(v){return function(){var w=E(v),P;if(x()){var D=E(this).constructor;P=Reflect.construct(w,arguments,D)}else P=w.apply(this,arguments);return b(this,P)}}function b(v,w){return w&&(u(w)==="object"||typeof w=="function")?w:$(v)}function $(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(v){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},E(v)}function k(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),w&&M(v,w)}function M(v,w){return M=Object.setPrototypeOf||function(D,L){return D.__proto__=L,D},M(v,w)}function N(v,w,P){return w in v?Object.defineProperty(v,w,{value:P,enumerable:!0,configurable:!0,writable:!0}):v[w]=P,v}var _=function(v){k(P,v);var w=S(P);function P(){var D;h(this,P);for(var L=arguments.length,j=new Array(L),H=0;H<L;H++)j[H]=arguments[H];return D=w.call.apply(w,[this].concat(j)),N($(D),"storeItemReference",function(K){K!==null&&(D.item=K)}),N($(D),"onMouseEnter",function(K){var W=D.props,O=W.sectionIndex,m=W.itemIndex;D.props.onMouseEnter(K,{sectionIndex:O,itemIndex:m})}),N($(D),"onMouseLeave",function(K){var W=D.props,O=W.sectionIndex,m=W.itemIndex;D.props.onMouseLeave(K,{sectionIndex:O,itemIndex:m})}),N($(D),"onMouseDown",function(K){var W=D.props,O=W.sectionIndex,m=W.itemIndex;D.props.onMouseDown(K,{sectionIndex:O,itemIndex:m})}),N($(D),"onClick",function(K){var W=D.props,O=W.sectionIndex,m=W.itemIndex;D.props.onClick(K,{sectionIndex:O,itemIndex:m})}),D}return p(P,[{key:"shouldComponentUpdate",value:function(L){return(0,r.default)(L,this.props,["renderItemData"])}},{key:"render",value:function(){var L=this.props,j=L.isHighlighted,H=L.item,K=L.renderItem,W=L.renderItemData,O=f(L,["isHighlighted","item","renderItem","renderItemData"]);return delete O.sectionIndex,delete O.itemIndex,typeof O.onMouseEnter=="function"&&(O.onMouseEnter=this.onMouseEnter),typeof O.onMouseLeave=="function"&&(O.onMouseLeave=this.onMouseLeave),typeof O.onMouseDown=="function"&&(O.onMouseDown=this.onMouseDown),typeof O.onClick=="function"&&(O.onClick=this.onClick),t.default.createElement("li",a({role:"option"},O,{ref:this.storeItemReference}),K(H,l({isHighlighted:j},W)))}}]),P}(t.Component);e.default=_,N(_,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})})(uo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(C),n=i(Xt),r=i(uo),s=i(Un);function i(_){return _&&_.__esModule?_:{default:_}}function o(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return o=function(){return _},_}function u(_){if(_&&_.__esModule)return _;if(_===null||a(_)!=="object"&&typeof _!="function")return{default:_};var v=o();if(v&&v.has(_))return v.get(_);var w={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in _)if(Object.prototype.hasOwnProperty.call(_,D)){var L=P?Object.getOwnPropertyDescriptor(_,D):null;L&&(L.get||L.set)?Object.defineProperty(w,D,L):w[D]=_[D]}return w.default=_,v&&v.set(_,w),w}function a(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(w){return typeof w}:a=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a(_)}function c(){return c=Object.assign||function(_){for(var v=1;v<arguments.length;v++){var w=arguments[v];for(var P in w)Object.prototype.hasOwnProperty.call(w,P)&&(_[P]=w[P])}return _},c.apply(this,arguments)}function l(_,v){var w=Object.keys(_);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(_);v&&(P=P.filter(function(D){return Object.getOwnPropertyDescriptor(_,D).enumerable})),w.push.apply(w,P)}return w}function f(_){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?l(Object(w),!0).forEach(function(P){M(_,P,w[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(w)):l(Object(w)).forEach(function(P){Object.defineProperty(_,P,Object.getOwnPropertyDescriptor(w,P))})}return _}function d(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){for(var w=0;w<v.length;w++){var P=v[w];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}function y(_,v,w){return v&&h(_.prototype,v),_}function p(_){return function(){var v=x(_),w;if($()){var P=x(this).constructor;w=Reflect.construct(v,arguments,P)}else w=v.apply(this,arguments);return S(this,w)}}function S(_,v){return v&&(a(v)==="object"||typeof v=="function")?v:b(_)}function b(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(_){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},x(_)}function E(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),v&&k(_,v)}function k(_,v){return k=Object.setPrototypeOf||function(P,D){return P.__proto__=D,P},k(_,v)}function M(_,v,w){return v in _?Object.defineProperty(_,v,{value:w,enumerable:!0,configurable:!0,writable:!0}):_[v]=w,_}var N=function(_){E(w,_);var v=p(w);function w(){var P;d(this,w);for(var D=arguments.length,L=new Array(D),j=0;j<D;j++)L[j]=arguments[j];return P=v.call.apply(v,[this].concat(L)),M(b(P),"storeHighlightedItemReference",function(H){P.props.onHighlightedItemChange(H===null?null:H.item)}),P}return y(w,[{key:"shouldComponentUpdate",value:function(D){return(0,s.default)(D,this.props,["itemProps"])}},{key:"render",value:function(){var D=this,L=this.props,j=L.items,H=L.itemProps,K=L.renderItem,W=L.renderItemData,O=L.sectionIndex,m=L.highlightedItemIndex,I=L.getItemId,R=L.theme,g=L.keyPrefix,A=O===null?g:"".concat(g,"section-").concat(O,"-"),F=typeof H=="function";return t.default.createElement("ul",c({role:"listbox"},R("".concat(A,"items-list"),"itemsList")),j.map(function(T,G){var Q=G===0,z=G===m,V="".concat(A,"item-").concat(G),Z=F?H({sectionIndex:O,itemIndex:G}):H,ne=f({id:I(O,G),"aria-selected":z},R(V,"item",Q&&"itemFirst",z&&"itemHighlighted"),{},Z);return z&&(ne.ref=D.storeHighlightedItemReference),t.default.createElement(r.default,c({},ne,{sectionIndex:O,isHighlighted:z,itemIndex:G,item:T,renderItem:K,renderItemData:W}))}))}}]),w}(t.Component);e.default=N,M(N,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),M(N,"defaultProps",{sectionIndex:null})})(ao);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(C),n=u(Xt),r=u(Wc),s=u(Yc),i=u(oo),o=u(ao);function u(m){return m&&m.__esModule?m:{default:m}}function a(){if(typeof WeakMap!="function")return null;var m=new WeakMap;return a=function(){return m},m}function c(m){if(m&&m.__esModule)return m;if(m===null||$(m)!=="object"&&typeof m!="function")return{default:m};var I=a();if(I&&I.has(m))return I.get(m);var R={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in m)if(Object.prototype.hasOwnProperty.call(m,A)){var F=g?Object.getOwnPropertyDescriptor(m,A):null;F&&(F.get||F.set)?Object.defineProperty(R,A,F):R[A]=m[A]}return R.default=m,I&&I.set(m,R),R}function l(m,I){var R=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);I&&(g=g.filter(function(A){return Object.getOwnPropertyDescriptor(m,A).enumerable})),R.push.apply(R,g)}return R}function f(m){for(var I=1;I<arguments.length;I++){var R=arguments[I]!=null?arguments[I]:{};I%2?l(Object(R),!0).forEach(function(g){L(m,g,R[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(R)):l(Object(R)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(R,g))})}return m}function d(m,I){return b(m)||S(m,I)||y(m,I)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(m,I){if(m){if(typeof m=="string")return p(m,I);var R=Object.prototype.toString.call(m).slice(8,-1);if(R==="Object"&&m.constructor&&(R=m.constructor.name),R==="Map"||R==="Set")return Array.from(R);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return p(m,I)}}function p(m,I){(I==null||I>m.length)&&(I=m.length);for(var R=0,g=new Array(I);R<I;R++)g[R]=m[R];return g}function S(m,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(m)))){var R=[],g=!0,A=!1,F=void 0;try{for(var T=m[Symbol.iterator](),G;!(g=(G=T.next()).done)&&(R.push(G.value),!(I&&R.length===I));g=!0);}catch(Q){A=!0,F=Q}finally{try{!g&&T.return!=null&&T.return()}finally{if(A)throw F}}return R}}function b(m){if(Array.isArray(m))return m}function $(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$=function(R){return typeof R}:$=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},$(m)}function x(m,I){if(!(m instanceof I))throw new TypeError("Cannot call a class as a function")}function E(m,I){for(var R=0;R<I.length;R++){var g=I[R];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}function k(m,I,R){return I&&E(m.prototype,I),m}function M(m){return function(){var I=w(m),R;if(v()){var g=w(this).constructor;R=Reflect.construct(I,arguments,g)}else R=I.apply(this,arguments);return N(this,R)}}function N(m,I){return I&&($(I)==="object"||typeof I=="function")?I:_(m)}function _(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(m){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},w(m)}function P(m,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(I&&I.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),I&&D(m,I)}function D(m,I){return D=Object.setPrototypeOf||function(g,A){return g.__proto__=A,g},D(m,I)}function L(m,I,R){return I in m?Object.defineProperty(m,I,{value:R,enumerable:!0,configurable:!0,writable:!0}):m[I]=R,m}var j={},H=function(I){return t.default.createElement("input",I)},K=function(I){var R=I.containerProps,g=I.children;return t.default.createElement("div",R,g)},W={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},O=function(m){P(R,m);var I=M(R);function R(g){var A;return x(this,R),A=I.call(this,g),L(_(A),"storeInputReference",function(F){F!==null&&(A.input=F);var T=A.props.inputProps.ref;T&&(typeof T=="function"?T(F):$(T)==="object"&&Object.prototype.hasOwnProperty.call(T,"current")&&(T.current=F))}),L(_(A),"storeItemsContainerReference",function(F){F!==null&&(A.itemsContainer=F)}),L(_(A),"onHighlightedItemChange",function(F){A.highlightedItem=F}),L(_(A),"getItemId",function(F,T){if(T===null)return null;var G=A.props.id,Q=F===null?"":"section-".concat(F);return"react-autowhatever-".concat(G,"-").concat(Q,"-item-").concat(T)}),L(_(A),"onFocus",function(F){var T=A.props.inputProps;A.setState({isInputFocused:!0}),T.onFocus&&T.onFocus(F)}),L(_(A),"onBlur",function(F){var T=A.props.inputProps;A.setState({isInputFocused:!1}),T.onBlur&&T.onBlur(F)}),L(_(A),"onKeyDown",function(F){var T=A.props,G=T.inputProps,Q=T.highlightedSectionIndex,z=T.highlightedItemIndex,V=F.keyCode;switch(V){case 40:case 38:{var Z=V===40?"next":"prev",ne=A.sectionIterator[Z]([Q,z]),se=d(ne,2),ie=se[0],Ze=se[1];G.onKeyDown(F,{newHighlightedSectionIndex:ie,newHighlightedItemIndex:Ze});break}default:G.onKeyDown(F,{highlightedSectionIndex:Q,highlightedItemIndex:z})}}),A.highlightedItem=null,A.state={isInputFocused:!1},A.setSectionsItems(g),A.setSectionIterator(g),A.setTheme(g),A}return k(R,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(A){A.items!==this.props.items&&this.setSectionsItems(A),(A.items!==this.props.items||A.multiSection!==this.props.multiSection)&&this.setSectionIterator(A),A.theme!==this.props.theme&&this.setTheme(A)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(A){A.multiSection&&(this.sectionsItems=A.items.map(function(F){return A.getSectionItems(F)}),this.sectionsLengths=this.sectionsItems.map(function(F){return F.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(F){return F===0}))}},{key:"setSectionIterator",value:function(A){this.sectionIterator=(0,r.default)({multiSection:A.multiSection,data:A.multiSection?this.sectionsLengths:A.items.length})}},{key:"setTheme",value:function(A){this.theme=(0,s.default)(A.theme)}},{key:"renderSections",value:function(){var A=this;if(this.allSectionsAreEmpty)return null;var F=this.theme,T=this.props,G=T.id,Q=T.items,z=T.renderItem,V=T.renderItemData,Z=T.renderSectionTitle,ne=T.highlightedSectionIndex,se=T.highlightedItemIndex,ie=T.itemProps;return Q.map(function(Ze,fe){var at="react-autowhatever-".concat(G,"-"),ut="".concat(at,"section-").concat(fe,"-"),Te=fe===0;return t.default.createElement("div",F("".concat(ut,"container"),"sectionContainer",Te&&"sectionContainerFirst"),t.default.createElement(i.default,{section:Ze,renderSectionTitle:Z,theme:F,sectionKeyPrefix:ut}),t.default.createElement(o.default,{items:A.sectionsItems[fe],itemProps:ie,renderItem:z,renderItemData:V,sectionIndex:fe,highlightedItemIndex:ne===fe?se:null,onHighlightedItemChange:A.onHighlightedItemChange,getItemId:A.getItemId,theme:F,keyPrefix:at,ref:A.storeItemsListReference}))})}},{key:"renderItems",value:function(){var A=this.props.items;if(A.length===0)return null;var F=this.theme,T=this.props,G=T.id,Q=T.renderItem,z=T.renderItemData,V=T.highlightedSectionIndex,Z=T.highlightedItemIndex,ne=T.itemProps;return t.default.createElement(o.default,{items:A,itemProps:ne,renderItem:Q,renderItemData:z,highlightedItemIndex:V===null?Z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:F,keyPrefix:"react-autowhatever-".concat(G,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var A=this.highlightedItem;if(A){var F=this.itemsContainer,T=A.offsetParent===F?A.offsetTop:A.offsetTop-F.offsetTop,G=F.scrollTop;T<G?G=T:T+A.offsetHeight>G+F.offsetHeight&&(G=T+A.offsetHeight-F.offsetHeight),G!==F.scrollTop&&(F.scrollTop=G)}}},{key:"render",value:function(){var A=this.theme,F=this.props,T=F.id,G=F.multiSection,Q=F.renderInputComponent,z=F.renderItemsContainer,V=F.highlightedSectionIndex,Z=F.highlightedItemIndex,ne=this.state.isInputFocused,se=G?this.renderSections():this.renderItems(),ie=se!==null,Ze=this.getItemId(V,Z),fe="react-autowhatever-".concat(T),at=f({role:"combobox","aria-haspopup":"listbox","aria-owns":fe,"aria-expanded":ie},A("react-autowhatever-".concat(T,"-container"),"container",ie&&"containerOpen"),{},this.props.containerProps),ut=Q(f({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":fe,"aria-activedescendant":Ze},A("react-autowhatever-".concat(T,"-input"),"input",ie&&"inputOpen",ne&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),Te=z({containerProps:f({id:fe,role:"listbox"},A("react-autowhatever-".concat(T,"-items-container"),"itemsContainer",ie&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:se});return t.default.createElement("div",at,ut,Te)}}]),R}(t.Component);e.default=O,L(O,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),L(O,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:H,renderItemsContainer:K,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:j,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:j,inputProps:j,itemProps:j,highlightedSectionIndex:null,highlightedItemIndex:null,theme:W})})(io);var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.mapToAutowhateverTheme=bt.defaultTheme=void 0;var Xc={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};bt.defaultTheme=Xc;var Jc=function(t){var n={};for(var r in t)switch(r){case"suggestionsContainer":n.itemsContainer=t[r];break;case"suggestionsContainerOpen":n.itemsContainerOpen=t[r];break;case"suggestion":n.item=t[r];break;case"suggestionFirst":n.itemFirst=t[r];break;case"suggestionHighlighted":n.itemHighlighted=t[r];break;case"suggestionsList":n.itemsList=t[r];break;default:n[r]=t[r]}return n};bt.mapToAutowhateverTheme=Jc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(C),n=o(Xt),r=o(qc),s=o(io),i=bt;function o(O){return O&&O.__esModule?O:{default:O}}function u(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return u=function(){return O},O}function a(O){if(O&&O.__esModule)return O;if(O===null||c(O)!=="object"&&typeof O!="function")return{default:O};var m=u();if(m&&m.has(O))return m.get(O);var I={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in O)if(Object.prototype.hasOwnProperty.call(O,g)){var A=R?Object.getOwnPropertyDescriptor(O,g):null;A&&(A.get||A.set)?Object.defineProperty(I,g,A):I[g]=O[g]}return I.default=O,m&&m.set(O,I),I}function c(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(I){return typeof I}:c=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},c(O)}function l(O,m){var I=Object.keys(O);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(O);m&&(R=R.filter(function(g){return Object.getOwnPropertyDescriptor(O,g).enumerable})),I.push.apply(I,R)}return I}function f(O){for(var m=1;m<arguments.length;m++){var I=arguments[m]!=null?arguments[m]:{};m%2?l(Object(I),!0).forEach(function(R){M(O,R,I[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(I)):l(Object(I)).forEach(function(R){Object.defineProperty(O,R,Object.getOwnPropertyDescriptor(I,R))})}return O}function d(O,m){if(!(O instanceof m))throw new TypeError("Cannot call a class as a function")}function h(O,m){for(var I=0;I<m.length;I++){var R=m[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}function y(O,m,I){return m&&h(O.prototype,m),O}function p(O){return function(){var m=x(O),I;if($()){var R=x(this).constructor;I=Reflect.construct(m,arguments,R)}else I=m.apply(this,arguments);return S(this,I)}}function S(O,m){return m&&(c(m)==="object"||typeof m=="function")?m:b(O)}function b(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(O){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},x(O)}function E(O,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(m&&m.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),m&&k(O,m)}function k(O,m){return k=Object.setPrototypeOf||function(R,g){return R.__proto__=g,R},k(O,m)}function M(O,m,I){return m in O?Object.defineProperty(O,m,{value:I,enumerable:!0,configurable:!0,writable:!0}):O[m]=I,O}var N=function(){return!0},_=function(m){return m.trim().length>0},v=function(m){var I=m.containerProps,R=m.children;return t.default.createElement("div",I,R)},w="suggestions-revealed",P="suggestions-updated",D="suggestion-selected",L="input-focused",j="input-changed",H="input-blurred",K="escape-pressed",W=function(O){E(I,O);var m=p(I);function I(R){var g,A=R.alwaysRenderSuggestions;return d(this,I),g=m.call(this),M(b(g),"onDocumentMouseDown",function(F){g.justClickedOnSuggestionsContainer=!1;for(var T=F.detail&&F.detail.target||F.target;T!==null&&T!==document;){if(T.getAttribute&&T.getAttribute("data-suggestion-index")!==null)return;if(T===g.suggestionsContainer){g.justClickedOnSuggestionsContainer=!0;return}T=T.parentNode}}),M(b(g),"storeAutowhateverRef",function(F){F!==null&&(g.autowhatever=F)}),M(b(g),"onSuggestionMouseEnter",function(F,T){var G=T.sectionIndex,Q=T.itemIndex;g.updateHighlightedSuggestion(G,Q),F.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!0),g.justMouseEntered=!0,setTimeout(function(){g.justMouseEntered=!1})}),M(b(g),"highlightFirstSuggestion",function(){g.updateHighlightedSuggestion(g.props.multiSection?0:null,0)}),M(b(g),"onDocumentMouseUp",function(){g.pressedSuggestion&&!g.justSelectedSuggestion&&g.input.focus(),g.pressedSuggestion=null}),M(b(g),"onSuggestionMouseDown",function(F){g.justSelectedSuggestion||(g.justSelectedSuggestion=!0,g.pressedSuggestion=F.target)}),M(b(g),"onSuggestionsClearRequested",function(){var F=g.props.onSuggestionsClearRequested;F&&F()}),M(b(g),"onSuggestionSelected",function(F,T){var G=g.props,Q=G.alwaysRenderSuggestions,z=G.onSuggestionSelected,V=G.onSuggestionsFetchRequested;z&&z(F,T);var Z=g.props.shouldKeepSuggestionsOnSelect(T.suggestion);Q||Z?V({value:T.suggestionValue,reason:D}):g.onSuggestionsClearRequested(),g.resetHighlightedSuggestion()}),M(b(g),"onSuggestionClick",function(F){var T=g.props,G=T.alwaysRenderSuggestions,Q=T.focusInputOnSuggestionClick,z=g.getSuggestionIndices(g.findSuggestionElement(F.target)),V=z.sectionIndex,Z=z.suggestionIndex,ne=g.getSuggestion(V,Z),se=g.props.getSuggestionValue(ne);g.maybeCallOnChange(F,se,"click"),g.onSuggestionSelected(F,{suggestion:ne,suggestionValue:se,suggestionIndex:Z,sectionIndex:V,method:"click"});var ie=g.props.shouldKeepSuggestionsOnSelect(ne);G||ie||g.closeSuggestions(),Q===!0?g.input.focus():g.onBlur(),setTimeout(function(){g.justSelectedSuggestion=!1})}),M(b(g),"onBlur",function(){var F=g.props,T=F.inputProps,G=F.shouldRenderSuggestions,Q=T.value,z=T.onBlur,V=g.getHighlightedSuggestion(),Z=G(Q,H);g.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Z}),z&&z(g.blurEvent,{highlightedSuggestion:V})}),M(b(g),"onSuggestionMouseLeave",function(F){g.resetHighlightedSuggestion(!1),g.justSelectedSuggestion&&F.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!1)}),M(b(g),"onSuggestionTouchStart",function(){g.justSelectedSuggestion=!0}),M(b(g),"onSuggestionTouchMove",function(){g.justSelectedSuggestion=!1,g.pressedSuggestion=null,g.input.focus()}),M(b(g),"itemProps",function(F){var T=F.sectionIndex,G=F.itemIndex;return{"data-section-index":T,"data-suggestion-index":G,onMouseEnter:g.onSuggestionMouseEnter,onMouseLeave:g.onSuggestionMouseLeave,onMouseDown:g.onSuggestionMouseDown,onTouchStart:g.onSuggestionTouchStart,onTouchMove:g.onSuggestionTouchMove,onClick:g.onSuggestionClick}}),M(b(g),"renderSuggestionsContainer",function(F){var T=F.containerProps,G=F.children,Q=g.props.renderSuggestionsContainer;return Q({containerProps:T,children:G,query:g.getQuery()})}),g.state={isFocused:!1,isCollapsed:!A,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},g.justPressedUpDown=!1,g.justMouseEntered=!1,g.pressedSuggestion=null,g}return y(I,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(g){var A=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!g.highlightFirstSuggestion;(0,r.default)(g.suggestions,this.props.suggestions)?g.highlightFirstSuggestion&&g.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():A&&this.resetHighlightedSuggestion():this.willRenderSuggestions(g,P)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),A&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(g,A){var F=this.props,T=F.suggestions,G=F.onSuggestionHighlighted,Q=F.highlightFirstSuggestion;if(!(0,r.default)(T,g.suggestions)&&T.length>0&&Q){this.highlightFirstSuggestion();return}if(G){var z=this.getHighlightedSuggestion(),V=A.highlightedSuggestion;z!=V&&G({suggestion:z})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(g,A,F){var T=this;this.setState(function(G){var Q=G.valueBeforeUpDown;return A===null?Q=null:Q===null&&typeof F<"u"&&(Q=F),{highlightedSectionIndex:g,highlightedSuggestionIndex:A,highlightedSuggestion:A===null?null:T.getSuggestion(g,A),valueBeforeUpDown:Q}})}},{key:"resetHighlightedSuggestion",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(A){var F=A.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:g?null:F}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(g,A){var F=this.props,T=F.suggestions,G=F.multiSection,Q=F.getSectionSuggestions;return G?Q(T[g])[A]:T[A]}},{key:"getHighlightedSuggestion",value:function(){var g=this.state,A=g.highlightedSectionIndex,F=g.highlightedSuggestionIndex;return F===null?null:this.getSuggestion(A,F)}},{key:"getSuggestionValueByIndex",value:function(g,A){var F=this.props.getSuggestionValue;return F(this.getSuggestion(g,A))}},{key:"getSuggestionIndices",value:function(g){var A=g.getAttribute("data-section-index"),F=g.getAttribute("data-suggestion-index");return{sectionIndex:typeof A=="string"?parseInt(A,10):null,suggestionIndex:parseInt(F,10)}}},{key:"findSuggestionElement",value:function(g){var A=g;do{if(A.getAttribute&&A.getAttribute("data-suggestion-index")!==null)return A;A=A.parentNode}while(A!==null);throw console.error("Clicked element:",g),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(g,A,F){var T=this.props.inputProps,G=T.value,Q=T.onChange;A!==G&&Q(g,{newValue:A,method:F})}},{key:"willRenderSuggestions",value:function(g,A){var F=g.suggestions,T=g.inputProps,G=g.shouldRenderSuggestions,Q=T.value;return F.length>0&&G(Q,A)}},{key:"getQuery",value:function(){var g=this.props.inputProps,A=g.value,F=this.state.valueBeforeUpDown;return(F===null?A:F).trim()}},{key:"render",value:function(){var g=this,A=this.props,F=A.suggestions,T=A.renderInputComponent,G=A.onSuggestionsFetchRequested,Q=A.renderSuggestion,z=A.inputProps,V=A.multiSection,Z=A.renderSectionTitle,ne=A.id,se=A.getSectionSuggestions,ie=A.theme,Ze=A.getSuggestionValue,fe=A.alwaysRenderSuggestions,at=A.highlightFirstSuggestion,ut=A.containerProps,Te=this.state,Mo=Te.isFocused,rs=Te.isCollapsed,ss=Te.highlightedSectionIndex,is=Te.highlightedSuggestionIndex,en=Te.valueBeforeUpDown,tn=fe?N:this.props.shouldRenderSuggestions,ct=z.value,os=z.onFocus,as=z.onKeyDown,jo=this.willRenderSuggestions(this.props,"render"),nn=fe||Mo&&!rs&&jo,Lo=nn?F:[],No=f({},z,{onFocus:function(re){if(!g.justSelectedSuggestion&&!g.justClickedOnSuggestionsContainer){var De=tn(ct,L);g.setState({isFocused:!0,isCollapsed:!De}),os&&os(re),De&&G({value:ct,reason:L})}},onBlur:function(re){if(g.justClickedOnSuggestionsContainer){g.input.focus();return}g.blurEvent=re,g.justSelectedSuggestion||(g.onBlur(),g.onSuggestionsClearRequested())},onChange:function(re){var De=re.target.value,Ot=tn(De,j);g.maybeCallOnChange(re,De,"type"),g.suggestionsContainer&&(g.suggestionsContainer.scrollTop=0),g.setState(f({},at?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!Ot})),Ot?G({value:De,reason:j}):g.onSuggestionsClearRequested()},onKeyDown:function(re,De){var Ot=re.keyCode;switch(Ot){case 40:case 38:if(rs)tn(ct,w)&&(G({value:ct,reason:w}),g.revealSuggestions(),re.preventDefault());else if(F.length>0){var us=De.newHighlightedSectionIndex,Wn=De.newHighlightedItemIndex,zn;Wn===null?zn=en===null?ct:en:zn=g.getSuggestionValueByIndex(us,Wn),g.updateHighlightedSuggestion(us,Wn,ct),g.maybeCallOnChange(re,zn,Ot===40?"down":"up"),re.preventDefault()}g.justPressedUpDown=!0,setTimeout(function(){g.justPressedUpDown=!1});break;case 13:{if(re.keyCode===229)break;var Gn=g.getHighlightedSuggestion();if(nn&&!fe&&g.closeSuggestions(),Gn!=null){re.preventDefault();var cs=Ze(Gn);g.maybeCallOnChange(re,cs,"enter"),g.onSuggestionSelected(re,{suggestion:Gn,suggestionValue:cs,suggestionIndex:is,sectionIndex:ss,method:"enter"}),g.justSelectedSuggestion=!0,setTimeout(function(){g.justSelectedSuggestion=!1})}break}case 27:{nn&&re.preventDefault();var ls=nn&&!fe;if(en===null){if(!ls){var Kn="";g.maybeCallOnChange(re,Kn,"escape"),tn(Kn,K)?G({value:Kn,reason:K}):g.onSuggestionsClearRequested()}}else g.maybeCallOnChange(re,en,"escape");ls?(g.onSuggestionsClearRequested(),g.closeSuggestions()):g.resetHighlightedSuggestion();break}}as&&as(re)}}),Bo={query:this.getQuery()};return t.default.createElement(s.default,{multiSection:V,items:Lo,renderInputComponent:T,renderItemsContainer:this.renderSuggestionsContainer,renderItem:Q,renderItemData:Bo,renderSectionTitle:Z,getSectionItems:se,highlightedSectionIndex:ss,highlightedItemIndex:is,containerProps:ut,inputProps:No,itemProps:this.itemProps,theme:(0,i.mapToAutowhateverTheme)(ie),id:ne,ref:this.storeAutowhateverRef})}}]),I}(t.Component);e.default=W,M(W,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(m,I){var R=m[I];if(typeof R!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(m,I){var R=m[I];if(m.alwaysRenderSuggestions===!1&&typeof R!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(m,I){var R=m[I];if(!R)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(R,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(R,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(m,I){var R=m[I];if(m.multiSection===!0&&typeof R!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(m,I){var R=m[I];if(m.multiSection===!0&&typeof R!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),M(W,"defaultProps",{renderSuggestionsContainer:v,shouldRenderSuggestions:_,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:i.defaultTheme,id:"1",containerProps:{}})})(to);var Zc=to.default;const el=Uo(Zc),tl=e=>{const[t,n]=C.useState([]),r=({value:i})=>n(e.getSuggestions(i)),s=(i,{isHighlighted:o})=>q.jsx("div",{"data-highlighted":o?"true":void 0,children:i});return q.jsx(el,{suggestions:t,onSuggestionSelected:(i,o)=>e.onSelect&&e.onSelect(o.suggestion),onSuggestionsFetchRequested:r,onSuggestionsClearRequested:()=>n([]),getSuggestionValue:i=>i,renderSuggestionsContainer:({containerProps:i,children:o})=>C.Children.toArray(o).length>0?C.createElement("div",{...i,key:i.key,className:"react-autosuggest"},o):null,renderSuggestion:s,containerProps:{className:"relative"},inputProps:{disabled:e.disabled,placeholder:e.placeholder,value:e.value||"",onBlur:e.onBlur,onChange:(i,{newValue:o})=>e.onChange&&e.onChange(o),onFocus:e.onFocus,onKeyDown:e.onKeyDown}})};var Ke={};Ke.remove=nl;var gn=[{base:" ",chars:""},{base:"0",chars:""},{base:"A",chars:""},{base:"AA",chars:""},{base:"AE",chars:""},{base:"AO",chars:""},{base:"AU",chars:""},{base:"AV",chars:""},{base:"AY",chars:""},{base:"B",chars:""},{base:"C",chars:"C"},{base:"D",chars:""},{base:"Dh",chars:""},{base:"DZ",chars:""},{base:"Dz",chars:""},{base:"E",chars:""},{base:"F",chars:""},{base:"G",chars:""},{base:"H",chars:""},{base:"I",chars:""},{base:"J",chars:""},{base:"K",chars:""},{base:"L",chars:""},{base:"LJ",chars:""},{base:"Lj",chars:""},{base:"M",chars:""},{base:"N",chars:""},{base:"NJ",chars:""},{base:"Nj",chars:""},{base:"O",chars:""},{base:"OE",chars:""},{base:"OI",chars:""},{base:"OO",chars:""},{base:"OU",chars:""},{base:"P",chars:""},{base:"Q",chars:""},{base:"R",chars:""},{base:"S",chars:""},{base:"T",chars:""},{base:"Th",chars:""},{base:"TZ",chars:""},{base:"U",chars:""},{base:"V",chars:""},{base:"VY",chars:""},{base:"W",chars:""},{base:"X",chars:""},{base:"Y",chars:""},{base:"Z",chars:""},{base:"a",chars:""},{base:"aa",chars:""},{base:"ae",chars:""},{base:"ao",chars:""},{base:"au",chars:""},{base:"av",chars:""},{base:"ay",chars:""},{base:"b",chars:""},{base:"c",chars:""},{base:"d",chars:""},{base:"dh",chars:""},{base:"dz",chars:""},{base:"e",chars:""},{base:"f",chars:""},{base:"ff",chars:""},{base:"fi",chars:""},{base:"fl",chars:""},{base:"ffi",chars:""},{base:"ffl",chars:""},{base:"g",chars:""},{base:"h",chars:""},{base:"hv",chars:""},{base:"i",chars:""},{base:"j",chars:""},{base:"k",chars:""},{base:"l",chars:""},{base:"lj",chars:""},{base:"m",chars:""},{base:"n",chars:""},{base:"nj",chars:""},{base:"o",chars:""},{base:"oe",chars:""},{base:"oi",chars:""},{base:"oo",chars:""},{base:"ou",chars:""},{base:"p",chars:""},{base:"q",chars:""},{base:"r",chars:""},{base:"s",chars:""},{base:"ss",chars:""},{base:"t",chars:""},{base:"th",chars:""},{base:"tz",chars:""},{base:"u",chars:""},{base:"v",chars:""},{base:"vy",chars:""},{base:"w",chars:""},{base:"x",chars:""},{base:"y",chars:""},{base:"z",chars:""}],Qr={};for(var un=0;un<gn.length;un+=1)for(var Xs=gn[un].chars,ir=0;ir<Xs.length;ir+=1)Qr[Xs[ir]]=gn[un].base;function nl(e){return e.replace(/[^\u0000-\u007e]/g,function(t){return Qr[t]||t})}Ke.replacementList=gn;Ke.diacriticsMap=Qr;function je(e){return Array.isArray?Array.isArray(e):fo(e)==="[object Array]"}const rl=1/0;function sl(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-rl?"-0":t}function il(e){return e==null?"":sl(e)}function Ce(e){return typeof e=="string"}function co(e){return typeof e=="number"}function ol(e){return e===!0||e===!1||al(e)&&fo(e)=="[object Boolean]"}function lo(e){return typeof e=="object"}function al(e){return lo(e)&&e!==null}function pe(e){return e!=null}function or(e){return!e.trim().length}function fo(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ul="Incorrect 'index' type",cl=e=>`Invalid value for key ${e}`,ll=e=>`Pattern length exceeds max of ${e}.`,fl=e=>`Missing ${e} property in key`,dl=e=>`Property 'weight' in key '${e}' must be a positive integer`,Js=Object.prototype.hasOwnProperty;class hl{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=ho(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ho(e){let t=null,n=null,r=null,s=1,i=null;if(Ce(e)||je(e))r=e,t=Zs(e),n=wr(e);else{if(!Js.call(e,"name"))throw new Error(fl("name"));const o=e.name;if(r=o,Js.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(dl(o));t=Zs(o),n=wr(o),i=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:i}}function Zs(e){return je(e)?e:e.split(".")}function wr(e){return je(e)?e.join("."):e}function gl(e,t){let n=[],r=!1;const s=(i,o,u)=>{if(pe(i))if(!o[u])n.push(i);else{let a=o[u];const c=i[a];if(!pe(c))return;if(u===o.length-1&&(Ce(c)||co(c)||ol(c)))n.push(il(c));else if(je(c)){r=!0;for(let l=0,f=c.length;l<f;l+=1)s(c[l],o,u+1)}else o.length&&s(c,o,u+1)}};return s(e,Ce(t)?t.split("."):t,0),r?n:n[0]}const pl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ml={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},yl={location:0,threshold:.6,distance:100},vl={useExtendedSearch:!1,getFn:gl,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Y={...ml,...pl,...yl,...vl};const bl=/[^ ]+/g;function Sl(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const i=s.match(bl).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),u=parseFloat(Math.round(o*r)/r);return n.set(i,u),u},clear(){n.clear()}}}class Yr{constructor({getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){this.norm=Sl(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ce(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ce(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!pe(t)||or(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(pe(o)){if(je(o)){let u=[];const a=[{nestedArrIndex:-1,value:o}];for(;a.length;){const{nestedArrIndex:c,value:l}=a.pop();if(pe(l))if(Ce(l)&&!or(l)){let f={v:l,i:c,n:this.norm.get(l)};u.push(f)}else je(l)&&l.forEach((f,d)=>{a.push({nestedArrIndex:d,value:f})})}r.$[i]=u}else if(Ce(o)&&!or(o)){let u={v:o,n:this.norm.get(o)};r.$[i]=u}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function go(e,t,{getFn:n=Y.getFn,fieldNormWeight:r=Y.fieldNormWeight}={}){const s=new Yr({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(ho)),s.setSources(t),s.create(),s}function wl(e,{getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){const{keys:r,records:s}=e,i=new Yr({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function cn(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=Y.distance,ignoreLocation:i=Y.ignoreLocation}={}){const o=t/e.length;if(i)return o;const u=Math.abs(r-n);return s?o+u/s:u?1:o}function El(e=[],t=Y.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=e.length;i<o;i+=1){let u=e[i];u&&r===-1?r=i:!u&&r!==-1&&(s=i-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const et=32;function xl(e,t,n,{location:r=Y.location,distance:s=Y.distance,threshold:i=Y.threshold,findAllMatches:o=Y.findAllMatches,minMatchCharLength:u=Y.minMatchCharLength,includeMatches:a=Y.includeMatches,ignoreLocation:c=Y.ignoreLocation}={}){if(t.length>et)throw new Error(ll(et));const l=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=i,y=d;const p=u>1||a,S=p?Array(f):[];let b;for(;(b=e.indexOf(t,y))>-1;){let N=cn(t,{currentLocation:b,expectedLocation:d,distance:s,ignoreLocation:c});if(h=Math.min(N,h),y=b+l,p){let _=0;for(;_<l;)S[b+_]=1,_+=1}}y=-1;let $=[],x=1,E=l+f;const k=1<<l-1;for(let N=0;N<l;N+=1){let _=0,v=E;for(;_<v;)cn(t,{errors:N,currentLocation:d+v,expectedLocation:d,distance:s,ignoreLocation:c})<=h?_=v:E=v,v=Math.floor((E-_)/2+_);E=v;let w=Math.max(1,d-v+1),P=o?f:Math.min(d+v,f)+l,D=Array(P+2);D[P+1]=(1<<N)-1;for(let j=P;j>=w;j-=1){let H=j-1,K=n[e.charAt(H)];if(p&&(S[H]=+!!K),D[j]=(D[j+1]<<1|1)&K,N&&(D[j]|=($[j+1]|$[j])<<1|1|$[j+1]),D[j]&k&&(x=cn(t,{errors:N,currentLocation:H,expectedLocation:d,distance:s,ignoreLocation:c}),x<=h)){if(h=x,y=H,y<=d)break;w=Math.max(1,2*d-y)}}if(cn(t,{errors:N+1,currentLocation:d,expectedLocation:d,distance:s,ignoreLocation:c})>h)break;$=D}const M={isMatch:y>=0,score:Math.max(.001,x)};if(p){const N=El(S,u);N.length?a&&(M.indices=N):M.isMatch=!1}return M}function _l(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class po{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:s=Y.distance,includeMatches:i=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:u=Y.minMatchCharLength,isCaseSensitive:a=Y.isCaseSensitive,ignoreLocation:c=Y.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(d,h)=>{this.chunks.push({pattern:d,alphabet:_l(d),startIndex:h})},f=this.pattern.length;if(f>et){let d=0;const h=f%et,y=f-h;for(;d<y;)l(this.pattern.substr(d,et),d),d+=et;if(h){const p=f-et;l(this.pattern.substr(p),p)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return r&&(y.indices=[[0,t.length-1]]),y}const{location:s,distance:i,threshold:o,findAllMatches:u,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[],f=0,d=!1;this.chunks.forEach(({pattern:y,alphabet:p,startIndex:S})=>{const{isMatch:b,score:$,indices:x}=xl(t,y,p,{location:s+S,distance:i,threshold:o,findAllMatches:u,minMatchCharLength:a,includeMatches:r,ignoreLocation:c});b&&(d=!0),f+=$,b&&x&&(l=[...l,...x])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=l),h}}class Xe{constructor(t){this.pattern=t}static isMultiMatch(t){return ei(t,this.multiRegex)}static isSingleMatch(t){return ei(t,this.singleRegex)}search(){}}function ei(e,t){const n=e.match(t);return n?n[1]:null}class Ol extends Xe{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Il extends Xe{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Al extends Xe{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Cl extends Xe{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Pl extends Xe{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Rl extends Xe{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class mo extends Xe{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:s=Y.distance,includeMatches:i=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:u=Y.minMatchCharLength,isCaseSensitive:a=Y.isCaseSensitive,ignoreLocation:c=Y.ignoreLocation}={}){super(t),this._bitapSearch=new po(t,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class yo extends Xe{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Er=[Ol,yo,Al,Cl,Rl,Pl,Il,mo],ti=Er.length,Fl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Tl="|";function Dl(e,t={}){return e.split(Tl).map(n=>{let r=n.trim().split(Fl).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const u=r[i];let a=!1,c=-1;for(;!a&&++c<ti;){const l=Er[c];let f=l.isMultiMatch(u);f&&(s.push(new l(f,t)),a=!0)}if(!a)for(c=-1;++c<ti;){const l=Er[c];let f=l.isSingleMatch(u);if(f){s.push(new l(f,t));break}}}return s})}const $l=new Set([mo.type,yo.type]);class kl{constructor(t,{isCaseSensitive:n=Y.isCaseSensitive,includeMatches:r=Y.includeMatches,minMatchCharLength:s=Y.minMatchCharLength,ignoreLocation:i=Y.ignoreLocation,findAllMatches:o=Y.findAllMatches,location:u=Y.location,threshold:a=Y.threshold,distance:c=Y.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:u,threshold:a,distance:c},this.pattern=n?t:t.toLowerCase(),this.query=Dl(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0,o=[],u=0;for(let a=0,c=n.length;a<c;a+=1){const l=n[a];o.length=0,i=0;for(let f=0,d=l.length;f<d;f+=1){const h=l[f],{isMatch:y,indices:p,score:S}=h.search(t);if(y){if(i+=1,u+=S,r){const b=h.constructor.type;$l.has(b)?o=[...o,...p]:o.push(p)}}else{u=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:u/i};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const xr=[];function Ml(...e){xr.push(...e)}function _r(e,t){for(let n=0,r=xr.length;n<r;n+=1){let s=xr[n];if(s.condition(e,t))return new s(e,t)}return new po(e,t)}const xn={AND:"$and",OR:"$or"},Or={PATH:"$path",PATTERN:"$val"},Ir=e=>!!(e[xn.AND]||e[xn.OR]),jl=e=>!!e[Or.PATH],Ll=e=>!je(e)&&lo(e)&&!Ir(e),ni=e=>({[xn.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function vo(e,t,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=jl(s);if(!o&&i.length>1&&!Ir(s))return r(ni(s));if(Ll(s)){const a=o?s[Or.PATH]:i[0],c=o?s[Or.PATTERN]:s[a];if(!Ce(c))throw new Error(cl(a));const l={keyId:wr(a),pattern:c};return n&&(l.searcher=_r(c,t)),l}let u={children:[],operator:i[0]};return i.forEach(a=>{const c=s[a];je(c)&&c.forEach(l=>{u.children.push(r(l))})}),u};return Ir(e)||(e=ni(e)),r(e)}function Nl(e,{ignoreFieldNorm:t=Y.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const u=s?s.weight:null;r*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(t?1:i))}),n.score=r})}function Bl(e,t){const n=e.matches;t.matches=[],pe(n)&&n.forEach(r=>{if(!pe(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Ul(e,t){t.score=e.score}function Hl(e,t,{includeMatches:n=Y.includeMatches,includeScore:r=Y.includeScore}={}){const s=[];return n&&s.push(Bl),r&&s.push(Ul),e.map(i=>{const{idx:o}=i,u={item:t[o],refIndex:o};return s.length&&s.forEach(a=>{a(i,u)}),u})}class Je{constructor(t,n={},r){this.options={...Y,...n},this.options.useExtendedSearch,this._keyStore=new hl(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Yr))throw new Error(ul);this._myIndex=n||go(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:u}=this.options;let a=Ce(t)?Ce(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Nl(a,{ignoreFieldNorm:u}),i&&a.sort(o),co(n)&&n>-1&&(a=a.slice(0,n)),Hl(a,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=_r(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:u})=>{if(!pe(i))return;const{isMatch:a,score:c,indices:l}=n.searchIn(i);a&&s.push({item:i,idx:o,matches:[{score:c,value:i,norm:u,indices:l}]})}),s}_searchLogical(t){const n=vo(t,this.options),r=(u,a,c)=>{if(!u.children){const{keyId:f,searcher:d}=u,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:d});return h&&h.length?[{idx:c,item:a,matches:h}]:[]}const l=[];for(let f=0,d=u.children.length;f<d;f+=1){const h=u.children[f],y=r(h,a,c);if(y.length)l.push(...y);else if(u.operator===xn.AND)return[]}return l},s=this._myIndex.records,i={},o=[];return s.forEach(({$:u,i:a})=>{if(pe(u)){let c=r(n,u,a);c.length&&(i[a]||(i[a]={idx:a,item:u,matches:[]},o.push(i[a])),c.forEach(({matches:l})=>{i[a].matches.push(...l)}))}}),o}_searchObjectList(t){const n=_r(t,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:u})=>{if(!pe(o))return;let a=[];r.forEach((c,l)=>{a.push(...this._findMatches({key:c,value:o[l],searcher:n}))}),a.length&&i.push({idx:u,item:o,matches:a})}),i}_findMatches({key:t,value:n,searcher:r}){if(!pe(n))return[];let s=[];if(je(n))n.forEach(({v:i,i:o,n:u})=>{if(!pe(i))return;const{isMatch:a,score:c,indices:l}=r.searchIn(i);a&&s.push({score:c,key:t,value:i,idx:o,norm:u,indices:l})});else{const{v:i,n:o}=n,{isMatch:u,score:a,indices:c}=r.searchIn(i);u&&s.push({score:a,key:t,value:i,norm:o,indices:c})}return s}}Je.version="7.0.0";Je.createIndex=go;Je.parseIndex=wl;Je.config=Y;Je.parseQuery=vo;Ml(kl);const bo=.3,Vl=e=>{const n=[...new Set(e.reduce((r,s)=>{const i=s.bodies.filter(o=>o.purpose==="tagging"&&o.value);return[...r,...i.map(o=>o.value)]},[]))].map(r=>({value:r,normalized:Ke.remove(r)}));return new Je(n,{keys:["normalized"],shouldSort:!0,threshold:bo})},ql=()=>fetch("/thesaurus/all-concepts-compact.json").then(e=>e.json()).then(e=>{e.sort();const t=e.map(n=>({value:n,normalized:Ke.remove(n)}));return new Je(t,{keys:["normalized"],shouldSort:!0,threshold:bo})}),Wl=(e,t="THESAURUS")=>{const[n,r]=C.useState(),s=C.useMemo(()=>new Map(e.map(a=>[a.id,a])),[e]);C.useEffect(()=>{if(t==="FROM_ANNOTATIONS"){const a=Vl(e);r(a)}else ql().then(r)},[t,e]);const i=C.useMemo(()=>{const a=e.map(c=>{const l=c.id,f=c.bodies.filter(d=>d.purpose==="tagging"&&d.value).map(d=>({value:d.value,normalized:Ke.remove(d.value)}));return{annotationId:l,tags:f}}).filter(c=>c.tags.length>0);return new Je(a,{keys:["tags.normalized"],shouldSort:!0,threshold:0})},[e]);return{search:(a,c)=>i.search(Ke.remove(a),{limit:c||500}).map(l=>s.get(l.item.annotationId)).filter(Boolean),getSuggestions:(a,c)=>n?n.search(Ke.remove(a),{limit:c||10}).map(l=>l.item.value):[]}},zl=e=>{const t=Xo(),[n,r]=C.useState(!0),{search:s,getSuggestions:i}=Wl(t),[o,u]=C.useState(""),[a,c]=C.useState(),[l,f]=C.useState(0),[d,h]=C.useState(!1),y=Gr([n],{from:{maxWidth:0,opacity:0},enter:{maxWidth:120,opacity:1},leave:{maxWidth:0,opacity:1},config:{duration:250,easing:kn.easeInOutCubic}});C.useEffect(()=>{if(o){const x=s(o);e.sorter&&x.sort(e.sorter),c(x),x.length>0?f(1):f(0),e.onSearch(x)}else c(void 0),f(1),e.onSearch([])},[o,e.sorter]),C.useEffect(()=>{if(!l||!a)return;const x=a[l-1];e.onHighlightResult(x)},[a,l]);const p=x=>{if(!a)return;const E=Math.min(Math.max(1,l+x),a.length);f(E)},S=()=>{u(""),c(void 0),f(1),r(!0),e.onClear()},b=x=>{x.key==="Enter"?d?p(1):h(!0):h(!1)},$=()=>{o||r(!0)};return q.jsxs("div",{className:"annotation-search",children:[q.jsx(gu,{size:20}),q.jsxs("div",{className:"searchbox-wrapper",children:[q.jsx(tl,{placeholder:"Search",value:o,onChange:u,onFocus:()=>r(!1),onBlur:$,onKeyDown:b,getSuggestions:i}),a&&q.jsxs("div",{className:"result-count",children:[l,"/",a.length]})]}),y((x,E)=>!E&&q.jsx(Kr.div,{style:x,className:"collapsible",children:q.jsxs("div",{className:"actions",children:[q.jsx("button",{onClick:()=>p(-1),children:q.jsx(du,{size:18})}),q.jsx("button",{onClick:()=>p(1),children:q.jsx(lu,{size:18})}),q.jsx("button",{onClick:S,children:q.jsx(Tr,{size:18,strokeWidth:2.2})})]})}))]})},id=e=>{const[t,n]=C.useState([]);return C.useEffect(()=>{e.onSearch(t)},[t]),q.jsxs("header",{children:[q.jsxs("div",{className:"header-left",children:[q.jsxs("a",{href:`../..${e.backToTab?`?tab=${e.backToTab}`:""}`,children:[q.jsx(fu,{}),q.jsx("span",{children:"Home"})]}),q.jsx("a",{href:"../../about",children:"About"})]}),q.jsxs("div",{className:"header-right",children:[q.jsx(zl,{sorter:e.searchSorter,onClear:e.onClearSearch,onHighlightResult:e.onHighlightSearchResult,onSearch:n}),q.jsx("button",{className:e.isRelatedVersesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedVerses,children:q.jsx(cu,{size:18})}),q.jsx("button",{className:e.isRelatedImagesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedImages,children:q.jsx(hu,{size:18})})]})]})},So=e=>e.bodies.filter(t=>t.purpose==="tagging"&&t.value&&t.id).map(t=>({id:t.id,label:t.value})),Gl=(e,t)=>{const n=new Set(e.map(o=>o.id)),s=t.map(o=>o.id).filter(o=>n.has(o)),i=new Set([...e,...t]);return s.length/i.size},wo=(e,t)=>{const n=(i,o)=>i.length===o.length&&i.every(u=>o.some(a=>a.id===u.id)),r=i=>{i.sort((o,u)=>u.common.length-o.common.length),i.forEach(o=>o.related.sort((u,a)=>a.score-u.score))},s=[];return t.forEach(i=>{const o=i.tags.filter(c=>e.some(l=>l.id===c.id)),u=Gl(e,i.tags),a=s.find(({common:c})=>n(c,o));a?a.related=[...a.related,{annotation:i,score:u}]:s.push({common:o,related:[{annotation:i,score:u}]})}),r(s),s},od=(e,t)=>{const n=[...e].filter(i=>i.width>0&&i.height>0);let r,s=Number.MAX_VALUE;return n.forEach(i=>{const o=i.top+i.height/2,u=Math.abs(o-t.y);u<s&&(s=u,r=i)}),r},ad=e=>({length:1,item:t=>t===0?e:void 0,[Symbol.iterator]:function*(){for(let t=0;t<this.length;t++)yield this.item(t)}}),Kl=$e.createContext({}),Eo=!0;function Ql({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:s,circle:i,direction:o,duration:u,enableAnimation:a=Eo}){const c={};return o==="rtl"&&(c["--animation-direction"]="reverse"),typeof u=="number"&&(c["--animation-duration"]=`${u}s`),a||(c["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(c.width=n),(typeof r=="string"||typeof r=="number")&&(c.height=r),(typeof s=="string"||typeof s=="number")&&(c.borderRadius=s),i&&(c.borderRadius="50%"),typeof e<"u"&&(c["--base-color"]=e),typeof t<"u"&&(c["--highlight-color"]=t),c}function Yl({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:s,circle:i=!1,style:o,...u}){var a,c,l;const f=$e.useContext(Kl),d={...u};for(const[x,E]of Object.entries(u))typeof E>"u"&&delete d[x];const h={...f,...d,circle:i},y={...o,...Ql(h)};let p="react-loading-skeleton";n&&(p+=` ${n}`);const S=(a=h.inline)!==null&&a!==void 0?a:!1,b=[],$=Math.ceil(e);for(let x=0;x<$;x++){let E=y;if($>e&&x===$-1){const M=(c=E.width)!==null&&c!==void 0?c:"100%",N=e%1,_=typeof M=="number"?M*N:`calc(${M} * ${N})`;E={...E,width:_}}const k=$e.createElement("span",{className:p,style:E,key:x},"");S?b.push(k):b.push($e.createElement($e.Fragment,{key:x},k,$e.createElement("br",null)))}return $e.createElement("span",{className:r,"data-testid":s,"aria-live":"polite","aria-busy":(l=h.enableAnimation)!==null&&l!==void 0?l:Eo},t?b.map((x,E)=>$e.createElement(t,{key:E},x)):b)}const Xl=e=>{const[t,n]=C.useState(!1);return q.jsxs("div",{className:"thumbnail-wrapper",children:[!t&&q.jsx(Yl,{}),q.jsx("img",{src:e.src,style:{display:t?void 0:"none"},onLoad:()=>n(!0)})]})},ud=e=>{const[t,n]=C.useState(!1),r=xi(),s=C.useMemo(()=>e.annotation?So(e.annotation):[],[e.annotation]),i=C.useMemo(()=>wo(s,e.related||[]),[s,e.related]),o=Gr([e.open&&r],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:kn.easeInCubic}});C.useLayoutEffect(()=>{setTimeout(()=>n(!0),1)},[]);const u=a=>a.id?a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/image/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`:a.slug===e.currentSlug?"#":`image/${a.slug}`;return o((a,c)=>c&&q.jsxs(Kr.aside,{style:a,className:"related related-images",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(Tr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Images ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:i.map(l=>l.related.map(({annotation:f})=>q.jsxs("li",{children:[q.jsxs("div",{className:"preview",children:[q.jsx(Xl,{src:f.thumbnail}),q.jsx("div",{className:"taglist-wrapper",children:q.jsx("ul",{className:"taglist",children:f.tags.map(d=>q.jsx("li",{className:s.some(h=>h.id===d.id)?"common":void 0,children:r?.find(h=>h.id===d.id)?.label||d.label},d.id))})})]}),q.jsx("a",{href:u(f),children:f.image})]},f.id)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},Jl=e=>{const{prefix:t,quote:n,suffix:r}=e.value,[s,i]=C.useMemo(()=>{const u=t&&(t.endsWith("|")?t:t+" "),a=r&&(r?.startsWith("|")?r:" "+r);return[u,a]},[t,n,r]),o=u=>u.replace(/\|/g,"|&#8203;");return q.jsxs(q.Fragment,{children:[s&&q.jsx("span",{dangerouslySetInnerHTML:{__html:o(s)}}),q.jsx("a",{href:e.href,className:"verse-snippet-quote",dangerouslySetInnerHTML:{__html:o(n)}}),i&&q.jsx("span",{dangerouslySetInnerHTML:{__html:o(i)}})]})},cd=e=>{const t=xi(),[n,r]=C.useState(!1),s=C.useMemo(()=>e.annotation?So(e.annotation):[],[e.annotation]),i=C.useMemo(()=>wo(s,e.related||[]),[s,e.related]),o=Gr([e.open],{from:{width:n?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:kn.easeInCubic}});C.useLayoutEffect(()=>{setTimeout(()=>r(!0),10)},[]);const u=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/verse/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return o((a,c)=>c&&q.jsxs(Kr.aside,{style:a,className:"related related-verses",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(Tr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Verses ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:i.map(l=>l.related.map(({annotation:f})=>q.jsxs("li",{children:[q.jsx("ul",{className:"taglist",children:f.tags.map(d=>q.jsx("li",{className:s.some(h=>h.id===d.id)?"common":void 0,children:t?.find(h=>h.id===d.id)?.label||d.label},d.id))}),f.snippet&&q.jsx("p",{className:"snippet-preview",children:q.jsx(Jl,{value:f.snippet,href:u(f)})}),q.jsx("a",{href:u(f),children:f.verse})]},f.id)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},ld=e=>{const t=e.relatedImages.length,n=e.relatedVerses.length,r=C.useMemo(()=>e.annotation.bodies.filter(s=>s.purpose==="tagging"),[e.annotation]);return q.jsx("div",{className:"annotation-popup",children:q.jsxs("div",{className:"tags",children:[q.jsx("div",{children:r.map(s=>s.value).join("  ")}),e.type==="VERSE"?q.jsxs("div",{className:"related",children:[n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," other verse",n>1&&"s"]})}),t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," image",t>1&&"s"]})})]}):q.jsxs("div",{className:"related",children:[t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," other image",t>1&&"s"]})}),n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," verse",n>1&&"s"]})})]})]})})};function xt(e){return xo(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ue(e){var t;return(t=(xo(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xo(e){return e instanceof Node||e instanceof me(e).Node}function le(e){return e instanceof Element||e instanceof me(e).Element}function Fe(e){return e instanceof HTMLElement||e instanceof me(e).HTMLElement}function ri(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}function Jt(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=we(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Zl(e){return["table","td","th"].includes(xt(e))}function Hn(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Xr(e){const t=Jr(),n=le(e)?we(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ef(e){let t=Qe(e);for(;Fe(t)&&!St(t);){if(Xr(t))return t;if(Hn(t))return null;t=Qe(t)}return null}function Jr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function St(e){return["html","body","#document"].includes(xt(e))}function we(e){return me(e).getComputedStyle(e)}function Vn(e){return le(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qe(e){if(xt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ri(e)&&e.host||Ue(e);return ri(t)?t.host:t}function _o(e){const t=Qe(e);return St(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fe(t)&&Jt(t)?t:_o(t)}function Gt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=_o(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=me(s);if(i){const u=Ar(o);return t.concat(o,o.visualViewport||[],Jt(s)?s:[],u&&n?Gt(u):[])}return t.concat(s,Gt(s,[],n))}function Ar(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Le=Math.min,Pe=Math.max,_n=Math.round,ln=Math.floor,Ye=e=>({x:e,y:e}),tf={left:"right",right:"left",bottom:"top",top:"bottom"},nf={start:"end",end:"start"};function Cr(e,t,n){return Pe(e,Le(t,n))}function _t(e,t){return typeof e=="function"?e(t):e}function Ne(e){return e.split("-")[0]}function Zt(e){return e.split("-")[1]}function Oo(e){return e==="x"?"y":"x"}function Zr(e){return e==="y"?"height":"width"}function st(e){return["top","bottom"].includes(Ne(e))?"y":"x"}function es(e){return Oo(st(e))}function rf(e,t,n){n===void 0&&(n=!1);const r=Zt(e),s=es(e),i=Zr(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=On(o)),[o,On(o)]}function sf(e){const t=On(e);return[Pr(e),t,Pr(t)]}function Pr(e){return e.replace(/start|end/g,t=>nf[t])}function of(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function af(e,t,n,r){const s=Zt(e);let i=of(Ne(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Pr)))),i}function On(e){return e.replace(/left|right|bottom|top/g,t=>tf[t])}function uf(e){return{top:0,right:0,bottom:0,left:0,...e}}function ts(e){return typeof e!="number"?uf(e):{top:e,right:e,bottom:e,left:e}}function wt(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function si(e,t,n){let{reference:r,floating:s}=e;const i=st(t),o=es(t),u=Zr(o),a=Ne(t),c=i==="y",l=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,d=r[u]/2-s[u]/2;let h;switch(a){case"top":h={x:l,y:r.y-s.height};break;case"bottom":h={x:l,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-s.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Zt(t)){case"start":h[o]-=d*(n&&c?-1:1);break;case"end":h[o]+=d*(n&&c?-1:1);break}return h}const cf=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,u=i.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:l,y:f}=si(c,r,a),d=r,h={},y=0;for(let p=0;p<u.length;p++){const{name:S,fn:b}=u[p],{x:$,y:x,data:E,reset:k}=await b({x:l,y:f,initialPlacement:r,placement:d,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});l=$??l,f=x??f,h={...h,[S]:{...h[S],...E}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(d=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:l,y:f}=si(c,d,a)),p=-1)}return{x:l,y:f,placement:d,strategy:s,middlewareData:h}};async function Io(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:u,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:l="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_t(t,e),y=ts(h),S=u[d?f==="floating"?"reference":"floating":f],b=wt(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:c,rootBoundary:l,strategy:a})),$=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),E=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},k=wt(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:$,offsetParent:x,strategy:a}):$);return{top:(b.top-k.top+y.top)/E.y,bottom:(k.bottom-b.bottom+y.bottom)/E.y,left:(b.left-k.left+y.left)/E.x,right:(k.right-b.right+y.right)/E.x}}const lf=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:u,middlewareData:a}=t,{element:c,padding:l=0}=_t(e,t)||{};if(c==null)return{};const f=ts(l),d={x:n,y:r},h=es(s),y=Zr(h),p=await o.getDimensions(c),S=h==="y",b=S?"top":"left",$=S?"bottom":"right",x=S?"clientHeight":"clientWidth",E=i.reference[y]+i.reference[h]-d[h]-i.floating[y],k=d[h]-i.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let N=M?M[x]:0;(!N||!await(o.isElement==null?void 0:o.isElement(M)))&&(N=u.floating[x]||i.floating[y]);const _=E/2-k/2,v=N/2-p[y]/2-1,w=Le(f[b],v),P=Le(f[$],v),D=w,L=N-p[y]-P,j=N/2-p[y]/2+_,H=Cr(D,j,L),K=!a.arrow&&Zt(s)!=null&&j!==H&&i.reference[y]/2-(j<D?w:P)-p[y]/2<0,W=K?j<D?j-D:j-L:0;return{[h]:d[h]+W,data:{[h]:H,centerOffset:j-H-W,...K&&{alignmentOffset:W}},reset:K}}}),ff=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:u,platform:a,elements:c}=t,{mainAxis:l=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:p=!0,...S}=_t(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Ne(s),$=st(u),x=Ne(u)===u,E=await(a.isRTL==null?void 0:a.isRTL(c.floating)),k=d||(x||!p?[On(u)]:sf(u)),M=y!=="none";!d&&M&&k.push(...af(u,p,y,E));const N=[u,...k],_=await Io(t,S),v=[];let w=((r=i.flip)==null?void 0:r.overflows)||[];if(l&&v.push(_[b]),f){const j=rf(s,o,E);v.push(_[j[0]],_[j[1]])}if(w=[...w,{placement:s,overflows:v}],!v.every(j=>j<=0)){var P,D;const j=(((P=i.flip)==null?void 0:P.index)||0)+1,H=N[j];if(H)return{data:{index:j,overflows:w},reset:{placement:H}};let K=(D=w.filter(W=>W.overflows[0]<=0).sort((W,O)=>W.overflows[1]-O.overflows[1])[0])==null?void 0:D.placement;if(!K)switch(h){case"bestFit":{var L;const W=(L=w.filter(O=>{if(M){const m=st(O.placement);return m===$||m==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(m=>m>0).reduce((m,I)=>m+I,0)]).sort((O,m)=>O[1]-m[1])[0])==null?void 0:L[0];W&&(K=W);break}case"initialPlacement":K=u;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function Ao(e){const t=Le(...e.map(i=>i.left)),n=Le(...e.map(i=>i.top)),r=Pe(...e.map(i=>i.right)),s=Pe(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:s-n}}function df(e){const t=e.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<t.length;s++){const i=t[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>wt(Ao(s)))}const hf=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=t,{padding:u=2,x:a,y:c}=_t(e,t),l=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),f=df(l),d=wt(Ao(l)),h=ts(u);function y(){if(f.length===2&&f[0].left>f[1].right&&a!=null&&c!=null)return f.find(S=>a>S.left-h.left&&a<S.right+h.right&&c>S.top-h.top&&c<S.bottom+h.bottom)||d;if(f.length>=2){if(st(n)==="y"){const w=f[0],P=f[f.length-1],D=Ne(n)==="top",L=w.top,j=P.bottom,H=D?w.left:P.left,K=D?w.right:P.right,W=K-H,O=j-L;return{top:L,bottom:j,left:H,right:K,width:W,height:O,x:H,y:L}}const S=Ne(n)==="left",b=Pe(...f.map(w=>w.right)),$=Le(...f.map(w=>w.left)),x=f.filter(w=>S?w.left===$:w.right===b),E=x[0].top,k=x[x.length-1].bottom,M=$,N=b,_=N-M,v=k-E;return{top:E,bottom:k,left:M,right:N,width:_,height:v,x:M,y:E}}return d}const p=await i.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:o});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function gf(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ne(n),u=Zt(n),a=st(n)==="y",c=["left","top"].includes(o)?-1:1,l=i&&a?-1:1,f=_t(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return u&&typeof y=="number"&&(h=u==="end"?y*-1:y),a?{x:h*l,y:d*c}:{x:d*c,y:h*l}}const pf=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:u}=t,a=await gf(t,e);return o===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+a.x,y:i+a.y,data:{...a,placement:o}}}}},mf=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:u={fn:S=>{let{x:b,y:$}=S;return{x:b,y:$}}},...a}=_t(e,t),c={x:n,y:r},l=await Io(t,a),f=st(Ne(s)),d=Oo(f);let h=c[d],y=c[f];if(i){const S=d==="y"?"top":"left",b=d==="y"?"bottom":"right",$=h+l[S],x=h-l[b];h=Cr($,h,x)}if(o){const S=f==="y"?"top":"left",b=f==="y"?"bottom":"right",$=y+l[S],x=y-l[b];y=Cr($,y,x)}const p=u.fn({...t,[d]:h,[f]:y});return{...p,data:{x:p.x-n,y:p.y-r}}}}};function Co(e){const t=we(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Fe(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,u=_n(n)!==i||_n(r)!==o;return u&&(n=i,r=o),{width:n,height:r,$:u}}function ns(e){return le(e)?e:e.contextElement}function yt(e){const t=ns(e);if(!Fe(t))return Ye(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Co(t);let o=(i?_n(n.width):n.width)/r,u=(i?_n(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!u||!Number.isFinite(u))&&(u=1),{x:o,y:u}}const yf=Ye(0);function Po(e){const t=me(e);return!Jr()||!t.visualViewport?yf:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vf(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function it(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=ns(e);let o=Ye(1);t&&(r?le(r)&&(o=yt(r)):o=yt(e));const u=vf(i,n,r)?Po(i):Ye(0);let a=(s.left+u.x)/o.x,c=(s.top+u.y)/o.y,l=s.width/o.x,f=s.height/o.y;if(i){const d=me(i),h=r&&le(r)?me(r):r;let y=d,p=Ar(y);for(;p&&r&&h!==y;){const S=yt(p),b=p.getBoundingClientRect(),$=we(p),x=b.left+(p.clientLeft+parseFloat($.paddingLeft))*S.x,E=b.top+(p.clientTop+parseFloat($.paddingTop))*S.y;a*=S.x,c*=S.y,l*=S.x,f*=S.y,a+=x,c+=E,y=me(p),p=Ar(y)}}return wt({width:l,height:f,x:a,y:c})}function bf(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Ue(r),u=t?Hn(t.floating):!1;if(r===o||u&&i)return n;let a={scrollLeft:0,scrollTop:0},c=Ye(1);const l=Ye(0),f=Fe(r);if((f||!f&&!i)&&((xt(r)!=="body"||Jt(o))&&(a=Vn(r)),Fe(r))){const d=it(r);c=yt(r),l.x=d.x+r.clientLeft,l.y=d.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+l.x,y:n.y*c.y-a.scrollTop*c.y+l.y}}function Sf(e){return Array.from(e.getClientRects())}function Ro(e){return it(Ue(e)).left+Vn(e).scrollLeft}function wf(e){const t=Ue(e),n=Vn(e),r=e.ownerDocument.body,s=Pe(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Pe(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ro(e);const u=-n.scrollTop;return we(r).direction==="rtl"&&(o+=Pe(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:u}}function Ef(e,t){const n=me(e),r=Ue(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,u=0,a=0;if(s){i=s.width,o=s.height;const c=Jr();(!c||c&&t==="fixed")&&(u=s.offsetLeft,a=s.offsetTop)}return{width:i,height:o,x:u,y:a}}function xf(e,t){const n=it(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Fe(e)?yt(e):Ye(1),o=e.clientWidth*i.x,u=e.clientHeight*i.y,a=s*i.x,c=r*i.y;return{width:o,height:u,x:a,y:c}}function ii(e,t,n){let r;if(t==="viewport")r=Ef(e,n);else if(t==="document")r=wf(Ue(e));else if(le(t))r=xf(t,n);else{const s=Po(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return wt(r)}function Fo(e,t){const n=Qe(e);return n===t||!le(n)||St(n)?!1:we(n).position==="fixed"||Fo(n,t)}function _f(e,t){const n=t.get(e);if(n)return n;let r=Gt(e,[],!1).filter(u=>le(u)&&xt(u)!=="body"),s=null;const i=we(e).position==="fixed";let o=i?Qe(e):e;for(;le(o)&&!St(o);){const u=we(o),a=Xr(o);!a&&u.position==="fixed"&&(s=null),(i?!a&&!s:!a&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Jt(o)&&!a&&Fo(e,o))?r=r.filter(l=>l!==o):s=u,o=Qe(o)}return t.set(e,r),r}function Of(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Hn(t)?[]:_f(t,this._c):[].concat(n),r],u=o[0],a=o.reduce((c,l)=>{const f=ii(t,l,s);return c.top=Pe(f.top,c.top),c.right=Le(f.right,c.right),c.bottom=Le(f.bottom,c.bottom),c.left=Pe(f.left,c.left),c},ii(t,u,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function If(e){const{width:t,height:n}=Co(e);return{width:t,height:n}}function Af(e,t,n){const r=Fe(t),s=Ue(t),i=n==="fixed",o=it(e,!0,i,t);let u={scrollLeft:0,scrollTop:0};const a=Ye(0);if(r||!r&&!i)if((xt(t)!=="body"||Jt(s))&&(u=Vn(t)),r){const f=it(t,!0,i,t);a.x=f.x+t.clientLeft,a.y=f.y+t.clientTop}else s&&(a.x=Ro(s));const c=o.left+u.scrollLeft-a.x,l=o.top+u.scrollTop-a.y;return{x:c,y:l,width:o.width,height:o.height}}function ar(e){return we(e).position==="static"}function oi(e,t){return!Fe(e)||we(e).position==="fixed"?null:t?t(e):e.offsetParent}function To(e,t){const n=me(e);if(Hn(e))return n;if(!Fe(e)){let s=Qe(e);for(;s&&!St(s);){if(le(s)&&!ar(s))return s;s=Qe(s)}return n}let r=oi(e,t);for(;r&&Zl(r)&&ar(r);)r=oi(r,t);return r&&St(r)&&ar(r)&&!Xr(r)?n:r||ef(e)||n}const Cf=async function(e){const t=this.getOffsetParent||To,n=this.getDimensions,r=await n(e.floating);return{reference:Af(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Pf(e){return we(e).direction==="rtl"}const Rf={convertOffsetParentRelativeRectToViewportRelativeRect:bf,getDocumentElement:Ue,getClippingRect:Of,getOffsetParent:To,getElementRects:Cf,getClientRects:Sf,getDimensions:If,getScale:yt,isElement:le,isRTL:Pf};function Ff(e,t){let n=null,r;const s=Ue(e);function i(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function o(u,a){u===void 0&&(u=!1),a===void 0&&(a=1),i();const{left:c,top:l,width:f,height:d}=e.getBoundingClientRect();if(u||t(),!f||!d)return;const h=ln(l),y=ln(s.clientWidth-(c+f)),p=ln(s.clientHeight-(l+d)),S=ln(c),$={rootMargin:-h+"px "+-y+"px "+-p+"px "+-S+"px",threshold:Pe(0,Le(1,a))||1};let x=!0;function E(k){const M=k[0].intersectionRatio;if(M!==a){if(!x)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(E,{...$,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,$)}n.observe(e)}return o(!0),i}function fd(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,c=ns(e),l=s||i?[...c?Gt(c):[],...Gt(t)]:[];l.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=c&&u?Ff(c,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(b=>{let[$]=b;$&&$.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),c&&!a&&h.observe(c),h.observe(t));let y,p=a?it(e):null;a&&S();function S(){const b=it(e);p&&(b.x!==p.x||b.y!==p.y||b.width!==p.width||b.height!==p.height)&&n(),p=b,y=requestAnimationFrame(S)}return n(),()=>{var b;l.forEach($=>{s&&$.removeEventListener("scroll",n),i&&$.removeEventListener("resize",n)}),f?.(),(b=h)==null||b.disconnect(),h=null,a&&cancelAnimationFrame(y)}}const Tf=pf,Df=mf,$f=ff,ai=lf,kf=hf,Mf=(e,t,n)=>{const r=new Map,s={platform:Rf,...n},i={...s.platform,_c:r};return cf(e,t,{...s,platform:i})};var pn=typeof document<"u"?C.useLayoutEffect:C.useEffect;function In(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!In(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!In(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Do(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ui(e,t){const n=Do(e);return Math.round(t*n)/n}function ci(e){const t=C.useRef(e);return pn(()=>{t.current=e}),t}function jf(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:u=!0,whileElementsMounted:a,open:c}=e,[l,f]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=C.useState(r);In(d,r)||h(r);const[y,p]=C.useState(null),[S,b]=C.useState(null),$=C.useCallback(W=>{W!==M.current&&(M.current=W,p(W))},[]),x=C.useCallback(W=>{W!==N.current&&(N.current=W,b(W))},[]),E=i||y,k=o||S,M=C.useRef(null),N=C.useRef(null),_=C.useRef(l),v=a!=null,w=ci(a),P=ci(s),D=C.useCallback(()=>{if(!M.current||!N.current)return;const W={placement:t,strategy:n,middleware:d};P.current&&(W.platform=P.current),Mf(M.current,N.current,W).then(O=>{const m={...O,isPositioned:!0};L.current&&!In(_.current,m)&&(_.current=m,di.flushSync(()=>{f(m)}))})},[d,t,n,P]);pn(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(W=>({...W,isPositioned:!1})))},[c]);const L=C.useRef(!1);pn(()=>(L.current=!0,()=>{L.current=!1}),[]),pn(()=>{if(E&&(M.current=E),k&&(N.current=k),E&&k){if(w.current)return w.current(E,k,D);D()}},[E,k,D,w,v]);const j=C.useMemo(()=>({reference:M,floating:N,setReference:$,setFloating:x}),[$,x]),H=C.useMemo(()=>({reference:E,floating:k}),[E,k]),K=C.useMemo(()=>{const W={position:n,left:0,top:0};if(!H.floating)return W;const O=ui(H.floating,l.x),m=ui(H.floating,l.y);return u?{...W,transform:"translate("+O+"px, "+m+"px)",...Do(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:m}},[n,u,H.floating,l.x,l.y]);return C.useMemo(()=>({...l,update:D,refs:j,elements:H,floatingStyles:K}),[l,D,j,H,K])}const Lf=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ai({element:r.current,padding:s}).fn(n):{}:r?ai({element:r,padding:s}).fn(n):{}}}},dd=(e,t)=>({...Tf(e),options:[e,t]}),hd=(e,t)=>({...Df(e),options:[e,t]}),gd=(e,t)=>({...$f(e),options:[e,t]}),pd=(e,t)=>({...kf(e),options:[e,t]}),md=(e,t)=>({...Lf(e),options:[e,t]}),$o={...Ho},Nf=$o.useInsertionEffect,Bf=Nf||(e=>e());function Uf(e){const t=C.useRef(()=>{});return Bf(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var An=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Rr(){return Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rr.apply(this,arguments)}let li=!1,Hf=0;const fi=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Hf++;function Vf(){const[e,t]=C.useState(()=>li?fi():void 0);return An(()=>{e==null&&t(fi())},[]),C.useEffect(()=>{li=!0},[]),e}const qf=$o.useId,ko=qf||Vf,yd=C.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:u=14,height:a=7,tipRadius:c=0,strokeWidth:l=0,staticOffset:f,stroke:d,d:h,style:{transform:y,...p}={},...S}=t,b=ko(),[$,x]=C.useState(!1);if(An(()=>{if(!s)return;we(s).direction==="rtl"&&x(!0)},[s]),!s)return null;const[E,k]=r.split("-"),M=E==="top"||E==="bottom";let N=f;(M&&o!=null&&o.x||!M&&o!=null&&o.y)&&(N=null);const _=l*2,v=_/2,w=u/2*(c/-8+1),P=a/2*c/4,D=!!h,L=N&&k==="end"?"bottom":"top";let j=N&&k==="end"?"right":"left";N&&$&&(j=k==="end"?"left":"right");const H=i?.x!=null?N||i.x:"",K=i?.y!=null?N||i.y:"",W=h||"M0,0"+(" H"+u)+(" L"+(u-w)+","+(a-P))+(" Q"+u/2+","+a+" "+w+","+(a-P))+" Z",O={top:D?"rotate(180deg)":"",left:D?"rotate(90deg)":"rotate(-90deg)",bottom:D?"":"rotate(180deg)",right:D?"rotate(-90deg)":"rotate(90deg)"}[E];return C.createElement("svg",Rr({},S,{"aria-hidden":!0,ref:n,width:D?u:u+_,height:u,viewBox:"0 0 "+u+" "+(a>u?a:u),style:{position:"absolute",pointerEvents:"none",[j]:H,[L]:K,[E]:M||D?"100%":"calc(100% - "+_/2+"px)",transform:""+O+(y??""),...p}}),_>0&&C.createElement("path",{clipPath:"url(#"+b+")",fill:"none",stroke:d,strokeWidth:_+(h?0:1),d:W}),C.createElement("path",{stroke:_&&!h?S.fill:"none",d:W}),C.createElement("clipPath",{id:b},C.createElement("rect",{x:-v,y:v*(D?-1:1),width:u+_,height:u})))});function Wf(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const zf=C.createContext(null),Gf=C.createContext(null),Kf=()=>{var e;return((e=C.useContext(zf))==null?void 0:e.id)||null},Qf=()=>C.useContext(Gf);function Yf(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=ko(),i=C.useRef({}),[o]=C.useState(()=>Wf()),u=Kf()!=null,[a,c]=C.useState(r.reference),l=Uf((h,y,p)=>{i.current.openEvent=h?y:void 0,o.emit("openchange",{open:h,event:y,reason:p,nested:u}),n?.(h,y,p)}),f=C.useMemo(()=>({setPositionReference:c}),[]),d=C.useMemo(()=>({reference:a||r.reference||null,floating:r.floating||null,domReference:r.reference}),[a,r.reference,r.floating]);return C.useMemo(()=>({dataRef:i,open:t,onOpenChange:l,elements:d,events:o,floatingId:s,refs:f}),[t,l,d,o,s,f])}function vd(e){e===void 0&&(e={});const{nodeId:t}=e,n=Yf({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=C.useState(null),[u,a]=C.useState(null),l=s?.reference||i,f=C.useRef(null),d=Qf();An(()=>{l&&(f.current=l)},[l]);const h=jf({...e,elements:{...s,...u&&{reference:u}}}),y=C.useCallback(x=>{const E=le(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;a(E),h.refs.setReference(E)},[h.refs]),p=C.useCallback(x=>{(le(x)||x===null)&&(f.current=x,o(x)),(le(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!le(x))&&h.refs.setReference(x)},[h.refs]),S=C.useMemo(()=>({...h.refs,setReference:p,setPositionReference:y,domReference:f}),[h.refs,p,y]),b=C.useMemo(()=>({...h.elements,domReference:l}),[h.elements,l]),$=C.useMemo(()=>({...h,...r,refs:S,elements:b,nodeId:t}),[h,S,b,t,r]);return An(()=>{r.dataRef.current.floatingContext=$;const x=d?.nodesRef.current.find(E=>E.id===t);x&&(x.context=$)}),C.useMemo(()=>({...h,context:$,refs:S,elements:b}),[h,S,b,$])}export{ld as A,yd as F,ed as H,Zf as K,Qo as L,id as P,cd as R,Wo as Z,md as a,fd as b,Cn as c,iu as d,rd as e,gd as f,td as g,nd as h,pd as i,sd as j,ud as k,od as l,qo as m,dd as o,hd as s,ad as t,vd as u};
