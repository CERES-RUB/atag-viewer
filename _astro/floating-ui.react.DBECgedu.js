import{R as ke,r as C,a as bi,g as Yo,b as Xo}from"./index.DL6A1vOd.js";import{c as at,j as q}from"./createLucideIcon.lZS1BC8a.js";var Si={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss;function Jo(){if(Ss)return It;Ss=1;var e=ke,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,a,c){var l,f={},d=null,h=null;c!==void 0&&(d=""+c),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(h=a.ref);for(l in a)r.call(a,l)&&!i.hasOwnProperty(l)&&(f[l]=a[l]);if(u&&u.defaultProps)for(l in a=u.defaultProps,a)f[l]===void 0&&(f[l]=a[l]);return{$$typeof:t,type:u,key:d,ref:h,props:f,_owner:s.current}}return It.Fragment=n,It.jsx=o,It.jsxs=o,It}Si.exports=Jo();var Zo=Si.exports,ea=(e=>(e.EDIT="EDIT",e.SELECT="SELECT",e.NONE="NONE",e))(ea||{}),ta=[];for(var Xn=0;Xn<256;++Xn)ta.push((Xn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const na="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ra=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=na[n[e]&63];return t};ra();const Pn=C.createContext({anno:void 0,setAnno:void 0,annotations:[],selection:{selected:[]}}),Jf=C.forwardRef((e,t)=>{const[n,r]=C.useState(null),[s,i]=C.useState([]),[o,u]=C.useState({selected:[]});return C.useImperativeHandle(t,()=>n),C.useEffect(()=>{if(n){const{selection:a,store:c}=n.state;c.all().length>0&&i(c.all());const l=()=>i(()=>c.all());c.observe(l);let f;const d=a.subscribe(({selected:h,...m})=>{f&&c.unobserve(f);const p=(h||[]).map(({id:S,editable:v})=>({annotation:c.getAnnotation(S),editable:v}));u({selected:p,...m}),f=S=>{const{updated:v}=S.changes;u(P=>({...P,selected:P.selected.map(({annotation:w,editable:E})=>{const $=v.find(M=>M.oldValue.id===w.id);return $?{annotation:$.newValue,editable:E}:{annotation:w,editable:E}})}))},c.observe(f,{annotations:h.map(({id:S})=>S)})});return()=>{c.unobserve(l),d()}}},[n]),Zo.jsx(Pn.Provider,{value:{anno:n,setAnno:r,annotations:s,selection:o},children:e.children})}),sa=()=>{const{anno:e}=C.useContext(Pn);return e},ia=()=>{const{annotations:e}=C.useContext(Pn);return e},oa=e=>ia(),aa=()=>{const{selection:e}=C.useContext(Pn);return e};var ua=Object.defineProperty,ca=(e,t,n)=>t in e?ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ws=(e,t,n)=>ca(e,typeof t!="symbol"?t+"":t,n);function jt(){}function fr(e,t){for(const n in t)e[n]=t[n];return e}function wi(e){return e()}function Es(){return Object.create(null)}function Ue(e){e.forEach(wi)}function ue(e){return typeof e=="function"}function Rn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function la(e){return Object.keys(e).length===0}function fa(e,t,n,r){if(e){const s=Ei(e,t,n,r);return e[0](s)}}function Ei(e,t,n,r){return e[1]&&r?fr(n.ctx.slice(),e[1](r(t))):n.ctx}function da(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(t.dirty.length,s.length);for(let u=0;u<o;u+=1)i[u]=t.dirty[u]|s[u];return i}return t.dirty|s}return t.dirty}function ha(e,t,n,r,s,i){if(s){const o=Ei(t,n,r,i);e.p(o,s)}}function ga(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function xs(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function vn(e){return e??""}function _s(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function pa(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function xi(e){return document.createTextNode(e)}function Ee(){return xi(" ")}function _i(){return xi("")}function ae(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function U(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ma(e){return Array.from(e.childNodes)}function Os(e,t,n){e.classList.toggle(t,!!n)}function ya(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Nt;function Tt(e){Nt=e}function va(){if(!Nt)throw new Error("Function called outside component initialization");return Nt}function ba(){const e=va();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=ya(t,n,{cancelable:r});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function je(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const ht=[],Is=[];let gt=[];const As=[],Sa=Promise.resolve();let dr=!1;function wa(){dr||(dr=!0,Sa.then(Oi))}function hr(e){gt.push(e)}const Jn=new Set;let ft=0;function Oi(){if(ft!==0)return;const e=Nt;do{try{for(;ft<ht.length;){const t=ht[ft];ft++,Tt(t),Ea(t.$$)}}catch(t){throw ht.length=0,ft=0,t}for(Tt(null),ht.length=0,ft=0;Is.length;)Is.pop()();for(let t=0;t<gt.length;t+=1){const n=gt[t];Jn.has(n)||(Jn.add(n),n())}gt.length=0}while(ht.length);for(;As.length;)As.pop()();dr=!1,Jn.clear(),Tt(e)}function Ea(e){if(e.fragment!==null){e.update(),Ue(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(hr)}}function xa(e){const t=[],n=[];gt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),gt=t}const hn=new Set;let tt;function _a(){tt={r:0,c:[],p:tt}}function Oa(){tt.r||Ue(tt.c),tt=tt.p}function be(e,t){e&&e.i&&(hn.delete(e),e.i(t))}function Ae(e,t,n,r){if(e&&e.o){if(hn.has(e))return;hn.add(e),tt.c.push(()=>{hn.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Cs(e){return e?.length!==void 0?e:Array.from(e)}function nt(e){e&&e.c()}function Ve(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),hr(()=>{const i=e.$$.on_mount.map(wi).filter(ue);e.$$.on_destroy?e.$$.on_destroy.push(...i):Ue(i),e.$$.on_mount=[]}),s.forEach(hr)}function qe(e,t){const n=e.$$;n.fragment!==null&&(xa(n.after_update),Ue(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ia(e,t){e.$$.dirty[0]===-1&&(ht.push(e),wa(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Fn(e,t,n,r,s,i,o=null,u=[-1]){const a=Nt;Tt(e);const c=e.$$={fragment:null,ctx:[],props:i,update:jt,not_equal:s,bound:Es(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Es(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(f,d,...h)=>{const m=h.length?h[0]:d;return c.ctx&&s(c.ctx[f],c.ctx[f]=m)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](m),l&&Ia(e,f)),d}):[],c.update(),l=!0,Ue(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const f=ma(t.target);c.fragment&&c.fragment.l(f),f.forEach(ee)}else c.fragment&&c.fragment.c();t.intro&&be(e.$$.fragment),Ve(e,t.target,t.anchor),Oi()}Tt(a)}class Tn{constructor(){ws(this,"$$"),ws(this,"$$set")}$destroy(){qe(this,1),this.$destroy=jt}$on(t,n){if(!ue(n))return jt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!la(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Aa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Aa);var Se=(e=>(e.ELLIPSE="ELLIPSE",e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(Se||{});const Br=(e,t)=>t,Ii=e=>{let t=1/0,n=1/0,r=-1/0,s=-1/0;return e.forEach(([i,o])=>{t=Math.min(t,i),n=Math.min(n,o),r=Math.max(r,i),s=Math.max(s,o)}),{minX:t,minY:n,maxX:r,maxY:s}},Ca={area:e=>Math.PI*e.geometry.rx*e.geometry.ry,intersects:(e,t,n)=>{const{cx:r,cy:s,rx:i,ry:o}=e.geometry,u=0,a=Math.cos(u),c=Math.sin(u),l=t-r,f=n-s,d=a*l+c*f,h=c*l-a*f;return d*d/(i*i)+h*h/(o*o)<=1}};Br(Se.ELLIPSE,Ca);const Pa={area:e=>{const{points:t}=e.geometry;let n=0,r=t.length-1;for(let s=0;s<t.length;s++)n+=(t[r][0]+t[s][0])*(t[r][1]-t[s][1]),r=s;return Math.abs(.5*n)},intersects:(e,t,n)=>{const{points:r}=e.geometry;let s=!1;for(let i=0,o=r.length-1;i<r.length;o=i++){const u=r[i][0],a=r[i][1],c=r[o][0],l=r[o][1];a>n!=l>n&&t<(c-u)*(n-a)/(l-a)+u&&(s=!s)}return s}};Br(Se.POLYGON,Pa);const Ra={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,n)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&n>=e.geometry.y&&n<=e.geometry.y+e.geometry.h};Br(Se.RECTANGLE,Ra);const Fa=(e,t=!1)=>{const n=typeof e=="string"?e:e.value,r=/^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,s=[...n.matchAll(r)][0],[i,o,u,a,c,l,f]=s;if(o!=="xywh")throw new Error("Unsupported MediaFragment: "+n);if(u&&u!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${u}`);const[d,h,m,p]=[a,c,l,f].map(parseFloat);return{type:Se.RECTANGLE,geometry:{x:d,y:h,w:m,h:p,bounds:{minX:d,minY:t?h-p:h,maxX:d+m,maxY:t?h:h+p}}}},Ta=e=>{const{x:t,y:n,w:r,h:s}=e;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${t},${n},${r},${s}`}},Ai="http://www.w3.org/2000/svg",Ps=e=>{const t=r=>{Array.from(r.attributes).forEach(s=>{s.name.startsWith("on")&&r.removeAttribute(s.name)})},n=e.getElementsByTagName("script");return Array.from(n).reverse().forEach(r=>r.parentNode.removeChild(r)),Array.from(e.querySelectorAll("*")).forEach(t),e},Da=e=>{const t=new XMLSerializer().serializeToString(e.documentElement).replace("<svg>",`<svg xmlns="${Ai}">`);return new DOMParser().parseFromString(t,"image/svg+xml").documentElement},$a=e=>{const t=new DOMParser().parseFromString(e,"image/svg+xml"),n=t.lookupPrefix(Ai),r=t.lookupNamespaceURI(null);return n||r?Ps(t).firstChild:Ps(Da(t)).firstChild},ka=e=>{const[t,n,r]=e.match(/(<polygon points=["|'])([^("|')]*)/)||[],s=r.split(" ").map(i=>i.split(",").map(parseFloat));return{type:Se.POLYGON,geometry:{points:s,bounds:Ii(s)}}},Ma=e=>{const t=$a(e),n=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),s=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry")),o={minX:n-s,minY:r-i,maxX:n+s,maxY:r+i};return{type:Se.ELLIPSE,geometry:{cx:n,cy:r,rx:s,ry:i,bounds:o}}},ja=e=>{const t=typeof e=="string"?e:e.value;if(t.includes("<polygon points="))return ka(t);if(t.includes("<ellipse "))return Ma(t);throw"Unsupported SVG shape: "+t},Na=e=>{let t;if(e.type===Se.POLYGON){const n=e.geometry,{points:r}=n;t=`<svg><polygon points="${r.map(s=>s.join(",")).join(" ")}" /></svg>`}else if(e.type===Se.ELLIPSE){const n=e.geometry;t=`<svg><ellipse cx="${n.cx}" cy="${n.cy}" rx="${n.rx}" ry="${n.ry}" /></svg>`}if(t)return{type:"SvgSelector",value:t};throw`Unsupported shape type: ${e.type}`};var oe=[];for(var Zn=0;Zn<256;++Zn)oe.push((Zn+256).toString(16).slice(1));function Ba(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}var on,La=new Uint8Array(16);function Ua(){if(!on&&(on=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!on))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return on(La)}var Ha=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Rs={randomUUID:Ha};function Va(e,t,n){if(Rs.randomUUID&&!t&&!e)return Rs.randomUUID();e=e||{};var r=e.random||(e.rng||Ua)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ba(r)}var qa=[];for(var er=0;er<256;++er)qa.push((er+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Wa="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let za=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=Wa[n[e]&63];return t};const Ga=e=>{const t=JSON.stringify(e);let n=0;for(let r=0,s=t.length;r<s;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n|=0}return`${n}`},Ci=e=>e?typeof e=="object"?{...e}:e:void 0,Ka=(e,t)=>(Array.isArray(e)?e:[e]).map(n=>{const{id:r,type:s,purpose:i,value:o,created:u,modified:a,creator:c,...l}=n;return{id:r||`temp-${Ga(n)}`,annotation:t,type:s,purpose:i,value:o,creator:Ci(c),created:u?new Date(u):void 0,updated:a?new Date(a):void 0,...l}}),Qa=e=>e.map(t=>{var n;const{annotation:r,created:s,updated:i,...o}=t,u={...o,created:s?.toISOString(),modified:i?.toISOString()};return(n=u.id)!=null&&n.startsWith("temp-")&&delete u.id,u});za();const Zf=(e,t={strict:!0,invertY:!1})=>({parse:n=>Ya(n,t),serialize:n=>Xa(n,e,t)}),Ya=(e,t={strict:!0,invertY:!1})=>{const n=e.id||Va(),{creator:r,created:s,modified:i,body:o,...u}=e,a=Ka(o||[],n),c=Array.isArray(e.target)?e.target[0]:e.target,l=Array.isArray(c.selector)?c.selector[0]:c.selector,f=l?.type==="FragmentSelector"?Fa(l,t.invertY):l?.type==="SvgSelector"?ja(l):void 0;return f||!t.strict?{parsed:{...u,id:n,bodies:a,target:{created:s?new Date(s):void 0,creator:Ci(r),updated:i?new Date(i):void 0,...Array.isArray(u.target)?u.target[0]:u.target,annotation:n,selector:f||l}}}:{error:Error(`Invalid selector: ${JSON.stringify(l)}`)}},Xa=(e,t,n={strict:!0,invertY:!1})=>{const{selector:r,creator:s,created:i,updated:o,updatedBy:u,...a}=e.target;let c;try{c=r.type==Se.RECTANGLE?Ta(r.geometry):Na(r)}catch(f){if(n.strict)throw f;c=r}const l={...e,"@context":"http://www.w3.org/ns/anno.jsonld",id:e.id,type:"Annotation",body:Qa(e.bodies),created:i?.toISOString(),creator:s,modified:o?.toISOString(),target:{...a,source:t,selector:c}};return delete l.bodies,"annotation"in l.target&&delete l.target.annotation,l};function Fs(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Ts(e){let t,n;return t=new Rt({props:{x:e[10][0],y:e[10][1],scale:e[3]}}),t.$on("pointerdown",function(){ue(e[9](`HANDLE-${e[12]}`))&&e[9](`HANDLE-${e[12]}`).apply(this,arguments)}),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,s){e=r;const i={};s&16&&(i.x=e[10][0]),s&16&&(i.y=e[10][1]),s&8&&(i.scale=e[3]),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Ja(e){let t,n,r,s,i,o,u,a,c,l,f,d=Cs(e[4].points),h=[];for(let p=0;p<d.length;p+=1)h[p]=Ts(Fs(e,d,p));const m=p=>Ae(h[p],1,1,()=>{h[p]=null});return{c(){t=ge("polygon"),s=Ee(),i=ge("polygon"),u=Ee();for(let p=0;p<h.length;p+=1)h[p].c();a=_i(),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"points",r=e[4].points.map(Ds).join(" ")),U(i,"class","a9s-inner a9s-shape-handle"),U(i,"style",e[1]),U(i,"points",o=e[4].points.map($s).join(" "))},m(p,S){te(p,t,S),te(p,s,S),te(p,i,S),te(p,u,S);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(p,S);te(p,a,S),c=!0,l||(f=[ae(t,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(i,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)})],l=!0)},p(p,S){if(e=p,(!c||S&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!c||S&16&&r!==(r=e[4].points.map(Ds).join(" ")))&&U(t,"points",r),(!c||S&2)&&U(i,"style",e[1]),(!c||S&16&&o!==(o=e[4].points.map($s).join(" ")))&&U(i,"points",o),S&536){d=Cs(e[4].points);let v;for(v=0;v<d.length;v+=1){const P=Fs(e,d,v);h[v]?(h[v].p(P,S),be(h[v],1)):(h[v]=Ts(P),h[v].c(),be(h[v],1),h[v].m(a.parentNode,a))}for(_a(),v=d.length;v<h.length;v+=1)m(v);Oa()}},i(p){if(!c){for(let S=0;S<d.length;S+=1)be(h[S]);c=!0}},o(p){h=h.filter(Boolean);for(let S=0;S<h.length;S+=1)Ae(h[S]);c=!1},d(p){p&&(ee(t),ee(s),ee(i),ee(u),ee(a)),pa(h,p),l=!1,Ue(f)}}}function Za(e){let t,n;return t=new Pi({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Ja,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("change",e[6]),t.$on("grab",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&8730&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}const Ds=e=>e.join(","),$s=e=>e.join(",");function eu(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:u=1}=t;const a=(d,h,m)=>{let p;const S=d.geometry;h==="SHAPE"?p=S.points.map(([P,w])=>[P+m[0],w+m[1]]):p=S.points.map(([P,w],E)=>h===`HANDLE-${E}`?[P+m[0],w+m[1]]:[P,w]);const v=Ii(p);return{...d,geometry:{points:p,bounds:v}}};function c(d){je.call(this,e,d)}function l(d){je.call(this,e,d)}function f(d){je.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,u=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,u,r,a,c,l,f]}class tu extends Tn{constructor(t){super(),Fn(this,t,eu,Za,Rn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}const nu=typeof window>"u"||typeof navigator>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function ru(e){let t,n,r,s,i,o;return{c(){t=ge("rect"),U(t,"class",n=vn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(t,"x",r=e[0]-e[5]/2),U(t,"y",s=e[1]-e[5]/2),U(t,"width",e[5]),U(t,"height",e[5])},m(u,a){te(u,t,a),i||(o=ae(t,"pointerdown",e[11]),i=!0)},p(u,a){a&256&&n!==(n=vn(`a9s-handle ${u[8].class||""}`.trim())+" svelte-1sgkh33")&&U(t,"class",n),a&33&&r!==(r=u[0]-u[5]/2)&&U(t,"x",r),a&34&&s!==(s=u[1]-u[5]/2)&&U(t,"y",s),a&32&&U(t,"width",u[5]),a&32&&U(t,"height",u[5])},d(u){u&&ee(t),i=!1,o()}}}function su(e){let t,n,r,s,i,o,u,a,c;return{c(){t=ge("g"),n=ge("circle"),s=ge("rect"),U(n,"cx",e[0]),U(n,"cy",e[1]),U(n,"r",r=e[3]/e[2]),U(n,"class","a9s-touch-halo svelte-1sgkh33"),Os(n,"touched",e[4]),U(s,"class",i=vn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(s,"x",o=e[0]-e[5]/2),U(s,"y",u=e[1]-e[5]/2),U(s,"width",e[5]),U(s,"height",e[5]),U(t,"class","a9s-touch-handle")},m(l,f){te(l,t,f),_s(t,n),_s(t,s),a||(c=[ae(n,"pointerdown",e[10]),ae(n,"pointerdown",e[6]),ae(n,"pointerup",e[7]),ae(s,"pointerdown",e[9]),ae(s,"pointerdown",e[6]),ae(s,"pointerup",e[7])],a=!0)},p(l,f){f&1&&U(n,"cx",l[0]),f&2&&U(n,"cy",l[1]),f&12&&r!==(r=l[3]/l[2])&&U(n,"r",r),f&16&&Os(n,"touched",l[4]),f&256&&i!==(i=vn(`a9s-handle ${l[8].class||""}`.trim())+" svelte-1sgkh33")&&U(s,"class",i),f&33&&o!==(o=l[0]-l[5]/2)&&U(s,"x",o),f&34&&u!==(u=l[1]-l[5]/2)&&U(s,"y",u),f&32&&U(s,"width",l[5]),f&32&&U(s,"height",l[5])},d(l){l&&ee(t),a=!1,Ue(c)}}}function iu(e){let t;function n(s,i){return nu?su:ru}let r=n()(e);return{c(){r.c(),t=_i()},m(s,i){r.m(s,i),te(s,t,i)},p(s,[i]){r.p(s,i)},i:jt,o:jt,d(s){s&&ee(t),r.d(s)}}}function ou(e,t,n){let r,{x:s}=t,{y:i}=t,{scale:o}=t,{radius:u=30}=t,a=!1;const c=m=>{m.pointerType==="touch"&&n(4,a=!0)},l=()=>n(4,a=!1);function f(m){je.call(this,e,m)}function d(m){je.call(this,e,m)}function h(m){je.call(this,e,m)}return e.$$set=m=>{n(8,t=fr(fr({},t),xs(m))),"x"in m&&n(0,s=m.x),"y"in m&&n(1,i=m.y),"scale"in m&&n(2,o=m.scale),"radius"in m&&n(3,u=m.radius)},e.$$.update=()=>{e.$$.dirty&4&&n(5,r=10/o)},t=xs(t),[s,i,o,u,a,r,c,l,t,f,d,h]}class Rt extends Tn{constructor(t){super(),Fn(this,t,ou,iu,Rn,{x:0,y:1,scale:2,radius:3})}}function au(e){let t,n,r,s,i,o,u,a,c,l,f,d,h,m,p,S,v,P,w,E,$,M,B,O,b,x,R,k,N,j,V,G,K,_,y,I,F,g,A,T,D,z,Q;return _=new Rt({props:{class:"a9s-corner-handle-topleft",x:e[4].x,y:e[4].y,scale:e[3]}}),_.$on("pointerdown",function(){ue(e[9]("TOP_LEFT"))&&e[9]("TOP_LEFT").apply(this,arguments)}),I=new Rt({props:{class:"a9s-corner-handle-topright",x:e[4].x+e[4].w,y:e[4].y,scale:e[3]}}),I.$on("pointerdown",function(){ue(e[9]("TOP_RIGHT"))&&e[9]("TOP_RIGHT").apply(this,arguments)}),g=new Rt({props:{class:"a9s-corner-handle-bottomright",x:e[4].x+e[4].w,y:e[4].y+e[4].h,scale:e[3]}}),g.$on("pointerdown",function(){ue(e[9]("BOTTOM_RIGHT"))&&e[9]("BOTTOM_RIGHT").apply(this,arguments)}),T=new Rt({props:{class:"a9s-corner-handle-bottomleft",x:e[4].x,y:e[4].y+e[4].h,scale:e[3]}}),T.$on("pointerdown",function(){ue(e[9]("BOTTOM_LEFT"))&&e[9]("BOTTOM_LEFT").apply(this,arguments)}),{c(){t=ge("rect"),u=Ee(),a=ge("rect"),h=Ee(),m=ge("rect"),P=Ee(),w=ge("rect"),B=Ee(),O=ge("rect"),k=Ee(),N=ge("rect"),K=Ee(),nt(_.$$.fragment),y=Ee(),nt(I.$$.fragment),F=Ee(),nt(g.$$.fragment),A=Ee(),nt(T.$$.fragment),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"x",r=e[4].x),U(t,"y",s=e[4].y),U(t,"width",i=e[4].w),U(t,"height",o=e[4].h),U(a,"class","a9s-inner a9s-shape-handle"),U(a,"style",e[1]),U(a,"x",c=e[4].x),U(a,"y",l=e[4].y),U(a,"width",f=e[4].w),U(a,"height",d=e[4].h),U(m,"class","a9s-edge-handle a9s-edge-handle-top"),U(m,"x",p=e[4].x),U(m,"y",S=e[4].y),U(m,"height",1),U(m,"width",v=e[4].w),U(w,"class","a9s-edge-handle a9s-edge-handle-right"),U(w,"x",E=e[4].x+e[4].w),U(w,"y",$=e[4].y),U(w,"height",M=e[4].h),U(w,"width",1),U(O,"class","a9s-edge-handle a9s-edge-handle-bottom"),U(O,"x",b=e[4].x),U(O,"y",x=e[4].y+e[4].h),U(O,"height",1),U(O,"width",R=e[4].w),U(N,"class","a9s-edge-handle a9s-edge-handle-left"),U(N,"x",j=e[4].x),U(N,"y",V=e[4].y),U(N,"height",G=e[4].h),U(N,"width",1)},m(W,H){te(W,t,H),te(W,u,H),te(W,a,H),te(W,h,H),te(W,m,H),te(W,P,H),te(W,w,H),te(W,B,H),te(W,O,H),te(W,k,H),te(W,N,H),te(W,K,H),Ve(_,W,H),te(W,y,H),Ve(I,W,H),te(W,F,H),Ve(g,W,H),te(W,A,H),Ve(T,W,H),D=!0,z||(Q=[ae(t,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(a,"pointerdown",function(){ue(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(m,"pointerdown",function(){ue(e[9]("TOP"))&&e[9]("TOP").apply(this,arguments)}),ae(w,"pointerdown",function(){ue(e[9]("RIGHT"))&&e[9]("RIGHT").apply(this,arguments)}),ae(O,"pointerdown",function(){ue(e[9]("BOTTOM"))&&e[9]("BOTTOM").apply(this,arguments)}),ae(N,"pointerdown",function(){ue(e[9]("LEFT"))&&e[9]("LEFT").apply(this,arguments)})],z=!0)},p(W,H){e=W,(!D||H&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!D||H&16&&r!==(r=e[4].x))&&U(t,"x",r),(!D||H&16&&s!==(s=e[4].y))&&U(t,"y",s),(!D||H&16&&i!==(i=e[4].w))&&U(t,"width",i),(!D||H&16&&o!==(o=e[4].h))&&U(t,"height",o),(!D||H&2)&&U(a,"style",e[1]),(!D||H&16&&c!==(c=e[4].x))&&U(a,"x",c),(!D||H&16&&l!==(l=e[4].y))&&U(a,"y",l),(!D||H&16&&f!==(f=e[4].w))&&U(a,"width",f),(!D||H&16&&d!==(d=e[4].h))&&U(a,"height",d),(!D||H&16&&p!==(p=e[4].x))&&U(m,"x",p),(!D||H&16&&S!==(S=e[4].y))&&U(m,"y",S),(!D||H&16&&v!==(v=e[4].w))&&U(m,"width",v),(!D||H&16&&E!==(E=e[4].x+e[4].w))&&U(w,"x",E),(!D||H&16&&$!==($=e[4].y))&&U(w,"y",$),(!D||H&16&&M!==(M=e[4].h))&&U(w,"height",M),(!D||H&16&&b!==(b=e[4].x))&&U(O,"x",b),(!D||H&16&&x!==(x=e[4].y+e[4].h))&&U(O,"y",x),(!D||H&16&&R!==(R=e[4].w))&&U(O,"width",R),(!D||H&16&&j!==(j=e[4].x))&&U(N,"x",j),(!D||H&16&&V!==(V=e[4].y))&&U(N,"y",V),(!D||H&16&&G!==(G=e[4].h))&&U(N,"height",G);const Z={};H&16&&(Z.x=e[4].x),H&16&&(Z.y=e[4].y),H&8&&(Z.scale=e[3]),_.$set(Z);const ne={};H&16&&(ne.x=e[4].x+e[4].w),H&16&&(ne.y=e[4].y),H&8&&(ne.scale=e[3]),I.$set(ne);const se={};H&16&&(se.x=e[4].x+e[4].w),H&16&&(se.y=e[4].y+e[4].h),H&8&&(se.scale=e[3]),g.$set(se);const ie={};H&16&&(ie.x=e[4].x),H&16&&(ie.y=e[4].y+e[4].h),H&8&&(ie.scale=e[3]),T.$set(ie)},i(W){D||(be(_.$$.fragment,W),be(I.$$.fragment,W),be(g.$$.fragment,W),be(T.$$.fragment,W),D=!0)},o(W){Ae(_.$$.fragment,W),Ae(I.$$.fragment,W),Ae(g.$$.fragment,W),Ae(T.$$.fragment,W),D=!1},d(W){W&&(ee(t),ee(u),ee(a),ee(h),ee(m),ee(P),ee(w),ee(B),ee(O),ee(k),ee(N),ee(K),ee(y),ee(F),ee(A)),qe(_,W),qe(I,W),qe(g,W),qe(T,W),z=!1,Ue(Q)}}}function uu(e){let t,n;return t=new Pi({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[au,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("grab",e[6]),t.$on("change",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&1562&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function cu(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:u=1}=t;const a=(d,h,m)=>{const p=d.geometry.bounds;let[S,v]=[p.minX,p.minY],[P,w]=[p.maxX,p.maxY];const[E,$]=m;if(h==="SHAPE")S+=E,P+=E,v+=$,w+=$;else{switch(h){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{v+=$;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{w+=$;break}}switch(h){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{S+=E;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{P+=E;break}}}const M=Math.min(S,P),B=Math.min(v,w),O=Math.abs(P-S),b=Math.abs(w-v);return{...d,geometry:{x:M,y:B,w:O,h:b,bounds:{minX:M,minY:B,maxX:M+O,maxY:B+b}}}};function c(d){je.call(this,e,d)}function l(d){je.call(this,e,d)}function f(d){je.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,s=d.shape),"computedStyle"in d&&n(1,i=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,u=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,u,r,a,c,l,f]}class lu extends Tn{constructor(t){super(),Fn(this,t,cu,uu,Rn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}Se.RECTANGLE,Se.POLYGON;const fu=e=>({}),ks=e=>({grab:e[0]});function du(e){let t,n,r,s;const i=e[7].default,o=fa(i,e,e[6],ks);return{c(){t=ge("g"),o&&o.c(),U(t,"class","a9s-annotation selected")},m(u,a){te(u,t,a),o&&o.m(t,null),n=!0,r||(s=[ae(t,"pointerup",e[2]),ae(t,"pointermove",e[1])],r=!0)},p(u,[a]){o&&o.p&&(!n||a&64)&&ha(o,i,u,u[6],n?da(i,u[6],a,fu):ga(u[6]),ks)},i(u){n||(be(o,u),n=!0)},o(u){Ae(o,u),n=!1},d(u){u&&ee(t),o&&o.d(u),r=!1,Ue(s)}}}function hu(e,t,n){let{$$slots:r={},$$scope:s}=t;const i=ba();let{shape:o}=t,{editor:u}=t,{transform:a}=t,c,l,f;const d=p=>S=>{c=p,l=a.elementToImage(S.offsetX,S.offsetY),f=o,S.target.setPointerCapture(S.pointerId),i("grab",S)},h=p=>{if(c){const[S,v]=a.elementToImage(p.offsetX,p.offsetY),P=[S-l[0],v-l[1]];n(3,o=u(f,c,P)),i("change",o)}},m=p=>{p.target.releasePointerCapture(p.pointerId),c=void 0,f=o,i("release",p)};return e.$$set=p=>{"shape"in p&&n(3,o=p.shape),"editor"in p&&n(4,u=p.editor),"transform"in p&&n(5,a=p.transform),"$$scope"in p&&n(6,s=p.$$scope)},[d,h,m,o,u,a,s,r]}class Pi extends Tn{constructor(t){super(),Fn(this,t,hu,du,Rn,{shape:3,editor:4,transform:5})}}typeof navigator>"u"||navigator.userAgent.indexOf("Mac OS X");const ed=e=>{const[t,n]=C.useState();return C.useEffect(()=>{fetch(`../../${e}`).then(r=>r.json()).then(r=>{const s=r.filter(i=>{const u=(Array.isArray(i.body)?i.body:[i.body]).some(d=>d.purpose==="tagging"),a=Array.isArray(i.target)?i.target[0]:i.target,l=(Array.isArray(a.selector)?a.selector:[a.selector]).find(d=>d.type==="FragmentSelector"),f=l&&l.value.endsWith(",0,0");return u&&!f});n(s)}).catch(r=>{console.log("Error fetching annotations",r)})},[]),t},td=(e,t)=>{const[n,r]=C.useState(t);return C.useEffect(()=>{const s=localStorage.getItem(e);if(s)try{r(JSON.parse(s))}catch(i){console.error("Error parsing stored state",i)}},[e]),C.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n]),[n,r]},nd=e=>{const[t,n]=C.useState([]),[r,s]=C.useState({images:void 0,verses:void 0});return C.useEffect(()=>{fetch("../../tag-index.json").then(i=>i.json()).then(n)},[]),C.useEffect(()=>{if(t)if(e){const i=e.bodies.filter(c=>c.purpose==="tagging"&&c.value).map(c=>c.id),o=t.filter(c=>c.id!==e.id&&c.tags.some(l=>i.includes(l.id))),u=o.filter(c=>c.type==="IMAGE"),a=o.filter(c=>c.type==="VERSE");s({images:u,verses:a})}else s({images:void 0,verses:void 0})},[t,e]),r},gu=()=>{const e=aa();return C.useMemo(()=>e.selected.length>0?e.selected[0].annotation:void 0,[e.selected.map(n=>n.annotation.id).join(",")])},Ri=()=>{const[e,t]=C.useState();return C.useEffect(()=>{fetch("/thesaurus/all-concepts.json").then(n=>n.json()).then(n=>{const r=n.map(s=>({id:s.uri,label:s.prefLabel?.trim()})).filter(s=>s.label);t(r)})},[]),e},rd=e=>{const t=sa(),n=gu(),[r,s]=C.useState(!1);return C.useEffect(()=>{if(r)if(n){const i=n.id.substring(n.id.lastIndexOf("/")+1);location.hash=`#${i}`}else location.hash=""},[n,r]),C.useEffect(()=>{if(!t||!e.loaded)return;const i=c=>{const l=`https://recogito.pelagios.org/annotation/${c}`;if(!(t.getSelected()||[]).map(d=>d.id).includes(l)&&(t.setSelected(l),"scrollIntoView"in t)){const d=t.getAnnotationById(`https://recogito.pelagios.org/annotation/${c}`);t.scrollIntoView(d)}},o=()=>{t.getSelected()?.length>0&&t.cancelSelected()},u=window.location.hash.substring(1);u?setTimeout(()=>{i(u),s(!0)}):s(!0);const a=()=>{const c=window.location.hash.substring(1);c?i(c):o()};return window.addEventListener("hashchange",a),()=>{window.removeEventListener("hashchange",a)}},[t,e.loaded]),null};/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=at("BookOpenText",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=at("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=at("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=at("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=at("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=at("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Ur=Yt(),J=e=>Qt(e,Ur),Hr=Yt();J.write=e=>Qt(e,Hr);var Dn=Yt();J.onStart=e=>Qt(e,Dn);var Vr=Yt();J.onFrame=e=>Qt(e,Vr);var qr=Yt();J.onFinish=e=>Qt(e,qr);var pt=[];J.setTimeout=(e,t)=>{const n=J.now()+t,r=()=>{const i=pt.findIndex(o=>o.cancel==r);~i&&pt.splice(i,1),ze-=~i?1:0},s={time:n,handler:e,cancel:r};return pt.splice(Fi(n),0,s),ze+=1,Ti(),s};var Fi=e=>~(~pt.findIndex(t=>t.time>e)||~pt.length);J.cancel=e=>{Dn.delete(e),Vr.delete(e),qr.delete(e),Ur.delete(e),Hr.delete(e)};J.sync=e=>{gr=!0,J.batchedUpdates(e),gr=!1};J.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,J.onStart(n)}return r.handler=e,r.cancel=()=>{Dn.delete(n),t=null},r};var Wr=typeof window<"u"?window.requestAnimationFrame:()=>{};J.use=e=>Wr=e;J.now=typeof performance<"u"?()=>performance.now():Date.now;J.batchedUpdates=e=>e();J.catch=console.error;J.frameLoop="always";J.advance=()=>{J.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):$i()};var We=-1,ze=0,gr=!1;function Qt(e,t){gr?(t.delete(e),e(0)):(t.add(e),Ti())}function Ti(){We<0&&(We=0,J.frameLoop!=="demand"&&Wr(Di))}function wu(){We=-1}function Di(){~We&&(Wr(Di),J.batchedUpdates($i))}function $i(){const e=We;We=J.now();const t=Fi(We);if(t&&(ki(pt.splice(0,t),n=>n.handler()),ze-=t),!ze){wu();return}Dn.flush(),Ur.flush(e?Math.min(64,We-e):16.667),Vr.flush(),Hr.flush(),qr.flush()}function Yt(){let e=new Set,t=e;return{add(n){ze+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return ze-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,ze-=t.size,ki(t,r=>r(n)&&e.add(r)),ze+=e.size,t=e)}}}function ki(e,t){e.forEach(n=>{try{t(n)}catch(r){J.catch(r)}})}var Eu=Object.defineProperty,xu=(e,t)=>{for(var n in t)Eu(e,n,{get:t[n],enumerable:!0})},Oe={};xu(Oe,{assign:()=>Ou,colors:()=>Ge,createStringInterpolator:()=>Gr,skipAnimation:()=>ji,to:()=>Mi,willAdvance:()=>Kr});function pr(){}var _u=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),L={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Me(e,t){if(L.arr(e)){if(!L.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Y=(e,t)=>e.forEach(t);function Re(e,t,n){if(L.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ce=e=>L.und(e)?[]:L.arr(e)?e:[e];function Dt(e,t){if(e.size){const n=Array.from(e);e.clear(),Y(n,t)}}var Ft=(e,...t)=>Dt(e,n=>n(...t)),zr=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Gr,Mi,Ge=null,ji=!1,Kr=pr,Ou=e=>{e.to&&(Mi=e.to),e.now&&(J.now=e.now),e.colors!==void 0&&(Ge=e.colors),e.skipAnimation!=null&&(ji=e.skipAnimation),e.createStringInterpolator&&(Gr=e.createStringInterpolator),e.requestAnimationFrame&&J.use(e.requestAnimationFrame),e.batchedUpdates&&(J.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Kr=e.willAdvance),e.frameLoop&&(J.frameLoop=e.frameLoop)},$t=new Set,ve=[],tr=[],bn=0,$n={get idle(){return!$t.size&&!ve.length},start(e){bn>e.priority?($t.add(e),J.onStart(Iu)):(Ni(e),J(mr))},advance:mr,sort(e){if(bn)J.onFrame(()=>$n.sort(e));else{const t=ve.indexOf(e);~t&&(ve.splice(t,1),Bi(e))}},clear(){ve=[],$t.clear()}};function Iu(){$t.forEach(Ni),$t.clear(),J(mr)}function Ni(e){ve.includes(e)||Bi(e)}function Bi(e){ve.splice(Au(ve,t=>t.priority>e.priority),0,e)}function mr(e){const t=tr;for(let n=0;n<ve.length;n++){const r=ve[n];bn=r.priority,r.idle||(Kr(r),r.advance(e),r.idle||t.push(r))}return bn=0,tr=ve,tr.length=0,ve=t,ve.length>0}function Au(e,t){const n=e.findIndex(t);return n<0?e.length:n}var Cu=(e,t,n)=>Math.min(Math.max(n,e),t),Pu={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_e="[-+]?\\d*\\.?\\d+",Sn=_e+"%";function kn(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Ru=new RegExp("rgb"+kn(_e,_e,_e)),Fu=new RegExp("rgba"+kn(_e,_e,_e,_e)),Tu=new RegExp("hsl"+kn(_e,Sn,Sn)),Du=new RegExp("hsla"+kn(_e,Sn,Sn,_e)),$u=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ku=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Mu=/^#([0-9a-fA-F]{6})$/,ju=/^#([0-9a-fA-F]{8})$/;function Nu(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Mu.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ge&&Ge[e]!==void 0?Ge[e]:(t=Ru.exec(e))?(dt(t[1])<<24|dt(t[2])<<16|dt(t[3])<<8|255)>>>0:(t=Fu.exec(e))?(dt(t[1])<<24|dt(t[2])<<16|dt(t[3])<<8|Ns(t[4]))>>>0:(t=$u.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ju.exec(e))?parseInt(t[1],16)>>>0:(t=ku.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Tu.exec(e))?(Ms(js(t[1]),an(t[2]),an(t[3]))|255)>>>0:(t=Du.exec(e))?(Ms(js(t[1]),an(t[2]),an(t[3]))|Ns(t[4]))>>>0:null}function nr(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ms(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=nr(s,r,e+1/3),o=nr(s,r,e),u=nr(s,r,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(u*255)<<8}function dt(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function js(e){return(parseFloat(e)%360+360)%360/360}function Ns(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function an(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Bs(e){let t=Nu(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${i})`}var Bt=(e,t,n)=>{if(L.fun(e))return e;if(L.arr(e))return Bt({range:e,output:t,extrapolate:n});if(L.str(e.output[0]))return Gr(e);const r=e,s=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",u=r.extrapolateRight||r.extrapolate||"extend",a=r.easing||(c=>c);return c=>{const l=Lu(c,i);return Bu(c,i[l],i[l+1],s[l],s[l+1],a,o,u,r.map)}};function Bu(e,t,n,r,s,i,o,u,a){let c=a?a(e):e;if(c<t){if(o==="identity")return c;o==="clamp"&&(c=t)}if(c>n){if(u==="identity")return c;u==="clamp"&&(c=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?c=-c:n===1/0?c=c-t:c=(c-t)/(n-t),c=i(c),r===-1/0?c=-c:s===1/0?c=c+r:c=c*(s-r)+r,c)}function Lu(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Uu=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,s=t==="end"?Math.floor(r):Math.ceil(r);return Cu(0,1,s/e)},wn=1.70158,un=wn*1.525,Ls=wn+1,Us=2*Math.PI/3,Hs=2*Math.PI/4.5,cn=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,Mn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Ls*e*e*e-wn*e*e,easeOutBack:e=>1+Ls*Math.pow(e-1,3)+wn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((un+1)*2*e-un)/2:(Math.pow(2*e-2,2)*((un+1)*(e*2-2)+un)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Us),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Us)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Hs))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Hs)/2+1,easeInBounce:e=>1-cn(1-e),easeOutBounce:cn,easeInOutBounce:e=>e<.5?(1-cn(1-2*e))/2:(1+cn(2*e-1))/2,steps:Uu},Lt=Symbol.for("FluidValue.get"),vt=Symbol.for("FluidValue.observers"),ye=e=>!!(e&&e[Lt]),de=e=>e&&e[Lt]?e[Lt]():e,Vs=e=>e[vt]||null;function Hu(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Ut(e,t){const n=e[vt];n&&n.forEach(r=>{Hu(r,t)})}var Li=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Vu(this,e)}},Vu=(e,t)=>Ui(e,Lt,t);function Et(e,t){if(e[Lt]){let n=e[vt];n||Ui(e,vt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Ht(e,t){const n=e[vt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[vt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Ui=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),gn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,qu=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,qs=new RegExp(`(${gn.source})(%|[a-z]+)`,"i"),Wu=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,jn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Hi=e=>{const[t,n]=zu(e);if(!t||zr())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&jn.test(n))return Hi(n);if(n)return n}return e},zu=e=>{const t=jn.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},rr,Gu=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Vi=e=>{rr||(rr=Ge?new RegExp(`(${Object.keys(Ge).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>de(i).replace(jn,Hi).replace(qu,Bs).replace(rr,Bs)),n=t.map(i=>i.match(gn).map(Number)),s=n[0].map((i,o)=>n.map(u=>{if(!(o in u))throw Error('The arity of each "output" value must be equal');return u[o]})).map(i=>Bt({...e,output:i}));return i=>{const o=!qs.test(t[0])&&t.find(a=>qs.test(a))?.replace(gn,"");let u=0;return t[0].replace(gn,()=>`${s[u++](i)}${o||""}`).replace(Wu,Gu)}},Qr="react-spring: ",qi=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Qr}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Ku=qi(console.warn);function Qu(){Ku(`${Qr}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Yu=qi(console.warn);function Xu(){Yu(`${Qr}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Nn(e){return L.str(e)&&(e[0]=="#"||/\d/.test(e)||!zr()&&jn.test(e)||e in(Ge||{}))}var rt=zr()?C.useEffect:C.useLayoutEffect,Ju=()=>{const e=C.useRef(!1);return rt(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Yr(){const e=C.useState()[1],t=Ju();return()=>{t.current&&e(Math.random())}}function Zu(e,t){const[n]=C.useState(()=>({inputs:t,result:e()})),r=C.useRef(),s=r.current;let i=s;return i?t&&i.inputs&&ec(t,i.inputs)||(i={inputs:t,result:e()}):i=n,C.useEffect(()=>{r.current=i,s==n&&(n.inputs=n.result=void 0)},[i]),i.result}function ec(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var Xr=e=>C.useEffect(e,tc),tc=[];function yr(e){const t=C.useRef();return C.useEffect(()=>{t.current=e}),t.current}var Vt=Symbol.for("Animated:node"),nc=e=>!!e&&e[Vt]===e,Ie=e=>e&&e[Vt],Jr=(e,t)=>_u(e,Vt,t),Bn=e=>e&&e[Vt]&&e[Vt].getPayload(),Wi=class{constructor(){Jr(this,this)}getPayload(){return this.payload||[]}},Xt=class extends Wi{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,L.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Xt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return L.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,L.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},qt=class extends Xt{constructor(e){super(0),this._string=null,this._toString=Bt({output:[e,e]})}static create(e){return new qt(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(L.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Bt({output:[this.getValue(),e]})),this._value=0,super.reset()}},En={dependencies:null},Ln=class extends Wi{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Re(this.source,(n,r)=>{nc(n)?t[r]=n.getValue(e):ye(n)?t[r]=de(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Y(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Re(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){En.dependencies&&ye(e)&&En.dependencies.add(e);const t=Bn(e);t&&Y(t,n=>this.add(n))}},zi=class extends Ln{constructor(e){super(e)}static create(e){return new zi(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(rc)),!0)}};function rc(e){return(Nn(e)?qt:Xt).create(e)}function vr(e){const t=Ie(e);return t?t.constructor:L.arr(e)?zi:Nn(e)?qt:Xt}var Ws=(e,t)=>{const n=!L.fun(e)||e.prototype&&e.prototype.isReactComponent;return C.forwardRef((r,s)=>{const i=C.useRef(null),o=n&&C.useCallback(m=>{i.current=oc(s,m)},[s]),[u,a]=ic(r,t),c=Yr(),l=()=>{const m=i.current;if(n&&!m)return;(m?t.applyAnimatedValues(m,u.getValue(!0)):!1)===!1&&c()},f=new sc(l,a),d=C.useRef();rt(()=>(d.current=f,Y(a,m=>Et(m,f)),()=>{d.current&&(Y(d.current.deps,m=>Ht(m,d.current)),J.cancel(d.current.update))})),C.useEffect(l,[]),Xr(()=>()=>{const m=d.current;Y(m.deps,p=>Ht(p,m))});const h=t.getComponentProps(u.getValue());return C.createElement(e,{...h,ref:o})})},sc=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&J.write(this.update)}};function ic(e,t){const n=new Set;return En.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Ln(e),En.dependencies=null,[e,n]}function oc(e,t){return e&&(L.fun(e)?e(t):e.current=t),t}var zs=Symbol.for("AnimatedComponent"),ac=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new Ln(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=o=>{const u=Gs(o)||"Anonymous";return L.str(o)?o=i[o]||(i[o]=Ws(o,s)):o=o[zs]||(o[zs]=Ws(o,s)),o.displayName=`Animated(${u})`,o};return Re(e,(o,u)=>{L.arr(e)&&(u=Gs(o)),i[u]=i(o)}),{animated:i}},Gs=e=>L.str(e)?e:e&&L.str(e.displayName)?e.displayName:L.fun(e)&&e.name||null;function he(e,...t){return L.fun(e)?e(...t):e}var kt=(e,t)=>e===!0||!!(t&&e&&(L.fun(e)?e(t):ce(e).includes(t))),Gi=(e,t)=>L.obj(e)?t&&e[t]:e,Ki=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,uc=e=>e,Un=(e,t=uc)=>{let n=cc;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const i=t(e[s],s);L.und(i)||(r[s]=i)}return r},cc=["config","onProps","onStart","onChange","onPause","onResume","onRest"],lc={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function fc(e){const t={};let n=0;if(Re(e,(r,s)=>{lc[s]||(t[s]=r,n++)}),n)return t}function Zr(e){const t=fc(e);if(t){const n={to:t};return Re(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Wt(e){return e=de(e),L.arr(e)?e.map(Wt):Nn(e)?Oe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Qi(e){for(const t in e)return!0;return!1}function br(e){return L.fun(e)||L.arr(e)&&L.obj(e[0])}function Sr(e,t){e.ref?.delete(e),t?.delete(e)}function Yi(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var dc={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},wr={...dc.default,mass:1,damping:1,easing:Mn.linear,clamp:!1},hc=class{constructor(){this.velocity=0,Object.assign(this,wr)}};function gc(e,t,n){n&&(n={...n},Ks(n,t),t={...n,...t}),Ks(e,t),Object.assign(e,t);for(const o in wr)e[o]==null&&(e[o]=wr[o]);let{frequency:r,damping:s}=e;const{mass:i}=e;return L.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*s*i/r),e}function Ks(e,t){if(!L.und(t.decay))e.duration=void 0;else{const n=!L.und(t.tension)||!L.und(t.friction);(n||!L.und(t.frequency)||!L.und(t.damping)||!L.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var Qs=[],pc=class{constructor(){this.changed=!1,this.values=Qs,this.toValues=null,this.fromValues=Qs,this.config=new hc,this.immediate=!1}};function Xi(e,{key:t,props:n,defaultProps:r,state:s,actions:i}){return new Promise((o,u)=>{let a,c,l=kt(n.cancel??r?.cancel,t);if(l)h();else{L.und(n.pause)||(s.paused=kt(n.pause,t));let m=r?.pause;m!==!0&&(m=s.paused||kt(m,t)),a=he(n.delay||0,t),m?(s.resumeQueue.add(d),i.pause()):(i.resume(),d())}function f(){s.resumeQueue.add(d),s.timeouts.delete(c),c.cancel(),a=c.time-J.now()}function d(){a>0&&!Oe.skipAnimation?(s.delayed=!0,c=J.setTimeout(h,a),s.pauseQueue.add(f),s.timeouts.add(c)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(f),s.timeouts.delete(c),e<=(s.cancelId||0)&&(l=!0);try{i.start({...n,callId:e,cancel:l},o)}catch(m){u(m)}}})}var es=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?mt(e.get()):t.every(n=>n.noop)?Ji(e.get()):xe(e.get(),t.every(n=>n.finished)),Ji=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),xe=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),mt=e=>({value:e,cancelled:!0,finished:!1});function Zi(e,t,n,r){const{callId:s,parentId:i,onRest:o}=t,{asyncTo:u,promise:a}=n;return!i&&e===u&&!t.reset?a:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const c=Un(t,(S,v)=>v==="onRest"?void 0:S);let l,f;const d=new Promise((S,v)=>(l=S,f=v)),h=S=>{const v=s<=(n.cancelId||0)&&mt(r)||s!==n.asyncId&&xe(r,!1);if(v)throw S.result=v,f(S),S},m=(S,v)=>{const P=new Ys,w=new Xs;return(async()=>{if(Oe.skipAnimation)throw zt(n),w.result=xe(r,!1),f(w),w;h(P);const E=L.obj(S)?{...S}:{...v,to:S};E.parentId=s,Re(c,(M,B)=>{L.und(E[B])&&(E[B]=M)});const $=await r.start(E);return h(P),n.paused&&await new Promise(M=>{n.resumeQueue.add(M)}),$})()};let p;if(Oe.skipAnimation)return zt(n),xe(r,!1);try{let S;L.arr(e)?S=(async v=>{for(const P of v)await m(P)})(e):S=Promise.resolve(e(m,r.stop.bind(r))),await Promise.all([S.then(l),d]),p=xe(r.get(),!0,!1)}catch(S){if(S instanceof Ys)p=S.result;else if(S instanceof Xs)p=S.result;else throw S}finally{s==n.asyncId&&(n.asyncId=i,n.asyncTo=i?u:void 0,n.promise=i?a:void 0)}return L.fun(o)&&J.batchedUpdates(()=>{o(p,r,r.item)}),p})()}function zt(e,t){Dt(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Ys=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Xs=class extends Error{constructor(){super("SkipAnimationSignal")}},Er=e=>e instanceof ts,mc=1,ts=class extends Li{constructor(){super(...arguments),this.id=mc++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ie(this);return e&&e.getValue()}to(...e){return Oe.to(this,e)}interpolate(...e){return Qu(),Oe.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Ut(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||$n.sort(this),Ut(this,{type:"priority",parent:this,priority:e})}},st=Symbol.for("SpringPhase"),eo=1,xr=2,_r=4,sr=e=>(e[st]&eo)>0,He=e=>(e[st]&xr)>0,At=e=>(e[st]&_r)>0,Js=(e,t)=>t?e[st]|=xr|eo:e[st]&=~xr,Zs=(e,t)=>t?e[st]|=_r:e[st]&=~_r,yc=class extends ts{constructor(e,t){if(super(),this.animation=new pc,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!L.und(e)||!L.und(t)){const n=L.obj(e)?{...e}:{...t,from:e};L.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(He(this)||this._state.asyncTo)||At(this)}get goal(){return de(this.animation.to)}get velocity(){const e=Ie(this);return e instanceof Xt?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return sr(this)}get isAnimating(){return He(this)}get isPaused(){return At(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:i}=r,o=Bn(r.to);!o&&ye(r.to)&&(s=ce(de(r.to))),r.values.forEach((c,l)=>{if(c.done)return;const f=c.constructor==qt?1:o?o[l].lastPosition:s[l];let d=r.immediate,h=f;if(!d){if(h=c.lastPosition,i.tension<=0){c.done=!0;return}let m=c.elapsedTime+=e;const p=r.fromValues[l],S=c.v0!=null?c.v0:c.v0=L.arr(i.velocity)?i.velocity[l]:i.velocity;let v;const P=i.precision||(p==f?.005:Math.min(1,Math.abs(f-p)*.001));if(L.und(i.duration))if(i.decay){const w=i.decay===!0?.998:i.decay,E=Math.exp(-(1-w)*m);h=p+S/(1-w)*(1-E),d=Math.abs(c.lastPosition-h)<=P,v=S*E}else{v=c.lastVelocity==null?S:c.lastVelocity;const w=i.restVelocity||P/10,E=i.clamp?0:i.bounce,$=!L.und(E),M=p==f?c.v0>0:p<f;let B,O=!1;const b=1,x=Math.ceil(e/b);for(let R=0;R<x&&(B=Math.abs(v)>w,!(!B&&(d=Math.abs(f-h)<=P,d)));++R){$&&(O=h==f||h>f==M,O&&(v=-v*E,h=f));const k=-i.tension*1e-6*(h-f),N=-i.friction*.001*v,j=(k+N)/i.mass;v=v+j*b,h=h+v*b}}else{let w=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,c.durationProgress>0&&(c.elapsedTime=i.duration*c.durationProgress,m=c.elapsedTime+=e)),w=(i.progress||0)+m/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),h=p+i.easing(w)*(f-p),v=(h-c.lastPosition)/e,d=w==1}c.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[l].done&&(d=!1),d?c.done=!0:t=!1,c.setValue(h,i.round)&&(n=!0)});const u=Ie(this),a=u.getValue();if(t){const c=de(r.to);(a!==c||n)&&!i.decay?(u.setValue(c),this._onChange(c)):n&&i.decay&&this._onChange(a),this._stop()}else n&&this._onChange(a)}set(e){return J.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(He(this)){const{to:e,config:t}=this.animation;J.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return L.und(e)?(n=this.queue||[],this.queue=[]):n=[L.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>es(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),zt(this._state,e&&this._lastCallId),J.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=L.obj(n)?n[t]:n,(n==null||br(n))&&(n=void 0),r=L.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return sr(this)||(e.reverse&&([n,r]=[r,n]),r=de(r),L.und(r)?Ie(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Un(e,(o,u)=>/^on/.test(u)?Gi(o,n):o)),ti(this,e,"onProps"),Pt(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return Xi(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{At(this)||(Zs(this,!0),Ft(i.pauseQueue),Pt(this,"onPause",xe(this,Ct(this,this.animation.to)),this))},resume:()=>{At(this)&&(Zs(this,!1),He(this)&&this._resume(),Ft(i.resumeQueue),Pt(this,"onResume",xe(this,Ct(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const u=to(e);if(u)return this._update(u,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(mt(this));const r=!L.und(e.to),s=!L.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(mt(this));const{key:i,defaultProps:o,animation:u}=this,{to:a,from:c}=u;let{to:l=a,from:f=c}=e;s&&!r&&(!t.default||L.und(l))&&(l=f),t.reverse&&([l,f]=[f,l]);const d=!Me(f,c);d&&(u.from=f),f=de(f);const h=!Me(l,a);h&&this._focus(l);const m=br(t.to),{config:p}=u,{decay:S,velocity:v}=p;(r||s)&&(p.velocity=0),t.config&&!m&&gc(p,he(t.config,i),t.config!==o.config?he(o.config,i):void 0);let P=Ie(this);if(!P||L.und(l))return n(xe(this,!0));const w=L.und(t.reset)?s&&!t.default:!L.und(f)&&kt(t.reset,i),E=w?f:this.get(),$=Wt(l),M=L.num($)||L.arr($)||Nn($),B=!m&&(!M||kt(o.immediate||t.immediate,i));if(h){const R=vr(l);if(R!==P.constructor)if(B)P=this._set($);else throw Error(`Cannot animate between ${P.constructor.name} and ${R.name}, as the "to" prop suggests`)}const O=P.constructor;let b=ye(l),x=!1;if(!b){const R=w||!sr(this)&&d;(h||R)&&(x=Me(Wt(E),$),b=!x),(!Me(u.immediate,B)&&!B||!Me(p.decay,S)||!Me(p.velocity,v))&&(b=!0)}if(x&&He(this)&&(u.changed&&!w?b=!0:b||this._stop(a)),!m&&((b||ye(a))&&(u.values=P.getPayload(),u.toValues=ye(l)?null:O==qt?[1]:ce($)),u.immediate!=B&&(u.immediate=B,!B&&!w&&this._set(a)),b)){const{onRest:R}=u;Y(bc,N=>ti(this,t,N));const k=xe(this,Ct(this,a));Ft(this._pendingCalls,k),this._pendingCalls.add(n),u.changed&&J.batchedUpdates(()=>{u.changed=!w,R?.(k,this),w?he(o.onRest,k):u.onStart?.(k,this)})}w&&this._set(E),m?n(Zi(t.to,t,this._state,this)):b?this._start():He(this)&&!h?this._pendingCalls.add(n):n(Ji(E))}_focus(e){const t=this.animation;e!==t.to&&(Vs(this)&&this._detach(),t.to=e,Vs(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ye(t)&&(Et(t,this),Er(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ye(e)&&Ht(e,this)}_set(e,t=!0){const n=de(e);if(!L.und(n)){const r=Ie(this);if(!r||!Me(n,r.getValue())){const s=vr(n);!r||r.constructor!=s?Jr(this,s.create(n)):r.setValue(n),r&&J.batchedUpdates(()=>{this._onChange(n,t)})}}return Ie(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Pt(this,"onStart",xe(this,Ct(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),he(this.animation.onChange,e,this)),he(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Ie(this).reset(de(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),He(this)||(Js(this,!0),At(this)||this._resume())}_resume(){Oe.skipAnimation?this.finish():$n.start(this)}_stop(e,t){if(He(this)){Js(this,!1);const n=this.animation;Y(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ut(this,{type:"idle",parent:this});const r=t?mt(this.get()):xe(this.get(),Ct(this,e??n.to));Ft(this._pendingCalls,r),n.changed&&(n.changed=!1,Pt(this,"onRest",r,this))}}};function Ct(e,t){const n=Wt(t),r=Wt(e.get());return Me(r,n)}function to(e,t=e.loop,n=e.to){const r=he(t);if(r){const s=r!==!0&&Zr(r),i=(s||e).reverse,o=!s||s.reset;return Gt({...e,loop:t,default:!1,pause:void 0,to:!i||br(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function Gt(e){const{to:t,from:n}=e=Zr(e),r=new Set;return L.obj(t)&&ei(t,r),L.obj(n)&&ei(n,r),e.keys=r.size?Array.from(r):null,e}function vc(e){const t=Gt(e);return L.und(t.default)&&(t.default=Un(t)),t}function ei(e,t){Re(e,(n,r)=>n!=null&&t.add(r))}var bc=["onStart","onRest","onChange","onPause","onResume"];function ti(e,t,n){e.animation[n]=t[n]!==Ki(t,n)?Gi(t[n],e.key):void 0}function Pt(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var Sc=["onStart","onChange","onRest"],wc=1,no=class{constructor(e,t){this.id=wc++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];L.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Gt(e)),this}start(e){let{queue:t}=this;return e?t=ce(e).map(Gt):this.queue=[],this._flush?this._flush(this,t):(ao(this,t),Or(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Y(ce(t),r=>n[r].stop(!!e))}else zt(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(L.und(e))this.start({pause:!0});else{const t=this.springs;Y(ce(e),n=>t[n].pause())}return this}resume(e){if(L.und(e))this.start({pause:!1});else{const t=this.springs;Y(ce(e),n=>t[n].resume())}return this}each(e){Re(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Dt(e,([u,a])=>{a.value=this.get(),u(a,this,this._item)}));const i=!r&&this._started,o=s||i&&n.size?this.get():null;s&&t.size&&Dt(t,([u,a])=>{a.value=o,u(a,this,this._item)}),i&&(this._started=!1,Dt(n,([u,a])=>{a.value=o,u(a,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;J.onFrame(this._onFrame)}};function Or(e,t){return Promise.all(t.map(n=>ro(e,n))).then(n=>es(e,n))}async function ro(e,t,n){const{keys:r,to:s,from:i,loop:o,onRest:u,onResolve:a}=t,c=L.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),i===!1&&(t.from=null);const l=L.arr(s)||L.fun(s)?s:void 0;l?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):Y(Sc,p=>{const S=t[p];if(L.fun(S)){const v=e._events[p];t[p]=({finished:P,cancelled:w})=>{const E=v.get(S);E?(P||(E.finished=!1),w&&(E.cancelled=!0)):v.set(S,{value:null,finished:P||!1,cancelled:w||!1})},c&&(c[p]=t[p])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,Ft(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map(p=>e.springs[p].start(t)),h=t.cancel===!0||Ki(t,"cancel")===!0;(l||h&&f.asyncId)&&d.push(Xi(++e._lastAsyncId,{props:t,state:f,actions:{pause:pr,resume:pr,start(p,S){h?(zt(f,e._lastAsyncId),S(mt(e))):(p.onRest=u,S(Zi(l,p,f,e)))}}})),f.paused&&await new Promise(p=>{f.resumeQueue.add(p)});const m=es(e,await Promise.all(d));if(o&&m.finished&&!(n&&m.noop)){const p=to(t,o,s);if(p)return ao(e,[p]),ro(e,p,!0)}return a&&J.batchedUpdates(()=>a(m,e,e.item)),m}function Ir(e,t){const n={...e.springs};return t&&Y(ce(t),r=>{L.und(r.keys)&&(r=Gt(r)),L.obj(r.to)||(r={...r,to:void 0}),oo(n,r,s=>io(s))}),so(e,n),n}function so(e,t){Re(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,Et(n,e))})}function io(e,t){const n=new yc;return n.key=e,t&&Et(n,t),n}function oo(e,t,n){t.keys&&Y(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function ao(e,t){Y(t,n=>{oo(e.springs,n,r=>io(r,e))})}var Jt=({children:e,...t})=>{const n=C.useContext(xn),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=Zu(()=>({pause:r,immediate:s}),[r,s]);const{Provider:i}=xn;return C.createElement(i,{value:t},e)},xn=Ec(Jt,{});Jt.Provider=xn.Provider;Jt.Consumer=xn.Consumer;function Ec(e,t){return Object.assign(e,C.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var uo=()=>{const e=[],t=function(r){Xu();const s=[];return Y(e,(i,o)=>{if(L.und(r))s.push(i.start());else{const u=n(r,i,o);u&&s.push(i.start(u))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Y(e,r=>r.pause(...arguments)),this},t.resume=function(){return Y(e,r=>r.resume(...arguments)),this},t.set=function(r){Y(e,(s,i)=>{const o=L.fun(r)?r(i,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return Y(e,(i,o)=>{if(L.und(r))s.push(i.start());else{const u=this._getProps(r,i,o);u&&s.push(i.start(u))}}),s},t.stop=function(){return Y(e,r=>r.stop(...arguments)),this},t.update=function(r){return Y(e,(s,i)=>s.update(this._getProps(r,s,i))),this};const n=function(r,s,i){return L.fun(r)?r(i,s):r};return t._getProps=n,t};function xc(e,t,n){const r=L.fun(t)&&t;r&&!n&&(n=[]);const s=C.useMemo(()=>r||arguments.length==3?uo():void 0,[]),i=C.useRef(0),o=Yr(),u=C.useMemo(()=>({ctrls:[],queue:[],flush(v,P){const w=Ir(v,P);return i.current>0&&!u.queue.length&&!Object.keys(w).some($=>!v.springs[$])?Or(v,P):new Promise($=>{so(v,w),u.queue.push(()=>{$(Or(v,P))}),o()})}}),[]),a=C.useRef([...u.ctrls]),c=[],l=yr(e)||0;C.useMemo(()=>{Y(a.current.slice(e,l),v=>{Sr(v,s),v.stop(!0)}),a.current.length=e,f(l,e)},[e]),C.useMemo(()=>{f(0,Math.min(l,e))},n);function f(v,P){for(let w=v;w<P;w++){const E=a.current[w]||(a.current[w]=new no(null,u.flush)),$=r?r(w,E):t[w];$&&(c[w]=vc($))}}const d=a.current.map((v,P)=>Ir(v,c[P])),h=C.useContext(Jt),m=yr(h),p=h!==m&&Qi(h);rt(()=>{i.current++,u.ctrls=a.current;const{queue:v}=u;v.length&&(u.queue=[],Y(v,P=>P())),Y(a.current,(P,w)=>{s?.add(P),p&&P.start({default:h});const E=c[w];E&&(Yi(P,E.ref),P.ref?P.queue.push(E):P.start(E))})}),Xr(()=>()=>{Y(u.ctrls,v=>v.stop(!0))});const S=d.map(v=>({...v}));return s?[S,s]:S}function sd(e,t){const n=L.fun(e),[[r],s]=xc(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function ns(e,t,n){const r=L.fun(t)&&t,{reset:s,sort:i,trail:o=0,expires:u=!0,exitBeforeEnter:a=!1,onDestroyed:c,ref:l,config:f}=r?r():t,d=C.useMemo(()=>r||arguments.length==3?uo():void 0,[]),h=ce(e),m=[],p=C.useRef(null),S=s?null:p.current;rt(()=>{p.current=m}),Xr(()=>(Y(m,j=>{d?.add(j.ctrl),j.ctrl.ref=d}),()=>{Y(p.current,j=>{j.expired&&clearTimeout(j.expirationId),Sr(j.ctrl,d),j.ctrl.stop(!0)})}));const v=Oc(h,r?r():t,S),P=s&&p.current||[];rt(()=>Y(P,({ctrl:j,item:V,key:G})=>{Sr(j,d),he(c,V,G)}));const w=[];if(S&&Y(S,(j,V)=>{j.expired?(clearTimeout(j.expirationId),P.push(j)):(V=w[V]=v.indexOf(j.key),~V&&(m[V]=j))}),Y(h,(j,V)=>{m[V]||(m[V]={key:v[V],item:j,phase:"mount",ctrl:new no},m[V].ctrl.item=j)}),w.length){let j=-1;const{leave:V}=r?r():t;Y(w,(G,K)=>{const _=S[K];~G?(j=m.indexOf(_),m[j]={..._,item:h[G]}):V&&m.splice(++j,0,_)})}L.fun(i)&&m.sort((j,V)=>i(j.item,V.item));let E=-o;const $=Yr(),M=Un(t),B=new Map,O=C.useRef(new Map),b=C.useRef(!1);Y(m,(j,V)=>{const G=j.key,K=j.phase,_=r?r():t;let y,I;const F=he(_.delay||0,G);if(K=="mount")y=_.enter,I="enter";else{const D=v.indexOf(G)<0;if(K!="leave")if(D)y=_.leave,I="leave";else if(y=_.update)I="update";else return;else if(!D)y=_.enter,I="enter";else return}if(y=he(y,j.item,V),y=L.obj(y)?Zr(y):{to:y},!y.config){const D=f||M.config;y.config=he(D,j.item,V,I)}E+=o;const g={...M,delay:F+E,ref:l,immediate:_.immediate,reset:!1,...y};if(I=="enter"&&L.und(g.from)){const D=r?r():t,z=L.und(D.initial)||S?D.from:D.initial;g.from=he(z,j.item,V)}const{onResolve:A}=g;g.onResolve=D=>{he(A,D);const z=p.current,Q=z.find(W=>W.key===G);if(Q&&!(D.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const W=z.every(H=>H.ctrl.idle);if(Q.phase=="leave"){const H=he(u,Q.item);if(H!==!1){const Z=H===!0?0:H;if(Q.expired=!0,!W&&Z>0){Z<=2147483647&&(Q.expirationId=setTimeout($,Z));return}}}W&&z.some(H=>H.expired)&&(O.current.delete(Q),a&&(b.current=!0),$())}};const T=Ir(j.ctrl,g);I==="leave"&&a?O.current.set(j,{phase:I,springs:T,payload:g}):B.set(j,{phase:I,springs:T,payload:g})});const x=C.useContext(Jt),R=yr(x),k=x!==R&&Qi(x);rt(()=>{k&&Y(m,j=>{j.ctrl.start({default:x})})},[x]),Y(B,(j,V)=>{if(O.current.size){const G=m.findIndex(K=>K.key===V.key);m.splice(G,1)}}),rt(()=>{Y(O.current.size?O.current:B,({phase:j,payload:V},G)=>{const{ctrl:K}=G;G.phase=j,d?.add(K),k&&j=="enter"&&K.start({default:x}),V&&(Yi(K,V.ref),(K.ref||d)&&!b.current?K.update(V):(K.start(V),b.current&&(b.current=!1)))})},s?void 0:n);const N=j=>C.createElement(C.Fragment,null,m.map((V,G)=>{const{springs:K}=B.get(V)||V.ctrl,_=j({...K},V.item,V,G);return _&&_.type?C.createElement(_.type,{..._.props,key:L.str(V.key)||L.num(V.key)?V.key:V.ctrl.id,ref:_.ref}):_}));return d?[N,d]:N}var _c=1;function Oc(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(i=>{const o=r&&r.find(u=>u.item===i&&u.phase!=="leave"&&!s.has(u));return o?(s.add(o),o.key):_c++})}return L.und(n)?e:L.fun(n)?e.map(n):ce(n)}var co=class extends ts{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Bt(...t);const n=this._get(),r=vr(n);Jr(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Me(t,n)||(Ie(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&ni(this._active)&&ir(this)}_get(){const e=L.arr(this.source)?this.source.map(de):ce(de(this.source));return this.calc(...e)}_start(){this.idle&&!ni(this._active)&&(this.idle=!1,Y(Bn(this),e=>{e.done=!1}),Oe.skipAnimation?(J.batchedUpdates(()=>this.advance()),ir(this)):$n.start(this))}_attach(){let e=1;Y(ce(this.source),t=>{ye(t)&&Et(t,this),Er(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Y(ce(this.source),e=>{ye(e)&&Ht(e,this)}),this._active.clear(),ir(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ce(this.source).reduce((t,n)=>Math.max(t,(Er(n)?n.priority:0)+1),0))}};function Ic(e){return e.idle!==!1}function ni(e){return!e.size||Array.from(e).every(Ic)}function ir(e){e.idle||(e.idle=!0,Y(Bn(e),t=>{t.done=!0}),Ut(e,{type:"idle",parent:e}))}var id=(e,...t)=>new co(e,t);Oe.assign({createStringInterpolator:Vi,to:(e,t)=>new co(e,t)});var lo=/^--/;function Ac(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!lo.test(e)&&!(Mt.hasOwnProperty(e)&&Mt[e])?t+"px":(""+t).trim()}var ri={};function Cc(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:i,scrollTop:o,scrollLeft:u,viewBox:a,...c}=t,l=Object.values(c),f=Object.keys(c).map(d=>n||e.hasAttribute(d)?d:ri[d]||(ri[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));i!==void 0&&(e.textContent=i);for(const d in s)if(s.hasOwnProperty(d)){const h=Ac(d,s[d]);lo.test(d)?e.style.setProperty(d,h):e.style[d]=h}f.forEach((d,h)=>{e.setAttribute(d,l[h])}),r!==void 0&&(e.className=r),o!==void 0&&(e.scrollTop=o),u!==void 0&&(e.scrollLeft=u),a!==void 0&&e.setAttribute("viewBox",a)}var Mt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pc=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Rc=["Webkit","Ms","Moz","O"];Mt=Object.keys(Mt).reduce((e,t)=>(Rc.forEach(n=>e[Pc(n,t)]=e[t]),e),Mt);var Fc=/^(matrix|translate|scale|rotate|skew)/,Tc=/^(translate)/,Dc=/^(rotate|skew)/,or=(e,t)=>L.num(e)&&e!==0?e+t:e,pn=(e,t)=>L.arr(e)?e.every(n=>pn(n,t)):L.num(e)?e===t:parseFloat(e)===t,$c=class extends Ln{constructor({x:e,y:t,z:n,...r}){const s=[],i=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),i.push(o=>[`translate3d(${o.map(u=>or(u,"px")).join(",")})`,pn(o,0)])),Re(r,(o,u)=>{if(u==="transform")s.push([o||""]),i.push(a=>[a,a===""]);else if(Fc.test(u)){if(delete r[u],L.und(o))return;const a=Tc.test(u)?"px":Dc.test(u)?"deg":"";s.push(ce(o)),i.push(u==="rotate3d"?([c,l,f,d])=>[`rotate3d(${c},${l},${f},${or(d,a)})`,pn(d,0)]:c=>[`${u}(${c.map(l=>or(l,a)).join(",")})`,pn(c,u.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new kc(s,i)),super(r)}},kc=class extends Li{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Y(this.inputs,(n,r)=>{const s=de(n[0]),[i,o]=this.transforms[r](L.arr(s)?s:n.map(de));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&Y(this.inputs,t=>Y(t,n=>ye(n)&&Et(n,this)))}observerRemoved(e){e==0&&Y(this.inputs,t=>Y(t,n=>ye(n)&&Ht(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Ut(this,e)}},Mc=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Oe.assign({batchedUpdates:bi.unstable_batchedUpdates,createStringInterpolator:Vi,colors:Pu});var jc=ac(Mc,{applyAnimatedValues:Cc,createAnimatedStyle:e=>new $c(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),rs=jc.animated,fo={},ho={exports:{}},Nc="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Bc=Nc,Lc=Bc;function go(){}function po(){}po.resetWarningCache=go;var Uc=function(){function e(r,s,i,o,u,a){if(a!==Lc){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:po,resetWarningCache:go};return n.PropTypes=n,n};ho.exports=Uc();var Zt=ho.exports;function Hc(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Vc=Hc,mo={},si=function(){function e(t,n){var r=[],s=!0,i=!1,o=void 0;try{for(var u=t[Symbol.iterator](),a;!(s=(a=u.next()).done)&&(r.push(a.value),!(n&&r.length===n));s=!0);}catch(c){i=!0,o=c}finally{try{!s&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),qc=function(e){var t=e.data,n=e.multiSection;function r(a){for(a===null?a=0:a++;a<t.length&&t[a]===0;)a++;return a===t.length?null:a}function s(a){for(a===null?a=t.length-1:a--;a>=0&&t[a]===0;)a--;return a===-1?null:a}function i(a){var c=si(a,2),l=c[0],f=c[1];return n?f===null||f===t[l]-1?(l=r(l),l===null?[null,null]:[l,0]):[l,f+1]:t===0||f===t-1?[null,null]:f===null?[null,0]:[null,f+1]}function o(a){var c=si(a,2),l=c[0],f=c[1];return n?f===null||f===0?(l=s(l),l===null?[null,null]:[l,t[l]-1]):[l,f-1]:t===0||f===0?[null,null]:f===null?[null,t-1]:[null,f-1]}function u(a){return i(a)[1]===null}return{next:i,prev:o,isLast:u}},Ar={exports:{}},Wc=Object.prototype.propertyIsEnumerable;function zc(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Gc(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(n){return Wc.call(e,n)})}var Kc=Object.assign||function(e,t){for(var n,r,s=zc(e),i=1;i<arguments.length;i++){n=arguments[i],r=Gc(Object(n));for(var o=0;o<r.length;o++)s[r[o]]=n[r[o]]}return s};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function a(c,l){var f=[],d=!0,h=!1,m=void 0;try{for(var p=c[Symbol.iterator](),S;!(d=(S=p.next()).done)&&(f.push(S.value),!(l&&f.length===l));d=!0);}catch(v){h=!0,m=v}finally{try{!d&&p.return&&p.return()}finally{if(h)throw m}}return f}return function(c,l){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return a(c,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(a){return a&&a.__esModule?a:{default:a}}function s(a){if(Array.isArray(a)){for(var c=0,l=Array(a.length);c<a.length;c++)l[c]=a[c];return l}else return Array.from(a)}var i=Kc,o=r(i),u=function(c){return c};t.default=function(a){var c=Array.isArray(a)&&a.length===2?a:[a,null],l=n(c,2),f=l[0],d=l[1];return function(h){for(var m=arguments.length,p=Array(m>1?m-1:0),S=1;S<m;S++)p[S-1]=arguments[S];var v=p.map(function(P){return f[P]}).filter(u);return typeof v[0]=="string"||typeof d=="function"?{key:h,className:d?d.apply(void 0,s(v)):v.join(" ")}:{key:h,style:o.default.apply(void 0,[{}].concat(s(v)))}}},e.exports=t.default})(Ar,Ar.exports);var Qc=Ar.exports,yo={},Hn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(i){return typeof i}:t=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t(r)}function n(r,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===s)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!0;var a={},c,l;for(c=0,l=i.length;c<l;c++)a[i[c]]=!0;for(c=0,l=o.length;c<l;c++){var f=o[c],d=r[f],h=s[f];if(d!==h){if(!a[f]||d===null||h===null||t(d)!=="object"||t(h)!=="object")return!0;var m=Object.keys(d),p=Object.keys(h);if(m.length!==p.length)return!0;for(var S=0,v=m.length;S<v;S++){var P=m[S];if(d[P]!==h[P])return!0}}}return!1}})(Hn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(C),n=s(Zt),r=s(Hn);function s(E){return E&&E.__esModule?E:{default:E}}function i(){if(typeof WeakMap!="function")return null;var E=new WeakMap;return i=function(){return E},E}function o(E){if(E&&E.__esModule)return E;if(E===null||u(E)!=="object"&&typeof E!="function")return{default:E};var $=i();if($&&$.has(E))return $.get(E);var M={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in E)if(Object.prototype.hasOwnProperty.call(E,O)){var b=B?Object.getOwnPropertyDescriptor(E,O):null;b&&(b.get||b.set)?Object.defineProperty(M,O,b):M[O]=E[O]}return M.default=E,$&&$.set(E,M),M}function u(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(M){return typeof M}:u=function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},u(E)}function a(E,$){if(!(E instanceof $))throw new TypeError("Cannot call a class as a function")}function c(E,$){for(var M=0;M<$.length;M++){var B=$[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(E,B.key,B)}}function l(E,$,M){return $&&c(E.prototype,$),E}function f(E){return function(){var $=p(E),M;if(m()){var B=p(this).constructor;M=Reflect.construct($,arguments,B)}else M=$.apply(this,arguments);return d(this,M)}}function d(E,$){return $&&(u($)==="object"||typeof $=="function")?$:h(E)}function h(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(E){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},p(E)}function S(E,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create($&&$.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),$&&v(E,$)}function v(E,$){return v=Object.setPrototypeOf||function(B,O){return B.__proto__=O,B},v(E,$)}function P(E,$,M){return $ in E?Object.defineProperty(E,$,{value:M,enumerable:!0,configurable:!0,writable:!0}):E[$]=M,E}var w=function(E){S(M,E);var $=f(M);function M(){return a(this,M),$.apply(this,arguments)}return l(M,[{key:"shouldComponentUpdate",value:function(O){return(0,r.default)(O,this.props)}},{key:"render",value:function(){var O=this.props,b=O.section,x=O.renderSectionTitle,R=O.theme,k=O.sectionKeyPrefix,N=x(b);return N?t.default.createElement("div",R("".concat(k,"title"),"sectionTitle"),N):null}}]),M}(t.Component);e.default=w,P(w,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})})(yo);var vo={},bo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(C),n=s(Zt),r=s(Hn);function s(b){return b&&b.__esModule?b:{default:b}}function i(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return i=function(){return b},b}function o(b){if(b&&b.__esModule)return b;if(b===null||u(b)!=="object"&&typeof b!="function")return{default:b};var x=i();if(x&&x.has(b))return x.get(b);var R={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in b)if(Object.prototype.hasOwnProperty.call(b,N)){var j=k?Object.getOwnPropertyDescriptor(b,N):null;j&&(j.get||j.set)?Object.defineProperty(R,N,j):R[N]=b[N]}return R.default=b,x&&x.set(b,R),R}function u(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(R){return typeof R}:u=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(b)}function a(){return a=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var R=arguments[x];for(var k in R)Object.prototype.hasOwnProperty.call(R,k)&&(b[k]=R[k])}return b},a.apply(this,arguments)}function c(b,x){var R=Object.keys(b);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(b);x&&(k=k.filter(function(N){return Object.getOwnPropertyDescriptor(b,N).enumerable})),R.push.apply(R,k)}return R}function l(b){for(var x=1;x<arguments.length;x++){var R=arguments[x]!=null?arguments[x]:{};x%2?c(Object(R),!0).forEach(function(k){B(b,k,R[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(R)):c(Object(R)).forEach(function(k){Object.defineProperty(b,k,Object.getOwnPropertyDescriptor(R,k))})}return b}function f(b,x){if(b==null)return{};var R=d(b,x),k,N;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(b);for(N=0;N<j.length;N++)k=j[N],!(x.indexOf(k)>=0)&&Object.prototype.propertyIsEnumerable.call(b,k)&&(R[k]=b[k])}return R}function d(b,x){if(b==null)return{};var R={},k=Object.keys(b),N,j;for(j=0;j<k.length;j++)N=k[j],!(x.indexOf(N)>=0)&&(R[N]=b[N]);return R}function h(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function m(b,x){for(var R=0;R<x.length;R++){var k=x[R];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}function p(b,x,R){return x&&m(b.prototype,x),b}function S(b){return function(){var x=E(b),R;if(w()){var k=E(this).constructor;R=Reflect.construct(x,arguments,k)}else R=x.apply(this,arguments);return v(this,R)}}function v(b,x){return x&&(u(x)==="object"||typeof x=="function")?x:P(b)}function P(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(b){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},E(b)}function $(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&M(b,x)}function M(b,x){return M=Object.setPrototypeOf||function(k,N){return k.__proto__=N,k},M(b,x)}function B(b,x,R){return x in b?Object.defineProperty(b,x,{value:R,enumerable:!0,configurable:!0,writable:!0}):b[x]=R,b}var O=function(b){$(R,b);var x=S(R);function R(){var k;h(this,R);for(var N=arguments.length,j=new Array(N),V=0;V<N;V++)j[V]=arguments[V];return k=x.call.apply(x,[this].concat(j)),B(P(k),"storeItemReference",function(G){G!==null&&(k.item=G)}),B(P(k),"onMouseEnter",function(G){var K=k.props,_=K.sectionIndex,y=K.itemIndex;k.props.onMouseEnter(G,{sectionIndex:_,itemIndex:y})}),B(P(k),"onMouseLeave",function(G){var K=k.props,_=K.sectionIndex,y=K.itemIndex;k.props.onMouseLeave(G,{sectionIndex:_,itemIndex:y})}),B(P(k),"onMouseDown",function(G){var K=k.props,_=K.sectionIndex,y=K.itemIndex;k.props.onMouseDown(G,{sectionIndex:_,itemIndex:y})}),B(P(k),"onClick",function(G){var K=k.props,_=K.sectionIndex,y=K.itemIndex;k.props.onClick(G,{sectionIndex:_,itemIndex:y})}),k}return p(R,[{key:"shouldComponentUpdate",value:function(N){return(0,r.default)(N,this.props,["renderItemData"])}},{key:"render",value:function(){var N=this.props,j=N.isHighlighted,V=N.item,G=N.renderItem,K=N.renderItemData,_=f(N,["isHighlighted","item","renderItem","renderItemData"]);return delete _.sectionIndex,delete _.itemIndex,typeof _.onMouseEnter=="function"&&(_.onMouseEnter=this.onMouseEnter),typeof _.onMouseLeave=="function"&&(_.onMouseLeave=this.onMouseLeave),typeof _.onMouseDown=="function"&&(_.onMouseDown=this.onMouseDown),typeof _.onClick=="function"&&(_.onClick=this.onClick),t.default.createElement("li",a({role:"option"},_,{ref:this.storeItemReference}),G(V,l({isHighlighted:j},K)))}}]),R}(t.Component);e.default=O,B(O,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})})(bo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(C),n=i(Zt),r=i(bo),s=i(Hn);function i(O){return O&&O.__esModule?O:{default:O}}function o(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return o=function(){return O},O}function u(O){if(O&&O.__esModule)return O;if(O===null||a(O)!=="object"&&typeof O!="function")return{default:O};var b=o();if(b&&b.has(O))return b.get(O);var x={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in O)if(Object.prototype.hasOwnProperty.call(O,k)){var N=R?Object.getOwnPropertyDescriptor(O,k):null;N&&(N.get||N.set)?Object.defineProperty(x,k,N):x[k]=O[k]}return x.default=O,b&&b.set(O,x),x}function a(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(x){return typeof x}:a=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},a(O)}function c(){return c=Object.assign||function(O){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var R in x)Object.prototype.hasOwnProperty.call(x,R)&&(O[R]=x[R])}return O},c.apply(this,arguments)}function l(O,b){var x=Object.keys(O);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(O);b&&(R=R.filter(function(k){return Object.getOwnPropertyDescriptor(O,k).enumerable})),x.push.apply(x,R)}return x}function f(O){for(var b=1;b<arguments.length;b++){var x=arguments[b]!=null?arguments[b]:{};b%2?l(Object(x),!0).forEach(function(R){M(O,R,x[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):l(Object(x)).forEach(function(R){Object.defineProperty(O,R,Object.getOwnPropertyDescriptor(x,R))})}return O}function d(O,b){if(!(O instanceof b))throw new TypeError("Cannot call a class as a function")}function h(O,b){for(var x=0;x<b.length;x++){var R=b[x];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}function m(O,b,x){return b&&h(O.prototype,b),O}function p(O){return function(){var b=w(O),x;if(P()){var R=w(this).constructor;x=Reflect.construct(b,arguments,R)}else x=b.apply(this,arguments);return S(this,x)}}function S(O,b){return b&&(a(b)==="object"||typeof b=="function")?b:v(O)}function v(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},w(O)}function E(O,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(b&&b.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),b&&$(O,b)}function $(O,b){return $=Object.setPrototypeOf||function(R,k){return R.__proto__=k,R},$(O,b)}function M(O,b,x){return b in O?Object.defineProperty(O,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):O[b]=x,O}var B=function(O){E(x,O);var b=p(x);function x(){var R;d(this,x);for(var k=arguments.length,N=new Array(k),j=0;j<k;j++)N[j]=arguments[j];return R=b.call.apply(b,[this].concat(N)),M(v(R),"storeHighlightedItemReference",function(V){R.props.onHighlightedItemChange(V===null?null:V.item)}),R}return m(x,[{key:"shouldComponentUpdate",value:function(k){return(0,s.default)(k,this.props,["itemProps"])}},{key:"render",value:function(){var k=this,N=this.props,j=N.items,V=N.itemProps,G=N.renderItem,K=N.renderItemData,_=N.sectionIndex,y=N.highlightedItemIndex,I=N.getItemId,F=N.theme,g=N.keyPrefix,A=_===null?g:"".concat(g,"section-").concat(_,"-"),T=typeof V=="function";return t.default.createElement("ul",c({role:"listbox"},F("".concat(A,"items-list"),"itemsList")),j.map(function(D,z){var Q=z===0,W=z===y,H="".concat(A,"item-").concat(z),Z=T?V({sectionIndex:_,itemIndex:z}):V,ne=f({id:I(_,z),"aria-selected":W},F(H,"item",Q&&"itemFirst",W&&"itemHighlighted"),{},Z);return W&&(ne.ref=k.storeHighlightedItemReference),t.default.createElement(r.default,c({},ne,{sectionIndex:_,isHighlighted:W,itemIndex:z,item:D,renderItem:G,renderItemData:K}))}))}}]),x}(t.Component);e.default=B,M(B,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),M(B,"defaultProps",{sectionIndex:null})})(vo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(C),n=u(Zt),r=u(qc),s=u(Qc),i=u(yo),o=u(vo);function u(y){return y&&y.__esModule?y:{default:y}}function a(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return a=function(){return y},y}function c(y){if(y&&y.__esModule)return y;if(y===null||P(y)!=="object"&&typeof y!="function")return{default:y};var I=a();if(I&&I.has(y))return I.get(y);var F={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in y)if(Object.prototype.hasOwnProperty.call(y,A)){var T=g?Object.getOwnPropertyDescriptor(y,A):null;T&&(T.get||T.set)?Object.defineProperty(F,A,T):F[A]=y[A]}return F.default=y,I&&I.set(y,F),F}function l(y,I){var F=Object.keys(y);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(y);I&&(g=g.filter(function(A){return Object.getOwnPropertyDescriptor(y,A).enumerable})),F.push.apply(F,g)}return F}function f(y){for(var I=1;I<arguments.length;I++){var F=arguments[I]!=null?arguments[I]:{};I%2?l(Object(F),!0).forEach(function(g){N(y,g,F[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(F)):l(Object(F)).forEach(function(g){Object.defineProperty(y,g,Object.getOwnPropertyDescriptor(F,g))})}return y}function d(y,I){return v(y)||S(y,I)||m(y,I)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(y,I){if(y){if(typeof y=="string")return p(y,I);var F=Object.prototype.toString.call(y).slice(8,-1);if(F==="Object"&&y.constructor&&(F=y.constructor.name),F==="Map"||F==="Set")return Array.from(F);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return p(y,I)}}function p(y,I){(I==null||I>y.length)&&(I=y.length);for(var F=0,g=new Array(I);F<I;F++)g[F]=y[F];return g}function S(y,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(y)))){var F=[],g=!0,A=!1,T=void 0;try{for(var D=y[Symbol.iterator](),z;!(g=(z=D.next()).done)&&(F.push(z.value),!(I&&F.length===I));g=!0);}catch(Q){A=!0,T=Q}finally{try{!g&&D.return!=null&&D.return()}finally{if(A)throw T}}return F}}function v(y){if(Array.isArray(y))return y}function P(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(F){return typeof F}:P=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},P(y)}function w(y,I){if(!(y instanceof I))throw new TypeError("Cannot call a class as a function")}function E(y,I){for(var F=0;F<I.length;F++){var g=I[F];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function $(y,I,F){return I&&E(y.prototype,I),y}function M(y){return function(){var I=x(y),F;if(b()){var g=x(this).constructor;F=Reflect.construct(I,arguments,g)}else F=I.apply(this,arguments);return B(this,F)}}function B(y,I){return I&&(P(I)==="object"||typeof I=="function")?I:O(y)}function O(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(y){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},x(y)}function R(y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(I&&I.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),I&&k(y,I)}function k(y,I){return k=Object.setPrototypeOf||function(g,A){return g.__proto__=A,g},k(y,I)}function N(y,I,F){return I in y?Object.defineProperty(y,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):y[I]=F,y}var j={},V=function(I){return t.default.createElement("input",I)},G=function(I){var F=I.containerProps,g=I.children;return t.default.createElement("div",F,g)},K={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},_=function(y){R(F,y);var I=M(F);function F(g){var A;return w(this,F),A=I.call(this,g),N(O(A),"storeInputReference",function(T){T!==null&&(A.input=T);var D=A.props.inputProps.ref;D&&(typeof D=="function"?D(T):P(D)==="object"&&Object.prototype.hasOwnProperty.call(D,"current")&&(D.current=T))}),N(O(A),"storeItemsContainerReference",function(T){T!==null&&(A.itemsContainer=T)}),N(O(A),"onHighlightedItemChange",function(T){A.highlightedItem=T}),N(O(A),"getItemId",function(T,D){if(D===null)return null;var z=A.props.id,Q=T===null?"":"section-".concat(T);return"react-autowhatever-".concat(z,"-").concat(Q,"-item-").concat(D)}),N(O(A),"onFocus",function(T){var D=A.props.inputProps;A.setState({isInputFocused:!0}),D.onFocus&&D.onFocus(T)}),N(O(A),"onBlur",function(T){var D=A.props.inputProps;A.setState({isInputFocused:!1}),D.onBlur&&D.onBlur(T)}),N(O(A),"onKeyDown",function(T){var D=A.props,z=D.inputProps,Q=D.highlightedSectionIndex,W=D.highlightedItemIndex,H=T.keyCode;switch(H){case 40:case 38:{var Z=H===40?"next":"prev",ne=A.sectionIterator[Z]([Q,W]),se=d(ne,2),ie=se[0],Ze=se[1];z.onKeyDown(T,{newHighlightedSectionIndex:ie,newHighlightedItemIndex:Ze});break}default:z.onKeyDown(T,{highlightedSectionIndex:Q,highlightedItemIndex:W})}}),A.highlightedItem=null,A.state={isInputFocused:!1},A.setSectionsItems(g),A.setSectionIterator(g),A.setTheme(g),A}return $(F,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(A){A.items!==this.props.items&&this.setSectionsItems(A),(A.items!==this.props.items||A.multiSection!==this.props.multiSection)&&this.setSectionIterator(A),A.theme!==this.props.theme&&this.setTheme(A)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(A){A.multiSection&&(this.sectionsItems=A.items.map(function(T){return A.getSectionItems(T)}),this.sectionsLengths=this.sectionsItems.map(function(T){return T.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(T){return T===0}))}},{key:"setSectionIterator",value:function(A){this.sectionIterator=(0,r.default)({multiSection:A.multiSection,data:A.multiSection?this.sectionsLengths:A.items.length})}},{key:"setTheme",value:function(A){this.theme=(0,s.default)(A.theme)}},{key:"renderSections",value:function(){var A=this;if(this.allSectionsAreEmpty)return null;var T=this.theme,D=this.props,z=D.id,Q=D.items,W=D.renderItem,H=D.renderItemData,Z=D.renderSectionTitle,ne=D.highlightedSectionIndex,se=D.highlightedItemIndex,ie=D.itemProps;return Q.map(function(Ze,fe){var ut="react-autowhatever-".concat(z,"-"),ct="".concat(ut,"section-").concat(fe,"-"),De=fe===0;return t.default.createElement("div",T("".concat(ct,"container"),"sectionContainer",De&&"sectionContainerFirst"),t.default.createElement(i.default,{section:Ze,renderSectionTitle:Z,theme:T,sectionKeyPrefix:ct}),t.default.createElement(o.default,{items:A.sectionsItems[fe],itemProps:ie,renderItem:W,renderItemData:H,sectionIndex:fe,highlightedItemIndex:ne===fe?se:null,onHighlightedItemChange:A.onHighlightedItemChange,getItemId:A.getItemId,theme:T,keyPrefix:ut,ref:A.storeItemsListReference}))})}},{key:"renderItems",value:function(){var A=this.props.items;if(A.length===0)return null;var T=this.theme,D=this.props,z=D.id,Q=D.renderItem,W=D.renderItemData,H=D.highlightedSectionIndex,Z=D.highlightedItemIndex,ne=D.itemProps;return t.default.createElement(o.default,{items:A,itemProps:ne,renderItem:Q,renderItemData:W,highlightedItemIndex:H===null?Z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:T,keyPrefix:"react-autowhatever-".concat(z,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var A=this.highlightedItem;if(A){var T=this.itemsContainer,D=A.offsetParent===T?A.offsetTop:A.offsetTop-T.offsetTop,z=T.scrollTop;D<z?z=D:D+A.offsetHeight>z+T.offsetHeight&&(z=D+A.offsetHeight-T.offsetHeight),z!==T.scrollTop&&(T.scrollTop=z)}}},{key:"render",value:function(){var A=this.theme,T=this.props,D=T.id,z=T.multiSection,Q=T.renderInputComponent,W=T.renderItemsContainer,H=T.highlightedSectionIndex,Z=T.highlightedItemIndex,ne=this.state.isInputFocused,se=z?this.renderSections():this.renderItems(),ie=se!==null,Ze=this.getItemId(H,Z),fe="react-autowhatever-".concat(D),ut=f({role:"combobox","aria-haspopup":"listbox","aria-owns":fe,"aria-expanded":ie},A("react-autowhatever-".concat(D,"-container"),"container",ie&&"containerOpen"),{},this.props.containerProps),ct=Q(f({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":fe,"aria-activedescendant":Ze},A("react-autowhatever-".concat(D,"-input"),"input",ie&&"inputOpen",ne&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),De=W({containerProps:f({id:fe,role:"listbox"},A("react-autowhatever-".concat(D,"-items-container"),"itemsContainer",ie&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:se});return t.default.createElement("div",ut,ct,De)}}]),F}(t.Component);e.default=_,N(_,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),N(_,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:V,renderItemsContainer:G,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:j,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:j,inputProps:j,itemProps:j,highlightedSectionIndex:null,highlightedItemIndex:null,theme:K})})(mo);var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.mapToAutowhateverTheme=bt.defaultTheme=void 0;var Yc={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};bt.defaultTheme=Yc;var Xc=function(t){var n={};for(var r in t)switch(r){case"suggestionsContainer":n.itemsContainer=t[r];break;case"suggestionsContainerOpen":n.itemsContainerOpen=t[r];break;case"suggestion":n.item=t[r];break;case"suggestionFirst":n.itemFirst=t[r];break;case"suggestionHighlighted":n.itemHighlighted=t[r];break;case"suggestionsList":n.itemsList=t[r];break;default:n[r]=t[r]}return n};bt.mapToAutowhateverTheme=Xc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(C),n=o(Zt),r=o(Vc),s=o(mo),i=bt;function o(_){return _&&_.__esModule?_:{default:_}}function u(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return u=function(){return _},_}function a(_){if(_&&_.__esModule)return _;if(_===null||c(_)!=="object"&&typeof _!="function")return{default:_};var y=u();if(y&&y.has(_))return y.get(_);var I={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in _)if(Object.prototype.hasOwnProperty.call(_,g)){var A=F?Object.getOwnPropertyDescriptor(_,g):null;A&&(A.get||A.set)?Object.defineProperty(I,g,A):I[g]=_[g]}return I.default=_,y&&y.set(_,I),I}function c(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(I){return typeof I}:c=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},c(_)}function l(_,y){var I=Object.keys(_);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(_);y&&(F=F.filter(function(g){return Object.getOwnPropertyDescriptor(_,g).enumerable})),I.push.apply(I,F)}return I}function f(_){for(var y=1;y<arguments.length;y++){var I=arguments[y]!=null?arguments[y]:{};y%2?l(Object(I),!0).forEach(function(F){M(_,F,I[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(I)):l(Object(I)).forEach(function(F){Object.defineProperty(_,F,Object.getOwnPropertyDescriptor(I,F))})}return _}function d(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function h(_,y){for(var I=0;I<y.length;I++){var F=y[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(_,F.key,F)}}function m(_,y,I){return y&&h(_.prototype,y),_}function p(_){return function(){var y=w(_),I;if(P()){var F=w(this).constructor;I=Reflect.construct(y,arguments,F)}else I=y.apply(this,arguments);return S(this,I)}}function S(_,y){return y&&(c(y)==="object"||typeof y=="function")?y:v(_)}function v(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(_){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},w(_)}function E(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),y&&$(_,y)}function $(_,y){return $=Object.setPrototypeOf||function(F,g){return F.__proto__=g,F},$(_,y)}function M(_,y,I){return y in _?Object.defineProperty(_,y,{value:I,enumerable:!0,configurable:!0,writable:!0}):_[y]=I,_}var B=function(){return!0},O=function(y){return y.trim().length>0},b=function(y){var I=y.containerProps,F=y.children;return t.default.createElement("div",I,F)},x="suggestions-revealed",R="suggestions-updated",k="suggestion-selected",N="input-focused",j="input-changed",V="input-blurred",G="escape-pressed",K=function(_){E(I,_);var y=p(I);function I(F){var g,A=F.alwaysRenderSuggestions;return d(this,I),g=y.call(this),M(v(g),"onDocumentMouseDown",function(T){g.justClickedOnSuggestionsContainer=!1;for(var D=T.detail&&T.detail.target||T.target;D!==null&&D!==document;){if(D.getAttribute&&D.getAttribute("data-suggestion-index")!==null)return;if(D===g.suggestionsContainer){g.justClickedOnSuggestionsContainer=!0;return}D=D.parentNode}}),M(v(g),"storeAutowhateverRef",function(T){T!==null&&(g.autowhatever=T)}),M(v(g),"onSuggestionMouseEnter",function(T,D){var z=D.sectionIndex,Q=D.itemIndex;g.updateHighlightedSuggestion(z,Q),T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!0),g.justMouseEntered=!0,setTimeout(function(){g.justMouseEntered=!1})}),M(v(g),"highlightFirstSuggestion",function(){g.updateHighlightedSuggestion(g.props.multiSection?0:null,0)}),M(v(g),"onDocumentMouseUp",function(){g.pressedSuggestion&&!g.justSelectedSuggestion&&g.input.focus(),g.pressedSuggestion=null}),M(v(g),"onSuggestionMouseDown",function(T){g.justSelectedSuggestion||(g.justSelectedSuggestion=!0,g.pressedSuggestion=T.target)}),M(v(g),"onSuggestionsClearRequested",function(){var T=g.props.onSuggestionsClearRequested;T&&T()}),M(v(g),"onSuggestionSelected",function(T,D){var z=g.props,Q=z.alwaysRenderSuggestions,W=z.onSuggestionSelected,H=z.onSuggestionsFetchRequested;W&&W(T,D);var Z=g.props.shouldKeepSuggestionsOnSelect(D.suggestion);Q||Z?H({value:D.suggestionValue,reason:k}):g.onSuggestionsClearRequested(),g.resetHighlightedSuggestion()}),M(v(g),"onSuggestionClick",function(T){var D=g.props,z=D.alwaysRenderSuggestions,Q=D.focusInputOnSuggestionClick,W=g.getSuggestionIndices(g.findSuggestionElement(T.target)),H=W.sectionIndex,Z=W.suggestionIndex,ne=g.getSuggestion(H,Z),se=g.props.getSuggestionValue(ne);g.maybeCallOnChange(T,se,"click"),g.onSuggestionSelected(T,{suggestion:ne,suggestionValue:se,suggestionIndex:Z,sectionIndex:H,method:"click"});var ie=g.props.shouldKeepSuggestionsOnSelect(ne);z||ie||g.closeSuggestions(),Q===!0?g.input.focus():g.onBlur(),setTimeout(function(){g.justSelectedSuggestion=!1})}),M(v(g),"onBlur",function(){var T=g.props,D=T.inputProps,z=T.shouldRenderSuggestions,Q=D.value,W=D.onBlur,H=g.getHighlightedSuggestion(),Z=z(Q,V);g.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Z}),W&&W(g.blurEvent,{highlightedSuggestion:H})}),M(v(g),"onSuggestionMouseLeave",function(T){g.resetHighlightedSuggestion(!1),g.justSelectedSuggestion&&T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!1)}),M(v(g),"onSuggestionTouchStart",function(){g.justSelectedSuggestion=!0}),M(v(g),"onSuggestionTouchMove",function(){g.justSelectedSuggestion=!1,g.pressedSuggestion=null,g.input.focus()}),M(v(g),"itemProps",function(T){var D=T.sectionIndex,z=T.itemIndex;return{"data-section-index":D,"data-suggestion-index":z,onMouseEnter:g.onSuggestionMouseEnter,onMouseLeave:g.onSuggestionMouseLeave,onMouseDown:g.onSuggestionMouseDown,onTouchStart:g.onSuggestionTouchStart,onTouchMove:g.onSuggestionTouchMove,onClick:g.onSuggestionClick}}),M(v(g),"renderSuggestionsContainer",function(T){var D=T.containerProps,z=T.children,Q=g.props.renderSuggestionsContainer;return Q({containerProps:D,children:z,query:g.getQuery()})}),g.state={isFocused:!1,isCollapsed:!A,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},g.justPressedUpDown=!1,g.justMouseEntered=!1,g.pressedSuggestion=null,g}return m(I,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(g){var A=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!g.highlightFirstSuggestion;(0,r.default)(g.suggestions,this.props.suggestions)?g.highlightFirstSuggestion&&g.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():A&&this.resetHighlightedSuggestion():this.willRenderSuggestions(g,R)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),A&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(g,A){var T=this.props,D=T.suggestions,z=T.onSuggestionHighlighted,Q=T.highlightFirstSuggestion;if(!(0,r.default)(D,g.suggestions)&&D.length>0&&Q){this.highlightFirstSuggestion();return}if(z){var W=this.getHighlightedSuggestion(),H=A.highlightedSuggestion;W!=H&&z({suggestion:W})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(g,A,T){var D=this;this.setState(function(z){var Q=z.valueBeforeUpDown;return A===null?Q=null:Q===null&&typeof T<"u"&&(Q=T),{highlightedSectionIndex:g,highlightedSuggestionIndex:A,highlightedSuggestion:A===null?null:D.getSuggestion(g,A),valueBeforeUpDown:Q}})}},{key:"resetHighlightedSuggestion",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(A){var T=A.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:g?null:T}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(g,A){var T=this.props,D=T.suggestions,z=T.multiSection,Q=T.getSectionSuggestions;return z?Q(D[g])[A]:D[A]}},{key:"getHighlightedSuggestion",value:function(){var g=this.state,A=g.highlightedSectionIndex,T=g.highlightedSuggestionIndex;return T===null?null:this.getSuggestion(A,T)}},{key:"getSuggestionValueByIndex",value:function(g,A){var T=this.props.getSuggestionValue;return T(this.getSuggestion(g,A))}},{key:"getSuggestionIndices",value:function(g){var A=g.getAttribute("data-section-index"),T=g.getAttribute("data-suggestion-index");return{sectionIndex:typeof A=="string"?parseInt(A,10):null,suggestionIndex:parseInt(T,10)}}},{key:"findSuggestionElement",value:function(g){var A=g;do{if(A.getAttribute&&A.getAttribute("data-suggestion-index")!==null)return A;A=A.parentNode}while(A!==null);throw console.error("Clicked element:",g),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(g,A,T){var D=this.props.inputProps,z=D.value,Q=D.onChange;A!==z&&Q(g,{newValue:A,method:T})}},{key:"willRenderSuggestions",value:function(g,A){var T=g.suggestions,D=g.inputProps,z=g.shouldRenderSuggestions,Q=D.value;return T.length>0&&z(Q,A)}},{key:"getQuery",value:function(){var g=this.props.inputProps,A=g.value,T=this.state.valueBeforeUpDown;return(T===null?A:T).trim()}},{key:"render",value:function(){var g=this,A=this.props,T=A.suggestions,D=A.renderInputComponent,z=A.onSuggestionsFetchRequested,Q=A.renderSuggestion,W=A.inputProps,H=A.multiSection,Z=A.renderSectionTitle,ne=A.id,se=A.getSectionSuggestions,ie=A.theme,Ze=A.getSuggestionValue,fe=A.alwaysRenderSuggestions,ut=A.highlightFirstSuggestion,ct=A.containerProps,De=this.state,Wo=De.isFocused,ds=De.isCollapsed,hs=De.highlightedSectionIndex,gs=De.highlightedSuggestionIndex,nn=De.valueBeforeUpDown,rn=fe?B:this.props.shouldRenderSuggestions,lt=W.value,ps=W.onFocus,ms=W.onKeyDown,zo=this.willRenderSuggestions(this.props,"render"),sn=fe||Wo&&!ds&&zo,Go=sn?T:[],Ko=f({},W,{onFocus:function(re){if(!g.justSelectedSuggestion&&!g.justClickedOnSuggestionsContainer){var $e=rn(lt,N);g.setState({isFocused:!0,isCollapsed:!$e}),ps&&ps(re),$e&&z({value:lt,reason:N})}},onBlur:function(re){if(g.justClickedOnSuggestionsContainer){g.input.focus();return}g.blurEvent=re,g.justSelectedSuggestion||(g.onBlur(),g.onSuggestionsClearRequested())},onChange:function(re){var $e=re.target.value,Ot=rn($e,j);g.maybeCallOnChange(re,$e,"type"),g.suggestionsContainer&&(g.suggestionsContainer.scrollTop=0),g.setState(f({},ut?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!Ot})),Ot?z({value:$e,reason:j}):g.onSuggestionsClearRequested()},onKeyDown:function(re,$e){var Ot=re.keyCode;switch(Ot){case 40:case 38:if(ds)rn(lt,x)&&(z({value:lt,reason:x}),g.revealSuggestions(),re.preventDefault());else if(T.length>0){var ys=$e.newHighlightedSectionIndex,Gn=$e.newHighlightedItemIndex,Kn;Gn===null?Kn=nn===null?lt:nn:Kn=g.getSuggestionValueByIndex(ys,Gn),g.updateHighlightedSuggestion(ys,Gn,lt),g.maybeCallOnChange(re,Kn,Ot===40?"down":"up"),re.preventDefault()}g.justPressedUpDown=!0,setTimeout(function(){g.justPressedUpDown=!1});break;case 13:{if(re.keyCode===229)break;var Qn=g.getHighlightedSuggestion();if(sn&&!fe&&g.closeSuggestions(),Qn!=null){re.preventDefault();var vs=Ze(Qn);g.maybeCallOnChange(re,vs,"enter"),g.onSuggestionSelected(re,{suggestion:Qn,suggestionValue:vs,suggestionIndex:gs,sectionIndex:hs,method:"enter"}),g.justSelectedSuggestion=!0,setTimeout(function(){g.justSelectedSuggestion=!1})}break}case 27:{sn&&re.preventDefault();var bs=sn&&!fe;if(nn===null){if(!bs){var Yn="";g.maybeCallOnChange(re,Yn,"escape"),rn(Yn,G)?z({value:Yn,reason:G}):g.onSuggestionsClearRequested()}}else g.maybeCallOnChange(re,nn,"escape");bs?(g.onSuggestionsClearRequested(),g.closeSuggestions()):g.resetHighlightedSuggestion();break}}ms&&ms(re)}}),Qo={query:this.getQuery()};return t.default.createElement(s.default,{multiSection:H,items:Go,renderInputComponent:D,renderItemsContainer:this.renderSuggestionsContainer,renderItem:Q,renderItemData:Qo,renderSectionTitle:Z,getSectionItems:se,highlightedSectionIndex:hs,highlightedItemIndex:gs,containerProps:ct,inputProps:Ko,itemProps:this.itemProps,theme:(0,i.mapToAutowhateverTheme)(ie),id:ne,ref:this.storeAutowhateverRef})}}]),I}(t.Component);e.default=K,M(K,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(y,I){var F=y[I];if(typeof F!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(y,I){var F=y[I];if(y.alwaysRenderSuggestions===!1&&typeof F!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(y,I){var F=y[I];if(!F)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(F,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(F,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(y,I){var F=y[I];if(y.multiSection===!0&&typeof F!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(y,I){var F=y[I];if(y.multiSection===!0&&typeof F!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),M(K,"defaultProps",{renderSuggestionsContainer:b,shouldRenderSuggestions:O,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:i.defaultTheme,id:"1",containerProps:{}})})(fo);var Jc=fo.default;const Zc=Yo(Jc),el=e=>{const[t,n]=C.useState([]),r=({value:i})=>n(e.getSuggestions(i)),s=(i,{isHighlighted:o})=>q.jsx("div",{"data-highlighted":o?"true":void 0,children:i});return q.jsx(Zc,{suggestions:t,onSuggestionSelected:(i,o)=>e.onSelect&&e.onSelect(o.suggestion),onSuggestionsFetchRequested:r,onSuggestionsClearRequested:()=>n([]),getSuggestionValue:i=>i,renderSuggestionsContainer:({containerProps:i,children:o})=>C.Children.toArray(o).length>0?C.createElement("div",{...i,key:i.key,className:"react-autosuggest"},o):null,renderSuggestion:s,containerProps:{className:"relative"},inputProps:{disabled:e.disabled,placeholder:e.placeholder,value:e.value||"",onBlur:e.onBlur,onChange:(i,{newValue:o})=>e.onChange&&e.onChange(o),onFocus:e.onFocus,onKeyDown:e.onKeyDown}})};var Ke={};Ke.remove=tl;var mn=[{base:" ",chars:""},{base:"0",chars:""},{base:"A",chars:""},{base:"AA",chars:""},{base:"AE",chars:""},{base:"AO",chars:""},{base:"AU",chars:""},{base:"AV",chars:""},{base:"AY",chars:""},{base:"B",chars:""},{base:"C",chars:"C"},{base:"D",chars:""},{base:"Dh",chars:""},{base:"DZ",chars:""},{base:"Dz",chars:""},{base:"E",chars:""},{base:"F",chars:""},{base:"G",chars:""},{base:"H",chars:""},{base:"I",chars:""},{base:"J",chars:""},{base:"K",chars:""},{base:"L",chars:""},{base:"LJ",chars:""},{base:"Lj",chars:""},{base:"M",chars:""},{base:"N",chars:""},{base:"NJ",chars:""},{base:"Nj",chars:""},{base:"O",chars:""},{base:"OE",chars:""},{base:"OI",chars:""},{base:"OO",chars:""},{base:"OU",chars:""},{base:"P",chars:""},{base:"Q",chars:""},{base:"R",chars:""},{base:"S",chars:""},{base:"T",chars:""},{base:"Th",chars:""},{base:"TZ",chars:""},{base:"U",chars:""},{base:"V",chars:""},{base:"VY",chars:""},{base:"W",chars:""},{base:"X",chars:""},{base:"Y",chars:""},{base:"Z",chars:""},{base:"a",chars:""},{base:"aa",chars:""},{base:"ae",chars:""},{base:"ao",chars:""},{base:"au",chars:""},{base:"av",chars:""},{base:"ay",chars:""},{base:"b",chars:""},{base:"c",chars:""},{base:"d",chars:""},{base:"dh",chars:""},{base:"dz",chars:""},{base:"e",chars:""},{base:"f",chars:""},{base:"ff",chars:""},{base:"fi",chars:""},{base:"fl",chars:""},{base:"ffi",chars:""},{base:"ffl",chars:""},{base:"g",chars:""},{base:"h",chars:""},{base:"hv",chars:""},{base:"i",chars:""},{base:"j",chars:""},{base:"k",chars:""},{base:"l",chars:""},{base:"lj",chars:""},{base:"m",chars:""},{base:"n",chars:""},{base:"nj",chars:""},{base:"o",chars:""},{base:"oe",chars:""},{base:"oi",chars:""},{base:"oo",chars:""},{base:"ou",chars:""},{base:"p",chars:""},{base:"q",chars:""},{base:"r",chars:""},{base:"s",chars:""},{base:"ss",chars:""},{base:"t",chars:""},{base:"th",chars:""},{base:"tz",chars:""},{base:"u",chars:""},{base:"v",chars:""},{base:"vy",chars:""},{base:"w",chars:""},{base:"x",chars:""},{base:"y",chars:""},{base:"z",chars:""}],ss={};for(var ln=0;ln<mn.length;ln+=1)for(var ii=mn[ln].chars,ar=0;ar<ii.length;ar+=1)ss[ii[ar]]=mn[ln].base;function tl(e){return e.replace(/[^\u0000-\u007e]/g,function(t){return ss[t]||t})}Ke.replacementList=mn;Ke.diacriticsMap=ss;function Ne(e){return Array.isArray?Array.isArray(e):Eo(e)==="[object Array]"}const nl=1/0;function rl(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-nl?"-0":t}function sl(e){return e==null?"":rl(e)}function Ce(e){return typeof e=="string"}function So(e){return typeof e=="number"}function il(e){return e===!0||e===!1||ol(e)&&Eo(e)=="[object Boolean]"}function wo(e){return typeof e=="object"}function ol(e){return wo(e)&&e!==null}function pe(e){return e!=null}function ur(e){return!e.trim().length}function Eo(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const al="Incorrect 'index' type",ul=e=>`Invalid value for key ${e}`,cl=e=>`Pattern length exceeds max of ${e}.`,ll=e=>`Missing ${e} property in key`,fl=e=>`Property 'weight' in key '${e}' must be a positive integer`,oi=Object.prototype.hasOwnProperty;class dl{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=xo(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function xo(e){let t=null,n=null,r=null,s=1,i=null;if(Ce(e)||Ne(e))r=e,t=ai(e),n=Cr(e);else{if(!oi.call(e,"name"))throw new Error(ll("name"));const o=e.name;if(r=o,oi.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(fl(o));t=ai(o),n=Cr(o),i=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:i}}function ai(e){return Ne(e)?e:e.split(".")}function Cr(e){return Ne(e)?e.join("."):e}function hl(e,t){let n=[],r=!1;const s=(i,o,u)=>{if(pe(i))if(!o[u])n.push(i);else{let a=o[u];const c=i[a];if(!pe(c))return;if(u===o.length-1&&(Ce(c)||So(c)||il(c)))n.push(sl(c));else if(Ne(c)){r=!0;for(let l=0,f=c.length;l<f;l+=1)s(c[l],o,u+1)}else o.length&&s(c,o,u+1)}};return s(e,Ce(t)?t.split("."):t,0),r?n:n[0]}const gl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},pl={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},ml={location:0,threshold:.6,distance:100},yl={useExtendedSearch:!1,getFn:hl,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var X={...pl,...gl,...ml,...yl};const vl=/[^ ]+/g;function bl(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const i=s.match(vl).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),u=parseFloat(Math.round(o*r)/r);return n.set(i,u),u},clear(){n.clear()}}}class is{constructor({getFn:t=X.getFn,fieldNormWeight:n=X.fieldNormWeight}={}){this.norm=bl(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ce(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ce(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!pe(t)||ur(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(pe(o)){if(Ne(o)){let u=[];const a=[{nestedArrIndex:-1,value:o}];for(;a.length;){const{nestedArrIndex:c,value:l}=a.pop();if(pe(l))if(Ce(l)&&!ur(l)){let f={v:l,i:c,n:this.norm.get(l)};u.push(f)}else Ne(l)&&l.forEach((f,d)=>{a.push({nestedArrIndex:d,value:f})})}r.$[i]=u}else if(Ce(o)&&!ur(o)){let u={v:o,n:this.norm.get(o)};r.$[i]=u}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function _o(e,t,{getFn:n=X.getFn,fieldNormWeight:r=X.fieldNormWeight}={}){const s=new is({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(xo)),s.setSources(t),s.create(),s}function Sl(e,{getFn:t=X.getFn,fieldNormWeight:n=X.fieldNormWeight}={}){const{keys:r,records:s}=e,i=new is({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function fn(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=X.distance,ignoreLocation:i=X.ignoreLocation}={}){const o=t/e.length;if(i)return o;const u=Math.abs(r-n);return s?o+u/s:u?1:o}function wl(e=[],t=X.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=e.length;i<o;i+=1){let u=e[i];u&&r===-1?r=i:!u&&r!==-1&&(s=i-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const et=32;function El(e,t,n,{location:r=X.location,distance:s=X.distance,threshold:i=X.threshold,findAllMatches:o=X.findAllMatches,minMatchCharLength:u=X.minMatchCharLength,includeMatches:a=X.includeMatches,ignoreLocation:c=X.ignoreLocation}={}){if(t.length>et)throw new Error(cl(et));const l=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=i,m=d;const p=u>1||a,S=p?Array(f):[];let v;for(;(v=e.indexOf(t,m))>-1;){let B=fn(t,{currentLocation:v,expectedLocation:d,distance:s,ignoreLocation:c});if(h=Math.min(B,h),m=v+l,p){let O=0;for(;O<l;)S[v+O]=1,O+=1}}m=-1;let P=[],w=1,E=l+f;const $=1<<l-1;for(let B=0;B<l;B+=1){let O=0,b=E;for(;O<b;)fn(t,{errors:B,currentLocation:d+b,expectedLocation:d,distance:s,ignoreLocation:c})<=h?O=b:E=b,b=Math.floor((E-O)/2+O);E=b;let x=Math.max(1,d-b+1),R=o?f:Math.min(d+b,f)+l,k=Array(R+2);k[R+1]=(1<<B)-1;for(let j=R;j>=x;j-=1){let V=j-1,G=n[e.charAt(V)];if(p&&(S[V]=+!!G),k[j]=(k[j+1]<<1|1)&G,B&&(k[j]|=(P[j+1]|P[j])<<1|1|P[j+1]),k[j]&$&&(w=fn(t,{errors:B,currentLocation:V,expectedLocation:d,distance:s,ignoreLocation:c}),w<=h)){if(h=w,m=V,m<=d)break;x=Math.max(1,2*d-m)}}if(fn(t,{errors:B+1,currentLocation:d,expectedLocation:d,distance:s,ignoreLocation:c})>h)break;P=k}const M={isMatch:m>=0,score:Math.max(.001,w)};if(p){const B=wl(S,u);B.length?a&&(M.indices=B):M.isMatch=!1}return M}function xl(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class Oo{constructor(t,{location:n=X.location,threshold:r=X.threshold,distance:s=X.distance,includeMatches:i=X.includeMatches,findAllMatches:o=X.findAllMatches,minMatchCharLength:u=X.minMatchCharLength,isCaseSensitive:a=X.isCaseSensitive,ignoreLocation:c=X.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(d,h)=>{this.chunks.push({pattern:d,alphabet:xl(d),startIndex:h})},f=this.pattern.length;if(f>et){let d=0;const h=f%et,m=f-h;for(;d<m;)l(this.pattern.substr(d,et),d),d+=et;if(h){const p=f-et;l(this.pattern.substr(p),p)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let m={isMatch:!0,score:0};return r&&(m.indices=[[0,t.length-1]]),m}const{location:s,distance:i,threshold:o,findAllMatches:u,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[],f=0,d=!1;this.chunks.forEach(({pattern:m,alphabet:p,startIndex:S})=>{const{isMatch:v,score:P,indices:w}=El(t,m,p,{location:s+S,distance:i,threshold:o,findAllMatches:u,minMatchCharLength:a,includeMatches:r,ignoreLocation:c});v&&(d=!0),f+=P,v&&w&&(l=[...l,...w])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=l),h}}class Xe{constructor(t){this.pattern=t}static isMultiMatch(t){return ui(t,this.multiRegex)}static isSingleMatch(t){return ui(t,this.singleRegex)}search(){}}function ui(e,t){const n=e.match(t);return n?n[1]:null}class _l extends Xe{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Ol extends Xe{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Il extends Xe{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Al extends Xe{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Cl extends Xe{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Pl extends Xe{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Io extends Xe{constructor(t,{location:n=X.location,threshold:r=X.threshold,distance:s=X.distance,includeMatches:i=X.includeMatches,findAllMatches:o=X.findAllMatches,minMatchCharLength:u=X.minMatchCharLength,isCaseSensitive:a=X.isCaseSensitive,ignoreLocation:c=X.ignoreLocation}={}){super(t),this._bitapSearch=new Oo(t,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Ao extends Xe{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Pr=[_l,Ao,Il,Al,Pl,Cl,Ol,Io],ci=Pr.length,Rl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Fl="|";function Tl(e,t={}){return e.split(Fl).map(n=>{let r=n.trim().split(Rl).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const u=r[i];let a=!1,c=-1;for(;!a&&++c<ci;){const l=Pr[c];let f=l.isMultiMatch(u);f&&(s.push(new l(f,t)),a=!0)}if(!a)for(c=-1;++c<ci;){const l=Pr[c];let f=l.isSingleMatch(u);if(f){s.push(new l(f,t));break}}}return s})}const Dl=new Set([Io.type,Ao.type]);class $l{constructor(t,{isCaseSensitive:n=X.isCaseSensitive,includeMatches:r=X.includeMatches,minMatchCharLength:s=X.minMatchCharLength,ignoreLocation:i=X.ignoreLocation,findAllMatches:o=X.findAllMatches,location:u=X.location,threshold:a=X.threshold,distance:c=X.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:u,threshold:a,distance:c},this.pattern=n?t:t.toLowerCase(),this.query=Tl(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0,o=[],u=0;for(let a=0,c=n.length;a<c;a+=1){const l=n[a];o.length=0,i=0;for(let f=0,d=l.length;f<d;f+=1){const h=l[f],{isMatch:m,indices:p,score:S}=h.search(t);if(m){if(i+=1,u+=S,r){const v=h.constructor.type;Dl.has(v)?o=[...o,...p]:o.push(p)}}else{u=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:u/i};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Rr=[];function kl(...e){Rr.push(...e)}function Fr(e,t){for(let n=0,r=Rr.length;n<r;n+=1){let s=Rr[n];if(s.condition(e,t))return new s(e,t)}return new Oo(e,t)}const _n={AND:"$and",OR:"$or"},Tr={PATH:"$path",PATTERN:"$val"},Dr=e=>!!(e[_n.AND]||e[_n.OR]),Ml=e=>!!e[Tr.PATH],jl=e=>!Ne(e)&&wo(e)&&!Dr(e),li=e=>({[_n.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Co(e,t,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=Ml(s);if(!o&&i.length>1&&!Dr(s))return r(li(s));if(jl(s)){const a=o?s[Tr.PATH]:i[0],c=o?s[Tr.PATTERN]:s[a];if(!Ce(c))throw new Error(ul(a));const l={keyId:Cr(a),pattern:c};return n&&(l.searcher=Fr(c,t)),l}let u={children:[],operator:i[0]};return i.forEach(a=>{const c=s[a];Ne(c)&&c.forEach(l=>{u.children.push(r(l))})}),u};return Dr(e)||(e=li(e)),r(e)}function Nl(e,{ignoreFieldNorm:t=X.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const u=s?s.weight:null;r*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(t?1:i))}),n.score=r})}function Bl(e,t){const n=e.matches;t.matches=[],pe(n)&&n.forEach(r=>{if(!pe(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Ll(e,t){t.score=e.score}function Ul(e,t,{includeMatches:n=X.includeMatches,includeScore:r=X.includeScore}={}){const s=[];return n&&s.push(Bl),r&&s.push(Ll),e.map(i=>{const{idx:o}=i,u={item:t[o],refIndex:o};return s.length&&s.forEach(a=>{a(i,u)}),u})}class Je{constructor(t,n={},r){this.options={...X,...n},this.options.useExtendedSearch,this._keyStore=new dl(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof is))throw new Error(al);this._myIndex=n||_o(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:u}=this.options;let a=Ce(t)?Ce(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Nl(a,{ignoreFieldNorm:u}),i&&a.sort(o),So(n)&&n>-1&&(a=a.slice(0,n)),Ul(a,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=Fr(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:u})=>{if(!pe(i))return;const{isMatch:a,score:c,indices:l}=n.searchIn(i);a&&s.push({item:i,idx:o,matches:[{score:c,value:i,norm:u,indices:l}]})}),s}_searchLogical(t){const n=Co(t,this.options),r=(u,a,c)=>{if(!u.children){const{keyId:f,searcher:d}=u,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:d});return h&&h.length?[{idx:c,item:a,matches:h}]:[]}const l=[];for(let f=0,d=u.children.length;f<d;f+=1){const h=u.children[f],m=r(h,a,c);if(m.length)l.push(...m);else if(u.operator===_n.AND)return[]}return l},s=this._myIndex.records,i={},o=[];return s.forEach(({$:u,i:a})=>{if(pe(u)){let c=r(n,u,a);c.length&&(i[a]||(i[a]={idx:a,item:u,matches:[]},o.push(i[a])),c.forEach(({matches:l})=>{i[a].matches.push(...l)}))}}),o}_searchObjectList(t){const n=Fr(t,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:u})=>{if(!pe(o))return;let a=[];r.forEach((c,l)=>{a.push(...this._findMatches({key:c,value:o[l],searcher:n}))}),a.length&&i.push({idx:u,item:o,matches:a})}),i}_findMatches({key:t,value:n,searcher:r}){if(!pe(n))return[];let s=[];if(Ne(n))n.forEach(({v:i,i:o,n:u})=>{if(!pe(i))return;const{isMatch:a,score:c,indices:l}=r.searchIn(i);a&&s.push({score:c,key:t,value:i,idx:o,norm:u,indices:l})});else{const{v:i,n:o}=n,{isMatch:u,score:a,indices:c}=r.searchIn(i);u&&s.push({score:a,key:t,value:i,norm:o,indices:c})}return s}}Je.version="7.0.0";Je.createIndex=_o;Je.parseIndex=Sl;Je.config=X;Je.parseQuery=Co;kl($l);const Po=.3,Hl=e=>{const n=[...new Set(e.reduce((r,s)=>{const i=s.bodies.filter(o=>o.purpose==="tagging"&&o.value);return[...r,...i.map(o=>o.value)]},[]))].map(r=>({value:r,normalized:Ke.remove(r)}));return new Je(n,{keys:["normalized"],shouldSort:!0,threshold:Po})},Vl=()=>fetch("/thesaurus/all-concepts-compact.json").then(e=>e.json()).then(e=>{e.sort();const t=e.map(n=>({value:n,normalized:Ke.remove(n)}));return new Je(t,{keys:["normalized"],shouldSort:!0,threshold:Po})}),ql=(e,t="THESAURUS")=>{const[n,r]=C.useState(),s=C.useMemo(()=>new Map(e.map(a=>[a.id,a])),[e]);C.useEffect(()=>{if(t==="FROM_ANNOTATIONS"){const a=Hl(e);r(a)}else Vl().then(r)},[t,e]);const i=C.useMemo(()=>{const a=e.map(c=>{const l=c.id,f=c.bodies.filter(d=>d.purpose==="tagging"&&d.value).map(d=>({value:d.value,normalized:Ke.remove(d.value)}));return{annotationId:l,tags:f}}).filter(c=>c.tags.length>0);return new Je(a,{keys:["tags.normalized"],shouldSort:!0,threshold:0})},[e]);return{search:(a,c)=>i.search(Ke.remove(a),{limit:c||500}).map(l=>s.get(l.item.annotationId)).filter(Boolean),getSuggestions:(a,c)=>n?n.search(Ke.remove(a),{limit:c||10}).map(l=>l.item.value):[]}},Wl=e=>{const t=oa(),[n,r]=C.useState(!0),{search:s,getSuggestions:i}=ql(t),[o,u]=C.useState(""),[a,c]=C.useState(),[l,f]=C.useState(0),[d,h]=C.useState(!1),m=ns([n],{from:{maxWidth:0,opacity:0},enter:{maxWidth:120,opacity:1},leave:{maxWidth:0,opacity:1},config:{duration:250,easing:Mn.easeInOutCubic}});C.useEffect(()=>{if(o){const w=s(o);e.sorter&&w.sort(e.sorter),c(w),w.length>0?f(1):f(0),e.onSearch(w)}else c(void 0),f(1),e.onSearch([])},[o,e.sorter]),C.useEffect(()=>{if(!l||!a)return;const w=a[l-1];e.onHighlightResult(w)},[a,l]);const p=w=>{if(!a)return;const E=Math.min(Math.max(1,l+w),a.length);f(E)},S=()=>{u(""),c(void 0),f(1),r(!0),e.onClear()},v=w=>{w.key==="Enter"?d?p(1):h(!0):h(!1)},P=()=>{o||r(!0)};return q.jsxs("div",{className:"annotation-search",children:[q.jsx(Su,{size:20}),q.jsxs("div",{className:"searchbox-wrapper",children:[q.jsx(el,{placeholder:"Search",value:o,onChange:u,onFocus:()=>r(!1),onBlur:P,onKeyDown:v,getSuggestions:i}),a&&q.jsxs("div",{className:"result-count",children:[l,"/",a.length]})]}),m((w,E)=>!E&&q.jsx(rs.div,{style:w,className:"collapsible",children:q.jsxs("div",{className:"actions",children:[q.jsx("button",{onClick:()=>p(-1),children:q.jsx(vu,{size:18})}),q.jsx("button",{onClick:()=>p(1),children:q.jsx(mu,{size:18})}),q.jsx("button",{onClick:S,children:q.jsx(Lr,{size:18,strokeWidth:2.2})})]})}))]})},od=e=>{const[t,n]=C.useState([]);return C.useEffect(()=>{e.onSearch(t)},[t]),q.jsxs("header",{children:[q.jsxs("div",{className:"header-left",children:[q.jsxs("a",{href:`../..${e.backToTab?`?tab=${e.backToTab}`:""}`,children:[q.jsx(yu,{}),q.jsx("span",{children:"Home"})]}),q.jsx("a",{href:"../../about",children:"About"})]}),q.jsxs("div",{className:"header-right",children:[q.jsx(Wl,{sorter:e.searchSorter,onClear:e.onClearSearch,onHighlightResult:e.onHighlightSearchResult,onSearch:n}),q.jsx("button",{className:e.isRelatedVersesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedVerses,children:q.jsx(pu,{size:18})}),q.jsx("button",{className:e.isRelatedImagesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedImages,children:q.jsx(bu,{size:18})})]})]})},Ro=e=>e.bodies.filter(t=>t.purpose==="tagging"&&t.value&&t.id).map(t=>({id:t.id,label:t.value})),zl=(e,t)=>{const n=new Set(e.map(o=>o.id)),s=t.map(o=>o.id).filter(o=>n.has(o)),i=new Set([...e,...t]);return s.length/i.size},Fo=(e,t)=>{const n=(i,o)=>i.length===o.length&&i.every(u=>o.some(a=>a.id===u.id)),r=i=>{i.sort((o,u)=>u.common.length-o.common.length),i.forEach(o=>o.related.sort((u,a)=>a.score-u.score))},s=[];return t.forEach(i=>{const o=i.tags.filter(c=>e.some(l=>l.id===c.id)),u=zl(e,i.tags),a=s.find(({common:c})=>n(c,o));a?a.related=[...a.related,{annotation:i,score:u}]:s.push({common:o,related:[{annotation:i,score:u}]})}),r(s),s},ad=(e,t)=>{const n=[...e].filter(i=>i.width>0&&i.height>0);let r,s=Number.MAX_VALUE;return n.forEach(i=>{const o=i.top+i.height/2,u=Math.abs(o-t.y);u<s&&(s=u,r=i)}),r},ud=e=>({length:1,item:t=>t===0?e:void 0,[Symbol.iterator]:function*(){for(let t=0;t<this.length;t++)yield this.item(t)}}),Gl=ke.createContext({}),To=!0;function Kl({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:s,circle:i,direction:o,duration:u,enableAnimation:a=To,customHighlightBackground:c}){const l={};return o==="rtl"&&(l["--animation-direction"]="reverse"),typeof u=="number"&&(l["--animation-duration"]=`${u}s`),a||(l["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(l.width=n),(typeof r=="string"||typeof r=="number")&&(l.height=r),(typeof s=="string"||typeof s=="number")&&(l.borderRadius=s),i&&(l.borderRadius="50%"),typeof e<"u"&&(l["--base-color"]=e),typeof t<"u"&&(l["--highlight-color"]=t),typeof c=="string"&&(l["--custom-highlight-background"]=c),l}function Ql({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:s,circle:i=!1,style:o,...u}){var a,c,l;const f=ke.useContext(Gl),d={...u};for(const[w,E]of Object.entries(u))typeof E>"u"&&delete d[w];const h={...f,...d,circle:i},m={...o,...Kl(h)};let p="react-loading-skeleton";n&&(p+=` ${n}`);const S=(a=h.inline)!==null&&a!==void 0?a:!1,v=[],P=Math.ceil(e);for(let w=0;w<P;w++){let E=m;if(P>e&&w===P-1){const M=(c=E.width)!==null&&c!==void 0?c:"100%",B=e%1,O=typeof M=="number"?M*B:`calc(${M} * ${B})`;E={...E,width:O}}const $=ke.createElement("span",{className:p,style:E,key:w},"");S?v.push($):v.push(ke.createElement(ke.Fragment,{key:w},$,ke.createElement("br",null)))}return ke.createElement("span",{className:r,"data-testid":s,"aria-live":"polite","aria-busy":(l=h.enableAnimation)!==null&&l!==void 0?l:To},t?v.map((w,E)=>ke.createElement(t,{key:E},w)):v)}const Yl=e=>{const[t,n]=C.useState(!1);return q.jsxs("div",{className:"thumbnail-wrapper",children:[!t&&q.jsx(Ql,{}),q.jsx("img",{src:e.src,style:{display:t?void 0:"none"},onLoad:()=>n(!0)})]})},cd=e=>{const[t,n]=C.useState(!1),r=Ri(),s=C.useMemo(()=>e.annotation?Ro(e.annotation):[],[e.annotation]),i=C.useMemo(()=>Fo(s,e.related||[]),[s,e.related]),o=ns([e.open&&r],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:Mn.easeInCubic}});C.useLayoutEffect(()=>{setTimeout(()=>n(!0),1)},[]);const u=a=>a.id?a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/image/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`:a.slug===e.currentSlug?"#":`/image/${a.slug}`;return o((a,c)=>c&&q.jsxs(rs.aside,{style:a,className:"related related-images",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(Lr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Images ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:i.map((l,f)=>l.related.map(({annotation:d})=>q.jsxs("li",{children:[q.jsxs("div",{className:"preview",children:[q.jsx(Yl,{src:d.thumbnail}),q.jsx("div",{className:"taglist-wrapper",children:q.jsx("ul",{className:"taglist",children:d.tags.map(h=>q.jsx("li",{className:s.some(m=>m.id===h.id)?"common":void 0,children:r?.find(m=>m.id===h.id)?.label||h.label},h.id))})})]}),q.jsx("a",{href:u(d),children:d.image})]},`${f}-${d.id}`)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},Xl=e=>{const{prefix:t,quote:n,suffix:r}=e.value,[s,i]=C.useMemo(()=>{const u=t&&(t.endsWith("|")?t:t+" "),a=r&&(r?.startsWith("|")?r:" "+r);return[u,a]},[t,n,r]),o=u=>u.replace(/\|/g,"|&#8203;");return q.jsxs(q.Fragment,{children:[s&&q.jsx("span",{dangerouslySetInnerHTML:{__html:o(s)}}),q.jsx("a",{href:e.href,className:"verse-snippet-quote",dangerouslySetInnerHTML:{__html:o(n)}}),i&&q.jsx("span",{dangerouslySetInnerHTML:{__html:o(i)}})]})},ld=e=>{const t=Ri(),[n,r]=C.useState(!1),s=C.useMemo(()=>e.annotation?Ro(e.annotation):[],[e.annotation]),i=C.useMemo(()=>Fo(s,e.related||[]),[s,e.related]),o=ns([e.open],{from:{width:n?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:Mn.easeInCubic}});C.useLayoutEffect(()=>{setTimeout(()=>r(!0),10)},[]);const u=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/verse/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return o((a,c)=>c&&q.jsxs(rs.aside,{style:a,className:"related related-verses",children:[q.jsx("button",{onClick:e.onClose,className:"close",children:q.jsx(Lr,{size:20,strokeWidth:1.5})}),q.jsxs("div",{className:"related-verses-wrapper",children:[q.jsxs("h3",{children:["Verses ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?q.jsx("ul",{children:i.map(l=>l.related.map(({annotation:f})=>q.jsxs("li",{children:[q.jsx("ul",{className:"taglist",children:f.tags.map(d=>q.jsx("li",{className:s.some(h=>h.id===d.id)?"common":void 0,children:t?.find(h=>h.id===d.id)?.label||d.label},d.id))}),f.snippet&&q.jsx("p",{className:"snippet-preview",children:q.jsx(Xl,{value:f.snippet,href:u(f)})}),q.jsx("a",{href:u(f),children:f.verse})]},f.id)))}):q.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},fd=e=>{const t=e.relatedImages.length,n=e.relatedVerses.length,r=C.useMemo(()=>e.annotation.bodies.filter(s=>s.purpose==="tagging"),[e.annotation]);return q.jsx("div",{className:"annotation-popup",children:q.jsxs("div",{className:"tags",children:[q.jsx("div",{children:r.map(s=>s.value).join("  ")}),e.type==="VERSE"?q.jsxs("div",{className:"related",children:[n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," other verse",n>1&&"s"]})}),t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," image",t>1&&"s"]})})]}):q.jsxs("div",{className:"related",children:[t>0&&q.jsx("button",{onClick:e.onClickImages,children:q.jsxs("span",{children:[t," other image",t>1&&"s"]})}),n>0&&q.jsx("button",{onClick:e.onClickVerses,children:q.jsxs("span",{children:[n," verse",n>1&&"s"]})})]})]})})};function Vn(){return typeof window<"u"}function xt(e){return Do(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Te(e){var t;return(t=(Do(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Do(e){return Vn()?e instanceof Node||e instanceof me(e).Node:!1}function le(e){return Vn()?e instanceof Element||e instanceof me(e).Element:!1}function Fe(e){return Vn()?e instanceof HTMLElement||e instanceof me(e).HTMLElement:!1}function fi(e){return!Vn()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}function en(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=we(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Jl(e){return["table","td","th"].includes(xt(e))}function qn(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function os(e){const t=as(),n=le(e)?we(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Zl(e){let t=Qe(e);for(;Fe(t)&&!St(t);){if(os(t))return t;if(qn(t))return null;t=Qe(t)}return null}function as(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function St(e){return["html","body","#document"].includes(xt(e))}function we(e){return me(e).getComputedStyle(e)}function Wn(e){return le(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qe(e){if(xt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fi(e)&&e.host||Te(e);return fi(t)?t.host:t}function $o(e){const t=Qe(e);return St(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fe(t)&&en(t)?t:$o(t)}function Kt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=$o(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=me(s);if(i){const u=$r(o);return t.concat(o,o.visualViewport||[],en(s)?s:[],u&&n?Kt(u):[])}return t.concat(s,Kt(s,[],n))}function $r(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Be=Math.min,Pe=Math.max,On=Math.round,dn=Math.floor,Ye=e=>({x:e,y:e}),ef={left:"right",right:"left",bottom:"top",top:"bottom"},tf={start:"end",end:"start"};function kr(e,t,n){return Pe(e,Be(t,n))}function _t(e,t){return typeof e=="function"?e(t):e}function Le(e){return e.split("-")[0]}function tn(e){return e.split("-")[1]}function ko(e){return e==="x"?"y":"x"}function us(e){return e==="y"?"height":"width"}function it(e){return["top","bottom"].includes(Le(e))?"y":"x"}function cs(e){return ko(it(e))}function nf(e,t,n){n===void 0&&(n=!1);const r=tn(e),s=cs(e),i=us(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=In(o)),[o,In(o)]}function rf(e){const t=In(e);return[Mr(e),t,Mr(t)]}function Mr(e){return e.replace(/start|end/g,t=>tf[t])}function sf(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function of(e,t,n,r){const s=tn(e);let i=sf(Le(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Mr)))),i}function In(e){return e.replace(/left|right|bottom|top/g,t=>ef[t])}function af(e){return{top:0,right:0,bottom:0,left:0,...e}}function ls(e){return typeof e!="number"?af(e):{top:e,right:e,bottom:e,left:e}}function wt(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function di(e,t,n){let{reference:r,floating:s}=e;const i=it(t),o=cs(t),u=us(o),a=Le(t),c=i==="y",l=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,d=r[u]/2-s[u]/2;let h;switch(a){case"top":h={x:l,y:r.y-s.height};break;case"bottom":h={x:l,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-s.width,y:f};break;default:h={x:r.x,y:r.y}}switch(tn(t)){case"start":h[o]-=d*(n&&c?-1:1);break;case"end":h[o]+=d*(n&&c?-1:1);break}return h}const uf=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,u=i.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:l,y:f}=di(c,r,a),d=r,h={},m=0;for(let p=0;p<u.length;p++){const{name:S,fn:v}=u[p],{x:P,y:w,data:E,reset:$}=await v({x:l,y:f,initialPlacement:r,placement:d,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});l=P??l,f=w??f,h={...h,[S]:{...h[S],...E}},$&&m<=50&&(m++,typeof $=="object"&&($.placement&&(d=$.placement),$.rects&&(c=$.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):$.rects),{x:l,y:f}=di(c,d,a)),p=-1)}return{x:l,y:f,placement:d,strategy:s,middlewareData:h}};async function Mo(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:u,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:l="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_t(t,e),m=ls(h),S=u[d?f==="floating"?"reference":"floating":f],v=wt(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:c,rootBoundary:l,strategy:a})),P=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),E=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},$=wt(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:P,offsetParent:w,strategy:a}):P);return{top:(v.top-$.top+m.top)/E.y,bottom:($.bottom-v.bottom+m.bottom)/E.y,left:(v.left-$.left+m.left)/E.x,right:($.right-v.right+m.right)/E.x}}const cf=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:u,middlewareData:a}=t,{element:c,padding:l=0}=_t(e,t)||{};if(c==null)return{};const f=ls(l),d={x:n,y:r},h=cs(s),m=us(h),p=await o.getDimensions(c),S=h==="y",v=S?"top":"left",P=S?"bottom":"right",w=S?"clientHeight":"clientWidth",E=i.reference[m]+i.reference[h]-d[h]-i.floating[m],$=d[h]-i.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let B=M?M[w]:0;(!B||!await(o.isElement==null?void 0:o.isElement(M)))&&(B=u.floating[w]||i.floating[m]);const O=E/2-$/2,b=B/2-p[m]/2-1,x=Be(f[v],b),R=Be(f[P],b),k=x,N=B-p[m]-R,j=B/2-p[m]/2+O,V=kr(k,j,N),G=!a.arrow&&tn(s)!=null&&j!==V&&i.reference[m]/2-(j<k?x:R)-p[m]/2<0,K=G?j<k?j-k:j-N:0;return{[h]:d[h]+K,data:{[h]:V,centerOffset:j-V-K,...G&&{alignmentOffset:K}},reset:G}}}),lf=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:u,platform:a,elements:c}=t,{mainAxis:l=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...S}=_t(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Le(s),P=it(u),w=Le(u)===u,E=await(a.isRTL==null?void 0:a.isRTL(c.floating)),$=d||(w||!p?[In(u)]:rf(u)),M=m!=="none";!d&&M&&$.push(...of(u,p,m,E));const B=[u,...$],O=await Mo(t,S),b=[];let x=((r=i.flip)==null?void 0:r.overflows)||[];if(l&&b.push(O[v]),f){const j=nf(s,o,E);b.push(O[j[0]],O[j[1]])}if(x=[...x,{placement:s,overflows:b}],!b.every(j=>j<=0)){var R,k;const j=(((R=i.flip)==null?void 0:R.index)||0)+1,V=B[j];if(V)return{data:{index:j,overflows:x},reset:{placement:V}};let G=(k=x.filter(K=>K.overflows[0]<=0).sort((K,_)=>K.overflows[1]-_.overflows[1])[0])==null?void 0:k.placement;if(!G)switch(h){case"bestFit":{var N;const K=(N=x.filter(_=>{if(M){const y=it(_.placement);return y===P||y==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(y=>y>0).reduce((y,I)=>y+I,0)]).sort((_,y)=>_[1]-y[1])[0])==null?void 0:N[0];K&&(G=K);break}case"initialPlacement":G=u;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function jo(e){const t=Be(...e.map(i=>i.left)),n=Be(...e.map(i=>i.top)),r=Pe(...e.map(i=>i.right)),s=Pe(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:s-n}}function ff(e){const t=e.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<t.length;s++){const i=t[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>wt(jo(s)))}const df=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=t,{padding:u=2,x:a,y:c}=_t(e,t),l=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),f=ff(l),d=wt(jo(l)),h=ls(u);function m(){if(f.length===2&&f[0].left>f[1].right&&a!=null&&c!=null)return f.find(S=>a>S.left-h.left&&a<S.right+h.right&&c>S.top-h.top&&c<S.bottom+h.bottom)||d;if(f.length>=2){if(it(n)==="y"){const x=f[0],R=f[f.length-1],k=Le(n)==="top",N=x.top,j=R.bottom,V=k?x.left:R.left,G=k?x.right:R.right,K=G-V,_=j-N;return{top:N,bottom:j,left:V,right:G,width:K,height:_,x:V,y:N}}const S=Le(n)==="left",v=Pe(...f.map(x=>x.right)),P=Be(...f.map(x=>x.left)),w=f.filter(x=>S?x.left===P:x.right===v),E=w[0].top,$=w[w.length-1].bottom,M=P,B=v,O=B-M,b=$-E;return{top:E,bottom:$,left:M,right:B,width:O,height:b,x:M,y:E}}return d}const p=await i.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:o});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function hf(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Le(n),u=tn(n),a=it(n)==="y",c=["left","top"].includes(o)?-1:1,l=i&&a?-1:1,f=_t(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return u&&typeof m=="number"&&(h=u==="end"?m*-1:m),a?{x:h*l,y:d*c}:{x:d*c,y:h*l}}const gf=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:u}=t,a=await hf(t,e);return o===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+a.x,y:i+a.y,data:{...a,placement:o}}}}},pf=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:u={fn:S=>{let{x:v,y:P}=S;return{x:v,y:P}}},...a}=_t(e,t),c={x:n,y:r},l=await Mo(t,a),f=it(Le(s)),d=ko(f);let h=c[d],m=c[f];if(i){const S=d==="y"?"top":"left",v=d==="y"?"bottom":"right",P=h+l[S],w=h-l[v];h=kr(P,h,w)}if(o){const S=f==="y"?"top":"left",v=f==="y"?"bottom":"right",P=m+l[S],w=m-l[v];m=kr(P,m,w)}const p=u.fn({...t,[d]:h,[f]:m});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[d]:i,[f]:o}}}}}};function No(e){const t=we(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Fe(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,u=On(n)!==i||On(r)!==o;return u&&(n=i,r=o),{width:n,height:r,$:u}}function fs(e){return le(e)?e:e.contextElement}function yt(e){const t=fs(e);if(!Fe(t))return Ye(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=No(t);let o=(i?On(n.width):n.width)/r,u=(i?On(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!u||!Number.isFinite(u))&&(u=1),{x:o,y:u}}const mf=Ye(0);function Bo(e){const t=me(e);return!as()||!t.visualViewport?mf:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yf(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function ot(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=fs(e);let o=Ye(1);t&&(r?le(r)&&(o=yt(r)):o=yt(e));const u=yf(i,n,r)?Bo(i):Ye(0);let a=(s.left+u.x)/o.x,c=(s.top+u.y)/o.y,l=s.width/o.x,f=s.height/o.y;if(i){const d=me(i),h=r&&le(r)?me(r):r;let m=d,p=$r(m);for(;p&&r&&h!==m;){const S=yt(p),v=p.getBoundingClientRect(),P=we(p),w=v.left+(p.clientLeft+parseFloat(P.paddingLeft))*S.x,E=v.top+(p.clientTop+parseFloat(P.paddingTop))*S.y;a*=S.x,c*=S.y,l*=S.x,f*=S.y,a+=w,c+=E,m=me(p),p=$r(m)}}return wt({width:l,height:f,x:a,y:c})}function vf(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=Te(r),u=t?qn(t.floating):!1;if(r===o||u&&i)return n;let a={scrollLeft:0,scrollTop:0},c=Ye(1);const l=Ye(0),f=Fe(r);if((f||!f&&!i)&&((xt(r)!=="body"||en(o))&&(a=Wn(r)),Fe(r))){const d=ot(r);c=yt(r),l.x=d.x+r.clientLeft,l.y=d.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+l.x,y:n.y*c.y-a.scrollTop*c.y+l.y}}function bf(e){return Array.from(e.getClientRects())}function jr(e,t){const n=Wn(e).scrollLeft;return t?t.left+n:ot(Te(e)).left+n}function Sf(e){const t=Te(e),n=Wn(e),r=e.ownerDocument.body,s=Pe(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Pe(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+jr(e);const u=-n.scrollTop;return we(r).direction==="rtl"&&(o+=Pe(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:u}}function wf(e,t){const n=me(e),r=Te(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,u=0,a=0;if(s){i=s.width,o=s.height;const c=as();(!c||c&&t==="fixed")&&(u=s.offsetLeft,a=s.offsetTop)}return{width:i,height:o,x:u,y:a}}function Ef(e,t){const n=ot(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Fe(e)?yt(e):Ye(1),o=e.clientWidth*i.x,u=e.clientHeight*i.y,a=s*i.x,c=r*i.y;return{width:o,height:u,x:a,y:c}}function hi(e,t,n){let r;if(t==="viewport")r=wf(e,n);else if(t==="document")r=Sf(Te(e));else if(le(t))r=Ef(t,n);else{const s=Bo(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return wt(r)}function Lo(e,t){const n=Qe(e);return n===t||!le(n)||St(n)?!1:we(n).position==="fixed"||Lo(n,t)}function xf(e,t){const n=t.get(e);if(n)return n;let r=Kt(e,[],!1).filter(u=>le(u)&&xt(u)!=="body"),s=null;const i=we(e).position==="fixed";let o=i?Qe(e):e;for(;le(o)&&!St(o);){const u=we(o),a=os(o);!a&&u.position==="fixed"&&(s=null),(i?!a&&!s:!a&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||en(o)&&!a&&Lo(e,o))?r=r.filter(l=>l!==o):s=u,o=Qe(o)}return t.set(e,r),r}function _f(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?qn(t)?[]:xf(t,this._c):[].concat(n),r],u=o[0],a=o.reduce((c,l)=>{const f=hi(t,l,s);return c.top=Pe(f.top,c.top),c.right=Be(f.right,c.right),c.bottom=Be(f.bottom,c.bottom),c.left=Pe(f.left,c.left),c},hi(t,u,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Of(e){const{width:t,height:n}=No(e);return{width:t,height:n}}function If(e,t,n){const r=Fe(t),s=Te(t),i=n==="fixed",o=ot(e,!0,i,t);let u={scrollLeft:0,scrollTop:0};const a=Ye(0);if(r||!r&&!i)if((xt(t)!=="body"||en(s))&&(u=Wn(t)),r){const h=ot(t,!0,i,t);a.x=h.x+t.clientLeft,a.y=h.y+t.clientTop}else s&&(a.x=jr(s));let c=0,l=0;if(s&&!r&&!i){const h=s.getBoundingClientRect();l=h.top+u.scrollTop,c=h.left+u.scrollLeft-jr(s,h)}const f=o.left+u.scrollLeft-a.x-c,d=o.top+u.scrollTop-a.y-l;return{x:f,y:d,width:o.width,height:o.height}}function cr(e){return we(e).position==="static"}function gi(e,t){if(!Fe(e)||we(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Te(e)===n&&(n=n.ownerDocument.body),n}function Uo(e,t){const n=me(e);if(qn(e))return n;if(!Fe(e)){let s=Qe(e);for(;s&&!St(s);){if(le(s)&&!cr(s))return s;s=Qe(s)}return n}let r=gi(e,t);for(;r&&Jl(r)&&cr(r);)r=gi(r,t);return r&&St(r)&&cr(r)&&!os(r)?n:r||Zl(e)||n}const Af=async function(e){const t=this.getOffsetParent||Uo,n=this.getDimensions,r=await n(e.floating);return{reference:If(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Cf(e){return we(e).direction==="rtl"}const Pf={convertOffsetParentRelativeRectToViewportRelativeRect:vf,getDocumentElement:Te,getClippingRect:_f,getOffsetParent:Uo,getElementRects:Af,getClientRects:bf,getDimensions:Of,getScale:yt,isElement:le,isRTL:Cf};function Rf(e,t){let n=null,r;const s=Te(e);function i(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function o(u,a){u===void 0&&(u=!1),a===void 0&&(a=1),i();const{left:c,top:l,width:f,height:d}=e.getBoundingClientRect();if(u||t(),!f||!d)return;const h=dn(l),m=dn(s.clientWidth-(c+f)),p=dn(s.clientHeight-(l+d)),S=dn(c),P={rootMargin:-h+"px "+-m+"px "+-p+"px "+-S+"px",threshold:Pe(0,Be(1,a))||1};let w=!0;function E($){const M=$[0].intersectionRatio;if(M!==a){if(!w)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...P,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,P)}n.observe(e)}return o(!0),i}function dd(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,c=fs(e),l=s||i?[...c?Kt(c):[],...Kt(t)]:[];l.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=c&&u?Rf(c,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(v=>{let[P]=v;P&&P.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),c&&!a&&h.observe(c),h.observe(t));let m,p=a?ot(e):null;a&&S();function S(){const v=ot(e);p&&(v.x!==p.x||v.y!==p.y||v.width!==p.width||v.height!==p.height)&&n(),p=v,m=requestAnimationFrame(S)}return n(),()=>{var v;l.forEach(P=>{s&&P.removeEventListener("scroll",n),i&&P.removeEventListener("resize",n)}),f?.(),(v=h)==null||v.disconnect(),h=null,a&&cancelAnimationFrame(m)}}const Ff=gf,Tf=pf,Df=lf,pi=cf,$f=df,kf=(e,t,n)=>{const r=new Map,s={platform:Pf,...n},i={...s.platform,_c:r};return uf(e,t,{...s,platform:i})};var yn=typeof document<"u"?C.useLayoutEffect:C.useEffect;function An(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!An(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!An(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ho(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function mi(e,t){const n=Ho(e);return Math.round(t*n)/n}function lr(e){const t=C.useRef(e);return yn(()=>{t.current=e}),t}function Mf(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:u=!0,whileElementsMounted:a,open:c}=e,[l,f]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=C.useState(r);An(d,r)||h(r);const[m,p]=C.useState(null),[S,v]=C.useState(null),P=C.useCallback(_=>{_!==M.current&&(M.current=_,p(_))},[]),w=C.useCallback(_=>{_!==B.current&&(B.current=_,v(_))},[]),E=i||m,$=o||S,M=C.useRef(null),B=C.useRef(null),O=C.useRef(l),b=a!=null,x=lr(a),R=lr(s),k=lr(c),N=C.useCallback(()=>{if(!M.current||!B.current)return;const _={placement:t,strategy:n,middleware:d};R.current&&(_.platform=R.current),kf(M.current,B.current,_).then(y=>{const I={...y,isPositioned:k.current!==!1};j.current&&!An(O.current,I)&&(O.current=I,bi.flushSync(()=>{f(I)}))})},[d,t,n,R,k]);yn(()=>{c===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(_=>({..._,isPositioned:!1})))},[c]);const j=C.useRef(!1);yn(()=>(j.current=!0,()=>{j.current=!1}),[]),yn(()=>{if(E&&(M.current=E),$&&(B.current=$),E&&$){if(x.current)return x.current(E,$,N);N()}},[E,$,N,x,b]);const V=C.useMemo(()=>({reference:M,floating:B,setReference:P,setFloating:w}),[P,w]),G=C.useMemo(()=>({reference:E,floating:$}),[E,$]),K=C.useMemo(()=>{const _={position:n,left:0,top:0};if(!G.floating)return _;const y=mi(G.floating,l.x),I=mi(G.floating,l.y);return u?{..._,transform:"translate("+y+"px, "+I+"px)",...Ho(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:y,top:I}},[n,u,G.floating,l.x,l.y]);return C.useMemo(()=>({...l,update:N,refs:V,elements:G,floatingStyles:K}),[l,N,V,G,K])}const jf=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?pi({element:r.current,padding:s}).fn(n):{}:r?pi({element:r,padding:s}).fn(n):{}}}},hd=(e,t)=>({...Ff(e),options:[e,t]}),gd=(e,t)=>({...Tf(e),options:[e,t]}),pd=(e,t)=>({...Df(e),options:[e,t]}),md=(e,t)=>({...$f(e),options:[e,t]}),yd=(e,t)=>({...jf(e),options:[e,t]}),Vo={...Xo},Nf=Vo.useInsertionEffect,Bf=Nf||(e=>e());function Lf(e){const t=C.useRef(()=>{});return Bf(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var Cn=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Nr(){return Nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nr.apply(this,arguments)}let yi=!1,Uf=0;const vi=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Uf++;function Hf(){const[e,t]=C.useState(()=>yi?vi():void 0);return Cn(()=>{e==null&&t(vi())},[]),C.useEffect(()=>{yi=!0},[]),e}const Vf=Vo.useId,qo=Vf||Hf,vd=C.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:u=14,height:a=7,tipRadius:c=0,strokeWidth:l=0,staticOffset:f,stroke:d,d:h,style:{transform:m,...p}={},...S}=t,v=qo(),[P,w]=C.useState(!1);if(Cn(()=>{if(!s)return;we(s).direction==="rtl"&&w(!0)},[s]),!s)return null;const[E,$]=r.split("-"),M=E==="top"||E==="bottom";let B=f;(M&&o!=null&&o.x||!M&&o!=null&&o.y)&&(B=null);const O=l*2,b=O/2,x=u/2*(c/-8+1),R=a/2*c/4,k=!!h,N=B&&$==="end"?"bottom":"top";let j=B&&$==="end"?"right":"left";B&&P&&(j=$==="end"?"left":"right");const V=i?.x!=null?B||i.x:"",G=i?.y!=null?B||i.y:"",K=h||"M0,0"+(" H"+u)+(" L"+(u-x)+","+(a-R))+(" Q"+u/2+","+a+" "+x+","+(a-R))+" Z",_={top:k?"rotate(180deg)":"",left:k?"rotate(90deg)":"rotate(-90deg)",bottom:k?"":"rotate(180deg)",right:k?"rotate(-90deg)":"rotate(90deg)"}[E];return C.createElement("svg",Nr({},S,{"aria-hidden":!0,ref:n,width:k?u:u+O,height:u,viewBox:"0 0 "+u+" "+(a>u?a:u),style:{position:"absolute",pointerEvents:"none",[j]:V,[N]:G,[E]:M||k?"100%":"calc(100% - "+O/2+"px)",transform:[_,m].filter(y=>!!y).join(" "),...p}}),O>0&&C.createElement("path",{clipPath:"url(#"+v+")",fill:"none",stroke:d,strokeWidth:O+(h?0:1),d:K}),C.createElement("path",{stroke:O&&!h?S.fill:"none",d:K}),C.createElement("clipPath",{id:v},C.createElement("rect",{x:-b,y:b*(k?-1:1),width:u+O,height:u})))});function qf(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const Wf=C.createContext(null),zf=C.createContext(null),Gf=()=>{var e;return((e=C.useContext(Wf))==null?void 0:e.id)||null},Kf=()=>C.useContext(zf);function Qf(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=qo(),i=C.useRef({}),[o]=C.useState(()=>qf()),u=Gf()!=null,[a,c]=C.useState(r.reference),l=Lf((h,m,p)=>{i.current.openEvent=h?m:void 0,o.emit("openchange",{open:h,event:m,reason:p,nested:u}),n?.(h,m,p)}),f=C.useMemo(()=>({setPositionReference:c}),[]),d=C.useMemo(()=>({reference:a||r.reference||null,floating:r.floating||null,domReference:r.reference}),[a,r.reference,r.floating]);return C.useMemo(()=>({dataRef:i,open:t,onOpenChange:l,elements:d,events:o,floatingId:s,refs:f}),[t,l,d,o,s,f])}function bd(e){e===void 0&&(e={});const{nodeId:t}=e,n=Qf({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=C.useState(null),[u,a]=C.useState(null),l=s?.reference||i,f=C.useRef(null),d=Kf();Cn(()=>{l&&(f.current=l)},[l]);const h=Mf({...e,elements:{...s,...u&&{reference:u}}}),m=C.useCallback(w=>{const E=le(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;a(E),h.refs.setReference(E)},[h.refs]),p=C.useCallback(w=>{(le(w)||w===null)&&(f.current=w,o(w)),(le(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!le(w))&&h.refs.setReference(w)},[h.refs]),S=C.useMemo(()=>({...h.refs,setReference:p,setPositionReference:m,domReference:f}),[h.refs,p,m]),v=C.useMemo(()=>({...h.elements,domReference:l}),[h.elements,l]),P=C.useMemo(()=>({...h,...r,refs:S,elements:v,nodeId:t}),[h,S,v,t,r]);return Cn(()=>{r.dataRef.current.floatingContext=P;const w=d?.nodesRef.current.find(E=>E.id===t);w&&(w.context=P)}),C.useMemo(()=>({...h,context:P,refs:S,elements:v}),[h,S,v,P])}export{fd as A,vd as F,Zf as J,Jf as K,sa as L,od as P,ld as R,dd as a,gu as b,Pn as c,nd as d,ed as e,pd as f,ad as g,td as h,md as i,rd as j,cd as k,yd as l,Zo as m,ea as n,hd as o,sd as p,rs as q,id as r,gd as s,ud as t,bd as u};
