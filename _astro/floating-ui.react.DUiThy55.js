import{R as Me,r as E,b as ss,g as $o,a as ko}from"./index.BLZuVVrN.js";import{j as z}from"./jsx-runtime.DHyoM1g7.js";var os={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var si;function Mo(){if(si)return It;si=1;var e=Me,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,c){var l,f={},d=null,h=null;c!==void 0&&(d=""+c),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(l in u)r.call(u,l)&&!s.hasOwnProperty(l)&&(f[l]=u[l]);if(a&&a.defaultProps)for(l in u=a.defaultProps,u)f[l]===void 0&&(f[l]=u[l]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return It.Fragment=n,It.jsx=o,It.jsxs=o,It}os.exports=Mo();var jo=os.exports;const In=E.createContext({anno:void 0,setAnno:void 0,annotations:[],selection:{selected:[]}}),Uf=E.forwardRef((e,t)=>{const[n,r]=E.useState(null),[i,s]=E.useState([]),[o,a]=E.useState({selected:[]});return E.useImperativeHandle(t,()=>n),E.useEffect(()=>{if(n){const{selection:u,store:c}=n.state;c.all().length>0&&s(c.all());const l=()=>s(()=>c.all());c.observe(l);let f;const d=u.subscribe(({selected:h,pointerEvent:y})=>{f&&c.unobserve(f);const p=(h||[]).map(({id:w,editable:S})=>({annotation:c.getAnnotation(w),editable:S}));a({selected:p,pointerEvent:y}),f=w=>{const{updated:S}=w.changes;a(({selected:M})=>({selected:M.map(({annotation:_,editable:x})=>{const j=S.find(F=>F.oldValue.id===_.id);return j?{annotation:j.newValue,editable:x}:{annotation:_,editable:x}})}))},c.observe(f,{annotations:h.map(({id:w})=>w)})});return()=>{c.unobserve(l),d()}}},[n]),jo.jsx(In.Provider,{value:{anno:n,setAnno:r,annotations:i,selection:o},children:e.children})}),Fo=()=>{const{anno:e}=E.useContext(In);return e},Do=()=>{const{annotations:e}=E.useContext(In);return e},Lo=e=>Do(),No=()=>{const{selection:e}=E.useContext(In);return e};var Uo=Object.defineProperty,Ho=(e,t,n)=>t in e?Uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oi=(e,t,n)=>Ho(e,typeof t!="symbol"?t+"":t,n);function Ft(){}function ir(e,t){for(const n in t)e[n]=t[n];return e}function as(e){return e()}function ai(){return Object.create(null)}function Ue(e){e.forEach(as)}function ce(e){return typeof e=="function"}function Pn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Vo(e){return Object.keys(e).length===0}function Bo(e,t,n,r){if(e){const i=cs(e,t,n,r);return e[0](i)}}function cs(e,t,n,r){return e[1]&&r?ir(n.ctx.slice(),e[1](r(t))):n.ctx}function qo(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=t.dirty[a]|i[a];return s}return t.dirty|i}return t.dirty}function Wo(e,t,n,r,i,s){if(i){const o=cs(t,n,r,s);e.p(o,i)}}function zo(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function ci(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function hn(e){return e??""}function ui(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function Go(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function us(e){return document.createTextNode(e)}function _e(){return us(" ")}function ls(){return us("")}function ae(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function U(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ko(e){return Array.from(e.childNodes)}function li(e,t,n){e.classList.toggle(t,!!n)}function Qo(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Dt;function Tt(e){Dt=e}function Yo(){if(!Dt)throw new Error("Function called outside component initialization");return Dt}function Xo(){const e=Yo();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=Qo(t,n,{cancelable:r});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}function Fe(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const ft=[],fi=[];let ht=[];const di=[],Jo=Promise.resolve();let sr=!1;function Zo(){sr||(sr=!0,Jo.then(fs))}function or(e){ht.push(e)}const zn=new Set;let ut=0;function fs(){if(ut!==0)return;const e=Dt;do{try{for(;ut<ft.length;){const t=ft[ut];ut++,Tt(t),ea(t.$$)}}catch(t){throw ft.length=0,ut=0,t}for(Tt(null),ft.length=0,ut=0;fi.length;)fi.pop()();for(let t=0;t<ht.length;t+=1){const n=ht[t];zn.has(n)||(zn.add(n),n())}ht.length=0}while(ft.length);for(;di.length;)di.pop()();sr=!1,zn.clear(),Tt(e)}function ea(e){if(e.fragment!==null){e.update(),Ue(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(or)}}function ta(e){const t=[],n=[];ht.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),ht=t}const un=new Set;let Ze;function na(){Ze={r:0,c:[],p:Ze}}function ra(){Ze.r||Ue(Ze.c),Ze=Ze.p}function we(e,t){e&&e.i&&(un.delete(e),e.i(t))}function Re(e,t,n,r){if(e&&e.o){if(un.has(e))return;un.add(e),Ze.c.push(()=>{un.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function hi(e){return e?.length!==void 0?e:Array.from(e)}function et(e){e&&e.c()}function Be(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),or(()=>{const s=e.$$.on_mount.map(as).filter(ce);e.$$.on_destroy?e.$$.on_destroy.push(...s):Ue(s),e.$$.on_mount=[]}),i.forEach(or)}function qe(e,t){const n=e.$$;n.fragment!==null&&(ta(n.after_update),Ue(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ia(e,t){e.$$.dirty[0]===-1&&(ft.push(e),Zo(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Rn(e,t,n,r,i,s,o=null,a=[-1]){const u=Dt;Tt(e);const c=e.$$={fragment:null,ctx:[],props:s,update:Ft,not_equal:i,bound:ai(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ai(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(f,d,...h)=>{const y=h.length?h[0]:d;return c.ctx&&i(c.ctx[f],c.ctx[f]=y)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](y),l&&ia(e,f)),d}):[],c.update(),l=!0,Ue(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const f=Ko(t.target);c.fragment&&c.fragment.l(f),f.forEach(ee)}else c.fragment&&c.fragment.c();t.intro&&we(e.$$.fragment),Be(e,t.target,t.anchor),fs()}Tt(u)}class En{constructor(){oi(this,"$$"),oi(this,"$$set")}$destroy(){qe(this,1),this.$destroy=Ft}$on(t,n){if(!ce(n))return Ft;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Vo(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const sa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sa);var Se=(e=>(e.ELLIPSE="ELLIPSE",e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(Se||{});const Pr=(e,t)=>t,ds=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;return e.forEach(([s,o])=>{t=Math.min(t,s),n=Math.min(n,o),r=Math.max(r,s),i=Math.max(i,o)}),{minX:t,minY:n,maxX:r,maxY:i}},oa={area:e=>Math.PI*e.geometry.rx*e.geometry.ry,intersects:(e,t,n)=>{const{cx:r,cy:i,rx:s,ry:o}=e.geometry,a=0,u=Math.cos(a),c=Math.sin(a),l=t-r,f=n-i,d=u*l+c*f,h=c*l-u*f;return d*d/(s*s)+h*h/(o*o)<=1}};Pr(Se.ELLIPSE,oa);const aa={area:e=>{const{points:t}=e.geometry;let n=0,r=t.length-1;for(let i=0;i<t.length;i++)n+=(t[r][0]+t[i][0])*(t[r][1]-t[i][1]),r=i;return Math.abs(.5*n)},intersects:(e,t,n)=>{const{points:r}=e.geometry;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s][0],u=r[s][1],c=r[o][0],l=r[o][1];u>n!=l>n&&t<(c-a)*(n-u)/(l-u)+a&&(i=!i)}return i}};Pr(Se.POLYGON,aa);const ca={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,n)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&n>=e.geometry.y&&n<=e.geometry.y+e.geometry.h};Pr(Se.RECTANGLE,ca);const ua=(e,t=!1)=>{const n=typeof e=="string"?e:e.value,r=/^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,i=[...n.matchAll(r)][0],[s,o,a,u,c,l,f]=i;if(o!=="xywh")throw new Error("Unsupported MediaFragment: "+n);if(a&&a!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${a}`);const[d,h,y,p]=[u,c,l,f].map(parseFloat);return{type:Se.RECTANGLE,geometry:{x:d,y:h,w:y,h:p,bounds:{minX:d,minY:t?h-p:h,maxX:d+y,maxY:t?h:h+p}}}},la=e=>{const{x:t,y:n,w:r,h:i}=e;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${t},${n},${r},${i}`}},hs="http://www.w3.org/2000/svg",gi=e=>{const t=r=>{Array.from(r.attributes).forEach(i=>{i.name.startsWith("on")&&r.removeAttribute(i.name)})},n=e.getElementsByTagName("script");return Array.from(n).reverse().forEach(r=>r.parentNode.removeChild(r)),Array.from(e.querySelectorAll("*")).forEach(t),e},fa=e=>{const t=new XMLSerializer().serializeToString(e.documentElement).replace("<svg>",`<svg xmlns="${hs}">`);return new DOMParser().parseFromString(t,"image/svg+xml").documentElement},da=e=>{const t=new DOMParser().parseFromString(e,"image/svg+xml"),n=t.lookupPrefix(hs),r=t.lookupNamespaceURI(null);return n||r?gi(t).firstChild:gi(fa(t)).firstChild},ha=e=>{const[t,n,r]=e.match(/(<polygon points=["|'])([^("|')]*)/)||[],i=r.split(" ").map(s=>s.split(",").map(parseFloat));return{type:Se.POLYGON,geometry:{points:i,bounds:ds(i)}}},ga=e=>{const t=da(e),n=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),i=parseFloat(t.getAttribute("rx")),s=parseFloat(t.getAttribute("ry")),o={minX:n-i,minY:r-s,maxX:n+i,maxY:r+s};return{type:Se.ELLIPSE,geometry:{cx:n,cy:r,rx:i,ry:s,bounds:o}}},pa=e=>{const t=typeof e=="string"?e:e.value;if(t.includes("<polygon points="))return ha(t);if(t.includes("<ellipse "))return ga(t);throw"Unsupported SVG shape: "+t},ma=e=>{let t;if(e.type===Se.POLYGON){const n=e.geometry,{points:r}=n;t=`<svg><polygon points="${r.map(i=>i.join(",")).join(" ")}" /></svg>`}else if(e.type===Se.ELLIPSE){const n=e.geometry;t=`<svg><ellipse cx="${n.cx}" cy="${n.cy}" rx="${n.rx}" ry="${n.ry}" /></svg>`}if(t)return{type:"SvgSelector",value:t};throw`Unsupported shape type: ${e.type}`};var oe=[];for(var Gn=0;Gn<256;++Gn)oe.push((Gn+256).toString(16).slice(1));function ya(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}var nn,va=new Uint8Array(16);function wa(){if(!nn&&(nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nn(va)}var Sa=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const pi={randomUUID:Sa};function ba(e,t,n){if(pi.randomUUID&&!t&&!e)return pi.randomUUID();e=e||{};var r=e.random||(e.rng||wa)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ya(r)}var _a=[];for(var Kn=0;Kn<256;++Kn)_a.push((Kn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const xa="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Oa=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=xa[n[e]&63];return t};const Ia=e=>{const t=JSON.stringify(e);let n=0;for(let r=0,i=t.length;r<i;r++){let s=t.charCodeAt(r);n=(n<<5)-n+s,n|=0}return`${n}`},gs=e=>e?typeof e=="object"?{...e}:e:void 0,Pa=(e,t)=>(Array.isArray(e)?e:[e]).map(n=>{const{id:r,type:i,purpose:s,value:o,created:a,modified:u,creator:c,...l}=n;return{id:r||`temp-${Ia(n)}`,annotation:t,type:i,purpose:s,value:o,creator:gs(c),created:a?new Date(a):void 0,updated:u?new Date(u):void 0,...l}}),Ra=e=>e.map(t=>{var n;const{annotation:r,created:i,updated:s,...o}=t,a={...o,created:i?.toISOString(),modified:s?.toISOString()};return(n=a.id)!=null&&n.startsWith("temp-")&&delete a.id,a});Oa();const Hf=(e,t=!1)=>({parse:n=>Ea(n,t),serialize:n=>Ca(n,e)}),Ea=(e,t=!1)=>{const n=e.id||ba(),{creator:r,created:i,modified:s,body:o,...a}=e,u=Pa(o,n),c=Array.isArray(e.target)?e.target[0]:e.target,l=Array.isArray(c.selector)?c.selector[0]:c.selector,f=l?.type==="FragmentSelector"?ua(l,t):l?.type==="SvgSelector"?pa(l):void 0;return f?{parsed:{...a,id:n,bodies:u,target:{created:i?new Date(i):void 0,creator:gs(r),updated:s?new Date(s):void 0,...Array.isArray(a.target)?a.target[0]:a.target,annotation:n,selector:f}}}:{error:Error(`Invalid selector: ${JSON.stringify(l)}`)}},Ca=(e,t)=>{const{selector:n,creator:r,created:i,updated:s,updatedBy:o,...a}=e.target,u=n.type==Se.RECTANGLE?la(n.geometry):ma(n),c={...e,"@context":"http://www.w3.org/ns/anno.jsonld",id:e.id,type:"Annotation",body:Ra(e.bodies),created:i?.toISOString(),creator:r,modified:s?.toISOString(),target:{...a,source:t,selector:u}};return delete c.bodies,"annotation"in c.target&&delete c.target.annotation,c};function mi(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function yi(e){let t,n;return t=new Ct({props:{x:e[10][0],y:e[10][1],scale:e[3]}}),t.$on("pointerdown",function(){ce(e[9](`HANDLE-${e[12]}`))&&e[9](`HANDLE-${e[12]}`).apply(this,arguments)}),{c(){et(t.$$.fragment)},m(r,i){Be(t,r,i),n=!0},p(r,i){e=r;const s={};i&16&&(s.x=e[10][0]),i&16&&(s.y=e[10][1]),i&8&&(s.scale=e[3]),t.$set(s)},i(r){n||(we(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Aa(e){let t,n,r,i,s,o,a,u,c,l,f,d=hi(e[4].points),h=[];for(let p=0;p<d.length;p+=1)h[p]=yi(mi(e,d,p));const y=p=>Re(h[p],1,1,()=>{h[p]=null});return{c(){t=ge("polygon"),i=_e(),s=ge("polygon"),a=_e();for(let p=0;p<h.length;p+=1)h[p].c();u=ls(),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"points",r=e[4].points.map(vi).join(" ")),U(s,"class","a9s-inner a9s-shape-handle"),U(s,"style",e[1]),U(s,"points",o=e[4].points.map(wi).join(" "))},m(p,w){te(p,t,w),te(p,i,w),te(p,s,w),te(p,a,w);for(let S=0;S<h.length;S+=1)h[S]&&h[S].m(p,w);te(p,u,w),c=!0,l||(f=[ae(t,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(s,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)})],l=!0)},p(p,w){if(e=p,(!c||w&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!c||w&16&&r!==(r=e[4].points.map(vi).join(" ")))&&U(t,"points",r),(!c||w&2)&&U(s,"style",e[1]),(!c||w&16&&o!==(o=e[4].points.map(wi).join(" ")))&&U(s,"points",o),w&536){d=hi(e[4].points);let S;for(S=0;S<d.length;S+=1){const M=mi(e,d,S);h[S]?(h[S].p(M,w),we(h[S],1)):(h[S]=yi(M),h[S].c(),we(h[S],1),h[S].m(u.parentNode,u))}for(na(),S=d.length;S<h.length;S+=1)y(S);ra()}},i(p){if(!c){for(let w=0;w<d.length;w+=1)we(h[w]);c=!0}},o(p){h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)Re(h[w]);c=!1},d(p){p&&(ee(t),ee(i),ee(s),ee(a),ee(u)),Go(h,p),l=!1,Ue(f)}}}function Ta(e){let t,n;return t=new ps({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Aa,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("change",e[6]),t.$on("grab",e[7]),t.$on("release",e[8]),{c(){et(t.$$.fragment)},m(r,i){Be(t,r,i),n=!0},p(r,[i]){const s={};i&1&&(s.shape=r[0]),i&4&&(s.transform=r[2]),i&8730&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(we(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}const vi=e=>e.join(","),wi=e=>e.join(",");function $a(e,t,n){let r,{shape:i}=t,{computedStyle:s}=t,{transform:o}=t,{viewportScale:a=1}=t;const u=(d,h,y)=>{let p;const w=d.geometry;h==="SHAPE"?p=w.points.map(([M,_])=>[M+y[0],_+y[1]]):p=w.points.map(([M,_],x)=>h===`HANDLE-${x}`?[M+y[0],_+y[1]]:[M,_]);const S=ds(p);return{...d,geometry:{points:p,bounds:S}}};function c(d){Fe.call(this,e,d)}function l(d){Fe.call(this,e,d)}function f(d){Fe.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,i=d.shape),"computedStyle"in d&&n(1,s=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=i.geometry)},[i,s,o,a,r,u,c,l,f]}class ka extends En{constructor(t){super(),Rn(this,t,$a,Ta,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}const Ma="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function ja(e){let t,n,r,i,s,o;return{c(){t=ge("rect"),U(t,"class",n=hn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(t,"x",r=e[0]-e[5]/2),U(t,"y",i=e[1]-e[5]/2),U(t,"width",e[5]),U(t,"height",e[5])},m(a,u){te(a,t,u),s||(o=ae(t,"pointerdown",e[11]),s=!0)},p(a,u){u&256&&n!==(n=hn(`a9s-handle ${a[8].class||""}`.trim())+" svelte-1sgkh33")&&U(t,"class",n),u&33&&r!==(r=a[0]-a[5]/2)&&U(t,"x",r),u&34&&i!==(i=a[1]-a[5]/2)&&U(t,"y",i),u&32&&U(t,"width",a[5]),u&32&&U(t,"height",a[5])},d(a){a&&ee(t),s=!1,o()}}}function Fa(e){let t,n,r,i,s,o,a,u,c;return{c(){t=ge("g"),n=ge("circle"),i=ge("rect"),U(n,"cx",e[0]),U(n,"cy",e[1]),U(n,"r",r=e[3]/e[2]),U(n,"class","a9s-touch-halo svelte-1sgkh33"),li(n,"touched",e[4]),U(i,"class",s=hn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),U(i,"x",o=e[0]-e[5]/2),U(i,"y",a=e[1]-e[5]/2),U(i,"width",e[5]),U(i,"height",e[5]),U(t,"class","a9s-touch-handle")},m(l,f){te(l,t,f),ui(t,n),ui(t,i),u||(c=[ae(n,"pointerdown",e[10]),ae(n,"pointerdown",e[6]),ae(n,"pointerup",e[7]),ae(i,"pointerdown",e[9]),ae(i,"pointerdown",e[6]),ae(i,"pointerup",e[7])],u=!0)},p(l,f){f&1&&U(n,"cx",l[0]),f&2&&U(n,"cy",l[1]),f&12&&r!==(r=l[3]/l[2])&&U(n,"r",r),f&16&&li(n,"touched",l[4]),f&256&&s!==(s=hn(`a9s-handle ${l[8].class||""}`.trim())+" svelte-1sgkh33")&&U(i,"class",s),f&33&&o!==(o=l[0]-l[5]/2)&&U(i,"x",o),f&34&&a!==(a=l[1]-l[5]/2)&&U(i,"y",a),f&32&&U(i,"width",l[5]),f&32&&U(i,"height",l[5])},d(l){l&&ee(t),u=!1,Ue(c)}}}function Da(e){let t;function n(i,s){return Ma?Fa:ja}let r=n()(e);return{c(){r.c(),t=ls()},m(i,s){r.m(i,s),te(i,t,s)},p(i,[s]){r.p(i,s)},i:Ft,o:Ft,d(i){i&&ee(t),r.d(i)}}}function La(e,t,n){let r,{x:i}=t,{y:s}=t,{scale:o}=t,{radius:a=30}=t,u=!1;const c=y=>{y.pointerType==="touch"&&n(4,u=!0)},l=()=>n(4,u=!1);function f(y){Fe.call(this,e,y)}function d(y){Fe.call(this,e,y)}function h(y){Fe.call(this,e,y)}return e.$$set=y=>{n(8,t=ir(ir({},t),ci(y))),"x"in y&&n(0,i=y.x),"y"in y&&n(1,s=y.y),"scale"in y&&n(2,o=y.scale),"radius"in y&&n(3,a=y.radius)},e.$$.update=()=>{e.$$.dirty&4&&n(5,r=10/o)},t=ci(t),[i,s,o,a,u,r,c,l,t,f,d,h]}class Ct extends En{constructor(t){super(),Rn(this,t,La,Da,Pn,{x:0,y:1,scale:2,radius:3})}}function Na(e){let t,n,r,i,s,o,a,u,c,l,f,d,h,y,p,w,S,M,_,x,j,F,N,O,v,b,C,k,L,D,V,K,W,P,m,I,A,g,R,T,$,G,Q;return P=new Ct({props:{class:"a9s-corner-handle-topleft",x:e[4].x,y:e[4].y,scale:e[3]}}),P.$on("pointerdown",function(){ce(e[9]("TOP_LEFT"))&&e[9]("TOP_LEFT").apply(this,arguments)}),I=new Ct({props:{class:"a9s-corner-handle-topright",x:e[4].x+e[4].w,y:e[4].y,scale:e[3]}}),I.$on("pointerdown",function(){ce(e[9]("TOP_RIGHT"))&&e[9]("TOP_RIGHT").apply(this,arguments)}),g=new Ct({props:{class:"a9s-corner-handle-bottomright",x:e[4].x+e[4].w,y:e[4].y+e[4].h,scale:e[3]}}),g.$on("pointerdown",function(){ce(e[9]("BOTTOM_RIGHT"))&&e[9]("BOTTOM_RIGHT").apply(this,arguments)}),T=new Ct({props:{class:"a9s-corner-handle-bottomleft",x:e[4].x,y:e[4].y+e[4].h,scale:e[3]}}),T.$on("pointerdown",function(){ce(e[9]("BOTTOM_LEFT"))&&e[9]("BOTTOM_LEFT").apply(this,arguments)}),{c(){t=ge("rect"),a=_e(),u=ge("rect"),h=_e(),y=ge("rect"),M=_e(),_=ge("rect"),N=_e(),O=ge("rect"),k=_e(),L=ge("rect"),W=_e(),et(P.$$.fragment),m=_e(),et(I.$$.fragment),A=_e(),et(g.$$.fragment),R=_e(),et(T.$$.fragment),U(t,"class","a9s-outer"),U(t,"style",n=e[1]?"display:none;":void 0),U(t,"x",r=e[4].x),U(t,"y",i=e[4].y),U(t,"width",s=e[4].w),U(t,"height",o=e[4].h),U(u,"class","a9s-inner a9s-shape-handle"),U(u,"style",e[1]),U(u,"x",c=e[4].x),U(u,"y",l=e[4].y),U(u,"width",f=e[4].w),U(u,"height",d=e[4].h),U(y,"class","a9s-edge-handle a9s-edge-handle-top"),U(y,"x",p=e[4].x),U(y,"y",w=e[4].y),U(y,"height",1),U(y,"width",S=e[4].w),U(_,"class","a9s-edge-handle a9s-edge-handle-right"),U(_,"x",x=e[4].x+e[4].w),U(_,"y",j=e[4].y),U(_,"height",F=e[4].h),U(_,"width",1),U(O,"class","a9s-edge-handle a9s-edge-handle-bottom"),U(O,"x",v=e[4].x),U(O,"y",b=e[4].y+e[4].h),U(O,"height",1),U(O,"width",C=e[4].w),U(L,"class","a9s-edge-handle a9s-edge-handle-left"),U(L,"x",D=e[4].x),U(L,"y",V=e[4].y),U(L,"height",K=e[4].h),U(L,"width",1)},m(q,B){te(q,t,B),te(q,a,B),te(q,u,B),te(q,h,B),te(q,y,B),te(q,M,B),te(q,_,B),te(q,N,B),te(q,O,B),te(q,k,B),te(q,L,B),te(q,W,B),Be(P,q,B),te(q,m,B),Be(I,q,B),te(q,A,B),Be(g,q,B),te(q,R,B),Be(T,q,B),$=!0,G||(Q=[ae(t,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(u,"pointerdown",function(){ce(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ae(y,"pointerdown",function(){ce(e[9]("TOP"))&&e[9]("TOP").apply(this,arguments)}),ae(_,"pointerdown",function(){ce(e[9]("RIGHT"))&&e[9]("RIGHT").apply(this,arguments)}),ae(O,"pointerdown",function(){ce(e[9]("BOTTOM"))&&e[9]("BOTTOM").apply(this,arguments)}),ae(L,"pointerdown",function(){ce(e[9]("LEFT"))&&e[9]("LEFT").apply(this,arguments)})],G=!0)},p(q,B){e=q,(!$||B&2&&n!==(n=e[1]?"display:none;":void 0))&&U(t,"style",n),(!$||B&16&&r!==(r=e[4].x))&&U(t,"x",r),(!$||B&16&&i!==(i=e[4].y))&&U(t,"y",i),(!$||B&16&&s!==(s=e[4].w))&&U(t,"width",s),(!$||B&16&&o!==(o=e[4].h))&&U(t,"height",o),(!$||B&2)&&U(u,"style",e[1]),(!$||B&16&&c!==(c=e[4].x))&&U(u,"x",c),(!$||B&16&&l!==(l=e[4].y))&&U(u,"y",l),(!$||B&16&&f!==(f=e[4].w))&&U(u,"width",f),(!$||B&16&&d!==(d=e[4].h))&&U(u,"height",d),(!$||B&16&&p!==(p=e[4].x))&&U(y,"x",p),(!$||B&16&&w!==(w=e[4].y))&&U(y,"y",w),(!$||B&16&&S!==(S=e[4].w))&&U(y,"width",S),(!$||B&16&&x!==(x=e[4].x+e[4].w))&&U(_,"x",x),(!$||B&16&&j!==(j=e[4].y))&&U(_,"y",j),(!$||B&16&&F!==(F=e[4].h))&&U(_,"height",F),(!$||B&16&&v!==(v=e[4].x))&&U(O,"x",v),(!$||B&16&&b!==(b=e[4].y+e[4].h))&&U(O,"y",b),(!$||B&16&&C!==(C=e[4].w))&&U(O,"width",C),(!$||B&16&&D!==(D=e[4].x))&&U(L,"x",D),(!$||B&16&&V!==(V=e[4].y))&&U(L,"y",V),(!$||B&16&&K!==(K=e[4].h))&&U(L,"height",K);const Z={};B&16&&(Z.x=e[4].x),B&16&&(Z.y=e[4].y),B&8&&(Z.scale=e[3]),P.$set(Z);const ne={};B&16&&(ne.x=e[4].x+e[4].w),B&16&&(ne.y=e[4].y),B&8&&(ne.scale=e[3]),I.$set(ne);const ie={};B&16&&(ie.x=e[4].x+e[4].w),B&16&&(ie.y=e[4].y+e[4].h),B&8&&(ie.scale=e[3]),g.$set(ie);const se={};B&16&&(se.x=e[4].x),B&16&&(se.y=e[4].y+e[4].h),B&8&&(se.scale=e[3]),T.$set(se)},i(q){$||(we(P.$$.fragment,q),we(I.$$.fragment,q),we(g.$$.fragment,q),we(T.$$.fragment,q),$=!0)},o(q){Re(P.$$.fragment,q),Re(I.$$.fragment,q),Re(g.$$.fragment,q),Re(T.$$.fragment,q),$=!1},d(q){q&&(ee(t),ee(a),ee(u),ee(h),ee(y),ee(M),ee(_),ee(N),ee(O),ee(k),ee(L),ee(W),ee(m),ee(A),ee(R)),qe(P,q),qe(I,q),qe(g,q),qe(T,q),G=!1,Ue(Q)}}}function Ua(e){let t,n;return t=new ps({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Na,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("grab",e[6]),t.$on("change",e[7]),t.$on("release",e[8]),{c(){et(t.$$.fragment)},m(r,i){Be(t,r,i),n=!0},p(r,[i]){const s={};i&1&&(s.shape=r[0]),i&4&&(s.transform=r[2]),i&1562&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(we(t.$$.fragment,r),n=!0)},o(r){Re(t.$$.fragment,r),n=!1},d(r){qe(t,r)}}}function Ha(e,t,n){let r,{shape:i}=t,{computedStyle:s}=t,{transform:o}=t,{viewportScale:a=1}=t;const u=(d,h,y)=>{const p=d.geometry.bounds;let[w,S]=[p.minX,p.minY],[M,_]=[p.maxX,p.maxY];const[x,j]=y;if(h==="SHAPE")w+=x,M+=x,S+=j,_+=j;else{switch(h){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{S+=j;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{_+=j;break}}switch(h){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{w+=x;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{M+=x;break}}}const F=Math.min(w,M),N=Math.min(S,_),O=Math.abs(M-w),v=Math.abs(_-S);return{...d,geometry:{x:F,y:N,w:O,h:v,bounds:{minX:F,minY:N,maxX:F+O,maxY:N+v}}}};function c(d){Fe.call(this,e,d)}function l(d){Fe.call(this,e,d)}function f(d){Fe.call(this,e,d)}return e.$$set=d=>{"shape"in d&&n(0,i=d.shape),"computedStyle"in d&&n(1,s=d.computedStyle),"transform"in d&&n(2,o=d.transform),"viewportScale"in d&&n(3,a=d.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=i.geometry)},[i,s,o,a,r,u,c,l,f]}class Va extends En{constructor(t){super(),Rn(this,t,Ha,Ua,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}Se.RECTANGLE,Se.POLYGON;const Ba=e=>({}),Si=e=>({grab:e[0]});function qa(e){let t,n,r,i;const s=e[7].default,o=Bo(s,e,e[6],Si);return{c(){t=ge("g"),o&&o.c(),U(t,"class","a9s-annotation selected")},m(a,u){te(a,t,u),o&&o.m(t,null),n=!0,r||(i=[ae(t,"pointerup",e[2]),ae(t,"pointermove",e[1])],r=!0)},p(a,[u]){o&&o.p&&(!n||u&64)&&Wo(o,s,a,a[6],n?qo(s,a[6],u,Ba):zo(a[6]),Si)},i(a){n||(we(o,a),n=!0)},o(a){Re(o,a),n=!1},d(a){a&&ee(t),o&&o.d(a),r=!1,Ue(i)}}}function Wa(e,t,n){let{$$slots:r={},$$scope:i}=t;const s=Xo();let{shape:o}=t,{editor:a}=t,{transform:u}=t,c,l,f;const d=p=>w=>{c=p,l=u.elementToImage(w.offsetX,w.offsetY),f=o,w.target.setPointerCapture(w.pointerId),s("grab",w)},h=p=>{if(c){const[w,S]=u.elementToImage(p.offsetX,p.offsetY),M=[w-l[0],S-l[1]];n(3,o=a(f,c,M)),s("change",o)}},y=p=>{p.target.releasePointerCapture(p.pointerId),c=void 0,f=o,s("release",p)};return e.$$set=p=>{"shape"in p&&n(3,o=p.shape),"editor"in p&&n(4,a=p.editor),"transform"in p&&n(5,u=p.transform),"$$scope"in p&&n(6,i=p.$$scope)},[d,h,y,o,a,u,i,r]}class ps extends En{constructor(t){super(),Rn(this,t,Wa,qa,Pn,{shape:3,editor:4,transform:5})}}navigator.userAgent.indexOf("Mac OS X");var za=(e=>(e.EDIT="EDIT",e.SELECT="SELECT",e.NONE="NONE",e))(za||{}),Ga=[];for(var Qn=0;Qn<256;++Qn)Ga.push((Qn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ka="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Qa=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=Ka[n[e]&63];return t};Qa();const Vf=e=>{const[t,n]=E.useState();return E.useEffect(()=>{fetch(`../../${e}`).then(r=>r.json()).then(r=>{const i=r.filter(s=>{const a=(Array.isArray(s.body)?s.body:[s.body]).some(d=>d.purpose==="tagging"),u=Array.isArray(s.target)?s.target[0]:s.target,l=(Array.isArray(u.selector)?u.selector:[u.selector]).find(d=>d.type==="FragmentSelector"),f=l&&l.value.endsWith(",0,0");return a&&!f});n(i)}).catch(r=>{console.log("Error fetching annotations",r)})},[]),t},Bf=(e,t)=>{const[n,r]=E.useState(t);return E.useEffect(()=>{const i=localStorage.getItem(e);if(i)try{r(JSON.parse(i))}catch(s){console.error("Error parsing stored state",s)}},[e]),E.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n]),[n,r]},qf=e=>{const[t,n]=E.useState([]),[r,i]=E.useState({images:void 0,verses:void 0});return E.useEffect(()=>{fetch("../../tag-index.json").then(s=>s.json()).then(n)},[]),E.useEffect(()=>{if(t)if(e){const s=e.bodies.filter(c=>c.purpose==="tagging"&&c.value).map(c=>c.value),o=t.filter(c=>c.id!==e.id&&c.tags.some(l=>s.includes(l))),a=o.filter(c=>c.type==="IMAGE"),u=o.filter(c=>c.type==="VERSE");i({images:a,verses:u})}else i({images:void 0,verses:void 0})},[t,e]),r},Ya=()=>{const e=No();return E.useMemo(()=>e.selected.length>0?e.selected[0].annotation:void 0,[e.selected.map(n=>n.annotation.id).join(",")])},Wf=e=>{const t=Fo(),n=Ya(),[r,i]=E.useState(!1);return E.useEffect(()=>{if(r)if(n){const s=n.id.substring(n.id.lastIndexOf("/")+1);location.hash=`#${s}`}else location.hash=""},[n,r]),E.useEffect(()=>{if(!t||!e.loaded)return;const s=c=>{const l=`https://recogito.pelagios.org/annotation/${c}`;if(!(t.getSelected()||[]).map(d=>d.id).includes(l)&&(t.setSelected(l),"scrollIntoView"in t)){const d=t.getAnnotationById(`https://recogito.pelagios.org/annotation/${c}`);t.scrollIntoView(d)}},o=()=>{t.getSelected()?.length>0&&t.cancelSelected()},a=window.location.hash.substring(1);a?setTimeout(()=>{s(a),i(!0)}):i(!0);const u=()=>{const c=window.location.hash.substring(1);c?s(c):o()};return window.addEventListener("hashchange",u),()=>{window.removeEventListener("hashchange",u)}},[t,e.loaded]),null};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ms=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ja={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},u)=>E.createElement("svg",{ref:u,...Ja,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ms("lucide",i),...a},[...o.map(([c,l])=>E.createElement(c,l)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(Za,{ref:s,iconNode:t,className:ms(`lucide-${Xa(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=st("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=st("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=st("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=st("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=st("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=st("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=st("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var oc=Object.defineProperty,ac=(e,t)=>{for(var n in t)oc(e,n,{get:t[n],enumerable:!0})},Ie={};ac(Ie,{assign:()=>lc,colors:()=>Ge,createStringInterpolator:()=>Mr,skipAnimation:()=>xs,to:()=>_s,willAdvance:()=>jr});var Er=Kt(),X=e=>Gt(e,Er),Cr=Kt();X.write=e=>Gt(e,Cr);var Cn=Kt();X.onStart=e=>Gt(e,Cn);var Ar=Kt();X.onFrame=e=>Gt(e,Ar);var Tr=Kt();X.onFinish=e=>Gt(e,Tr);var gt=[];X.setTimeout=(e,t)=>{const n=X.now()+t,r=()=>{const s=gt.findIndex(o=>o.cancel==r);~s&&gt.splice(s,1),ze-=~s?1:0},i={time:n,handler:e,cancel:r};return gt.splice(ys(n),0,i),ze+=1,vs(),i};var ys=e=>~(~gt.findIndex(t=>t.time>e)||~gt.length);X.cancel=e=>{Cn.delete(e),Ar.delete(e),Tr.delete(e),Er.delete(e),Cr.delete(e)};X.sync=e=>{ar=!0,X.batchedUpdates(e),ar=!1};X.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...i){t=i,X.onStart(n)}return r.handler=e,r.cancel=()=>{Cn.delete(n),t=null},r};var $r=typeof window<"u"?window.requestAnimationFrame:()=>{};X.use=e=>$r=e;X.now=typeof performance<"u"?()=>performance.now():Date.now;X.batchedUpdates=e=>e();X.catch=console.error;X.frameLoop="always";X.advance=()=>{X.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ss()};var We=-1,ze=0,ar=!1;function Gt(e,t){ar?(t.delete(e),e(0)):(t.add(e),vs())}function vs(){We<0&&(We=0,X.frameLoop!=="demand"&&$r(ws))}function cc(){We=-1}function ws(){~We&&($r(ws),X.batchedUpdates(Ss))}function Ss(){const e=We;We=X.now();const t=ys(We);if(t&&(bs(gt.splice(0,t),n=>n.handler()),ze-=t),!ze){cc();return}Cn.flush(),Er.flush(e?Math.min(64,We-e):16.667),Ar.flush(),Cr.flush(),Tr.flush()}function Kt(){let e=new Set,t=e;return{add(n){ze+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return ze-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,ze-=t.size,bs(t,r=>r(n)&&e.add(r)),ze+=e.size,t=e)}}}function bs(e,t){e.forEach(n=>{try{t(n)}catch(r){X.catch(r)}})}function cr(){}var uc=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),H={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function je(e,t){if(H.arr(e)){if(!H.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var J=(e,t)=>e.forEach(t);function Ae(e,t,n){if(H.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ue=e=>H.und(e)?[]:H.arr(e)?e:[e];function $t(e,t){if(e.size){const n=Array.from(e);e.clear(),J(n,t)}}var At=(e,...t)=>$t(e,n=>n(...t)),kr=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Mr,_s,Ge=null,xs=!1,jr=cr,lc=e=>{e.to&&(_s=e.to),e.now&&(X.now=e.now),e.colors!==void 0&&(Ge=e.colors),e.skipAnimation!=null&&(xs=e.skipAnimation),e.createStringInterpolator&&(Mr=e.createStringInterpolator),e.requestAnimationFrame&&X.use(e.requestAnimationFrame),e.batchedUpdates&&(X.batchedUpdates=e.batchedUpdates),e.willAdvance&&(jr=e.willAdvance),e.frameLoop&&(X.frameLoop=e.frameLoop)},kt=new Set,ve=[],Yn=[],gn=0,An={get idle(){return!kt.size&&!ve.length},start(e){gn>e.priority?(kt.add(e),X.onStart(fc)):(Os(e),X(ur))},advance:ur,sort(e){if(gn)X.onFrame(()=>An.sort(e));else{const t=ve.indexOf(e);~t&&(ve.splice(t,1),Is(e))}},clear(){ve=[],kt.clear()}};function fc(){kt.forEach(Os),kt.clear(),X(ur)}function Os(e){ve.includes(e)||Is(e)}function Is(e){ve.splice(dc(ve,t=>t.priority>e.priority),0,e)}function ur(e){const t=Yn;for(let n=0;n<ve.length;n++){const r=ve[n];gn=r.priority,r.idle||(jr(r),r.advance(e),r.idle||t.push(r))}return gn=0,Yn=ve,Yn.length=0,ve=t,ve.length>0}function dc(e,t){const n=e.findIndex(t);return n<0?e.length:n}var hc=(e,t,n)=>Math.min(Math.max(n,e),t),gc={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Oe="[-+]?\\d*\\.?\\d+",pn=Oe+"%";function Tn(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var pc=new RegExp("rgb"+Tn(Oe,Oe,Oe)),mc=new RegExp("rgba"+Tn(Oe,Oe,Oe,Oe)),yc=new RegExp("hsl"+Tn(Oe,pn,pn)),vc=new RegExp("hsla"+Tn(Oe,pn,pn,Oe)),wc=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Sc=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,bc=/^#([0-9a-fA-F]{6})$/,_c=/^#([0-9a-fA-F]{8})$/;function xc(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=bc.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ge&&Ge[e]!==void 0?Ge[e]:(t=pc.exec(e))?(lt(t[1])<<24|lt(t[2])<<16|lt(t[3])<<8|255)>>>0:(t=mc.exec(e))?(lt(t[1])<<24|lt(t[2])<<16|lt(t[3])<<8|xi(t[4]))>>>0:(t=wc.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=_c.exec(e))?parseInt(t[1],16)>>>0:(t=Sc.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=yc.exec(e))?(bi(_i(t[1]),rn(t[2]),rn(t[3]))|255)>>>0:(t=vc.exec(e))?(bi(_i(t[1]),rn(t[2]),rn(t[3]))|xi(t[4]))>>>0:null}function Xn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function bi(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,s=Xn(i,r,e+1/3),o=Xn(i,r,e),a=Xn(i,r,e-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function lt(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function _i(e){return(parseFloat(e)%360+360)%360/360}function xi(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function rn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Oi(e){let t=xc(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,i=(t&65280)>>>8,s=(t&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Lt=(e,t,n)=>{if(H.fun(e))return e;if(H.arr(e))return Lt({range:e,output:t,extrapolate:n});if(H.str(e.output[0]))return Mr(e);const r=e,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||(c=>c);return c=>{const l=Ic(c,s);return Oc(c,s[l],s[l+1],i[l],i[l+1],u,o,a,r.map)}};function Oc(e,t,n,r,i,s,o,a,u){let c=u?u(e):e;if(c<t){if(o==="identity")return c;o==="clamp"&&(c=t)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:t===n?e<=t?r:i:(t===-1/0?c=-c:n===1/0?c=c-t:c=(c-t)/(n-t),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function Ic(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Pc=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,i=t==="end"?Math.floor(r):Math.ceil(r);return hc(0,1,i/e)},mn=1.70158,sn=mn*1.525,Ii=mn+1,Pi=2*Math.PI/3,Ri=2*Math.PI/4.5,on=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,$n={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Ii*e*e*e-mn*e*e,easeOutBack:e=>1+Ii*Math.pow(e-1,3)+mn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((sn+1)*2*e-sn)/2:(Math.pow(2*e-2,2)*((sn+1)*(e*2-2)+sn)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Pi),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Pi)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Ri))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Ri)/2+1,easeInBounce:e=>1-on(1-e),easeOutBounce:on,easeInOutBounce:e=>e<.5?(1-on(1-2*e))/2:(1+on(2*e-1))/2,steps:Pc},Nt=Symbol.for("FluidValue.get"),yt=Symbol.for("FluidValue.observers"),ye=e=>!!(e&&e[Nt]),fe=e=>e&&e[Nt]?e[Nt]():e,Ei=e=>e[yt]||null;function Rc(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Ut(e,t){const n=e[yt];n&&n.forEach(r=>{Rc(r,t)})}var Ps=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Ec(this,e)}},Ec=(e,t)=>Rs(e,Nt,t);function bt(e,t){if(e[Nt]){let n=e[yt];n||Rs(e,yt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Ht(e,t){const n=e[yt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[yt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Rs=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),ln=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Cc=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ci=new RegExp(`(${ln.source})(%|[a-z]+)`,"i"),Ac=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,kn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Es=e=>{const[t,n]=Tc(e);if(!t||kr())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||e}else{if(n&&kn.test(n))return Es(n);if(n)return n}return e},Tc=e=>{const t=kn.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},Jn,$c=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Cs=e=>{Jn||(Jn=Ge?new RegExp(`(${Object.keys(Ge).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(s=>fe(s).replace(kn,Es).replace(Cc,Oi).replace(Jn,Oi)),n=t.map(s=>s.match(ln).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Lt({...e,output:s}));return s=>{const o=!Ci.test(t[0])&&t.find(u=>Ci.test(u))?.replace(ln,"");let a=0;return t[0].replace(ln,()=>`${i[a++](s)}${o||""}`).replace(Ac,$c)}},Fr="react-spring: ",As=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Fr}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},kc=As(console.warn);function Mc(){kc(`${Fr}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var jc=As(console.warn);function Fc(){jc(`${Fr}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Mn(e){return H.str(e)&&(e[0]=="#"||/\d/.test(e)||!kr()&&kn.test(e)||e in(Ge||{}))}var dt=kr()?E.useEffect:E.useLayoutEffect,Dc=()=>{const e=E.useRef(!1);return dt(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Ts(){const e=E.useState()[1],t=Dc();return()=>{t.current&&e(Math.random())}}function Lc(e,t){const[n]=E.useState(()=>({inputs:t,result:e()})),r=E.useRef(),i=r.current;let s=i;return s?t&&s.inputs&&Nc(t,s.inputs)||(s={inputs:t,result:e()}):s=n,E.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Nc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var $s=e=>E.useEffect(e,Uc),Uc=[];function Hc(e){const t=E.useRef();return E.useEffect(()=>{t.current=e}),t.current}var Vt=Symbol.for("Animated:node"),Vc=e=>!!e&&e[Vt]===e,Pe=e=>e&&e[Vt],Dr=(e,t)=>uc(e,Vt,t),jn=e=>e&&e[Vt]&&e[Vt].getPayload(),ks=class{constructor(){Dr(this,this)}getPayload(){return this.payload||[]}},Qt=class extends ks{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,H.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Qt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return H.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,H.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Bt=class extends Qt{constructor(e){super(0),this._string=null,this._toString=Lt({output:[e,e]})}static create(e){return new Bt(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(H.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Lt({output:[this.getValue(),e]})),this._value=0,super.reset()}},yn={dependencies:null},Fn=class extends ks{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Ae(this.source,(n,r)=>{Vc(n)?t[r]=n.getValue(e):ye(n)?t[r]=fe(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&J(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Ae(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){yn.dependencies&&ye(e)&&yn.dependencies.add(e);const t=jn(e);t&&J(t,n=>this.add(n))}},Ms=class extends Fn{constructor(e){super(e)}static create(e){return new Ms(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Bc)),!0)}};function Bc(e){return(Mn(e)?Bt:Qt).create(e)}function lr(e){const t=Pe(e);return t?t.constructor:H.arr(e)?Ms:Mn(e)?Bt:Qt}var Ai=(e,t)=>{const n=!H.fun(e)||e.prototype&&e.prototype.isReactComponent;return E.forwardRef((r,i)=>{const s=E.useRef(null),o=n&&E.useCallback(y=>{s.current=zc(i,y)},[i]),[a,u]=Wc(r,t),c=Ts(),l=()=>{const y=s.current;if(n&&!y)return;(y?t.applyAnimatedValues(y,a.getValue(!0)):!1)===!1&&c()},f=new qc(l,u),d=E.useRef();dt(()=>(d.current=f,J(u,y=>bt(y,f)),()=>{d.current&&(J(d.current.deps,y=>Ht(y,d.current)),X.cancel(d.current.update))})),E.useEffect(l,[]),$s(()=>()=>{const y=d.current;J(y.deps,p=>Ht(p,y))});const h=t.getComponentProps(a.getValue());return E.createElement(e,{...h,ref:o})})},qc=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&X.write(this.update)}};function Wc(e,t){const n=new Set;return yn.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Fn(e),yn.dependencies=null,[e,n]}function zc(e,t){return e&&(H.fun(e)?e(t):e.current=t),t}var Ti=Symbol.for("AnimatedComponent"),Gc=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=i=>new Fn(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=$i(o)||"Anonymous";return H.str(o)?o=s[o]||(s[o]=Ai(o,i)):o=o[Ti]||(o[Ti]=Ai(o,i)),o.displayName=`Animated(${a})`,o};return Ae(e,(o,a)=>{H.arr(e)&&(a=$i(o)),s[a]=s(o)}),{animated:s}},$i=e=>H.str(e)?e:e&&H.str(e.displayName)?e.displayName:H.fun(e)&&e.name||null;function de(e,...t){return H.fun(e)?e(...t):e}var Mt=(e,t)=>e===!0||!!(t&&e&&(H.fun(e)?e(t):ue(e).includes(t))),js=(e,t)=>H.obj(e)?t&&e[t]:e,Fs=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Kc=e=>e,Lr=(e,t=Kc)=>{let n=Qc;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const s=t(e[i],i);H.und(s)||(r[i]=s)}return r},Qc=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Yc={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Xc(e){const t={};let n=0;if(Ae(e,(r,i)=>{Yc[i]||(t[i]=r,n++)}),n)return t}function Nr(e){const t=Xc(e);if(t){const n={to:t};return Ae(e,(r,i)=>i in t||(n[i]=r)),n}return{...e}}function qt(e){return e=fe(e),H.arr(e)?e.map(qt):Mn(e)?Ie.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Jc(e){for(const t in e)return!0;return!1}function fr(e){return H.fun(e)||H.arr(e)&&H.obj(e[0])}function ki(e,t){e.ref?.delete(e),t?.delete(e)}function Zc(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var eu={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},dr={...eu.default,mass:1,damping:1,easing:$n.linear,clamp:!1},tu=class{constructor(){this.velocity=0,Object.assign(this,dr)}};function nu(e,t,n){n&&(n={...n},Mi(n,t),t={...n,...t}),Mi(e,t),Object.assign(e,t);for(const o in dr)e[o]==null&&(e[o]=dr[o]);let{frequency:r,damping:i}=e;const{mass:s}=e;return H.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*s,e.friction=4*Math.PI*i*s/r),e}function Mi(e,t){if(!H.und(t.decay))e.duration=void 0;else{const n=!H.und(t.tension)||!H.und(t.friction);(n||!H.und(t.frequency)||!H.und(t.damping)||!H.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var ji=[],ru=class{constructor(){this.changed=!1,this.values=ji,this.toValues=null,this.fromValues=ji,this.config=new tu,this.immediate=!1}};function Ds(e,{key:t,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let u,c,l=Mt(n.cancel??r?.cancel,t);if(l)h();else{H.und(n.pause)||(i.paused=Mt(n.pause,t));let y=r?.pause;y!==!0&&(y=i.paused||Mt(y,t)),u=de(n.delay||0,t),y?(i.resumeQueue.add(d),s.pause()):(s.resume(),d())}function f(){i.resumeQueue.add(d),i.timeouts.delete(c),c.cancel(),u=c.time-X.now()}function d(){u>0&&!Ie.skipAnimation?(i.delayed=!0,c=X.setTimeout(h,u),i.pauseQueue.add(f),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(c),e<=(i.cancelId||0)&&(l=!0);try{s.start({...n,callId:e,cancel:l},o)}catch(y){a(y)}}})}var Ur=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?pt(e.get()):t.every(n=>n.noop)?Ls(e.get()):xe(e.get(),t.every(n=>n.finished)),Ls=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),xe=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),pt=e=>({value:e,cancelled:!0,finished:!1});function Ns(e,t,n,r){const{callId:i,parentId:s,onRest:o}=t,{asyncTo:a,promise:u}=n;return!s&&e===a&&!t.reset?u:n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const c=Lr(t,(w,S)=>S==="onRest"?void 0:w);let l,f;const d=new Promise((w,S)=>(l=w,f=S)),h=w=>{const S=i<=(n.cancelId||0)&&pt(r)||i!==n.asyncId&&xe(r,!1);if(S)throw w.result=S,f(w),w},y=(w,S)=>{const M=new Fi,_=new Di;return(async()=>{if(Ie.skipAnimation)throw Wt(n),_.result=xe(r,!1),f(_),_;h(M);const x=H.obj(w)?{...w}:{...S,to:w};x.parentId=i,Ae(c,(F,N)=>{H.und(x[N])&&(x[N]=F)});const j=await r.start(x);return h(M),n.paused&&await new Promise(F=>{n.resumeQueue.add(F)}),j})()};let p;if(Ie.skipAnimation)return Wt(n),xe(r,!1);try{let w;H.arr(e)?w=(async S=>{for(const M of S)await y(M)})(e):w=Promise.resolve(e(y,r.stop.bind(r))),await Promise.all([w.then(l),d]),p=xe(r.get(),!0,!1)}catch(w){if(w instanceof Fi)p=w.result;else if(w instanceof Di)p=w.result;else throw w}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?u:void 0)}return H.fun(o)&&X.batchedUpdates(()=>{o(p,r,r.item)}),p})()}function Wt(e,t){$t(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Fi=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Di=class extends Error{constructor(){super("SkipAnimationSignal")}},hr=e=>e instanceof Hr,iu=1,Hr=class extends Ps{constructor(){super(...arguments),this.id=iu++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Pe(this);return e&&e.getValue()}to(...e){return Ie.to(this,e)}interpolate(...e){return Mc(),Ie.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Ut(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||An.sort(this),Ut(this,{type:"priority",parent:this,priority:e})}},tt=Symbol.for("SpringPhase"),Us=1,gr=2,pr=4,Zn=e=>(e[tt]&Us)>0,Ve=e=>(e[tt]&gr)>0,Pt=e=>(e[tt]&pr)>0,Li=(e,t)=>t?e[tt]|=gr|Us:e[tt]&=~gr,Ni=(e,t)=>t?e[tt]|=pr:e[tt]&=~pr,su=class extends Hr{constructor(e,t){if(super(),this.animation=new ru,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!H.und(e)||!H.und(t)){const n=H.obj(e)?{...e}:{...t,from:e};H.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ve(this)||this._state.asyncTo)||Pt(this)}get goal(){return fe(this.animation.to)}get velocity(){const e=Pe(this);return e instanceof Qt?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Zn(this)}get isAnimating(){return Ve(this)}get isPaused(){return Pt(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=jn(r.to);!o&&ye(r.to)&&(i=ue(fe(r.to))),r.values.forEach((c,l)=>{if(c.done)return;const f=c.constructor==Bt?1:o?o[l].lastPosition:i[l];let d=r.immediate,h=f;if(!d){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let y=c.elapsedTime+=e;const p=r.fromValues[l],w=c.v0!=null?c.v0:c.v0=H.arr(s.velocity)?s.velocity[l]:s.velocity;let S;const M=s.precision||(p==f?.005:Math.min(1,Math.abs(f-p)*.001));if(H.und(s.duration))if(s.decay){const _=s.decay===!0?.998:s.decay,x=Math.exp(-(1-_)*y);h=p+w/(1-_)*(1-x),d=Math.abs(c.lastPosition-h)<=M,S=w*x}else{S=c.lastVelocity==null?w:c.lastVelocity;const _=s.restVelocity||M/10,x=s.clamp?0:s.bounce,j=!H.und(x),F=p==f?c.v0>0:p<f;let N,O=!1;const v=1,b=Math.ceil(e/v);for(let C=0;C<b&&(N=Math.abs(S)>_,!(!N&&(d=Math.abs(f-h)<=M,d)));++C){j&&(O=h==f||h>f==F,O&&(S=-S*x,h=f));const k=-s.tension*1e-6*(h-f),L=-s.friction*.001*S,D=(k+L)/s.mass;S=S+D*v,h=h+S*v}}else{let _=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,y=c.elapsedTime+=e)),_=(s.progress||0)+y/this._memoizedDuration,_=_>1?1:_<0?0:_,c.durationProgress=_),h=p+s.easing(_)*(f-p),S=(h-c.lastPosition)/e,d=_==1}c.lastVelocity=S,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[l].done&&(d=!1),d?c.done=!0:t=!1,c.setValue(h,s.round)&&(n=!0)});const a=Pe(this),u=a.getValue();if(t){const c=fe(r.to);(u!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(u),this._stop()}else n&&this._onChange(u)}set(e){return X.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ve(this)){const{to:e,config:t}=this.animation;X.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return H.und(e)?(n=this.queue||[],this.queue=[]):n=[H.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Ur(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Wt(this._state,e&&this._lastCallId),X.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=H.obj(n)?n[t]:n,(n==null||fr(n))&&(n=void 0),r=H.obj(r)?r[t]:r,r==null&&(r=void 0);const i={to:n,from:r};return Zn(this)||(e.reverse&&([n,r]=[r,n]),r=fe(r),H.und(r)?Pe(this)||this._set(n):this._set(r)),i}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Lr(e,(o,a)=>/^on/.test(a)?js(o,n):o)),Hi(this,e,"onProps"),Et(this,"onProps",e,this);const i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Ds(++this._lastCallId,{key:n,props:e,defaultProps:r,state:s,actions:{pause:()=>{Pt(this)||(Ni(this,!0),At(s.pauseQueue),Et(this,"onPause",xe(this,Rt(this,this.animation.to)),this))},resume:()=>{Pt(this)&&(Ni(this,!1),Ve(this)&&this._resume(),At(s.resumeQueue),Et(this,"onResume",xe(this,Rt(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const a=Hs(e);if(a)return this._update(a,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(pt(this));const r=!H.und(e.to),i=!H.und(e.from);if(r||i)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(pt(this));const{key:s,defaultProps:o,animation:a}=this,{to:u,from:c}=a;let{to:l=u,from:f=c}=e;i&&!r&&(!t.default||H.und(l))&&(l=f),t.reverse&&([l,f]=[f,l]);const d=!je(f,c);d&&(a.from=f),f=fe(f);const h=!je(l,u);h&&this._focus(l);const y=fr(t.to),{config:p}=a,{decay:w,velocity:S}=p;(r||i)&&(p.velocity=0),t.config&&!y&&nu(p,de(t.config,s),t.config!==o.config?de(o.config,s):void 0);let M=Pe(this);if(!M||H.und(l))return n(xe(this,!0));const _=H.und(t.reset)?i&&!t.default:!H.und(f)&&Mt(t.reset,s),x=_?f:this.get(),j=qt(l),F=H.num(j)||H.arr(j)||Mn(j),N=!y&&(!F||Mt(o.immediate||t.immediate,s));if(h){const C=lr(l);if(C!==M.constructor)if(N)M=this._set(j);else throw Error(`Cannot animate between ${M.constructor.name} and ${C.name}, as the "to" prop suggests`)}const O=M.constructor;let v=ye(l),b=!1;if(!v){const C=_||!Zn(this)&&d;(h||C)&&(b=je(qt(x),j),v=!b),(!je(a.immediate,N)&&!N||!je(p.decay,w)||!je(p.velocity,S))&&(v=!0)}if(b&&Ve(this)&&(a.changed&&!_?v=!0:v||this._stop(u)),!y&&((v||ye(u))&&(a.values=M.getPayload(),a.toValues=ye(l)?null:O==Bt?[1]:ue(j)),a.immediate!=N&&(a.immediate=N,!N&&!_&&this._set(u)),v)){const{onRest:C}=a;J(ou,L=>Hi(this,t,L));const k=xe(this,Rt(this,u));At(this._pendingCalls,k),this._pendingCalls.add(n),a.changed&&X.batchedUpdates(()=>{a.changed=!_,C?.(k,this),_?de(o.onRest,k):a.onStart?.(k,this)})}_&&this._set(x),y?n(Ns(t.to,t,this._state,this)):v?this._start():Ve(this)&&!h?this._pendingCalls.add(n):n(Ls(x))}_focus(e){const t=this.animation;e!==t.to&&(Ei(this)&&this._detach(),t.to=e,Ei(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ye(t)&&(bt(t,this),hr(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ye(e)&&Ht(e,this)}_set(e,t=!0){const n=fe(e);if(!H.und(n)){const r=Pe(this);if(!r||!je(n,r.getValue())){const i=lr(n);!r||r.constructor!=i?Dr(this,i.create(n)):r.setValue(n),r&&X.batchedUpdates(()=>{this._onChange(n,t)})}}return Pe(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Et(this,"onStart",xe(this,Rt(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),de(this.animation.onChange,e,this)),de(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Pe(this).reset(fe(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ve(this)||(Li(this,!0),Pt(this)||this._resume())}_resume(){Ie.skipAnimation?this.finish():An.start(this)}_stop(e,t){if(Ve(this)){Li(this,!1);const n=this.animation;J(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ut(this,{type:"idle",parent:this});const r=t?pt(this.get()):xe(this.get(),Rt(this,e??n.to));At(this._pendingCalls,r),n.changed&&(n.changed=!1,Et(this,"onRest",r,this))}}};function Rt(e,t){const n=qt(t),r=qt(e.get());return je(r,n)}function Hs(e,t=e.loop,n=e.to){const r=de(t);if(r){const i=r!==!0&&Nr(r),s=(i||e).reverse,o=!i||i.reset;return vn({...e,loop:t,default:!1,pause:void 0,to:!s||fr(n)?n:void 0,from:o?e.from:void 0,reset:o,...i})}}function vn(e){const{to:t,from:n}=e=Nr(e),r=new Set;return H.obj(t)&&Ui(t,r),H.obj(n)&&Ui(n,r),e.keys=r.size?Array.from(r):null,e}function Ui(e,t){Ae(e,(n,r)=>n!=null&&t.add(r))}var ou=["onStart","onRest","onChange","onPause","onResume"];function Hi(e,t,n){e.animation[n]=t[n]!==Fs(t,n)?js(t[n],e.key):void 0}function Et(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var au=["onStart","onChange","onRest"],cu=1,uu=class{constructor(e,t){this.id=cu++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];H.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(vn(e)),this}start(e){let{queue:t}=this;return e?t=ue(e).map(vn):this.queue=[],this._flush?this._flush(this,t):(Ws(this,t),lu(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;J(ue(t),r=>n[r].stop(!!e))}else Wt(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(H.und(e))this.start({pause:!0});else{const t=this.springs;J(ue(e),n=>t[n].pause())}return this}resume(e){if(H.und(e))this.start({pause:!1});else{const t=this.springs;J(ue(e),n=>t[n].resume())}return this}each(e){Ae(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,$t(e,([a,u])=>{u.value=this.get(),a(u,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&t.size&&$t(t,([a,u])=>{u.value=o,a(u,this,this._item)}),s&&(this._started=!1,$t(n,([a,u])=>{u.value=o,a(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;X.onFrame(this._onFrame)}};function lu(e,t){return Promise.all(t.map(n=>Vs(e,n))).then(n=>Ur(e,n))}async function Vs(e,t,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:u}=t,c=H.obj(t.default)&&t.default;o&&(t.loop=!1),i===!1&&(t.to=null),s===!1&&(t.from=null);const l=H.arr(i)||H.fun(i)?i:void 0;l?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):J(au,p=>{const w=t[p];if(H.fun(w)){const S=e._events[p];t[p]=({finished:M,cancelled:_})=>{const x=S.get(w);x?(M||(x.finished=!1),_&&(x.cancelled=!0)):S.set(w,{value:null,finished:M||!1,cancelled:_||!1})},c&&(c[p]=t[p])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,At(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map(p=>e.springs[p].start(t)),h=t.cancel===!0||Fs(t,"cancel")===!0;(l||h&&f.asyncId)&&d.push(Ds(++e._lastAsyncId,{props:t,state:f,actions:{pause:cr,resume:cr,start(p,w){h?(Wt(f,e._lastAsyncId),w(pt(e))):(p.onRest=a,w(Ns(l,p,f,e)))}}})),f.paused&&await new Promise(p=>{f.resumeQueue.add(p)});const y=Ur(e,await Promise.all(d));if(o&&y.finished&&!(n&&y.noop)){const p=Hs(t,o,i);if(p)return Ws(e,[p]),Vs(e,p,!0)}return u&&X.batchedUpdates(()=>u(y,e,e.item)),y}function fu(e,t){const n={...e.springs};return t&&J(ue(t),r=>{H.und(r.keys)&&(r=vn(r)),H.obj(r.to)||(r={...r,to:void 0}),qs(n,r,i=>Bs(i))}),du(e,n),n}function du(e,t){Ae(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,bt(n,e))})}function Bs(e,t){const n=new su;return n.key=e,t&&bt(n,t),n}function qs(e,t,n){t.keys&&J(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Ws(e,t){J(t,n=>{qs(e.springs,n,r=>Bs(r,e))})}var Dn=({children:e,...t})=>{const n=E.useContext(wn),r=t.pause||!!n.pause,i=t.immediate||!!n.immediate;t=Lc(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=wn;return E.createElement(s,{value:t},e)},wn=hu(Dn,{});Dn.Provider=wn.Provider;Dn.Consumer=wn.Consumer;function hu(e,t){return Object.assign(e,E.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var gu=()=>{const e=[],t=function(r){Fc();const i=[];return J(e,(s,o)=>{if(H.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const i=e.indexOf(r);~i&&e.splice(i,1)},t.pause=function(){return J(e,r=>r.pause(...arguments)),this},t.resume=function(){return J(e,r=>r.resume(...arguments)),this},t.set=function(r){J(e,(i,s)=>{const o=H.fun(r)?r(s,i):r;o&&i.set(o)})},t.start=function(r){const i=[];return J(e,(s,o)=>{if(H.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},t.stop=function(){return J(e,r=>r.stop(...arguments)),this},t.update=function(r){return J(e,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return H.fun(r)?r(s,i):r};return t._getProps=n,t};function Vr(e,t,n){const r=H.fun(t)&&t,{reset:i,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:u=!1,onDestroyed:c,ref:l,config:f}=r?r():t,d=E.useMemo(()=>r||arguments.length==3?gu():void 0,[]),h=ue(e),y=[],p=E.useRef(null),w=i?null:p.current;dt(()=>{p.current=y}),$s(()=>(J(y,D=>{d?.add(D.ctrl),D.ctrl.ref=d}),()=>{J(p.current,D=>{D.expired&&clearTimeout(D.expirationId),ki(D.ctrl,d),D.ctrl.stop(!0)})}));const S=mu(h,r?r():t,w),M=i&&p.current||[];dt(()=>J(M,({ctrl:D,item:V,key:K})=>{ki(D,d),de(c,V,K)}));const _=[];if(w&&J(w,(D,V)=>{D.expired?(clearTimeout(D.expirationId),M.push(D)):(V=_[V]=S.indexOf(D.key),~V&&(y[V]=D))}),J(h,(D,V)=>{y[V]||(y[V]={key:S[V],item:D,phase:"mount",ctrl:new uu},y[V].ctrl.item=D)}),_.length){let D=-1;const{leave:V}=r?r():t;J(_,(K,W)=>{const P=w[W];~K?(D=y.indexOf(P),y[D]={...P,item:h[K]}):V&&y.splice(++D,0,P)})}H.fun(s)&&y.sort((D,V)=>s(D.item,V.item));let x=-o;const j=Ts(),F=Lr(t),N=new Map,O=E.useRef(new Map),v=E.useRef(!1);J(y,(D,V)=>{const K=D.key,W=D.phase,P=r?r():t;let m,I;const A=de(P.delay||0,K);if(W=="mount")m=P.enter,I="enter";else{const $=S.indexOf(K)<0;if(W!="leave")if($)m=P.leave,I="leave";else if(m=P.update)I="update";else return;else if(!$)m=P.enter,I="enter";else return}if(m=de(m,D.item,V),m=H.obj(m)?Nr(m):{to:m},!m.config){const $=f||F.config;m.config=de($,D.item,V,I)}x+=o;const g={...F,delay:A+x,ref:l,immediate:P.immediate,reset:!1,...m};if(I=="enter"&&H.und(g.from)){const $=r?r():t,G=H.und($.initial)||w?$.from:$.initial;g.from=de(G,D.item,V)}const{onResolve:R}=g;g.onResolve=$=>{de(R,$);const G=p.current,Q=G.find(q=>q.key===K);if(Q&&!($.cancelled&&Q.phase!="update")&&Q.ctrl.idle){const q=G.every(B=>B.ctrl.idle);if(Q.phase=="leave"){const B=de(a,Q.item);if(B!==!1){const Z=B===!0?0:B;if(Q.expired=!0,!q&&Z>0){Z<=2147483647&&(Q.expirationId=setTimeout(j,Z));return}}}q&&G.some(B=>B.expired)&&(O.current.delete(Q),u&&(v.current=!0),j())}};const T=fu(D.ctrl,g);I==="leave"&&u?O.current.set(D,{phase:I,springs:T,payload:g}):N.set(D,{phase:I,springs:T,payload:g})});const b=E.useContext(Dn),C=Hc(b),k=b!==C&&Jc(b);dt(()=>{k&&J(y,D=>{D.ctrl.start({default:b})})},[b]),J(N,(D,V)=>{if(O.current.size){const K=y.findIndex(W=>W.key===V.key);y.splice(K,1)}}),dt(()=>{J(O.current.size?O.current:N,({phase:D,payload:V},K)=>{const{ctrl:W}=K;K.phase=D,d?.add(W),k&&D=="enter"&&W.start({default:b}),V&&(Zc(W,V.ref),(W.ref||d)&&!v.current?W.update(V):(W.start(V),v.current&&(v.current=!1)))})},i?void 0:n);const L=D=>E.createElement(E.Fragment,null,y.map((V,K)=>{const{springs:W}=N.get(V)||V.ctrl,P=D({...W},V.item,V,K);return P&&P.type?E.createElement(P.type,{...P.props,key:H.str(V.key)||H.num(V.key)?V.key:V.ctrl.id,ref:P.ref}):P}));return d?[L,d]:L}var pu=1;function mu(e,{key:t,keys:n=t},r){if(n===null){const i=new Set;return e.map(s=>{const o=r&&r.find(a=>a.item===s&&a.phase!=="leave"&&!i.has(a));return o?(i.add(o),o.key):pu++})}return H.und(n)?e:H.fun(n)?e.map(n):ue(n)}var yu=class extends Hr{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Lt(...t);const n=this._get(),r=lr(n);Dr(this,r.create(n))}advance(e){const t=this._get(),n=this.get();je(t,n)||(Pe(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Vi(this._active)&&er(this)}_get(){const e=H.arr(this.source)?this.source.map(fe):ue(fe(this.source));return this.calc(...e)}_start(){this.idle&&!Vi(this._active)&&(this.idle=!1,J(jn(this),e=>{e.done=!1}),Ie.skipAnimation?(X.batchedUpdates(()=>this.advance()),er(this)):An.start(this))}_attach(){let e=1;J(ue(this.source),t=>{ye(t)&&bt(t,this),hr(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){J(ue(this.source),e=>{ye(e)&&Ht(e,this)}),this._active.clear(),er(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ue(this.source).reduce((t,n)=>Math.max(t,(hr(n)?n.priority:0)+1),0))}};function vu(e){return e.idle!==!1}function Vi(e){return!e.size||Array.from(e).every(vu)}function er(e){e.idle||(e.idle=!0,J(jn(e),t=>{t.done=!0}),Ut(e,{type:"idle",parent:e}))}Ie.assign({createStringInterpolator:Cs,to:(e,t)=>new yu(e,t)});var zs=/^--/;function wu(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!zs.test(e)&&!(jt.hasOwnProperty(e)&&jt[e])?t+"px":(""+t).trim()}var Bi={};function Su(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...u}=t,c=Object.values(u),l=Object.keys(u).map(f=>n||e.hasAttribute(f)?f:Bi[f]||(Bi[f]=f.replace(/([A-Z])/g,d=>"-"+d.toLowerCase())));i!==void 0&&(e.textContent=i);for(const f in r)if(r.hasOwnProperty(f)){const d=wu(f,r[f]);zs.test(f)?e.style.setProperty(f,d):e.style[f]=d}l.forEach((f,d)=>{e.setAttribute(f,c[d])}),s!==void 0&&(e.scrollTop=s),o!==void 0&&(e.scrollLeft=o),a!==void 0&&e.setAttribute("viewBox",a)}var jt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bu=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),_u=["Webkit","Ms","Moz","O"];jt=Object.keys(jt).reduce((e,t)=>(_u.forEach(n=>e[bu(n,t)]=e[t]),e),jt);var xu=/^(matrix|translate|scale|rotate|skew)/,Ou=/^(translate)/,Iu=/^(rotate|skew)/,tr=(e,t)=>H.num(e)&&e!==0?e+t:e,fn=(e,t)=>H.arr(e)?e.every(n=>fn(n,t)):H.num(e)?e===t:parseFloat(e)===t,Pu=class extends Fn{constructor({x:e,y:t,z:n,...r}){const i=[],s=[];(e||t||n)&&(i.push([e||0,t||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>tr(a,"px")).join(",")})`,fn(o,0)])),Ae(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(u=>[u,u===""]);else if(xu.test(a)){if(delete r[a],H.und(o))return;const u=Ou.test(a)?"px":Iu.test(a)?"deg":"";i.push(ue(o)),s.push(a==="rotate3d"?([c,l,f,d])=>[`rotate3d(${c},${l},${f},${tr(d,u)})`,fn(d,0)]:c=>[`${a}(${c.map(l=>tr(l,u)).join(",")})`,fn(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new Ru(i,s)),super(r)}},Ru=class extends Ps{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return J(this.inputs,(n,r)=>{const i=fe(n[0]),[s,o]=this.transforms[r](H.arr(i)?i:n.map(fe));e+=" "+s,t=t&&o}),t?"none":e}observerAdded(e){e==1&&J(this.inputs,t=>J(t,n=>ye(n)&&bt(n,this)))}observerRemoved(e){e==0&&J(this.inputs,t=>J(t,n=>ye(n)&&Ht(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Ut(this,e)}},Eu=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Ie.assign({batchedUpdates:ss.unstable_batchedUpdates,createStringInterpolator:Cs,colors:gc});var Cu=Gc(Eu,{applyAnimatedValues:Su,createAnimatedStyle:e=>new Pu(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Br=Cu.animated,Gs={},Ks={exports:{}},Au="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tu=Au,$u=Tu;function Qs(){}function Ys(){}Ys.resetWarningCache=Qs;var ku=function(){function e(r,i,s,o,a,u){if(u!==$u){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ys,resetWarningCache:Qs};return n.PropTypes=n,n};Ks.exports=ku();var Yt=Ks.exports;function Mu(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var ju=Mu,Xs={},qi=function(){function e(t,n){var r=[],i=!0,s=!1,o=void 0;try{for(var a=t[Symbol.iterator](),u;!(i=(u=a.next()).done)&&(r.push(u.value),!(n&&r.length===n));i=!0);}catch(c){s=!0,o=c}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Fu=function(e){var t=e.data,n=e.multiSection;function r(u){for(u===null?u=0:u++;u<t.length&&t[u]===0;)u++;return u===t.length?null:u}function i(u){for(u===null?u=t.length-1:u--;u>=0&&t[u]===0;)u--;return u===-1?null:u}function s(u){var c=qi(u,2),l=c[0],f=c[1];return n?f===null||f===t[l]-1?(l=r(l),l===null?[null,null]:[l,0]):[l,f+1]:t===0||f===t-1?[null,null]:f===null?[null,0]:[null,f+1]}function o(u){var c=qi(u,2),l=c[0],f=c[1];return n?f===null||f===0?(l=i(l),l===null?[null,null]:[l,t[l]-1]):[l,f-1]:t===0||f===0?[null,null]:f===null?[null,t-1]:[null,f-1]}function a(u){return s(u)[1]===null}return{next:s,prev:o,isLast:a}},mr={exports:{}},Du=Object.prototype.propertyIsEnumerable;function Lu(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Nu(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(n){return Du.call(e,n)})}var Uu=Object.assign||function(e,t){for(var n,r,i=Lu(e),s=1;s<arguments.length;s++){n=arguments[s],r=Nu(Object(n));for(var o=0;o<r.length;o++)i[r[o]]=n[r[o]]}return i};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function u(c,l){var f=[],d=!0,h=!1,y=void 0;try{for(var p=c[Symbol.iterator](),w;!(d=(w=p.next()).done)&&(f.push(w.value),!(l&&f.length===l));d=!0);}catch(S){h=!0,y=S}finally{try{!d&&p.return&&p.return()}finally{if(h)throw y}}return f}return function(c,l){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return u(c,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(u){return u&&u.__esModule?u:{default:u}}function i(u){if(Array.isArray(u)){for(var c=0,l=Array(u.length);c<u.length;c++)l[c]=u[c];return l}else return Array.from(u)}var s=Uu,o=r(s),a=function(c){return c};t.default=function(u){var c=Array.isArray(u)&&u.length===2?u:[u,null],l=n(c,2),f=l[0],d=l[1];return function(h){for(var y=arguments.length,p=Array(y>1?y-1:0),w=1;w<y;w++)p[w-1]=arguments[w];var S=p.map(function(M){return f[M]}).filter(a);return typeof S[0]=="string"||typeof d=="function"?{key:h,className:d?d.apply(void 0,i(S)):S.join(" ")}:{key:h,style:o.default.apply(void 0,[{}].concat(i(S)))}}},e.exports=t.default})(mr,mr.exports);var Hu=mr.exports,Js={},Ln={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(s){return typeof s}:t=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(r)}function n(r,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===i)return!1;var o=Object.keys(r),a=Object.keys(i);if(o.length!==a.length)return!0;var u={},c,l;for(c=0,l=s.length;c<l;c++)u[s[c]]=!0;for(c=0,l=o.length;c<l;c++){var f=o[c],d=r[f],h=i[f];if(d!==h){if(!u[f]||d===null||h===null||t(d)!=="object"||t(h)!=="object")return!0;var y=Object.keys(d),p=Object.keys(h);if(y.length!==p.length)return!0;for(var w=0,S=y.length;w<S;w++){var M=y[w];if(d[M]!==h[M])return!0}}}return!1}})(Ln);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(E),n=i(Yt),r=i(Ln);function i(x){return x&&x.__esModule?x:{default:x}}function s(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return s=function(){return x},x}function o(x){if(x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var j=s();if(j&&j.has(x))return j.get(x);var F={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in x)if(Object.prototype.hasOwnProperty.call(x,O)){var v=N?Object.getOwnPropertyDescriptor(x,O):null;v&&(v.get||v.set)?Object.defineProperty(F,O,v):F[O]=x[O]}return F.default=x,j&&j.set(x,F),F}function a(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(F){return typeof F}:a=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},a(x)}function u(x,j){if(!(x instanceof j))throw new TypeError("Cannot call a class as a function")}function c(x,j){for(var F=0;F<j.length;F++){var N=j[F];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}function l(x,j,F){return j&&c(x.prototype,j),x}function f(x){return function(){var j=p(x),F;if(y()){var N=p(this).constructor;F=Reflect.construct(j,arguments,N)}else F=j.apply(this,arguments);return d(this,F)}}function d(x,j){return j&&(a(j)==="object"||typeof j=="function")?j:h(x)}function h(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(x){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},p(x)}function w(x,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(j&&j.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),j&&S(x,j)}function S(x,j){return S=Object.setPrototypeOf||function(N,O){return N.__proto__=O,N},S(x,j)}function M(x,j,F){return j in x?Object.defineProperty(x,j,{value:F,enumerable:!0,configurable:!0,writable:!0}):x[j]=F,x}var _=function(x){w(F,x);var j=f(F);function F(){return u(this,F),j.apply(this,arguments)}return l(F,[{key:"shouldComponentUpdate",value:function(O){return(0,r.default)(O,this.props)}},{key:"render",value:function(){var O=this.props,v=O.section,b=O.renderSectionTitle,C=O.theme,k=O.sectionKeyPrefix,L=b(v);return L?t.default.createElement("div",C("".concat(k,"title"),"sectionTitle"),L):null}}]),F}(t.Component);e.default=_,M(_,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})})(Js);var Zs={},eo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(E),n=i(Yt),r=i(Ln);function i(v){return v&&v.__esModule?v:{default:v}}function s(){if(typeof WeakMap!="function")return null;var v=new WeakMap;return s=function(){return v},v}function o(v){if(v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var b=s();if(b&&b.has(v))return b.get(v);var C={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in v)if(Object.prototype.hasOwnProperty.call(v,L)){var D=k?Object.getOwnPropertyDescriptor(v,L):null;D&&(D.get||D.set)?Object.defineProperty(C,L,D):C[L]=v[L]}return C.default=v,b&&b.set(v,C),C}function a(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(C){return typeof C}:a=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},a(v)}function u(){return u=Object.assign||function(v){for(var b=1;b<arguments.length;b++){var C=arguments[b];for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(v[k]=C[k])}return v},u.apply(this,arguments)}function c(v,b){var C=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);b&&(k=k.filter(function(L){return Object.getOwnPropertyDescriptor(v,L).enumerable})),C.push.apply(C,k)}return C}function l(v){for(var b=1;b<arguments.length;b++){var C=arguments[b]!=null?arguments[b]:{};b%2?c(Object(C),!0).forEach(function(k){N(v,k,C[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(C)):c(Object(C)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(C,k))})}return v}function f(v,b){if(v==null)return{};var C=d(v,b),k,L;if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(v);for(L=0;L<D.length;L++)k=D[L],!(b.indexOf(k)>=0)&&Object.prototype.propertyIsEnumerable.call(v,k)&&(C[k]=v[k])}return C}function d(v,b){if(v==null)return{};var C={},k=Object.keys(v),L,D;for(D=0;D<k.length;D++)L=k[D],!(b.indexOf(L)>=0)&&(C[L]=v[L]);return C}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function y(v,b){for(var C=0;C<b.length;C++){var k=b[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(v,k.key,k)}}function p(v,b,C){return b&&y(v.prototype,b),v}function w(v){return function(){var b=x(v),C;if(_()){var k=x(this).constructor;C=Reflect.construct(b,arguments,k)}else C=b.apply(this,arguments);return S(this,C)}}function S(v,b){return b&&(a(b)==="object"||typeof b=="function")?b:M(v)}function M(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(v){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},x(v)}function j(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),b&&F(v,b)}function F(v,b){return F=Object.setPrototypeOf||function(k,L){return k.__proto__=L,k},F(v,b)}function N(v,b,C){return b in v?Object.defineProperty(v,b,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[b]=C,v}var O=function(v){j(C,v);var b=w(C);function C(){var k;h(this,C);for(var L=arguments.length,D=new Array(L),V=0;V<L;V++)D[V]=arguments[V];return k=b.call.apply(b,[this].concat(D)),N(M(k),"storeItemReference",function(K){K!==null&&(k.item=K)}),N(M(k),"onMouseEnter",function(K){var W=k.props,P=W.sectionIndex,m=W.itemIndex;k.props.onMouseEnter(K,{sectionIndex:P,itemIndex:m})}),N(M(k),"onMouseLeave",function(K){var W=k.props,P=W.sectionIndex,m=W.itemIndex;k.props.onMouseLeave(K,{sectionIndex:P,itemIndex:m})}),N(M(k),"onMouseDown",function(K){var W=k.props,P=W.sectionIndex,m=W.itemIndex;k.props.onMouseDown(K,{sectionIndex:P,itemIndex:m})}),N(M(k),"onClick",function(K){var W=k.props,P=W.sectionIndex,m=W.itemIndex;k.props.onClick(K,{sectionIndex:P,itemIndex:m})}),k}return p(C,[{key:"shouldComponentUpdate",value:function(L){return(0,r.default)(L,this.props,["renderItemData"])}},{key:"render",value:function(){var L=this.props,D=L.isHighlighted,V=L.item,K=L.renderItem,W=L.renderItemData,P=f(L,["isHighlighted","item","renderItem","renderItemData"]);return delete P.sectionIndex,delete P.itemIndex,typeof P.onMouseEnter=="function"&&(P.onMouseEnter=this.onMouseEnter),typeof P.onMouseLeave=="function"&&(P.onMouseLeave=this.onMouseLeave),typeof P.onMouseDown=="function"&&(P.onMouseDown=this.onMouseDown),typeof P.onClick=="function"&&(P.onClick=this.onClick),t.default.createElement("li",u({role:"option"},P,{ref:this.storeItemReference}),K(V,l({isHighlighted:D},W)))}}]),C}(t.Component);e.default=O,N(O,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})})(eo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(E),n=s(Yt),r=s(eo),i=s(Ln);function s(O){return O&&O.__esModule?O:{default:O}}function o(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return o=function(){return O},O}function a(O){if(O&&O.__esModule)return O;if(O===null||u(O)!=="object"&&typeof O!="function")return{default:O};var v=o();if(v&&v.has(O))return v.get(O);var b={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in O)if(Object.prototype.hasOwnProperty.call(O,k)){var L=C?Object.getOwnPropertyDescriptor(O,k):null;L&&(L.get||L.set)?Object.defineProperty(b,k,L):b[k]=O[k]}return b.default=O,v&&v.set(O,b),b}function u(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(b){return typeof b}:u=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},u(O)}function c(){return c=Object.assign||function(O){for(var v=1;v<arguments.length;v++){var b=arguments[v];for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(O[C]=b[C])}return O},c.apply(this,arguments)}function l(O,v){var b=Object.keys(O);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(O);v&&(C=C.filter(function(k){return Object.getOwnPropertyDescriptor(O,k).enumerable})),b.push.apply(b,C)}return b}function f(O){for(var v=1;v<arguments.length;v++){var b=arguments[v]!=null?arguments[v]:{};v%2?l(Object(b),!0).forEach(function(C){F(O,C,b[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(b)):l(Object(b)).forEach(function(C){Object.defineProperty(O,C,Object.getOwnPropertyDescriptor(b,C))})}return O}function d(O,v){if(!(O instanceof v))throw new TypeError("Cannot call a class as a function")}function h(O,v){for(var b=0;b<v.length;b++){var C=v[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(O,C.key,C)}}function y(O,v,b){return v&&h(O.prototype,v),O}function p(O){return function(){var v=_(O),b;if(M()){var C=_(this).constructor;b=Reflect.construct(v,arguments,C)}else b=v.apply(this,arguments);return w(this,b)}}function w(O,v){return v&&(u(v)==="object"||typeof v=="function")?v:S(O)}function S(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _(O){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},_(O)}function x(O,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(v&&v.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),v&&j(O,v)}function j(O,v){return j=Object.setPrototypeOf||function(C,k){return C.__proto__=k,C},j(O,v)}function F(O,v,b){return v in O?Object.defineProperty(O,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):O[v]=b,O}var N=function(O){x(b,O);var v=p(b);function b(){var C;d(this,b);for(var k=arguments.length,L=new Array(k),D=0;D<k;D++)L[D]=arguments[D];return C=v.call.apply(v,[this].concat(L)),F(S(C),"storeHighlightedItemReference",function(V){C.props.onHighlightedItemChange(V===null?null:V.item)}),C}return y(b,[{key:"shouldComponentUpdate",value:function(k){return(0,i.default)(k,this.props,["itemProps"])}},{key:"render",value:function(){var k=this,L=this.props,D=L.items,V=L.itemProps,K=L.renderItem,W=L.renderItemData,P=L.sectionIndex,m=L.highlightedItemIndex,I=L.getItemId,A=L.theme,g=L.keyPrefix,R=P===null?g:"".concat(g,"section-").concat(P,"-"),T=typeof V=="function";return t.default.createElement("ul",c({role:"listbox"},A("".concat(R,"items-list"),"itemsList")),D.map(function($,G){var Q=G===0,q=G===m,B="".concat(R,"item-").concat(G),Z=T?V({sectionIndex:P,itemIndex:G}):V,ne=f({id:I(P,G),"aria-selected":q},A(B,"item",Q&&"itemFirst",q&&"itemHighlighted"),{},Z);return q&&(ne.ref=k.storeHighlightedItemReference),t.default.createElement(r.default,c({},ne,{sectionIndex:P,isHighlighted:q,itemIndex:G,item:$,renderItem:K,renderItemData:W}))}))}}]),b}(t.Component);e.default=N,F(N,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),F(N,"defaultProps",{sectionIndex:null})})(Zs);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(E),n=a(Yt),r=a(Fu),i=a(Hu),s=a(Js),o=a(Zs);function a(m){return m&&m.__esModule?m:{default:m}}function u(){if(typeof WeakMap!="function")return null;var m=new WeakMap;return u=function(){return m},m}function c(m){if(m&&m.__esModule)return m;if(m===null||M(m)!=="object"&&typeof m!="function")return{default:m};var I=u();if(I&&I.has(m))return I.get(m);var A={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in m)if(Object.prototype.hasOwnProperty.call(m,R)){var T=g?Object.getOwnPropertyDescriptor(m,R):null;T&&(T.get||T.set)?Object.defineProperty(A,R,T):A[R]=m[R]}return A.default=m,I&&I.set(m,A),A}function l(m,I){var A=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);I&&(g=g.filter(function(R){return Object.getOwnPropertyDescriptor(m,R).enumerable})),A.push.apply(A,g)}return A}function f(m){for(var I=1;I<arguments.length;I++){var A=arguments[I]!=null?arguments[I]:{};I%2?l(Object(A),!0).forEach(function(g){L(m,g,A[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(A)):l(Object(A)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(A,g))})}return m}function d(m,I){return S(m)||w(m,I)||y(m,I)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(m,I){if(m){if(typeof m=="string")return p(m,I);var A=Object.prototype.toString.call(m).slice(8,-1);if(A==="Object"&&m.constructor&&(A=m.constructor.name),A==="Map"||A==="Set")return Array.from(A);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return p(m,I)}}function p(m,I){(I==null||I>m.length)&&(I=m.length);for(var A=0,g=new Array(I);A<I;A++)g[A]=m[A];return g}function w(m,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(m)))){var A=[],g=!0,R=!1,T=void 0;try{for(var $=m[Symbol.iterator](),G;!(g=(G=$.next()).done)&&(A.push(G.value),!(I&&A.length===I));g=!0);}catch(Q){R=!0,T=Q}finally{try{!g&&$.return!=null&&$.return()}finally{if(R)throw T}}return A}}function S(m){if(Array.isArray(m))return m}function M(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(A){return typeof A}:M=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},M(m)}function _(m,I){if(!(m instanceof I))throw new TypeError("Cannot call a class as a function")}function x(m,I){for(var A=0;A<I.length;A++){var g=I[A];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}function j(m,I,A){return I&&x(m.prototype,I),m}function F(m){return function(){var I=b(m),A;if(v()){var g=b(this).constructor;A=Reflect.construct(I,arguments,g)}else A=I.apply(this,arguments);return N(this,A)}}function N(m,I){return I&&(M(I)==="object"||typeof I=="function")?I:O(m)}function O(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(m){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},b(m)}function C(m,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(I&&I.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),I&&k(m,I)}function k(m,I){return k=Object.setPrototypeOf||function(g,R){return g.__proto__=R,g},k(m,I)}function L(m,I,A){return I in m?Object.defineProperty(m,I,{value:A,enumerable:!0,configurable:!0,writable:!0}):m[I]=A,m}var D={},V=function(I){return t.default.createElement("input",I)},K=function(I){var A=I.containerProps,g=I.children;return t.default.createElement("div",A,g)},W={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},P=function(m){C(A,m);var I=F(A);function A(g){var R;return _(this,A),R=I.call(this,g),L(O(R),"storeInputReference",function(T){T!==null&&(R.input=T);var $=R.props.inputProps.ref;$&&(typeof $=="function"?$(T):M($)==="object"&&Object.prototype.hasOwnProperty.call($,"current")&&($.current=T))}),L(O(R),"storeItemsContainerReference",function(T){T!==null&&(R.itemsContainer=T)}),L(O(R),"onHighlightedItemChange",function(T){R.highlightedItem=T}),L(O(R),"getItemId",function(T,$){if($===null)return null;var G=R.props.id,Q=T===null?"":"section-".concat(T);return"react-autowhatever-".concat(G,"-").concat(Q,"-item-").concat($)}),L(O(R),"onFocus",function(T){var $=R.props.inputProps;R.setState({isInputFocused:!0}),$.onFocus&&$.onFocus(T)}),L(O(R),"onBlur",function(T){var $=R.props.inputProps;R.setState({isInputFocused:!1}),$.onBlur&&$.onBlur(T)}),L(O(R),"onKeyDown",function(T){var $=R.props,G=$.inputProps,Q=$.highlightedSectionIndex,q=$.highlightedItemIndex,B=T.keyCode;switch(B){case 40:case 38:{var Z=B===40?"next":"prev",ne=R.sectionIterator[Z]([Q,q]),ie=d(ne,2),se=ie[0],Xe=ie[1];G.onKeyDown(T,{newHighlightedSectionIndex:se,newHighlightedItemIndex:Xe});break}default:G.onKeyDown(T,{highlightedSectionIndex:Q,highlightedItemIndex:q})}}),R.highlightedItem=null,R.state={isInputFocused:!1},R.setSectionsItems(g),R.setSectionIterator(g),R.setTheme(g),R}return j(A,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(R){R.items!==this.props.items&&this.setSectionsItems(R),(R.items!==this.props.items||R.multiSection!==this.props.multiSection)&&this.setSectionIterator(R),R.theme!==this.props.theme&&this.setTheme(R)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(R){R.multiSection&&(this.sectionsItems=R.items.map(function(T){return R.getSectionItems(T)}),this.sectionsLengths=this.sectionsItems.map(function(T){return T.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(T){return T===0}))}},{key:"setSectionIterator",value:function(R){this.sectionIterator=(0,r.default)({multiSection:R.multiSection,data:R.multiSection?this.sectionsLengths:R.items.length})}},{key:"setTheme",value:function(R){this.theme=(0,i.default)(R.theme)}},{key:"renderSections",value:function(){var R=this;if(this.allSectionsAreEmpty)return null;var T=this.theme,$=this.props,G=$.id,Q=$.items,q=$.renderItem,B=$.renderItemData,Z=$.renderSectionTitle,ne=$.highlightedSectionIndex,ie=$.highlightedItemIndex,se=$.itemProps;return Q.map(function(Xe,le){var ot="react-autowhatever-".concat(G,"-"),at="".concat(ot,"section-").concat(le,"-"),$e=le===0;return t.default.createElement("div",T("".concat(at,"container"),"sectionContainer",$e&&"sectionContainerFirst"),t.default.createElement(s.default,{section:Xe,renderSectionTitle:Z,theme:T,sectionKeyPrefix:at}),t.default.createElement(o.default,{items:R.sectionsItems[le],itemProps:se,renderItem:q,renderItemData:B,sectionIndex:le,highlightedItemIndex:ne===le?ie:null,onHighlightedItemChange:R.onHighlightedItemChange,getItemId:R.getItemId,theme:T,keyPrefix:ot,ref:R.storeItemsListReference}))})}},{key:"renderItems",value:function(){var R=this.props.items;if(R.length===0)return null;var T=this.theme,$=this.props,G=$.id,Q=$.renderItem,q=$.renderItemData,B=$.highlightedSectionIndex,Z=$.highlightedItemIndex,ne=$.itemProps;return t.default.createElement(o.default,{items:R,itemProps:ne,renderItem:Q,renderItemData:q,highlightedItemIndex:B===null?Z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:T,keyPrefix:"react-autowhatever-".concat(G,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var R=this.highlightedItem;if(R){var T=this.itemsContainer,$=R.offsetParent===T?R.offsetTop:R.offsetTop-T.offsetTop,G=T.scrollTop;$<G?G=$:$+R.offsetHeight>G+T.offsetHeight&&(G=$+R.offsetHeight-T.offsetHeight),G!==T.scrollTop&&(T.scrollTop=G)}}},{key:"render",value:function(){var R=this.theme,T=this.props,$=T.id,G=T.multiSection,Q=T.renderInputComponent,q=T.renderItemsContainer,B=T.highlightedSectionIndex,Z=T.highlightedItemIndex,ne=this.state.isInputFocused,ie=G?this.renderSections():this.renderItems(),se=ie!==null,Xe=this.getItemId(B,Z),le="react-autowhatever-".concat($),ot=f({role:"combobox","aria-haspopup":"listbox","aria-owns":le,"aria-expanded":se},R("react-autowhatever-".concat($,"-container"),"container",se&&"containerOpen"),{},this.props.containerProps),at=Q(f({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":le,"aria-activedescendant":Xe},R("react-autowhatever-".concat($,"-input"),"input",se&&"inputOpen",ne&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),$e=q({containerProps:f({id:le,role:"listbox"},R("react-autowhatever-".concat($,"-items-container"),"itemsContainer",se&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:ie});return t.default.createElement("div",ot,at,$e)}}]),A}(t.Component);e.default=P,L(P,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),L(P,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:V,renderItemsContainer:K,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:D,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:D,inputProps:D,itemProps:D,highlightedSectionIndex:null,highlightedItemIndex:null,theme:W})})(Xs);var vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.mapToAutowhateverTheme=vt.defaultTheme=void 0;var Vu={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};vt.defaultTheme=Vu;var Bu=function(t){var n={};for(var r in t)switch(r){case"suggestionsContainer":n.itemsContainer=t[r];break;case"suggestionsContainerOpen":n.itemsContainerOpen=t[r];break;case"suggestion":n.item=t[r];break;case"suggestionFirst":n.itemFirst=t[r];break;case"suggestionHighlighted":n.itemHighlighted=t[r];break;case"suggestionsList":n.itemsList=t[r];break;default:n[r]=t[r]}return n};vt.mapToAutowhateverTheme=Bu;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(E),n=o(Yt),r=o(ju),i=o(Xs),s=vt;function o(P){return P&&P.__esModule?P:{default:P}}function a(){if(typeof WeakMap!="function")return null;var P=new WeakMap;return a=function(){return P},P}function u(P){if(P&&P.__esModule)return P;if(P===null||c(P)!=="object"&&typeof P!="function")return{default:P};var m=a();if(m&&m.has(P))return m.get(P);var I={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in P)if(Object.prototype.hasOwnProperty.call(P,g)){var R=A?Object.getOwnPropertyDescriptor(P,g):null;R&&(R.get||R.set)?Object.defineProperty(I,g,R):I[g]=P[g]}return I.default=P,m&&m.set(P,I),I}function c(P){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(I){return typeof I}:c=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},c(P)}function l(P,m){var I=Object.keys(P);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(P);m&&(A=A.filter(function(g){return Object.getOwnPropertyDescriptor(P,g).enumerable})),I.push.apply(I,A)}return I}function f(P){for(var m=1;m<arguments.length;m++){var I=arguments[m]!=null?arguments[m]:{};m%2?l(Object(I),!0).forEach(function(A){F(P,A,I[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(I)):l(Object(I)).forEach(function(A){Object.defineProperty(P,A,Object.getOwnPropertyDescriptor(I,A))})}return P}function d(P,m){if(!(P instanceof m))throw new TypeError("Cannot call a class as a function")}function h(P,m){for(var I=0;I<m.length;I++){var A=m[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}function y(P,m,I){return m&&h(P.prototype,m),P}function p(P){return function(){var m=_(P),I;if(M()){var A=_(this).constructor;I=Reflect.construct(m,arguments,A)}else I=m.apply(this,arguments);return w(this,I)}}function w(P,m){return m&&(c(m)==="object"||typeof m=="function")?m:S(P)}function S(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _(P){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},_(P)}function x(P,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(m&&m.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),m&&j(P,m)}function j(P,m){return j=Object.setPrototypeOf||function(A,g){return A.__proto__=g,A},j(P,m)}function F(P,m,I){return m in P?Object.defineProperty(P,m,{value:I,enumerable:!0,configurable:!0,writable:!0}):P[m]=I,P}var N=function(){return!0},O=function(m){return m.trim().length>0},v=function(m){var I=m.containerProps,A=m.children;return t.default.createElement("div",I,A)},b="suggestions-revealed",C="suggestions-updated",k="suggestion-selected",L="input-focused",D="input-changed",V="input-blurred",K="escape-pressed",W=function(P){x(I,P);var m=p(I);function I(A){var g,R=A.alwaysRenderSuggestions;return d(this,I),g=m.call(this),F(S(g),"onDocumentMouseDown",function(T){g.justClickedOnSuggestionsContainer=!1;for(var $=T.detail&&T.detail.target||T.target;$!==null&&$!==document;){if($.getAttribute&&$.getAttribute("data-suggestion-index")!==null)return;if($===g.suggestionsContainer){g.justClickedOnSuggestionsContainer=!0;return}$=$.parentNode}}),F(S(g),"storeAutowhateverRef",function(T){T!==null&&(g.autowhatever=T)}),F(S(g),"onSuggestionMouseEnter",function(T,$){var G=$.sectionIndex,Q=$.itemIndex;g.updateHighlightedSuggestion(G,Q),T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!0),g.justMouseEntered=!0,setTimeout(function(){g.justMouseEntered=!1})}),F(S(g),"highlightFirstSuggestion",function(){g.updateHighlightedSuggestion(g.props.multiSection?0:null,0)}),F(S(g),"onDocumentMouseUp",function(){g.pressedSuggestion&&!g.justSelectedSuggestion&&g.input.focus(),g.pressedSuggestion=null}),F(S(g),"onSuggestionMouseDown",function(T){g.justSelectedSuggestion||(g.justSelectedSuggestion=!0,g.pressedSuggestion=T.target)}),F(S(g),"onSuggestionsClearRequested",function(){var T=g.props.onSuggestionsClearRequested;T&&T()}),F(S(g),"onSuggestionSelected",function(T,$){var G=g.props,Q=G.alwaysRenderSuggestions,q=G.onSuggestionSelected,B=G.onSuggestionsFetchRequested;q&&q(T,$);var Z=g.props.shouldKeepSuggestionsOnSelect($.suggestion);Q||Z?B({value:$.suggestionValue,reason:k}):g.onSuggestionsClearRequested(),g.resetHighlightedSuggestion()}),F(S(g),"onSuggestionClick",function(T){var $=g.props,G=$.alwaysRenderSuggestions,Q=$.focusInputOnSuggestionClick,q=g.getSuggestionIndices(g.findSuggestionElement(T.target)),B=q.sectionIndex,Z=q.suggestionIndex,ne=g.getSuggestion(B,Z),ie=g.props.getSuggestionValue(ne);g.maybeCallOnChange(T,ie,"click"),g.onSuggestionSelected(T,{suggestion:ne,suggestionValue:ie,suggestionIndex:Z,sectionIndex:B,method:"click"});var se=g.props.shouldKeepSuggestionsOnSelect(ne);G||se||g.closeSuggestions(),Q===!0?g.input.focus():g.onBlur(),setTimeout(function(){g.justSelectedSuggestion=!1})}),F(S(g),"onBlur",function(){var T=g.props,$=T.inputProps,G=T.shouldRenderSuggestions,Q=$.value,q=$.onBlur,B=g.getHighlightedSuggestion(),Z=G(Q,V);g.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Z}),q&&q(g.blurEvent,{highlightedSuggestion:B})}),F(S(g),"onSuggestionMouseLeave",function(T){g.resetHighlightedSuggestion(!1),g.justSelectedSuggestion&&T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!1)}),F(S(g),"onSuggestionTouchStart",function(){g.justSelectedSuggestion=!0}),F(S(g),"onSuggestionTouchMove",function(){g.justSelectedSuggestion=!1,g.pressedSuggestion=null,g.input.focus()}),F(S(g),"itemProps",function(T){var $=T.sectionIndex,G=T.itemIndex;return{"data-section-index":$,"data-suggestion-index":G,onMouseEnter:g.onSuggestionMouseEnter,onMouseLeave:g.onSuggestionMouseLeave,onMouseDown:g.onSuggestionMouseDown,onTouchStart:g.onSuggestionTouchStart,onTouchMove:g.onSuggestionTouchMove,onClick:g.onSuggestionClick}}),F(S(g),"renderSuggestionsContainer",function(T){var $=T.containerProps,G=T.children,Q=g.props.renderSuggestionsContainer;return Q({containerProps:$,children:G,query:g.getQuery()})}),g.state={isFocused:!1,isCollapsed:!R,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},g.justPressedUpDown=!1,g.justMouseEntered=!1,g.pressedSuggestion=null,g}return y(I,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(g){var R=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!g.highlightFirstSuggestion;(0,r.default)(g.suggestions,this.props.suggestions)?g.highlightFirstSuggestion&&g.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():R&&this.resetHighlightedSuggestion():this.willRenderSuggestions(g,C)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),R&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(g,R){var T=this.props,$=T.suggestions,G=T.onSuggestionHighlighted,Q=T.highlightFirstSuggestion;if(!(0,r.default)($,g.suggestions)&&$.length>0&&Q){this.highlightFirstSuggestion();return}if(G){var q=this.getHighlightedSuggestion(),B=R.highlightedSuggestion;q!=B&&G({suggestion:q})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(g,R,T){var $=this;this.setState(function(G){var Q=G.valueBeforeUpDown;return R===null?Q=null:Q===null&&typeof T<"u"&&(Q=T),{highlightedSectionIndex:g,highlightedSuggestionIndex:R,highlightedSuggestion:R===null?null:$.getSuggestion(g,R),valueBeforeUpDown:Q}})}},{key:"resetHighlightedSuggestion",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(R){var T=R.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:g?null:T}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(g,R){var T=this.props,$=T.suggestions,G=T.multiSection,Q=T.getSectionSuggestions;return G?Q($[g])[R]:$[R]}},{key:"getHighlightedSuggestion",value:function(){var g=this.state,R=g.highlightedSectionIndex,T=g.highlightedSuggestionIndex;return T===null?null:this.getSuggestion(R,T)}},{key:"getSuggestionValueByIndex",value:function(g,R){var T=this.props.getSuggestionValue;return T(this.getSuggestion(g,R))}},{key:"getSuggestionIndices",value:function(g){var R=g.getAttribute("data-section-index"),T=g.getAttribute("data-suggestion-index");return{sectionIndex:typeof R=="string"?parseInt(R,10):null,suggestionIndex:parseInt(T,10)}}},{key:"findSuggestionElement",value:function(g){var R=g;do{if(R.getAttribute&&R.getAttribute("data-suggestion-index")!==null)return R;R=R.parentNode}while(R!==null);throw console.error("Clicked element:",g),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(g,R,T){var $=this.props.inputProps,G=$.value,Q=$.onChange;R!==G&&Q(g,{newValue:R,method:T})}},{key:"willRenderSuggestions",value:function(g,R){var T=g.suggestions,$=g.inputProps,G=g.shouldRenderSuggestions,Q=$.value;return T.length>0&&G(Q,R)}},{key:"getQuery",value:function(){var g=this.props.inputProps,R=g.value,T=this.state.valueBeforeUpDown;return(T===null?R:T).trim()}},{key:"render",value:function(){var g=this,R=this.props,T=R.suggestions,$=R.renderInputComponent,G=R.onSuggestionsFetchRequested,Q=R.renderSuggestion,q=R.inputProps,B=R.multiSection,Z=R.renderSectionTitle,ne=R.id,ie=R.getSectionSuggestions,se=R.theme,Xe=R.getSuggestionValue,le=R.alwaysRenderSuggestions,ot=R.highlightFirstSuggestion,at=R.containerProps,$e=this.state,Ro=$e.isFocused,Xr=$e.isCollapsed,Jr=$e.highlightedSectionIndex,Zr=$e.highlightedSuggestionIndex,Zt=$e.valueBeforeUpDown,en=le?N:this.props.shouldRenderSuggestions,ct=q.value,ei=q.onFocus,ti=q.onKeyDown,Eo=this.willRenderSuggestions(this.props,"render"),tn=le||Ro&&!Xr&&Eo,Co=tn?T:[],Ao=f({},q,{onFocus:function(re){if(!g.justSelectedSuggestion&&!g.justClickedOnSuggestionsContainer){var ke=en(ct,L);g.setState({isFocused:!0,isCollapsed:!ke}),ei&&ei(re),ke&&G({value:ct,reason:L})}},onBlur:function(re){if(g.justClickedOnSuggestionsContainer){g.input.focus();return}g.blurEvent=re,g.justSelectedSuggestion||(g.onBlur(),g.onSuggestionsClearRequested())},onChange:function(re){var ke=re.target.value,Ot=en(ke,D);g.maybeCallOnChange(re,ke,"type"),g.suggestionsContainer&&(g.suggestionsContainer.scrollTop=0),g.setState(f({},ot?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!Ot})),Ot?G({value:ke,reason:D}):g.onSuggestionsClearRequested()},onKeyDown:function(re,ke){var Ot=re.keyCode;switch(Ot){case 40:case 38:if(Xr)en(ct,b)&&(G({value:ct,reason:b}),g.revealSuggestions(),re.preventDefault());else if(T.length>0){var ni=ke.newHighlightedSectionIndex,Vn=ke.newHighlightedItemIndex,Bn;Vn===null?Bn=Zt===null?ct:Zt:Bn=g.getSuggestionValueByIndex(ni,Vn),g.updateHighlightedSuggestion(ni,Vn,ct),g.maybeCallOnChange(re,Bn,Ot===40?"down":"up"),re.preventDefault()}g.justPressedUpDown=!0,setTimeout(function(){g.justPressedUpDown=!1});break;case 13:{if(re.keyCode===229)break;var qn=g.getHighlightedSuggestion();if(tn&&!le&&g.closeSuggestions(),qn!=null){re.preventDefault();var ri=Xe(qn);g.maybeCallOnChange(re,ri,"enter"),g.onSuggestionSelected(re,{suggestion:qn,suggestionValue:ri,suggestionIndex:Zr,sectionIndex:Jr,method:"enter"}),g.justSelectedSuggestion=!0,setTimeout(function(){g.justSelectedSuggestion=!1})}break}case 27:{tn&&re.preventDefault();var ii=tn&&!le;if(Zt===null){if(!ii){var Wn="";g.maybeCallOnChange(re,Wn,"escape"),en(Wn,K)?G({value:Wn,reason:K}):g.onSuggestionsClearRequested()}}else g.maybeCallOnChange(re,Zt,"escape");ii?(g.onSuggestionsClearRequested(),g.closeSuggestions()):g.resetHighlightedSuggestion();break}}ti&&ti(re)}}),To={query:this.getQuery()};return t.default.createElement(i.default,{multiSection:B,items:Co,renderInputComponent:$,renderItemsContainer:this.renderSuggestionsContainer,renderItem:Q,renderItemData:To,renderSectionTitle:Z,getSectionItems:ie,highlightedSectionIndex:Jr,highlightedItemIndex:Zr,containerProps:at,inputProps:Ao,itemProps:this.itemProps,theme:(0,s.mapToAutowhateverTheme)(se),id:ne,ref:this.storeAutowhateverRef})}}]),I}(t.Component);e.default=W,F(W,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(m,I){var A=m[I];if(typeof A!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(m,I){var A=m[I];if(m.alwaysRenderSuggestions===!1&&typeof A!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(m,I){var A=m[I];if(!A)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(A,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(A,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(m,I){var A=m[I];if(m.multiSection===!0&&typeof A!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(m,I){var A=m[I];if(m.multiSection===!0&&typeof A!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),F(W,"defaultProps",{renderSuggestionsContainer:v,shouldRenderSuggestions:O,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:s.defaultTheme,id:"1",containerProps:{}})})(Gs);var qu=Gs.default;const Wu=$o(qu),zu=e=>{const[t,n]=E.useState([]),r=({value:s})=>n(e.getSuggestions(s)),i=(s,{isHighlighted:o})=>z.jsx("div",{"data-highlighted":o?"true":void 0,children:s});return z.jsx(Wu,{suggestions:t,onSuggestionSelected:(s,o)=>e.onSelect&&e.onSelect(o.suggestion),onSuggestionsFetchRequested:r,onSuggestionsClearRequested:()=>n([]),getSuggestionValue:s=>s,renderSuggestionsContainer:({containerProps:s,children:o})=>E.Children.toArray(o).length>0?E.createElement("div",{...s,key:s.key,className:"react-autosuggest"},o):null,renderSuggestion:i,containerProps:{className:"relative"},inputProps:{disabled:e.disabled,placeholder:e.placeholder,value:e.value||"",onBlur:e.onBlur,onChange:(s,{newValue:o})=>e.onChange&&e.onChange(o),onFocus:e.onFocus,onKeyDown:e.onKeyDown}})};function De(e){return Array.isArray?Array.isArray(e):ro(e)==="[object Array]"}const Gu=1/0;function Ku(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Gu?"-0":t}function Qu(e){return e==null?"":Ku(e)}function Ee(e){return typeof e=="string"}function to(e){return typeof e=="number"}function Yu(e){return e===!0||e===!1||Xu(e)&&ro(e)=="[object Boolean]"}function no(e){return typeof e=="object"}function Xu(e){return no(e)&&e!==null}function pe(e){return e!=null}function nr(e){return!e.trim().length}function ro(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ju="Incorrect 'index' type",Zu=e=>`Invalid value for key ${e}`,el=e=>`Pattern length exceeds max of ${e}.`,tl=e=>`Missing ${e} property in key`,nl=e=>`Property 'weight' in key '${e}' must be a positive integer`,Wi=Object.prototype.hasOwnProperty;class rl{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=io(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function io(e){let t=null,n=null,r=null,i=1,s=null;if(Ee(e)||De(e))r=e,t=zi(e),n=yr(e);else{if(!Wi.call(e,"name"))throw new Error(tl("name"));const o=e.name;if(r=o,Wi.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(nl(o));t=zi(o),n=yr(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function zi(e){return De(e)?e:e.split(".")}function yr(e){return De(e)?e.join("."):e}function il(e,t){let n=[],r=!1;const i=(s,o,a)=>{if(pe(s))if(!o[a])n.push(s);else{let u=o[a];const c=s[u];if(!pe(c))return;if(a===o.length-1&&(Ee(c)||to(c)||Yu(c)))n.push(Qu(c));else if(De(c)){r=!0;for(let l=0,f=c.length;l<f;l+=1)i(c[l],o,a+1)}else o.length&&i(c,o,a+1)}};return i(e,Ee(t)?t.split("."):t,0),r?n:n[0]}const sl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ol={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},al={location:0,threshold:.6,distance:100},cl={useExtendedSearch:!1,getFn:il,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Y={...ol,...sl,...al,...cl};const ul=/[^ ]+/g;function ll(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(ul).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(s,a),a},clear(){n.clear()}}}class qr{constructor({getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){this.norm=ll(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ee(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ee(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!pe(t)||nr(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(pe(o)){if(De(o)){let a=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:c,value:l}=u.pop();if(pe(l))if(Ee(l)&&!nr(l)){let f={v:l,i:c,n:this.norm.get(l)};a.push(f)}else De(l)&&l.forEach((f,d)=>{u.push({nestedArrIndex:d,value:f})})}r.$[s]=a}else if(Ee(o)&&!nr(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function so(e,t,{getFn:n=Y.getFn,fieldNormWeight:r=Y.fieldNormWeight}={}){const i=new qr({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(io)),i.setSources(t),i.create(),i}function fl(e,{getFn:t=Y.getFn,fieldNormWeight:n=Y.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new qr({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function an(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Y.distance,ignoreLocation:s=Y.ignoreLocation}={}){const o=t/e.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}function dl(e=[],t=Y.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&r===-1?r=s:!a&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Je=32;function hl(e,t,n,{location:r=Y.location,distance:i=Y.distance,threshold:s=Y.threshold,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,includeMatches:u=Y.includeMatches,ignoreLocation:c=Y.ignoreLocation}={}){if(t.length>Je)throw new Error(el(Je));const l=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=s,y=d;const p=a>1||u,w=p?Array(f):[];let S;for(;(S=e.indexOf(t,y))>-1;){let N=an(t,{currentLocation:S,expectedLocation:d,distance:i,ignoreLocation:c});if(h=Math.min(N,h),y=S+l,p){let O=0;for(;O<l;)w[S+O]=1,O+=1}}y=-1;let M=[],_=1,x=l+f;const j=1<<l-1;for(let N=0;N<l;N+=1){let O=0,v=x;for(;O<v;)an(t,{errors:N,currentLocation:d+v,expectedLocation:d,distance:i,ignoreLocation:c})<=h?O=v:x=v,v=Math.floor((x-O)/2+O);x=v;let b=Math.max(1,d-v+1),C=o?f:Math.min(d+v,f)+l,k=Array(C+2);k[C+1]=(1<<N)-1;for(let D=C;D>=b;D-=1){let V=D-1,K=n[e.charAt(V)];if(p&&(w[V]=+!!K),k[D]=(k[D+1]<<1|1)&K,N&&(k[D]|=(M[D+1]|M[D])<<1|1|M[D+1]),k[D]&j&&(_=an(t,{errors:N,currentLocation:V,expectedLocation:d,distance:i,ignoreLocation:c}),_<=h)){if(h=_,y=V,y<=d)break;b=Math.max(1,2*d-y)}}if(an(t,{errors:N+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:c})>h)break;M=k}const F={isMatch:y>=0,score:Math.max(.001,_)};if(p){const N=dl(w,a);N.length?u&&(F.indices=N):F.isMatch=!1}return F}function gl(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class oo{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:i=Y.distance,includeMatches:s=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,isCaseSensitive:u=Y.isCaseSensitive,ignoreLocation:c=Y.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(d,h)=>{this.chunks.push({pattern:d,alphabet:gl(d),startIndex:h})},f=this.pattern.length;if(f>Je){let d=0;const h=f%Je,y=f-h;for(;d<y;)l(this.pattern.substr(d,Je),d),d+=Je;if(h){const p=f-Je;l(this.pattern.substr(p),p)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return r&&(y.indices=[[0,t.length-1]]),y}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:u,ignoreLocation:c}=this.options;let l=[],f=0,d=!1;this.chunks.forEach(({pattern:y,alphabet:p,startIndex:w})=>{const{isMatch:S,score:M,indices:_}=hl(t,y,p,{location:i+w,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:u,includeMatches:r,ignoreLocation:c});S&&(d=!0),f+=M,S&&_&&(l=[...l,..._])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=l),h}}class Ye{constructor(t){this.pattern=t}static isMultiMatch(t){return Gi(t,this.multiRegex)}static isSingleMatch(t){return Gi(t,this.singleRegex)}search(){}}function Gi(e,t){const n=e.match(t);return n?n[1]:null}class pl extends Ye{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ml extends Ye{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class yl extends Ye{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class vl extends Ye{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class wl extends Ye{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Sl extends Ye{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ao extends Ye{constructor(t,{location:n=Y.location,threshold:r=Y.threshold,distance:i=Y.distance,includeMatches:s=Y.includeMatches,findAllMatches:o=Y.findAllMatches,minMatchCharLength:a=Y.minMatchCharLength,isCaseSensitive:u=Y.isCaseSensitive,ignoreLocation:c=Y.ignoreLocation}={}){super(t),this._bitapSearch=new oo(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class co extends Ye{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const vr=[pl,co,yl,vl,Sl,wl,ml,ao],Ki=vr.length,bl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,_l="|";function xl(e,t={}){return e.split(_l).map(n=>{let r=n.trim().split(bl).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let u=!1,c=-1;for(;!u&&++c<Ki;){const l=vr[c];let f=l.isMultiMatch(a);f&&(i.push(new l(f,t)),u=!0)}if(!u)for(c=-1;++c<Ki;){const l=vr[c];let f=l.isSingleMatch(a);if(f){i.push(new l(f,t));break}}}return i})}const Ol=new Set([ao.type,co.type]);class Il{constructor(t,{isCaseSensitive:n=Y.isCaseSensitive,includeMatches:r=Y.includeMatches,minMatchCharLength:i=Y.minMatchCharLength,ignoreLocation:s=Y.ignoreLocation,findAllMatches:o=Y.findAllMatches,location:a=Y.location,threshold:u=Y.threshold,distance:c=Y.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:u,distance:c},this.pattern=n?t:t.toLowerCase(),this.query=xl(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],a=0;for(let u=0,c=n.length;u<c;u+=1){const l=n[u];o.length=0,s=0;for(let f=0,d=l.length;f<d;f+=1){const h=l[f],{isMatch:y,indices:p,score:w}=h.search(t);if(y){if(s+=1,a+=w,r){const S=h.constructor.type;Ol.has(S)?o=[...o,...p]:o.push(p)}}else{a=0,s=0,o.length=0;break}}if(s){let f={isMatch:!0,score:a/s};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const wr=[];function Pl(...e){wr.push(...e)}function Sr(e,t){for(let n=0,r=wr.length;n<r;n+=1){let i=wr[n];if(i.condition(e,t))return new i(e,t)}return new oo(e,t)}const Sn={AND:"$and",OR:"$or"},br={PATH:"$path",PATTERN:"$val"},_r=e=>!!(e[Sn.AND]||e[Sn.OR]),Rl=e=>!!e[br.PATH],El=e=>!De(e)&&no(e)&&!_r(e),Qi=e=>({[Sn.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function uo(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=Rl(i);if(!o&&s.length>1&&!_r(i))return r(Qi(i));if(El(i)){const u=o?i[br.PATH]:s[0],c=o?i[br.PATTERN]:i[u];if(!Ee(c))throw new Error(Zu(u));const l={keyId:yr(u),pattern:c};return n&&(l.searcher=Sr(c,t)),l}let a={children:[],operator:s[0]};return s.forEach(u=>{const c=i[u];De(c)&&c.forEach(l=>{a.children.push(r(l))})}),a};return _r(e)||(e=Qi(e)),r(e)}function Cl(e,{ignoreFieldNorm:t=Y.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),n.score=r})}function Al(e,t){const n=e.matches;t.matches=[],pe(n)&&n.forEach(r=>{if(!pe(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Tl(e,t){t.score=e.score}function $l(e,t,{includeMatches:n=Y.includeMatches,includeScore:r=Y.includeScore}={}){const i=[];return n&&i.push(Al),r&&i.push(Tl),e.map(s=>{const{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,a)}),a})}class nt{constructor(t,n={},r){this.options={...Y,...n},this.options.useExtendedSearch,this._keyStore=new rl(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof qr))throw new Error(Ju);this._myIndex=n||so(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let u=Ee(t)?Ee(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Cl(u,{ignoreFieldNorm:a}),s&&u.sort(o),to(n)&&n>-1&&(u=u.slice(0,n)),$l(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=Sr(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:a})=>{if(!pe(s))return;const{isMatch:u,score:c,indices:l}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:l}]})}),i}_searchLogical(t){const n=uo(t,this.options),r=(a,u,c)=>{if(!a.children){const{keyId:f,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:d});return h&&h.length?[{idx:c,item:u,matches:h}]:[]}const l=[];for(let f=0,d=a.children.length;f<d;f+=1){const h=a.children[f],y=r(h,u,c);if(y.length)l.push(...y);else if(a.operator===Sn.AND)return[]}return l},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:u})=>{if(pe(a)){let c=r(n,a,u);c.length&&(s[u]||(s[u]={idx:u,item:a,matches:[]},o.push(s[u])),c.forEach(({matches:l})=>{s[u].matches.push(...l)}))}}),o}_searchObjectList(t){const n=Sr(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!pe(o))return;let u=[];r.forEach((c,l)=>{u.push(...this._findMatches({key:c,value:o[l],searcher:n}))}),u.length&&s.push({idx:a,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!pe(n))return[];let i=[];if(De(n))n.forEach(({v:s,i:o,n:a})=>{if(!pe(s))return;const{isMatch:u,score:c,indices:l}=r.searchIn(s);u&&i.push({score:c,key:t,value:s,idx:o,norm:a,indices:l})});else{const{v:s,n:o}=n,{isMatch:a,score:u,indices:c}=r.searchIn(s);a&&i.push({score:u,key:t,value:s,norm:o,indices:c})}return i}}nt.version="7.0.0";nt.createIndex=so;nt.parseIndex=fl;nt.config=Y;nt.parseQuery=uo;Pl(Il);const kl=e=>{const t=E.useMemo(()=>new Map(e.map(o=>[o.id,o])),[e]),n=E.useMemo(()=>{const o=new Set(e.reduce((a,u)=>{const c=u.bodies.filter(l=>l.purpose==="tagging"&&l.value);return[...a,...c.map(l=>l.value)]},[]));return new nt([...o],{shouldSort:!0,threshold:.4})},[e]),r=E.useMemo(()=>{const o=e.map(a=>{const u=a.id,c=a.bodies.filter(l=>l.purpose==="tagging"&&l.value).map(l=>l.value);return{annotationId:u,tags:c}}).filter(a=>a.tags.length>0);return new nt(o,{keys:["tags"],shouldSort:!0,threshold:.4})},[e]);return{search:(o,a)=>r.search(o,{limit:a||500}).map(u=>t.get(u.item.annotationId)).filter(Boolean),getSuggestions:(o,a)=>n.search(o,{limit:a||10}).map(u=>u.item)}},Ml=e=>{const t=Lo(),[n,r]=E.useState(!0),{search:i,getSuggestions:s}=kl(t),[o,a]=E.useState(""),[u,c]=E.useState(),[l,f]=E.useState(0),[d,h]=E.useState(!1),y=Vr([n],{from:{maxWidth:0,opacity:0},enter:{maxWidth:120,opacity:1},leave:{maxWidth:0,opacity:1},config:{duration:250,easing:$n.easeInOutCubic}});E.useEffect(()=>{if(o){const _=i(o);e.sorter&&_.sort(e.sorter),c(_),_.length>0?f(1):f(0),e.onSearch(_)}else c(void 0),f(1),e.onSearch([])},[o,e.sorter]),E.useEffect(()=>{if(!l||!u)return;const _=u[l-1];e.onHighlightResult(_)},[u,l]);const p=_=>{if(!u)return;const x=Math.min(Math.max(1,l+_),u.length);f(x)},w=()=>{a(""),c(void 0),f(1),r(!0),e.onClear()},S=_=>{_.key==="Enter"?d?p(1):h(!0):h(!1)},M=()=>{o||r(!0)};return z.jsxs("div",{className:"annotation-search",children:[z.jsx(sc,{size:20}),z.jsxs("div",{className:"searchbox-wrapper",children:[z.jsx(zu,{placeholder:"Search",value:o,onChange:a,onFocus:()=>r(!1),onBlur:M,onKeyDown:S,getSuggestions:s}),u&&z.jsxs("div",{className:"result-count",children:[l,"/",u.length]})]}),y((_,x)=>!x&&z.jsx(Br.div,{style:_,className:"collapsible",children:z.jsxs("div",{className:"actions",children:[z.jsx("button",{onClick:()=>p(-1),children:z.jsx(rc,{size:18})}),z.jsx("button",{onClick:()=>p(1),children:z.jsx(tc,{size:18})}),z.jsx("button",{onClick:w,children:z.jsx(Rr,{size:18,strokeWidth:2.2})})]})}))]})},zf=e=>{const[t,n]=E.useState([]);return E.useEffect(()=>{e.onSearch(t)},[t]),z.jsxs("header",{children:[z.jsxs("div",{className:"header-left",children:[z.jsxs("a",{href:"../..",children:[z.jsx(nc,{}),z.jsx("span",{children:"Home"})]}),z.jsx("a",{href:"../../about",children:"About"})]}),z.jsxs("div",{className:"header-right",children:[z.jsx(Ml,{sorter:e.searchSorter,onClear:e.onClearSearch,onHighlightResult:e.onHighlightSearchResult,onSearch:n}),z.jsx("button",{className:e.isRelatedVersesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedVerses,children:z.jsx(ec,{size:18})}),z.jsx("button",{className:e.isRelatedImagesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedImages,children:z.jsx(ic,{size:18})})]})]})},lo=e=>e.bodies.filter(t=>t.purpose==="tagging"&&t.value).map(t=>t.value),jl=(e,t)=>{const n=Array.from(t).filter(i=>e.has(i)),r=new Set([...e,...t]);return n.length/r.size},fo=(e,t)=>{const n=(s,o)=>s.size===o.size&&[...s].every(a=>o.has(a)),r=s=>{s.sort((o,a)=>a.common.size-o.common.size),s.forEach(o=>o.related.sort((a,u)=>u.score-a.score))},i=[];return t.forEach(s=>{const o=new Set(s.tags),a=new Set(Array.from(o).filter(l=>e.has(l))),u=jl(e,o),c=i.find(({common:l})=>n(l,a));c?c.related=[...c.related,{annotation:s,score:u}]:i.push({common:a,related:[{annotation:s,score:u}]})}),r(i),i},Gf=(e,t)=>{const n=[...e].filter(s=>s.width>0&&s.height>0);let r,i=Number.MAX_VALUE;return n.forEach(s=>{const o=s.top+s.height/2,a=Math.abs(o-t.y);a<i&&(i=a,r=s)}),r},Kf=e=>({length:1,item:t=>t===0?e:void 0,[Symbol.iterator]:function*(){for(let t=0;t<this.length;t++)yield this.item(t)}}),Fl=Me.createContext({}),ho=!0;function Dl({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:i,circle:s,direction:o,duration:a,enableAnimation:u=ho}){const c={};return o==="rtl"&&(c["--animation-direction"]="reverse"),typeof a=="number"&&(c["--animation-duration"]=`${a}s`),u||(c["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(c.width=n),(typeof r=="string"||typeof r=="number")&&(c.height=r),(typeof i=="string"||typeof i=="number")&&(c.borderRadius=i),s&&(c.borderRadius="50%"),typeof e<"u"&&(c["--base-color"]=e),typeof t<"u"&&(c["--highlight-color"]=t),c}function Ll({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:i,circle:s=!1,style:o,...a}){var u,c,l;const f=Me.useContext(Fl),d={...a};for(const[_,x]of Object.entries(a))typeof x>"u"&&delete d[_];const h={...f,...d,circle:s},y={...o,...Dl(h)};let p="react-loading-skeleton";n&&(p+=` ${n}`);const w=(u=h.inline)!==null&&u!==void 0?u:!1,S=[],M=Math.ceil(e);for(let _=0;_<M;_++){let x=y;if(M>e&&_===M-1){const F=(c=x.width)!==null&&c!==void 0?c:"100%",N=e%1,O=typeof F=="number"?F*N:`calc(${F} * ${N})`;x={...x,width:O}}const j=Me.createElement("span",{className:p,style:x,key:_},"");w?S.push(j):S.push(Me.createElement(Me.Fragment,{key:_},j,Me.createElement("br",null)))}return Me.createElement("span",{className:r,"data-testid":i,"aria-live":"polite","aria-busy":(l=h.enableAnimation)!==null&&l!==void 0?l:ho},t?S.map((_,x)=>Me.createElement(t,{key:x},_)):S)}const Nl=e=>{const[t,n]=E.useState(!1);return z.jsxs("div",{className:"thumbnail-wrapper",children:[!t&&z.jsx(Ll,{}),z.jsx("img",{src:e.src,style:{display:t?void 0:"none"},onLoad:()=>n(!0)})]})},Qf=e=>{const[t,n]=E.useState(!1),r=E.useMemo(()=>e.annotation?new Set(lo(e.annotation)):new Set,[e.annotation]),i=E.useMemo(()=>fo(r,e.related||[]),[r,e.related]),s=Vr([e.open],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:$n.easeInCubic}});E.useLayoutEffect(()=>{setTimeout(()=>n(!0),1)},[]);const o=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/image/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return s((a,u)=>u&&z.jsxs(Br.aside,{style:a,className:"related related-images",children:[z.jsx("button",{onClick:e.onClose,className:"close",children:z.jsx(Rr,{size:20,strokeWidth:1.5})}),z.jsxs("div",{className:"related-verses-wrapper",children:[z.jsxs("h3",{children:["Images ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?z.jsx("ul",{children:i.map(c=>c.related.map(({annotation:l})=>z.jsxs("li",{children:[z.jsxs("div",{className:"preview",children:[z.jsx(Nl,{src:l.thumbnail}),z.jsx("div",{className:"taglist-wrapper",children:z.jsx("ul",{className:"taglist",children:l.tags.map(f=>z.jsx("li",{className:r.has(f)?"common":void 0,children:f},f))})})]}),z.jsx("a",{href:o(l),children:l.image})]},l.id)))}):z.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},Yf=e=>{const[t,n]=E.useState(!1),r=E.useMemo(()=>e.annotation?new Set(lo(e.annotation)):new Set,[e.annotation]),i=E.useMemo(()=>fo(r,e.related||[]),[r,e.related]),s=Vr([e.open],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:$n.easeInCubic}});E.useLayoutEffect(()=>{setTimeout(()=>n(!0),10)},[]);const o=a=>a.slug===e.currentSlug?`#${a.id.substring(a.id.lastIndexOf("/")+1)}`:`/verse/${a.slug}/#${a.id.substring(a.id.lastIndexOf("/")+1)}`;return s((a,u)=>u&&z.jsxs(Br.aside,{style:a,className:"related related-verses",children:[z.jsx("button",{onClick:e.onClose,className:"close",children:z.jsx(Rr,{size:20,strokeWidth:1.5})}),z.jsxs("div",{className:"related-verses-wrapper",children:[z.jsxs("h3",{children:["Verses ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?z.jsx("ul",{children:i.map(c=>c.related.map(({annotation:l})=>z.jsxs("li",{children:[z.jsx("ul",{className:"taglist",children:l.tags.map(f=>z.jsx("li",{className:r.has(f)?"common":void 0,children:f},f))}),z.jsx("p",{className:"snippet-preview",children:l.snippet}),z.jsx("a",{href:o(l),children:l.verse})]},l.id)))}):z.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},Xf=e=>{const t=e.relatedImages.length,n=e.relatedVerses.length,r=E.useMemo(()=>e.annotation.bodies.filter(i=>i.purpose==="tagging"),[e.annotation]);return z.jsx("div",{className:"annotation-popup",children:z.jsxs("div",{className:"tags",children:[z.jsx("div",{children:r.map(i=>i.value).join("  ")}),e.type==="VERSE"?z.jsxs("div",{className:"related",children:[n>0&&z.jsx("button",{onClick:e.onClickVerses,children:z.jsxs("span",{children:[n," other verse",n>1&&"s"]})}),t>0&&z.jsx("button",{onClick:e.onClickImages,children:z.jsxs("span",{children:[t," image",t>1&&"s"]})})]}):z.jsxs("div",{className:"related",children:[t>0&&z.jsx("button",{onClick:e.onClickImages,children:z.jsxs("span",{children:[t," other image",t>1&&"s"]})}),n>0&&z.jsx("button",{onClick:e.onClickVerses,children:z.jsxs("span",{children:[n," verse",n>1&&"s"]})})]})]})})};function _t(e){return go(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function He(e){var t;return(t=(go(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function go(e){return e instanceof Node||e instanceof me(e).Node}function he(e){return e instanceof Element||e instanceof me(e).Element}function Te(e){return e instanceof HTMLElement||e instanceof me(e).HTMLElement}function Yi(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}function Xt(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=be(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Ul(e){return["table","td","th"].includes(_t(e))}function Nn(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Wr(e){const t=zr(),n=be(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Hl(e){let t=Ke(e);for(;Te(t)&&!wt(t);){if(Nn(t))return null;if(Wr(t))return t;t=Ke(t)}return null}function zr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wt(e){return["html","body","#document"].includes(_t(e))}function be(e){return me(e).getComputedStyle(e)}function Un(e){return he(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ke(e){if(_t(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Yi(e)&&e.host||He(e);return Yi(t)?t.host:t}function po(e){const t=Ke(e);return wt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Te(t)&&Xt(t)?t:po(t)}function zt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=po(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=me(i);return s?t.concat(o,o.visualViewport||[],Xt(i)?i:[],o.frameElement&&n?zt(o.frameElement):[]):t.concat(i,zt(i,[],n))}const Le=Math.min,Ce=Math.max,bn=Math.round,cn=Math.floor,Qe=e=>({x:e,y:e}),Vl={left:"right",right:"left",bottom:"top",top:"bottom"},Bl={start:"end",end:"start"};function xr(e,t,n){return Ce(e,Le(t,n))}function xt(e,t){return typeof e=="function"?e(t):e}function Ne(e){return e.split("-")[0]}function Jt(e){return e.split("-")[1]}function mo(e){return e==="x"?"y":"x"}function Gr(e){return e==="y"?"height":"width"}function rt(e){return["top","bottom"].includes(Ne(e))?"y":"x"}function Kr(e){return mo(rt(e))}function ql(e,t,n){n===void 0&&(n=!1);const r=Jt(e),i=Kr(e),s=Gr(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=_n(o)),[o,_n(o)]}function Wl(e){const t=_n(e);return[Or(e),t,Or(t)]}function Or(e){return e.replace(/start|end/g,t=>Bl[t])}function zl(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Gl(e,t,n,r){const i=Jt(e);let s=zl(Ne(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Or)))),s}function _n(e){return e.replace(/left|right|bottom|top/g,t=>Vl[t])}function Kl(e){return{top:0,right:0,bottom:0,left:0,...e}}function Qr(e){return typeof e!="number"?Kl(e):{top:e,right:e,bottom:e,left:e}}function St(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Xi(e,t,n){let{reference:r,floating:i}=e;const s=rt(t),o=Kr(t),a=Gr(o),u=Ne(t),c=s==="y",l=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:l,y:r.y-i.height};break;case"bottom":h={x:l,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Jt(t)){case"start":h[o]-=d*(n&&c?-1:1);break;case"end":h[o]+=d*(n&&c?-1:1);break}return h}const Ql=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:l,y:f}=Xi(c,r,u),d=r,h={},y=0;for(let p=0;p<a.length;p++){const{name:w,fn:S}=a[p],{x:M,y:_,data:x,reset:j}=await S({x:l,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});l=M??l,f=_??f,h={...h,[w]:{...h[w],...x}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(d=j.placement),j.rects&&(c=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):j.rects),{x:l,y:f}=Xi(c,d,u)),p=-1)}return{x:l,y:f,placement:d,strategy:i,middlewareData:h}};async function yo(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:l="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=xt(t,e),y=Qr(h),w=a[d?f==="floating"?"reference":"floating":f],S=St(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:l,strategy:u})),M=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},j=St(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:_,strategy:u}):M);return{top:(S.top-j.top+y.top)/x.y,bottom:(j.bottom-S.bottom+y.bottom)/x.y,left:(S.left-j.left+y.left)/x.x,right:(j.right-S.right+y.right)/x.x}}const Yl=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:c,padding:l=0}=xt(e,t)||{};if(c==null)return{};const f=Qr(l),d={x:n,y:r},h=Kr(i),y=Gr(h),p=await o.getDimensions(c),w=h==="y",S=w?"top":"left",M=w?"bottom":"right",_=w?"clientHeight":"clientWidth",x=s.reference[y]+s.reference[h]-d[h]-s.floating[y],j=d[h]-s.reference[h],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let N=F?F[_]:0;(!N||!await(o.isElement==null?void 0:o.isElement(F)))&&(N=a.floating[_]||s.floating[y]);const O=x/2-j/2,v=N/2-p[y]/2-1,b=Le(f[S],v),C=Le(f[M],v),k=b,L=N-p[y]-C,D=N/2-p[y]/2+O,V=xr(k,D,L),K=!u.arrow&&Jt(i)!=null&&D!==V&&s.reference[y]/2-(D<k?b:C)-p[y]/2<0,W=K?D<k?D-k:D-L:0;return{[h]:d[h]+W,data:{[h]:V,centerOffset:D-V-W,...K&&{alignmentOffset:W}},reset:K}}}),Xl=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:c}=t,{mainAxis:l=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:p=!0,...w}=xt(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const S=Ne(i),M=rt(a),_=Ne(a)===a,x=await(u.isRTL==null?void 0:u.isRTL(c.floating)),j=d||(_||!p?[_n(a)]:Wl(a)),F=y!=="none";!d&&F&&j.push(...Gl(a,p,y,x));const N=[a,...j],O=await yo(t,w),v=[];let b=((r=s.flip)==null?void 0:r.overflows)||[];if(l&&v.push(O[S]),f){const D=ql(i,o,x);v.push(O[D[0]],O[D[1]])}if(b=[...b,{placement:i,overflows:v}],!v.every(D=>D<=0)){var C,k;const D=(((C=s.flip)==null?void 0:C.index)||0)+1,V=N[D];if(V)return{data:{index:D,overflows:b},reset:{placement:V}};let K=(k=b.filter(W=>W.overflows[0]<=0).sort((W,P)=>W.overflows[1]-P.overflows[1])[0])==null?void 0:k.placement;if(!K)switch(h){case"bestFit":{var L;const W=(L=b.filter(P=>{if(F){const m=rt(P.placement);return m===M||m==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(m=>m>0).reduce((m,I)=>m+I,0)]).sort((P,m)=>P[1]-m[1])[0])==null?void 0:L[0];W&&(K=W);break}case"initialPlacement":K=a;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function vo(e){const t=Le(...e.map(s=>s.left)),n=Le(...e.map(s=>s.top)),r=Ce(...e.map(s=>s.right)),i=Ce(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Jl(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>St(vo(i)))}const Zl=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:c}=xt(e,t),l=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Jl(l),d=St(vo(l)),h=Qr(a);function y(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&c!=null)return f.find(w=>u>w.left-h.left&&u<w.right+h.right&&c>w.top-h.top&&c<w.bottom+h.bottom)||d;if(f.length>=2){if(rt(n)==="y"){const b=f[0],C=f[f.length-1],k=Ne(n)==="top",L=b.top,D=C.bottom,V=k?b.left:C.left,K=k?b.right:C.right,W=K-V,P=D-L;return{top:L,bottom:D,left:V,right:K,width:W,height:P,x:V,y:L}}const w=Ne(n)==="left",S=Ce(...f.map(b=>b.right)),M=Le(...f.map(b=>b.left)),_=f.filter(b=>w?b.left===M:b.right===S),x=_[0].top,j=_[_.length-1].bottom,F=M,N=S,O=N-F,v=j-x;return{top:x,bottom:j,left:F,right:N,width:O,height:v,x:F,y:x}}return d}const p=await s.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:o});return i.reference.x!==p.reference.x||i.reference.y!==p.reference.y||i.reference.width!==p.reference.width||i.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function ef(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ne(n),a=Jt(n),u=rt(n)==="y",c=["left","top"].includes(o)?-1:1,l=s&&u?-1:1,f=xt(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof y=="number"&&(h=a==="end"?y*-1:y),u?{x:h*l,y:d*c}:{x:d*c,y:h*l}}const tf=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await ef(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},nf=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:S,y:M}=w;return{x:S,y:M}}},...u}=xt(e,t),c={x:n,y:r},l=await yo(t,u),f=rt(Ne(i)),d=mo(f);let h=c[d],y=c[f];if(s){const w=d==="y"?"top":"left",S=d==="y"?"bottom":"right",M=h+l[w],_=h-l[S];h=xr(M,h,_)}if(o){const w=f==="y"?"top":"left",S=f==="y"?"bottom":"right",M=y+l[w],_=y-l[S];y=xr(M,y,_)}const p=a.fn({...t,[d]:h,[f]:y});return{...p,data:{x:p.x-n,y:p.y-r}}}}};function wo(e){const t=be(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Te(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=bn(n)!==s||bn(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Yr(e){return he(e)?e:e.contextElement}function mt(e){const t=Yr(e);if(!Te(t))return Qe(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=wo(t);let o=(s?bn(n.width):n.width)/r,a=(s?bn(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rf=Qe(0);function So(e){const t=me(e);return!zr()||!t.visualViewport?rf:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sf(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function it(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Yr(e);let o=Qe(1);t&&(r?he(r)&&(o=mt(r)):o=mt(e));const a=sf(s,n,r)?So(s):Qe(0);let u=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,l=i.width/o.x,f=i.height/o.y;if(s){const d=me(s),h=r&&he(r)?me(r):r;let y=d,p=y.frameElement;for(;p&&r&&h!==y;){const w=mt(p),S=p.getBoundingClientRect(),M=be(p),_=S.left+(p.clientLeft+parseFloat(M.paddingLeft))*w.x,x=S.top+(p.clientTop+parseFloat(M.paddingTop))*w.y;u*=w.x,c*=w.y,l*=w.x,f*=w.y,u+=_,c+=x,y=me(p),p=y.frameElement}}return St({width:l,height:f,x:u,y:c})}function of(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=He(r),a=t?Nn(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},c=Qe(1);const l=Qe(0),f=Te(r);if((f||!f&&!s)&&((_t(r)!=="body"||Xt(o))&&(u=Un(r)),Te(r))){const d=it(r);c=mt(r),l.x=d.x+r.clientLeft,l.y=d.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+l.x,y:n.y*c.y-u.scrollTop*c.y+l.y}}function af(e){return Array.from(e.getClientRects())}function bo(e){return it(He(e)).left+Un(e).scrollLeft}function cf(e){const t=He(e),n=Un(e),r=e.ownerDocument.body,i=Ce(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ce(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bo(e);const a=-n.scrollTop;return be(r).direction==="rtl"&&(o+=Ce(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function uf(e,t){const n=me(e),r=He(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const c=zr();(!c||c&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function lf(e,t){const n=it(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Te(e)?mt(e):Qe(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,c=r*s.y;return{width:o,height:a,x:u,y:c}}function Ji(e,t,n){let r;if(t==="viewport")r=uf(e,n);else if(t==="document")r=cf(He(e));else if(he(t))r=lf(t,n);else{const i=So(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return St(r)}function _o(e,t){const n=Ke(e);return n===t||!he(n)||wt(n)?!1:be(n).position==="fixed"||_o(n,t)}function ff(e,t){const n=t.get(e);if(n)return n;let r=zt(e,[],!1).filter(a=>he(a)&&_t(a)!=="body"),i=null;const s=be(e).position==="fixed";let o=s?Ke(e):e;for(;he(o)&&!wt(o);){const a=be(o),u=Wr(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Xt(o)&&!u&&_o(e,o))?r=r.filter(l=>l!==o):i=a,o=Ke(o)}return t.set(e,r),r}function df(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Nn(t)?[]:ff(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((c,l)=>{const f=Ji(t,l,i);return c.top=Ce(f.top,c.top),c.right=Le(f.right,c.right),c.bottom=Le(f.bottom,c.bottom),c.left=Ce(f.left,c.left),c},Ji(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function hf(e){const{width:t,height:n}=wo(e);return{width:t,height:n}}function gf(e,t,n){const r=Te(t),i=He(t),s=n==="fixed",o=it(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=Qe(0);if(r||!r&&!s)if((_t(t)!=="body"||Xt(i))&&(a=Un(t)),r){const f=it(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=bo(i));const c=o.left+a.scrollLeft-u.x,l=o.top+a.scrollTop-u.y;return{x:c,y:l,width:o.width,height:o.height}}function rr(e){return be(e).position==="static"}function Zi(e,t){return!Te(e)||be(e).position==="fixed"?null:t?t(e):e.offsetParent}function xo(e,t){const n=me(e);if(Nn(e))return n;if(!Te(e)){let i=Ke(e);for(;i&&!wt(i);){if(he(i)&&!rr(i))return i;i=Ke(i)}return n}let r=Zi(e,t);for(;r&&Ul(r)&&rr(r);)r=Zi(r,t);return r&&wt(r)&&rr(r)&&!Wr(r)?n:r||Hl(e)||n}const pf=async function(e){const t=this.getOffsetParent||xo,n=this.getDimensions,r=await n(e.floating);return{reference:gf(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mf(e){return be(e).direction==="rtl"}const yf={convertOffsetParentRelativeRectToViewportRelativeRect:of,getDocumentElement:He,getClippingRect:df,getOffsetParent:xo,getElementRects:pf,getClientRects:af,getDimensions:hf,getScale:mt,isElement:he,isRTL:mf};function vf(e,t){let n=null,r;const i=He(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:c,top:l,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=cn(l),y=cn(i.clientWidth-(c+f)),p=cn(i.clientHeight-(l+d)),w=cn(c),M={rootMargin:-h+"px "+-y+"px "+-p+"px "+-w+"px",threshold:Ce(0,Le(1,u))||1};let _=!0;function x(j){const F=j[0].intersectionRatio;if(F!==u){if(!_)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(x,{...M,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,M)}n.observe(e)}return o(!0),s}function Jf(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=Yr(e),l=i||s?[...c?zt(c):[],...zt(t)]:[];l.forEach(S=>{i&&S.addEventListener("scroll",n,{passive:!0}),s&&S.addEventListener("resize",n)});const f=c&&a?vf(c,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(S=>{let[M]=S;M&&M.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),c&&!u&&h.observe(c),h.observe(t));let y,p=u?it(e):null;u&&w();function w(){const S=it(e);p&&(S.x!==p.x||S.y!==p.y||S.width!==p.width||S.height!==p.height)&&n(),p=S,y=requestAnimationFrame(w)}return n(),()=>{var S;l.forEach(M=>{i&&M.removeEventListener("scroll",n),s&&M.removeEventListener("resize",n)}),f?.(),(S=h)==null||S.disconnect(),h=null,u&&cancelAnimationFrame(y)}}const wf=tf,Sf=nf,bf=Xl,es=Yl,_f=Zl,xf=(e,t,n)=>{const r=new Map,i={platform:yf,...n},s={...i.platform,_c:r};return Ql(e,t,{...i,platform:s})};var dn=typeof document<"u"?E.useLayoutEffect:E.useEffect;function xn(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!xn(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!xn(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Oo(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ts(e,t){const n=Oo(e);return Math.round(t*n)/n}function ns(e){const t=E.useRef(e);return dn(()=>{t.current=e}),t}function Of(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:c}=e,[l,f]=E.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=E.useState(r);xn(d,r)||h(r);const[y,p]=E.useState(null),[w,S]=E.useState(null),M=E.useCallback(W=>{W!==F.current&&(F.current=W,p(W))},[]),_=E.useCallback(W=>{W!==N.current&&(N.current=W,S(W))},[]),x=s||y,j=o||w,F=E.useRef(null),N=E.useRef(null),O=E.useRef(l),v=u!=null,b=ns(u),C=ns(i),k=E.useCallback(()=>{if(!F.current||!N.current)return;const W={placement:t,strategy:n,middleware:d};C.current&&(W.platform=C.current),xf(F.current,N.current,W).then(P=>{const m={...P,isPositioned:!0};L.current&&!xn(O.current,m)&&(O.current=m,ss.flushSync(()=>{f(m)}))})},[d,t,n,C]);dn(()=>{c===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(W=>({...W,isPositioned:!1})))},[c]);const L=E.useRef(!1);dn(()=>(L.current=!0,()=>{L.current=!1}),[]),dn(()=>{if(x&&(F.current=x),j&&(N.current=j),x&&j){if(b.current)return b.current(x,j,k);k()}},[x,j,k,b,v]);const D=E.useMemo(()=>({reference:F,floating:N,setReference:M,setFloating:_}),[M,_]),V=E.useMemo(()=>({reference:x,floating:j}),[x,j]),K=E.useMemo(()=>{const W={position:n,left:0,top:0};if(!V.floating)return W;const P=ts(V.floating,l.x),m=ts(V.floating,l.y);return a?{...W,transform:"translate("+P+"px, "+m+"px)",...Oo(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:m}},[n,a,V.floating,l.x,l.y]);return E.useMemo(()=>({...l,update:k,refs:D,elements:V,floatingStyles:K}),[l,k,D,V,K])}const If=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?es({element:r.current,padding:i}).fn(n):{}:r?es({element:r,padding:i}).fn(n):{}}}},Zf=(e,t)=>({...wf(e),options:[e,t]}),ed=(e,t)=>({...Sf(e),options:[e,t]}),td=(e,t)=>({...bf(e),options:[e,t]}),nd=(e,t)=>({..._f(e),options:[e,t]}),rd=(e,t)=>({...If(e),options:[e,t]}),Io={...ko},Pf=Io.useInsertionEffect,Rf=Pf||(e=>e());function Ef(e){const t=E.useRef(()=>{});return Rf(()=>{t.current=e}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var On=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(this,arguments)}let rs=!1,Cf=0;const is=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Cf++;function Af(){const[e,t]=E.useState(()=>rs?is():void 0);return On(()=>{e==null&&t(is())},[]),E.useEffect(()=>{rs=!0},[]),e}const Tf=Io.useId,Po=Tf||Af,id=E.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s}},width:o=14,height:a=7,tipRadius:u=0,strokeWidth:c=0,staticOffset:l,stroke:f,d,style:{transform:h,...y}={},...p}=t,w=Po(),[S,M]=E.useState(!1);if(On(()=>{if(!i)return;be(i).direction==="rtl"&&M(!0)},[i]),!i)return null;const _=c*2,x=_/2,j=o/2*(u/-8+1),F=a/2*u/4,[N,O]=r.split("-"),v=!!d,b=N==="top"||N==="bottom",C=l&&O==="end"?"bottom":"top";let k=l&&O==="end"?"right":"left";l&&S&&(k=O==="end"?"left":"right");const L=s?.x!=null?l||s.x:"",D=s?.y!=null?l||s.y:"",V=d||"M0,0"+(" H"+o)+(" L"+(o-j)+","+(a-F))+(" Q"+o/2+","+a+" "+j+","+(a-F))+" Z",K={top:v?"rotate(180deg)":"",left:v?"rotate(90deg)":"rotate(-90deg)",bottom:v?"":"rotate(180deg)",right:v?"rotate(-90deg)":"rotate(90deg)"}[N];return E.createElement("svg",Ir({},p,{"aria-hidden":!0,ref:n,width:v?o:o+_,height:o,viewBox:"0 0 "+o+" "+(a>o?a:o),style:{position:"absolute",pointerEvents:"none",[k]:L,[C]:D,[N]:b||v?"100%":"calc(100% - "+_/2+"px)",transform:""+K+(h??""),...y}}),_>0&&E.createElement("path",{clipPath:"url(#"+w+")",fill:"none",stroke:f,strokeWidth:_+(d?0:1),d:V}),E.createElement("path",{stroke:_&&!d?p.fill:"none",d:V}),E.createElement("clipPath",{id:w},E.createElement("rect",{x:-x,y:x*(v?-1:1),width:o+_,height:o})))});function $f(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const kf=E.createContext(null),Mf=E.createContext(null),jf=()=>{var e;return((e=E.useContext(kf))==null?void 0:e.id)||null},Ff=()=>E.useContext(Mf);function Df(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Po(),s=E.useRef({}),[o]=E.useState(()=>$f()),a=jf()!=null,[u,c]=E.useState(r.reference),l=Ef((h,y,p)=>{s.current.openEvent=h?y:void 0,o.emit("openchange",{open:h,event:y,reason:p,nested:a}),n?.(h,y,p)}),f=E.useMemo(()=>({setPositionReference:c}),[]),d=E.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return E.useMemo(()=>({dataRef:s,open:t,onOpenChange:l,elements:d,events:o,floatingId:i,refs:f}),[t,l,d,o,i,f])}function sd(e){e===void 0&&(e={});const{nodeId:t}=e,n=Df({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=E.useState(null),[a,u]=E.useState(null),l=i?.reference||s,f=E.useRef(null),d=Ff();On(()=>{l&&(f.current=l)},[l]);const h=Of({...e,elements:{...i,...a&&{reference:a}}}),y=E.useCallback(_=>{const x=he(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;u(x),h.refs.setReference(x)},[h.refs]),p=E.useCallback(_=>{(he(_)||_===null)&&(f.current=_,o(_)),(he(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!he(_))&&h.refs.setReference(_)},[h.refs]),w=E.useMemo(()=>({...h.refs,setReference:p,setPositionReference:y,domReference:f}),[h.refs,p,y]),S=E.useMemo(()=>({...h.elements,domReference:l}),[h.elements,l]),M=E.useMemo(()=>({...h,...r,refs:w,elements:S,nodeId:t}),[h,w,S,t,r]);return On(()=>{r.dataRef.current.floatingContext=M;const _=d?.nodesRef.current.find(x=>x.id===t);_&&(_.context=M)}),E.useMemo(()=>({...h,context:M,refs:w,elements:S}),[h,w,S,M])}export{Xf as A,Uf as B,Hf as C,id as F,zf as P,Yf as R,Zf as a,rd as b,Jf as c,Fo as d,Ya as e,td as f,qf as g,za as h,nd as i,Vf as j,Bf as k,Wf as l,jo as m,Qf as n,In as o,Gf as p,ed as s,Kf as t,sd as u};
