import{R as ke,r as R,b as Qt,g as qi,a as du}from"./index.CfXgGp1H.js";import{c as ut,r as Ui,j as V}from"./index.BQwNXYF-.js";/**
 * @license lucide-react v0.464.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=ut("BookOpenText",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]);/**
 * @license lucide-react v0.464.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.464.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ut("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.464.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=ut("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.464.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ut("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.464.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ut("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.464.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Hi={exports:{}},Ot={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cs;function bu(){if(Cs)return Ot;Cs=1;var e=ke,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,c,a){var l,d={},f=null,h=null;a!==void 0&&(f=""+a),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(h=c.ref);for(l in c)r.call(c,l)&&!i.hasOwnProperty(l)&&(d[l]=c[l]);if(u&&u.defaultProps)for(l in c=u.defaultProps,c)d[l]===void 0&&(d[l]=c[l]);return{$$typeof:t,type:u,key:f,ref:h,props:d,_owner:s.current}}return Ot.Fragment=n,Ot.jsx=o,Ot.jsxs=o,Ot}Hi.exports=bu();var Su=Hi.exports,wu=(e=>(e.EDIT="EDIT",e.SELECT="SELECT",e.NONE="NONE",e))(wu||{});const Eu=[];for(let e=0;e<256;++e)Eu.push((e+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const xu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _u=e=>crypto.getRandomValues(new Uint8Array(e)),Ou=(e,t,n)=>{let r=(2<<Math.log2(e.length-1))-1,s=-~(1.6*r*t/e.length);return(i=t)=>{let o="";for(;;){let u=n(s),c=s|0;for(;c--;)if(o+=e[u[c]&r]||"",o.length>=i)return o}}},Iu=(e,t=21)=>Ou(e,t|0,_u),Au=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=xu[n[e]&63];return t};const md=()=>({isGuest:!0,id:Iu("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",20)()});Au();const Rn=R.createContext({anno:void 0,setAnno:void 0,annotations:[],selection:{selected:[]}}),yd=R.forwardRef((e,t)=>{const[n,r]=R.useState(null),[s,i]=R.useState([]),[o,u]=R.useState({selected:[]});return R.useImperativeHandle(t,()=>n),R.useEffect(()=>{if(n){const{selection:c,store:a,hover:l}=n.state;a.all().length>0&&i(a.all());const d=()=>i(()=>a.all());a.observe(d);let f;const h=c.subscribe(({selected:p,...m})=>{f&&a.unobserve(f);const S=(p||[]).map(({id:v,editable:C})=>({annotation:a.getAnnotation(v),editable:C}));u({selected:S,...m}),f=v=>{const{updated:C}=v.changes;u(w=>({...w,selected:w.selected.map(({annotation:E,editable:M})=>{const k=C.find(L=>L.oldValue.id===E.id);return k?{annotation:k.newValue,editable:M}:{annotation:E,editable:M}})}))},a.observe(f,{annotations:p.map(({id:v})=>v)})});return()=>{a.unobserve(d),h()}}},[n]),Su.jsx(Rn.Provider,{value:{anno:n,setAnno:r,annotations:s,selection:o},children:e.children})}),Cu=()=>{const{anno:e}=R.useContext(Rn);return e},Ru=()=>{const{annotations:e}=R.useContext(Rn);return e},Pu=e=>Ru(),Fu=()=>{const{selection:e}=R.useContext(Rn);return e};var Tu=Object.defineProperty,Du=(e,t,n)=>t in e?Tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rs=(e,t,n)=>Du(e,typeof t!="symbol"?t+"":t,n);function Nt(){}function Sr(e,t){for(const n in t)e[n]=t[n];return e}function Vi(e){return e()}function Ps(){return Object.create(null)}function Ue(e){e.forEach(Vi)}function ae(e){return typeof e=="function"}function Pn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Mu(e){return Object.keys(e).length===0}function $u(e,t,n,r){if(e){const s=Wi(e,t,n,r);return e[0](s)}}function Wi(e,t,n,r){return e[1]&&r?Sr(n.ctx.slice(),e[1](r(t))):n.ctx}function ku(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(t.dirty.length,s.length);for(let u=0;u<o;u+=1)i[u]=t.dirty[u]|s[u];return i}return t.dirty|s}return t.dirty}function ju(e,t,n,r,s,i){if(s){const o=Wi(t,n,r,i);e.p(o,s)}}function Nu(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Fs(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function vn(e){return e??""}function Ts(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function Lu(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function zi(e){return document.createTextNode(e)}function Ee(){return zi(" ")}function Gi(){return zi("")}function ue(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function q(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Bu(e){return Array.from(e.childNodes)}function Ds(e,t,n){e.classList.toggle(t,!!n)}function qu(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Lt;function Tt(e){Lt=e}function Uu(){if(!Lt)throw new Error("Function called outside component initialization");return Lt}function Hu(){const e=Uu();return(t,n,{cancelable:r=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=qu(t,n,{cancelable:r});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function Ne(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const ht=[],Ms=[];let gt=[];const $s=[],Vu=Promise.resolve();let wr=!1;function Wu(){wr||(wr=!0,Vu.then(Ki))}function Er(e){gt.push(e)}const Qn=new Set;let ft=0;function Ki(){if(ft!==0)return;const e=Lt;do{try{for(;ft<ht.length;){const t=ht[ft];ft++,Tt(t),zu(t.$$)}}catch(t){throw ht.length=0,ft=0,t}for(Tt(null),ht.length=0,ft=0;Ms.length;)Ms.pop()();for(let t=0;t<gt.length;t+=1){const n=gt[t];Qn.has(n)||(Qn.add(n),n())}gt.length=0}while(ht.length);for(;$s.length;)$s.pop()();wr=!1,Qn.clear(),Tt(e)}function zu(e){if(e.fragment!==null){e.update(),Ue(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Er)}}function Gu(e){const t=[],n=[];gt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),gt=t}const gn=new Set;let tt;function Ku(){tt={r:0,c:[],p:tt}}function Yu(){tt.r||Ue(tt.c),tt=tt.p}function be(e,t){e&&e.i&&(gn.delete(e),e.i(t))}function Ae(e,t,n,r){if(e&&e.o){if(gn.has(e))return;gn.add(e),tt.c.push(()=>{gn.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ks(e){return e?.length!==void 0?e:Array.from(e)}function nt(e){e&&e.c()}function Ve(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),Er(()=>{const i=e.$$.on_mount.map(Vi).filter(ae);e.$$.on_destroy?e.$$.on_destroy.push(...i):Ue(i),e.$$.on_mount=[]}),s.forEach(Er)}function We(e,t){const n=e.$$;n.fragment!==null&&(Gu(n.after_update),Ue(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Qu(e,t){e.$$.dirty[0]===-1&&(ht.push(e),Wu(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Fn(e,t,n,r,s,i,o=null,u=[-1]){const c=Lt;Tt(e);const a=e.$$={fragment:null,ctx:[],props:i,update:Nt,not_equal:s,bound:Ps(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Ps(),dirty:u,skip_bound:!1,root:t.target||c.$$.root};o&&o(a.root);let l=!1;if(a.ctx=n?n(e,t.props||{},(d,f,...h)=>{const p=h.length?h[0]:f;return a.ctx&&s(a.ctx[d],a.ctx[d]=p)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](p),l&&Qu(e,d)),f}):[],a.update(),l=!0,Ue(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const d=Bu(t.target);a.fragment&&a.fragment.l(d),d.forEach(ee)}else a.fragment&&a.fragment.c();t.intro&&be(e.$$.fragment),Ve(e,t.target,t.anchor),Ki()}Tt(c)}class Tn{constructor(){Rs(this,"$$"),Rs(this,"$$set")}$destroy(){We(this,1),this.$destroy=Nt}$on(t,n){if(!ae(n))return Nt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!Mu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Xu="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xu);var Se=(e=>(e.ELLIPSE="ELLIPSE",e.POLYGON="POLYGON",e.RECTANGLE="RECTANGLE",e))(Se||{});const Gr=(e,t)=>t,Yi=e=>{let t=1/0,n=1/0,r=-1/0,s=-1/0;return e.forEach(([i,o])=>{t=Math.min(t,i),n=Math.min(n,o),r=Math.max(r,i),s=Math.max(s,o)}),{minX:t,minY:n,maxX:r,maxY:s}},Ju={area:e=>Math.PI*e.geometry.rx*e.geometry.ry,intersects:(e,t,n)=>{const{cx:r,cy:s,rx:i,ry:o}=e.geometry,u=0,c=Math.cos(u),a=Math.sin(u),l=t-r,d=n-s,f=c*l+a*d,h=a*l-c*d;return f*f/(i*i)+h*h/(o*o)<=1}};Gr(Se.ELLIPSE,Ju);const Zu={area:e=>{const{points:t}=e.geometry;let n=0,r=t.length-1;for(let s=0;s<t.length;s++)n+=(t[r][0]+t[s][0])*(t[r][1]-t[s][1]),r=s;return Math.abs(.5*n)},intersects:(e,t,n)=>{const{points:r}=e.geometry;let s=!1;for(let i=0,o=r.length-1;i<r.length;o=i++){const u=r[i][0],c=r[i][1],a=r[o][0],l=r[o][1];c>n!=l>n&&t<(a-u)*(n-c)/(l-c)+u&&(s=!s)}return s}};Gr(Se.POLYGON,Zu);const ea={area:e=>e.geometry.w*e.geometry.h,intersects:(e,t,n)=>t>=e.geometry.x&&t<=e.geometry.x+e.geometry.w&&n>=e.geometry.y&&n<=e.geometry.y+e.geometry.h};Gr(Se.RECTANGLE,ea);const ta=(e,t=!1)=>{const n=typeof e=="string"?e:e.value,r=/^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,s=[...n.matchAll(r)][0],[i,o,u,c,a,l,d]=s;if(o!=="xywh")throw new Error("Unsupported MediaFragment: "+n);if(u&&u!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${u}`);const[f,h,p,m]=[c,a,l,d].map(parseFloat);return{type:Se.RECTANGLE,geometry:{x:f,y:h,w:p,h:m,bounds:{minX:f,minY:t?h-m:h,maxX:f+p,maxY:t?h:h+m}}}},na=e=>{const{x:t,y:n,w:r,h:s}=e;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${t},${n},${r},${s}`}},Qi="http://www.w3.org/2000/svg",js=e=>{const t=r=>{Array.from(r.attributes).forEach(s=>{s.name.startsWith("on")&&r.removeAttribute(s.name)})},n=e.getElementsByTagName("script");return Array.from(n).reverse().forEach(r=>r.parentNode.removeChild(r)),Array.from(e.querySelectorAll("*")).forEach(t),e},ra=e=>{const t=new XMLSerializer().serializeToString(e.documentElement).replace("<svg>",`<svg xmlns="${Qi}">`);return new DOMParser().parseFromString(t,"image/svg+xml").documentElement},sa=e=>{const t=new DOMParser().parseFromString(e,"image/svg+xml"),n=t.lookupPrefix(Qi),r=t.lookupNamespaceURI(null);return n||r?js(t).firstChild:js(ra(t)).firstChild},ia=e=>{const[t,n,r]=e.match(/(<polygon points=["|'])([^("|')]*)/)||[],s=r.split(" ").map(i=>i.split(",").map(parseFloat));return{type:Se.POLYGON,geometry:{points:s,bounds:Yi(s)}}},oa=e=>{const t=sa(e),n=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),s=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry")),o={minX:n-s,minY:r-i,maxX:n+s,maxY:r+i};return{type:Se.ELLIPSE,geometry:{cx:n,cy:r,rx:s,ry:i,bounds:o}}},ua=e=>{const t=typeof e=="string"?e:e.value;if(t.includes("<polygon points="))return ia(t);if(t.includes("<ellipse "))return oa(t);throw"Unsupported SVG shape: "+t},aa=e=>{let t;if(e.type===Se.POLYGON){const n=e.geometry,{points:r}=n;t=`<svg><polygon points="${r.map(s=>s.join(",")).join(" ")}" /></svg>`}else if(e.type===Se.ELLIPSE){const n=e.geometry;t=`<svg><ellipse cx="${n.cx}" cy="${n.cy}" rx="${n.rx}" ry="${n.ry}" /></svg>`}if(t)return{type:"SvgSelector",value:t};throw`Unsupported shape type: ${e.type}`},oe=[];for(let e=0;e<256;++e)oe.push((e+256).toString(16).slice(1));function ca(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}let Xn;const la=new Uint8Array(16);function fa(){if(!Xn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xn=crypto.getRandomValues.bind(crypto)}return Xn(la)}const da=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ns={randomUUID:da};function ha(e,t,n){if(Ns.randomUUID&&!t&&!e)return Ns.randomUUID();e=e||{};const r=e.random||(e.rng||fa)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ca(r)}const ga=[];for(let e=0;e<256;++e)ga.push((e+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const pa="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ma=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=pa[n[e]&63];return t};const ya=e=>{const t=JSON.stringify(e);let n=0;for(let r=0,s=t.length;r<s;r++){let i=t.charCodeAt(r);n=(n<<5)-n+i,n|=0}return`${n}`},Xi=e=>e?typeof e=="object"?{...e}:e:void 0,va=(e,t)=>(Array.isArray(e)?e:[e]).map(n=>{const{id:r,type:s,purpose:i,value:o,created:u,modified:c,creator:a,...l}=n;return{id:r||`temp-${ya(n)}`,annotation:t,type:s,purpose:i,value:o,creator:Xi(a),created:u?new Date(u):void 0,updated:c?new Date(c):void 0,...l}}),ba=e=>e.map(t=>{var n;const{annotation:r,created:s,updated:i,...o}=t,u={...o,created:s?.toISOString(),modified:i?.toISOString()};return(n=u.id)!=null&&n.startsWith("temp-")&&delete u.id,u});ma();const vd=(e,t={strict:!0,invertY:!1})=>({parse:n=>Sa(n,t),serialize:n=>wa(n,e,t)}),Sa=(e,t={strict:!0,invertY:!1})=>{const n=e.id||ha(),{creator:r,created:s,modified:i,body:o,...u}=e,c=va(o||[],n),a=Array.isArray(e.target)?e.target[0]:e.target,l=Array.isArray(a.selector)?a.selector[0]:a.selector,d=l?.type==="FragmentSelector"?ta(l,t.invertY):l?.type==="SvgSelector"?ua(l):void 0;return d||!t.strict?{parsed:{...u,id:n,bodies:c,target:{created:s?new Date(s):void 0,creator:Xi(r),updated:i?new Date(i):void 0,...Array.isArray(u.target)?u.target[0]:u.target,annotation:n,selector:d||l}}}:{error:Error(`Invalid selector: ${JSON.stringify(l)}`)}},wa=(e,t,n={strict:!0,invertY:!1})=>{const{selector:r,creator:s,created:i,updated:o,updatedBy:u,...c}=e.target;let a;try{a=r.type==Se.RECTANGLE?na(r.geometry):aa(r)}catch(d){if(n.strict)throw d;a=r}const l={...e,"@context":"http://www.w3.org/ns/anno.jsonld",id:e.id,type:"Annotation",body:ba(e.bodies),created:i?.toISOString(),creator:s,modified:o?.toISOString(),target:{...c,source:t,selector:a}};return delete l.bodies,"annotation"in l.target&&delete l.target.annotation,l};function Ls(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Bs(e){let t,n;return t=new Pt({props:{x:e[10][0],y:e[10][1],scale:e[3]}}),t.$on("pointerdown",function(){ae(e[9](`HANDLE-${e[12]}`))&&e[9](`HANDLE-${e[12]}`).apply(this,arguments)}),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,s){e=r;const i={};s&16&&(i.x=e[10][0]),s&16&&(i.y=e[10][1]),s&8&&(i.scale=e[3]),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){We(t,r)}}}function Ea(e){let t,n,r,s,i,o,u,c,a,l,d,f=ks(e[4].points),h=[];for(let m=0;m<f.length;m+=1)h[m]=Bs(Ls(e,f,m));const p=m=>Ae(h[m],1,1,()=>{h[m]=null});return{c(){t=ge("polygon"),s=Ee(),i=ge("polygon"),u=Ee();for(let m=0;m<h.length;m+=1)h[m].c();c=Gi(),q(t,"class","a9s-outer"),q(t,"style",n=e[1]?"display:none;":void 0),q(t,"points",r=e[4].points.map(qs).join(" ")),q(i,"class","a9s-inner a9s-shape-handle"),q(i,"style",e[1]),q(i,"points",o=e[4].points.map(Us).join(" "))},m(m,S){te(m,t,S),te(m,s,S),te(m,i,S),te(m,u,S);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(m,S);te(m,c,S),a=!0,l||(d=[ue(t,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ue(i,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)})],l=!0)},p(m,S){if(e=m,(!a||S&2&&n!==(n=e[1]?"display:none;":void 0))&&q(t,"style",n),(!a||S&16&&r!==(r=e[4].points.map(qs).join(" ")))&&q(t,"points",r),(!a||S&2)&&q(i,"style",e[1]),(!a||S&16&&o!==(o=e[4].points.map(Us).join(" ")))&&q(i,"points",o),S&536){f=ks(e[4].points);let v;for(v=0;v<f.length;v+=1){const C=Ls(e,f,v);h[v]?(h[v].p(C,S),be(h[v],1)):(h[v]=Bs(C),h[v].c(),be(h[v],1),h[v].m(c.parentNode,c))}for(Ku(),v=f.length;v<h.length;v+=1)p(v);Yu()}},i(m){if(!a){for(let S=0;S<f.length;S+=1)be(h[S]);a=!0}},o(m){h=h.filter(Boolean);for(let S=0;S<h.length;S+=1)Ae(h[S]);a=!1},d(m){m&&(ee(t),ee(s),ee(i),ee(u),ee(c)),Lu(h,m),l=!1,Ue(d)}}}function xa(e){let t,n;return t=new Ji({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Ea,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("change",e[6]),t.$on("grab",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&8730&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){We(t,r)}}}const qs=e=>e.join(","),Us=e=>e.join(",");function _a(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:u=1}=t;const c=(f,h,p)=>{let m;const S=f.geometry;h==="SHAPE"?m=S.points.map(([C,w])=>[C+p[0],w+p[1]]):m=S.points.map(([C,w],E)=>h===`HANDLE-${E}`?[C+p[0],w+p[1]]:[C,w]);const v=Yi(m);return{...f,geometry:{points:m,bounds:v}}};function a(f){Ne.call(this,e,f)}function l(f){Ne.call(this,e,f)}function d(f){Ne.call(this,e,f)}return e.$$set=f=>{"shape"in f&&n(0,s=f.shape),"computedStyle"in f&&n(1,i=f.computedStyle),"transform"in f&&n(2,o=f.transform),"viewportScale"in f&&n(3,u=f.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,u,r,c,a,l,d]}class Oa extends Tn{constructor(t){super(),Fn(this,t,_a,xa,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}const Ia=typeof window>"u"||typeof navigator>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function Aa(e){let t,n,r,s,i,o;return{c(){t=ge("rect"),q(t,"class",n=vn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),q(t,"x",r=e[0]-e[5]/2),q(t,"y",s=e[1]-e[5]/2),q(t,"width",e[5]),q(t,"height",e[5])},m(u,c){te(u,t,c),i||(o=ue(t,"pointerdown",e[11]),i=!0)},p(u,c){c&256&&n!==(n=vn(`a9s-handle ${u[8].class||""}`.trim())+" svelte-1sgkh33")&&q(t,"class",n),c&33&&r!==(r=u[0]-u[5]/2)&&q(t,"x",r),c&34&&s!==(s=u[1]-u[5]/2)&&q(t,"y",s),c&32&&q(t,"width",u[5]),c&32&&q(t,"height",u[5])},d(u){u&&ee(t),i=!1,o()}}}function Ca(e){let t,n,r,s,i,o,u,c,a;return{c(){t=ge("g"),n=ge("circle"),s=ge("rect"),q(n,"cx",e[0]),q(n,"cy",e[1]),q(n,"r",r=e[3]/e[2]),q(n,"class","a9s-touch-halo svelte-1sgkh33"),Ds(n,"touched",e[4]),q(s,"class",i=vn(`a9s-handle ${e[8].class||""}`.trim())+" svelte-1sgkh33"),q(s,"x",o=e[0]-e[5]/2),q(s,"y",u=e[1]-e[5]/2),q(s,"width",e[5]),q(s,"height",e[5]),q(t,"class","a9s-touch-handle")},m(l,d){te(l,t,d),Ts(t,n),Ts(t,s),c||(a=[ue(n,"pointerdown",e[10]),ue(n,"pointerdown",e[6]),ue(n,"pointerup",e[7]),ue(s,"pointerdown",e[9]),ue(s,"pointerdown",e[6]),ue(s,"pointerup",e[7])],c=!0)},p(l,d){d&1&&q(n,"cx",l[0]),d&2&&q(n,"cy",l[1]),d&12&&r!==(r=l[3]/l[2])&&q(n,"r",r),d&16&&Ds(n,"touched",l[4]),d&256&&i!==(i=vn(`a9s-handle ${l[8].class||""}`.trim())+" svelte-1sgkh33")&&q(s,"class",i),d&33&&o!==(o=l[0]-l[5]/2)&&q(s,"x",o),d&34&&u!==(u=l[1]-l[5]/2)&&q(s,"y",u),d&32&&q(s,"width",l[5]),d&32&&q(s,"height",l[5])},d(l){l&&ee(t),c=!1,Ue(a)}}}function Ra(e){let t;function n(s,i){return Ia?Ca:Aa}let r=n()(e);return{c(){r.c(),t=Gi()},m(s,i){r.m(s,i),te(s,t,i)},p(s,[i]){r.p(s,i)},i:Nt,o:Nt,d(s){s&&ee(t),r.d(s)}}}function Pa(e,t,n){let r,{x:s}=t,{y:i}=t,{scale:o}=t,{radius:u=30}=t,c=!1;const a=p=>{p.pointerType==="touch"&&n(4,c=!0)},l=()=>n(4,c=!1);function d(p){Ne.call(this,e,p)}function f(p){Ne.call(this,e,p)}function h(p){Ne.call(this,e,p)}return e.$$set=p=>{n(8,t=Sr(Sr({},t),Fs(p))),"x"in p&&n(0,s=p.x),"y"in p&&n(1,i=p.y),"scale"in p&&n(2,o=p.scale),"radius"in p&&n(3,u=p.radius)},e.$$.update=()=>{e.$$.dirty&4&&n(5,r=10/o)},t=Fs(t),[s,i,o,u,c,r,a,l,t,d,f,h]}class Pt extends Tn{constructor(t){super(),Fn(this,t,Pa,Ra,Pn,{x:0,y:1,scale:2,radius:3})}}function Fa(e){let t,n,r,s,i,o,u,c,a,l,d,f,h,p,m,S,v,C,w,E,M,k,L,O,b,x,P,$,N,j,H,G,K,_,y,I,F,g,A,T,D,z,Y;return _=new Pt({props:{class:"a9s-corner-handle-topleft",x:e[4].x,y:e[4].y,scale:e[3]}}),_.$on("pointerdown",function(){ae(e[9]("TOP_LEFT"))&&e[9]("TOP_LEFT").apply(this,arguments)}),I=new Pt({props:{class:"a9s-corner-handle-topright",x:e[4].x+e[4].w,y:e[4].y,scale:e[3]}}),I.$on("pointerdown",function(){ae(e[9]("TOP_RIGHT"))&&e[9]("TOP_RIGHT").apply(this,arguments)}),g=new Pt({props:{class:"a9s-corner-handle-bottomright",x:e[4].x+e[4].w,y:e[4].y+e[4].h,scale:e[3]}}),g.$on("pointerdown",function(){ae(e[9]("BOTTOM_RIGHT"))&&e[9]("BOTTOM_RIGHT").apply(this,arguments)}),T=new Pt({props:{class:"a9s-corner-handle-bottomleft",x:e[4].x,y:e[4].y+e[4].h,scale:e[3]}}),T.$on("pointerdown",function(){ae(e[9]("BOTTOM_LEFT"))&&e[9]("BOTTOM_LEFT").apply(this,arguments)}),{c(){t=ge("rect"),u=Ee(),c=ge("rect"),h=Ee(),p=ge("rect"),C=Ee(),w=ge("rect"),L=Ee(),O=ge("rect"),$=Ee(),N=ge("rect"),K=Ee(),nt(_.$$.fragment),y=Ee(),nt(I.$$.fragment),F=Ee(),nt(g.$$.fragment),A=Ee(),nt(T.$$.fragment),q(t,"class","a9s-outer"),q(t,"style",n=e[1]?"display:none;":void 0),q(t,"x",r=e[4].x),q(t,"y",s=e[4].y),q(t,"width",i=e[4].w),q(t,"height",o=e[4].h),q(c,"class","a9s-inner a9s-shape-handle"),q(c,"style",e[1]),q(c,"x",a=e[4].x),q(c,"y",l=e[4].y),q(c,"width",d=e[4].w),q(c,"height",f=e[4].h),q(p,"class","a9s-edge-handle a9s-edge-handle-top"),q(p,"x",m=e[4].x),q(p,"y",S=e[4].y),q(p,"height",1),q(p,"width",v=e[4].w),q(w,"class","a9s-edge-handle a9s-edge-handle-right"),q(w,"x",E=e[4].x+e[4].w),q(w,"y",M=e[4].y),q(w,"height",k=e[4].h),q(w,"width",1),q(O,"class","a9s-edge-handle a9s-edge-handle-bottom"),q(O,"x",b=e[4].x),q(O,"y",x=e[4].y+e[4].h),q(O,"height",1),q(O,"width",P=e[4].w),q(N,"class","a9s-edge-handle a9s-edge-handle-left"),q(N,"x",j=e[4].x),q(N,"y",H=e[4].y),q(N,"height",G=e[4].h),q(N,"width",1)},m(W,U){te(W,t,U),te(W,u,U),te(W,c,U),te(W,h,U),te(W,p,U),te(W,C,U),te(W,w,U),te(W,L,U),te(W,O,U),te(W,$,U),te(W,N,U),te(W,K,U),Ve(_,W,U),te(W,y,U),Ve(I,W,U),te(W,F,U),Ve(g,W,U),te(W,A,U),Ve(T,W,U),D=!0,z||(Y=[ue(t,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ue(c,"pointerdown",function(){ae(e[9]("SHAPE"))&&e[9]("SHAPE").apply(this,arguments)}),ue(p,"pointerdown",function(){ae(e[9]("TOP"))&&e[9]("TOP").apply(this,arguments)}),ue(w,"pointerdown",function(){ae(e[9]("RIGHT"))&&e[9]("RIGHT").apply(this,arguments)}),ue(O,"pointerdown",function(){ae(e[9]("BOTTOM"))&&e[9]("BOTTOM").apply(this,arguments)}),ue(N,"pointerdown",function(){ae(e[9]("LEFT"))&&e[9]("LEFT").apply(this,arguments)})],z=!0)},p(W,U){e=W,(!D||U&2&&n!==(n=e[1]?"display:none;":void 0))&&q(t,"style",n),(!D||U&16&&r!==(r=e[4].x))&&q(t,"x",r),(!D||U&16&&s!==(s=e[4].y))&&q(t,"y",s),(!D||U&16&&i!==(i=e[4].w))&&q(t,"width",i),(!D||U&16&&o!==(o=e[4].h))&&q(t,"height",o),(!D||U&2)&&q(c,"style",e[1]),(!D||U&16&&a!==(a=e[4].x))&&q(c,"x",a),(!D||U&16&&l!==(l=e[4].y))&&q(c,"y",l),(!D||U&16&&d!==(d=e[4].w))&&q(c,"width",d),(!D||U&16&&f!==(f=e[4].h))&&q(c,"height",f),(!D||U&16&&m!==(m=e[4].x))&&q(p,"x",m),(!D||U&16&&S!==(S=e[4].y))&&q(p,"y",S),(!D||U&16&&v!==(v=e[4].w))&&q(p,"width",v),(!D||U&16&&E!==(E=e[4].x+e[4].w))&&q(w,"x",E),(!D||U&16&&M!==(M=e[4].y))&&q(w,"y",M),(!D||U&16&&k!==(k=e[4].h))&&q(w,"height",k),(!D||U&16&&b!==(b=e[4].x))&&q(O,"x",b),(!D||U&16&&x!==(x=e[4].y+e[4].h))&&q(O,"y",x),(!D||U&16&&P!==(P=e[4].w))&&q(O,"width",P),(!D||U&16&&j!==(j=e[4].x))&&q(N,"x",j),(!D||U&16&&H!==(H=e[4].y))&&q(N,"y",H),(!D||U&16&&G!==(G=e[4].h))&&q(N,"height",G);const Z={};U&16&&(Z.x=e[4].x),U&16&&(Z.y=e[4].y),U&8&&(Z.scale=e[3]),_.$set(Z);const ne={};U&16&&(ne.x=e[4].x+e[4].w),U&16&&(ne.y=e[4].y),U&8&&(ne.scale=e[3]),I.$set(ne);const se={};U&16&&(se.x=e[4].x+e[4].w),U&16&&(se.y=e[4].y+e[4].h),U&8&&(se.scale=e[3]),g.$set(se);const ie={};U&16&&(ie.x=e[4].x),U&16&&(ie.y=e[4].y+e[4].h),U&8&&(ie.scale=e[3]),T.$set(ie)},i(W){D||(be(_.$$.fragment,W),be(I.$$.fragment,W),be(g.$$.fragment,W),be(T.$$.fragment,W),D=!0)},o(W){Ae(_.$$.fragment,W),Ae(I.$$.fragment,W),Ae(g.$$.fragment,W),Ae(T.$$.fragment,W),D=!1},d(W){W&&(ee(t),ee(u),ee(c),ee(h),ee(p),ee(C),ee(w),ee(L),ee(O),ee($),ee(N),ee(K),ee(y),ee(F),ee(A)),We(_,W),We(I,W),We(g,W),We(T,W),z=!1,Ue(Y)}}}function Ta(e){let t,n;return t=new Ji({props:{shape:e[0],transform:e[2],editor:e[5],$$slots:{default:[Fa,({grab:r})=>({9:r}),({grab:r})=>r?512:0]},$$scope:{ctx:e}}}),t.$on("grab",e[6]),t.$on("change",e[7]),t.$on("release",e[8]),{c(){nt(t.$$.fragment)},m(r,s){Ve(t,r,s),n=!0},p(r,[s]){const i={};s&1&&(i.shape=r[0]),s&4&&(i.transform=r[2]),s&1562&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(be(t.$$.fragment,r),n=!0)},o(r){Ae(t.$$.fragment,r),n=!1},d(r){We(t,r)}}}function Da(e,t,n){let r,{shape:s}=t,{computedStyle:i}=t,{transform:o}=t,{viewportScale:u=1}=t;const c=(f,h,p)=>{const m=f.geometry.bounds;let[S,v]=[m.minX,m.minY],[C,w]=[m.maxX,m.maxY];const[E,M]=p;if(h==="SHAPE")S+=E,C+=E,v+=M,w+=M;else{switch(h){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{v+=M;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{w+=M;break}}switch(h){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{S+=E;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{C+=E;break}}}const k=Math.min(S,C),L=Math.min(v,w),O=Math.abs(C-S),b=Math.abs(w-v);return{...f,geometry:{x:k,y:L,w:O,h:b,bounds:{minX:k,minY:L,maxX:k+O,maxY:L+b}}}};function a(f){Ne.call(this,e,f)}function l(f){Ne.call(this,e,f)}function d(f){Ne.call(this,e,f)}return e.$$set=f=>{"shape"in f&&n(0,s=f.shape),"computedStyle"in f&&n(1,i=f.computedStyle),"transform"in f&&n(2,o=f.transform),"viewportScale"in f&&n(3,u=f.viewportScale)},e.$$.update=()=>{e.$$.dirty&1&&n(4,r=s.geometry)},[s,i,o,u,r,c,a,l,d]}class Ma extends Tn{constructor(t){super(),Fn(this,t,Da,Ta,Pn,{shape:0,computedStyle:1,transform:2,viewportScale:3})}}Se.RECTANGLE,Se.POLYGON;const $a=e=>({}),Hs=e=>({grab:e[0]});function ka(e){let t,n,r,s;const i=e[7].default,o=$u(i,e,e[6],Hs);return{c(){t=ge("g"),o&&o.c(),q(t,"class","a9s-annotation selected")},m(u,c){te(u,t,c),o&&o.m(t,null),n=!0,r||(s=[ue(t,"pointerup",e[2]),ue(t,"pointermove",e[1])],r=!0)},p(u,[c]){o&&o.p&&(!n||c&64)&&ju(o,i,u,u[6],n?ku(i,u[6],c,$a):Nu(u[6]),Hs)},i(u){n||(be(o,u),n=!0)},o(u){Ae(o,u),n=!1},d(u){u&&ee(t),o&&o.d(u),r=!1,Ue(s)}}}function ja(e,t,n){let{$$slots:r={},$$scope:s}=t;const i=Hu();let{shape:o}=t,{editor:u}=t,{transform:c}=t,a,l,d;const f=m=>S=>{a=m,l=c.elementToImage(S.offsetX,S.offsetY),d=o,S.target.setPointerCapture(S.pointerId),i("grab",S)},h=m=>{if(a){const[S,v]=c.elementToImage(m.offsetX,m.offsetY),C=[S-l[0],v-l[1]];n(3,o=u(d,a,C)),i("change",o)}},p=m=>{m.target.releasePointerCapture(m.pointerId),a=void 0,d=o,i("release",m)};return e.$$set=m=>{"shape"in m&&n(3,o=m.shape),"editor"in m&&n(4,u=m.editor),"transform"in m&&n(5,c=m.transform),"$$scope"in m&&n(6,s=m.$$scope)},[f,h,p,o,u,c,s,r]}class Ji extends Tn{constructor(t){super(),Fn(this,t,ja,ka,Pn,{shape:3,editor:4,transform:5})}}typeof navigator>"u"||navigator.userAgent.indexOf("Mac OS X");const bd=e=>{const[t,n]=R.useState();return R.useEffect(()=>{fetch(`../../${e}`).then(r=>r.json()).then(r=>{const s=r.filter(i=>{const u=(Array.isArray(i.body)?i.body:[i.body]).some(f=>f.purpose==="tagging"),c=Array.isArray(i.target)?i.target[0]:i.target,l=(Array.isArray(c.selector)?c.selector:[c.selector]).find(f=>f.type==="FragmentSelector"),d=l&&l.value.endsWith(",0,0");return u&&!d});n(s)}).catch(r=>{console.log("Error fetching annotations",r)})},[]),t},Sd=(e,t)=>{const[n,r]=R.useState(t);return R.useEffect(()=>{const s=localStorage.getItem(e);if(s)try{r(JSON.parse(s))}catch(i){console.error("Error parsing stored state",i)}},[e]),R.useEffect(()=>{localStorage.setItem(e,JSON.stringify(n))},[n]),[n,r]},wd=e=>{const[t,n]=R.useState([]),[r,s]=R.useState({images:void 0,verses:void 0});return R.useEffect(()=>{fetch("../../tag-index.json").then(i=>i.json()).then(n)},[]),R.useEffect(()=>{if(t)if(e){const i=e.bodies.filter(a=>a.purpose==="tagging"&&a.value).map(a=>a.id),o=t.filter(a=>a.id!==e.id&&a.tags.some(l=>i.includes(l.id))),u=o.filter(a=>a.type==="IMAGE"),c=o.filter(a=>a.type==="VERSE");s({images:u,verses:c})}else s({images:void 0,verses:void 0})},[t,e]),r},Na=()=>{const e=Fu();return R.useMemo(()=>e.selected.length>0?e.selected[0].annotation:void 0,[e.selected.map(n=>n.annotation.id).join(",")])},Zi=()=>{const[e,t]=R.useState();return R.useEffect(()=>{fetch("../../thesaurus/all-concepts.json").then(n=>n.json()).then(n=>{const r=n.map(s=>({id:s.uri,label:s.prefLabel?.trim()})).filter(s=>s.label);t(r)})},[]),e},Ed=e=>{const t=Cu(),n=Na(),[r,s]=R.useState(!1);return R.useEffect(()=>{if(r)if(n){const i=n.id.substring(n.id.lastIndexOf("/")+1);location.hash=`#${i}`}else location.hash=""},[n,r]),R.useEffect(()=>{if(!t||!e.loaded)return;const i=a=>{const l=`https://recogito.pelagios.org/annotation/${a}`;if(!(t.getSelected()||[]).map(f=>f.id).includes(l)&&(t.setSelected(l),"scrollIntoView"in t)){const f=t.getAnnotationById(`https://recogito.pelagios.org/annotation/${a}`);t.scrollIntoView(f)}},o=()=>{t.getSelected()?.length>0&&t.cancelSelected()},u=window.location.hash.substring(1);u?setTimeout(()=>{i(u),s(!0)}):s(!0);const c=()=>{const a=window.location.hash.substring(1);a?i(a):o()};return window.addEventListener("hashchange",c),()=>{window.removeEventListener("hashchange",c)}},[t,e.loaded]),null};var Kr=Jt(),J=e=>Xt(e,Kr),Yr=Jt();J.write=e=>Xt(e,Yr);var Dn=Jt();J.onStart=e=>Xt(e,Dn);var Qr=Jt();J.onFrame=e=>Xt(e,Qr);var Xr=Jt();J.onFinish=e=>Xt(e,Xr);var pt=[];J.setTimeout=(e,t)=>{const n=J.now()+t,r=()=>{const i=pt.findIndex(o=>o.cancel==r);~i&&pt.splice(i,1),Ge-=~i?1:0},s={time:n,handler:e,cancel:r};return pt.splice(eo(n),0,s),Ge+=1,to(),s};var eo=e=>~(~pt.findIndex(t=>t.time>e)||~pt.length);J.cancel=e=>{Dn.delete(e),Qr.delete(e),Xr.delete(e),Kr.delete(e),Yr.delete(e)};J.sync=e=>{xr=!0,J.batchedUpdates(e),xr=!1};J.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,J.onStart(n)}return r.handler=e,r.cancel=()=>{Dn.delete(n),t=null},r};var Jr=typeof window<"u"?window.requestAnimationFrame:()=>{};J.use=e=>Jr=e;J.now=typeof performance<"u"?()=>performance.now():Date.now;J.batchedUpdates=e=>e();J.catch=console.error;J.frameLoop="always";J.advance=()=>{J.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):ro()};var ze=-1,Ge=0,xr=!1;function Xt(e,t){xr?(t.delete(e),e(0)):(t.add(e),to())}function to(){ze<0&&(ze=0,J.frameLoop!=="demand"&&Jr(no))}function La(){ze=-1}function no(){~ze&&(Jr(no),J.batchedUpdates(ro))}function ro(){const e=ze;ze=J.now();const t=eo(ze);if(t&&(so(pt.splice(0,t),n=>n.handler()),Ge-=t),!Ge){La();return}Dn.flush(),Kr.flush(e?Math.min(64,ze-e):16.667),Qr.flush(),Yr.flush(),Xr.flush()}function Jt(){let e=new Set,t=e;return{add(n){Ge+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Ge-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Ge-=t.size,so(t,r=>r(n)&&e.add(r)),Ge+=e.size,t=e)}}}function so(e,t){e.forEach(n=>{try{t(n)}catch(r){J.catch(r)}})}var Ba=Object.defineProperty,qa=(e,t)=>{for(var n in t)Ba(e,n,{get:t[n],enumerable:!0})},Oe={};qa(Oe,{assign:()=>Ha,colors:()=>Ke,createStringInterpolator:()=>es,skipAnimation:()=>oo,to:()=>io,willAdvance:()=>ts});function _r(){}var Ua=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),B={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function je(e,t){if(B.arr(e)){if(!B.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Q=(e,t)=>e.forEach(t);function Fe(e,t,n){if(B.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ce=e=>B.und(e)?[]:B.arr(e)?e:[e];function Dt(e,t){if(e.size){const n=Array.from(e);e.clear(),Q(n,t)}}var Ft=(e,...t)=>Dt(e,n=>n(...t)),Zr=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),es,io,Ke=null,oo=!1,ts=_r,Ha=e=>{e.to&&(io=e.to),e.now&&(J.now=e.now),e.colors!==void 0&&(Ke=e.colors),e.skipAnimation!=null&&(oo=e.skipAnimation),e.createStringInterpolator&&(es=e.createStringInterpolator),e.requestAnimationFrame&&J.use(e.requestAnimationFrame),e.batchedUpdates&&(J.batchedUpdates=e.batchedUpdates),e.willAdvance&&(ts=e.willAdvance),e.frameLoop&&(J.frameLoop=e.frameLoop)},Mt=new Set,ve=[],Jn=[],bn=0,Mn={get idle(){return!Mt.size&&!ve.length},start(e){bn>e.priority?(Mt.add(e),J.onStart(Va)):(uo(e),J(Or))},advance:Or,sort(e){if(bn)J.onFrame(()=>Mn.sort(e));else{const t=ve.indexOf(e);~t&&(ve.splice(t,1),ao(e))}},clear(){ve=[],Mt.clear()}};function Va(){Mt.forEach(uo),Mt.clear(),J(Or)}function uo(e){ve.includes(e)||ao(e)}function ao(e){ve.splice(Wa(ve,t=>t.priority>e.priority),0,e)}function Or(e){const t=Jn;for(let n=0;n<ve.length;n++){const r=ve[n];bn=r.priority,r.idle||(ts(r),r.advance(e),r.idle||t.push(r))}return bn=0,Jn=ve,Jn.length=0,ve=t,ve.length>0}function Wa(e,t){const n=e.findIndex(t);return n<0?e.length:n}var za=(e,t,n)=>Math.min(Math.max(n,e),t),Ga={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_e="[-+]?\\d*\\.?\\d+",Sn=_e+"%";function $n(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Ka=new RegExp("rgb"+$n(_e,_e,_e)),Ya=new RegExp("rgba"+$n(_e,_e,_e,_e)),Qa=new RegExp("hsl"+$n(_e,Sn,Sn)),Xa=new RegExp("hsla"+$n(_e,Sn,Sn,_e)),Ja=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Za=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ec=/^#([0-9a-fA-F]{6})$/,tc=/^#([0-9a-fA-F]{8})$/;function nc(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=ec.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ke&&Ke[e]!==void 0?Ke[e]:(t=Ka.exec(e))?(dt(t[1])<<24|dt(t[2])<<16|dt(t[3])<<8|255)>>>0:(t=Ya.exec(e))?(dt(t[1])<<24|dt(t[2])<<16|dt(t[3])<<8|zs(t[4]))>>>0:(t=Ja.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=tc.exec(e))?parseInt(t[1],16)>>>0:(t=Za.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Qa.exec(e))?(Vs(Ws(t[1]),an(t[2]),an(t[3]))|255)>>>0:(t=Xa.exec(e))?(Vs(Ws(t[1]),an(t[2]),an(t[3]))|zs(t[4]))>>>0:null}function Zn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Vs(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=Zn(s,r,e+1/3),o=Zn(s,r,e),u=Zn(s,r,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(u*255)<<8}function dt(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Ws(e){return(parseFloat(e)%360+360)%360/360}function zs(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function an(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Gs(e){let t=nc(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${i})`}var Bt=(e,t,n)=>{if(B.fun(e))return e;if(B.arr(e))return Bt({range:e,output:t,extrapolate:n});if(B.str(e.output[0]))return es(e);const r=e,s=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",u=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(a=>a);return a=>{const l=sc(a,i);return rc(a,i[l],i[l+1],s[l],s[l+1],c,o,u,r.map)}};function rc(e,t,n,r,s,i,o,u,c){let a=c?c(e):e;if(a<t){if(o==="identity")return a;o==="clamp"&&(a=t)}if(a>n){if(u==="identity")return a;u==="clamp"&&(a=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?a=-a:n===1/0?a=a-t:a=(a-t)/(n-t),a=i(a),r===-1/0?a=-a:s===1/0?a=a+r:a=a*(s-r)+r,a)}function sc(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var ic=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,s=t==="end"?Math.floor(r):Math.ceil(r);return za(0,1,s/e)},wn=1.70158,cn=wn*1.525,Ks=wn+1,Ys=2*Math.PI/3,Qs=2*Math.PI/4.5,ln=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,kn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Ks*e*e*e-wn*e*e,easeOutBack:e=>1+Ks*Math.pow(e-1,3)+wn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((cn+1)*2*e-cn)/2:(Math.pow(2*e-2,2)*((cn+1)*(e*2-2)+cn)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Ys),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Ys)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Qs))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Qs)/2+1,easeInBounce:e=>1-ln(1-e),easeOutBounce:ln,easeInOutBounce:e=>e<.5?(1-ln(1-2*e))/2:(1+ln(2*e-1))/2,steps:ic},qt=Symbol.for("FluidValue.get"),vt=Symbol.for("FluidValue.observers"),ye=e=>!!(e&&e[qt]),de=e=>e&&e[qt]?e[qt]():e,Xs=e=>e[vt]||null;function oc(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Ut(e,t){const n=e[vt];n&&n.forEach(r=>{oc(r,t)})}var co=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");uc(this,e)}},uc=(e,t)=>lo(e,qt,t);function wt(e,t){if(e[qt]){let n=e[vt];n||lo(e,vt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Ht(e,t){const n=e[vt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[vt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var lo=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),pn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ac=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Js=new RegExp(`(${pn.source})(%|[a-z]+)`,"i"),cc=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,jn=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,fo=e=>{const[t,n]=lc(e);if(!t||Zr())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&jn.test(n))return fo(n);if(n)return n}return e},lc=e=>{const t=jn.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},er,fc=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,ho=e=>{er||(er=Ke?new RegExp(`(${Object.keys(Ke).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>de(i).replace(jn,fo).replace(ac,Gs).replace(er,Gs)),n=t.map(i=>i.match(pn).map(Number)),s=n[0].map((i,o)=>n.map(u=>{if(!(o in u))throw Error('The arity of each "output" value must be equal');return u[o]})).map(i=>Bt({...e,output:i}));return i=>{const o=!Js.test(t[0])&&t.find(c=>Js.test(c))?.replace(pn,"");let u=0;return t[0].replace(pn,()=>`${s[u++](i)}${o||""}`).replace(cc,fc)}},ns="react-spring: ",go=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${ns}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},dc=go(console.warn);function hc(){dc(`${ns}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var gc=go(console.warn);function pc(){gc(`${ns}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Nn(e){return B.str(e)&&(e[0]=="#"||/\d/.test(e)||!Zr()&&jn.test(e)||e in(Ke||{}))}var rt=Zr()?R.useEffect:R.useLayoutEffect,mc=()=>{const e=R.useRef(!1);return rt(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function rs(){const e=R.useState()[1],t=mc();return()=>{t.current&&e(Math.random())}}function yc(e,t){const[n]=R.useState(()=>({inputs:t,result:e()})),r=R.useRef(),s=r.current;let i=s;return i?t&&i.inputs&&vc(t,i.inputs)||(i={inputs:t,result:e()}):i=n,R.useEffect(()=>{r.current=i,s==n&&(n.inputs=n.result=void 0)},[i]),i.result}function vc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var ss=e=>R.useEffect(e,bc),bc=[];function Ir(e){const t=R.useRef();return R.useEffect(()=>{t.current=e}),t.current}var Vt=Symbol.for("Animated:node"),Sc=e=>!!e&&e[Vt]===e,Ie=e=>e&&e[Vt],is=(e,t)=>Ua(e,Vt,t),Ln=e=>e&&e[Vt]&&e[Vt].getPayload(),po=class{constructor(){is(this,this)}getPayload(){return this.payload||[]}},Zt=class extends po{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,B.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Zt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return B.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,B.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Wt=class extends Zt{constructor(e){super(0),this._string=null,this._toString=Bt({output:[e,e]})}static create(e){return new Wt(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(B.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Bt({output:[this.getValue(),e]})),this._value=0,super.reset()}},En={dependencies:null},Bn=class extends po{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Fe(this.source,(n,r)=>{Sc(n)?t[r]=n.getValue(e):ye(n)?t[r]=de(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Q(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Fe(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){En.dependencies&&ye(e)&&En.dependencies.add(e);const t=Ln(e);t&&Q(t,n=>this.add(n))}},mo=class extends Bn{constructor(e){super(e)}static create(e){return new mo(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(wc)),!0)}};function wc(e){return(Nn(e)?Wt:Zt).create(e)}function Ar(e){const t=Ie(e);return t?t.constructor:B.arr(e)?mo:Nn(e)?Wt:Zt}var Zs=(e,t)=>{const n=!B.fun(e)||e.prototype&&e.prototype.isReactComponent;return R.forwardRef((r,s)=>{const i=R.useRef(null),o=n&&R.useCallback(p=>{i.current=_c(s,p)},[s]),[u,c]=xc(r,t),a=rs(),l=()=>{const p=i.current;if(n&&!p)return;(p?t.applyAnimatedValues(p,u.getValue(!0)):!1)===!1&&a()},d=new Ec(l,c),f=R.useRef();rt(()=>(f.current=d,Q(c,p=>wt(p,d)),()=>{f.current&&(Q(f.current.deps,p=>Ht(p,f.current)),J.cancel(f.current.update))})),R.useEffect(l,[]),ss(()=>()=>{const p=f.current;Q(p.deps,m=>Ht(m,p))});const h=t.getComponentProps(u.getValue());return R.createElement(e,{...h,ref:o})})},Ec=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&J.write(this.update)}};function xc(e,t){const n=new Set;return En.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Bn(e),En.dependencies=null,[e,n]}function _c(e,t){return e&&(B.fun(e)?e(t):e.current=t),t}var ei=Symbol.for("AnimatedComponent"),Oc=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new Bn(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=o=>{const u=ti(o)||"Anonymous";return B.str(o)?o=i[o]||(i[o]=Zs(o,s)):o=o[ei]||(o[ei]=Zs(o,s)),o.displayName=`Animated(${u})`,o};return Fe(e,(o,u)=>{B.arr(e)&&(u=ti(o)),i[u]=i(o)}),{animated:i}},ti=e=>B.str(e)?e:e&&B.str(e.displayName)?e.displayName:B.fun(e)&&e.name||null;function he(e,...t){return B.fun(e)?e(...t):e}var $t=(e,t)=>e===!0||!!(t&&e&&(B.fun(e)?e(t):ce(e).includes(t))),yo=(e,t)=>B.obj(e)?t&&e[t]:e,vo=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Ic=e=>e,qn=(e,t=Ic)=>{let n=Ac;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const i=t(e[s],s);B.und(i)||(r[s]=i)}return r},Ac=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Cc={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Rc(e){const t={};let n=0;if(Fe(e,(r,s)=>{Cc[s]||(t[s]=r,n++)}),n)return t}function os(e){const t=Rc(e);if(t){const n={to:t};return Fe(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function zt(e){return e=de(e),B.arr(e)?e.map(zt):Nn(e)?Oe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function bo(e){for(const t in e)return!0;return!1}function Cr(e){return B.fun(e)||B.arr(e)&&B.obj(e[0])}function Rr(e,t){e.ref?.delete(e),t?.delete(e)}function So(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var Pc={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Pr={...Pc.default,mass:1,damping:1,easing:kn.linear,clamp:!1},Fc=class{constructor(){this.velocity=0,Object.assign(this,Pr)}};function Tc(e,t,n){n&&(n={...n},ni(n,t),t={...n,...t}),ni(e,t),Object.assign(e,t);for(const o in Pr)e[o]==null&&(e[o]=Pr[o]);let{frequency:r,damping:s}=e;const{mass:i}=e;return B.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*s*i/r),e}function ni(e,t){if(!B.und(t.decay))e.duration=void 0;else{const n=!B.und(t.tension)||!B.und(t.friction);(n||!B.und(t.frequency)||!B.und(t.damping)||!B.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var ri=[],Dc=class{constructor(){this.changed=!1,this.values=ri,this.toValues=null,this.fromValues=ri,this.config=new Fc,this.immediate=!1}};function wo(e,{key:t,props:n,defaultProps:r,state:s,actions:i}){return new Promise((o,u)=>{let c,a,l=$t(n.cancel??r?.cancel,t);if(l)h();else{B.und(n.pause)||(s.paused=$t(n.pause,t));let p=r?.pause;p!==!0&&(p=s.paused||$t(p,t)),c=he(n.delay||0,t),p?(s.resumeQueue.add(f),i.pause()):(i.resume(),f())}function d(){s.resumeQueue.add(f),s.timeouts.delete(a),a.cancel(),c=a.time-J.now()}function f(){c>0&&!Oe.skipAnimation?(s.delayed=!0,a=J.setTimeout(h,c),s.pauseQueue.add(d),s.timeouts.add(a)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(d),s.timeouts.delete(a),e<=(s.cancelId||0)&&(l=!0);try{i.start({...n,callId:e,cancel:l},o)}catch(p){u(p)}}})}var us=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?mt(e.get()):t.every(n=>n.noop)?Eo(e.get()):xe(e.get(),t.every(n=>n.finished)),Eo=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),xe=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),mt=e=>({value:e,cancelled:!0,finished:!1});function xo(e,t,n,r){const{callId:s,parentId:i,onRest:o}=t,{asyncTo:u,promise:c}=n;return!i&&e===u&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const a=qn(t,(S,v)=>v==="onRest"?void 0:S);let l,d;const f=new Promise((S,v)=>(l=S,d=v)),h=S=>{const v=s<=(n.cancelId||0)&&mt(r)||s!==n.asyncId&&xe(r,!1);if(v)throw S.result=v,d(S),S},p=(S,v)=>{const C=new si,w=new ii;return(async()=>{if(Oe.skipAnimation)throw Gt(n),w.result=xe(r,!1),d(w),w;h(C);const E=B.obj(S)?{...S}:{...v,to:S};E.parentId=s,Fe(a,(k,L)=>{B.und(E[L])&&(E[L]=k)});const M=await r.start(E);return h(C),n.paused&&await new Promise(k=>{n.resumeQueue.add(k)}),M})()};let m;if(Oe.skipAnimation)return Gt(n),xe(r,!1);try{let S;B.arr(e)?S=(async v=>{for(const C of v)await p(C)})(e):S=Promise.resolve(e(p,r.stop.bind(r))),await Promise.all([S.then(l),f]),m=xe(r.get(),!0,!1)}catch(S){if(S instanceof si)m=S.result;else if(S instanceof ii)m=S.result;else throw S}finally{s==n.asyncId&&(n.asyncId=i,n.asyncTo=i?u:void 0,n.promise=i?c:void 0)}return B.fun(o)&&J.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function Gt(e,t){Dt(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var si=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},ii=class extends Error{constructor(){super("SkipAnimationSignal")}},Fr=e=>e instanceof as,Mc=1,as=class extends co{constructor(){super(...arguments),this.id=Mc++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ie(this);return e&&e.getValue()}to(...e){return Oe.to(this,e)}interpolate(...e){return hc(),Oe.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Ut(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Mn.sort(this),Ut(this,{type:"priority",parent:this,priority:e})}},st=Symbol.for("SpringPhase"),_o=1,Tr=2,Dr=4,tr=e=>(e[st]&_o)>0,He=e=>(e[st]&Tr)>0,It=e=>(e[st]&Dr)>0,oi=(e,t)=>t?e[st]|=Tr|_o:e[st]&=~Tr,ui=(e,t)=>t?e[st]|=Dr:e[st]&=~Dr,$c=class extends as{constructor(e,t){if(super(),this.animation=new Dc,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!B.und(e)||!B.und(t)){const n=B.obj(e)?{...e}:{...t,from:e};B.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(He(this)||this._state.asyncTo)||It(this)}get goal(){return de(this.animation.to)}get velocity(){const e=Ie(this);return e instanceof Zt?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return tr(this)}get isAnimating(){return He(this)}get isPaused(){return It(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:i}=r,o=Ln(r.to);!o&&ye(r.to)&&(s=ce(de(r.to))),r.values.forEach((a,l)=>{if(a.done)return;const d=a.constructor==Wt?1:o?o[l].lastPosition:s[l];let f=r.immediate,h=d;if(!f){if(h=a.lastPosition,i.tension<=0){a.done=!0;return}let p=a.elapsedTime+=e;const m=r.fromValues[l],S=a.v0!=null?a.v0:a.v0=B.arr(i.velocity)?i.velocity[l]:i.velocity;let v;const C=i.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(B.und(i.duration))if(i.decay){const w=i.decay===!0?.998:i.decay,E=Math.exp(-(1-w)*p);h=m+S/(1-w)*(1-E),f=Math.abs(a.lastPosition-h)<=C,v=S*E}else{v=a.lastVelocity==null?S:a.lastVelocity;const w=i.restVelocity||C/10,E=i.clamp?0:i.bounce,M=!B.und(E),k=m==d?a.v0>0:m<d;let L,O=!1;const b=1,x=Math.ceil(e/b);for(let P=0;P<x&&(L=Math.abs(v)>w,!(!L&&(f=Math.abs(d-h)<=C,f)));++P){M&&(O=h==d||h>d==k,O&&(v=-v*E,h=d));const $=-i.tension*1e-6*(h-d),N=-i.friction*.001*v,j=($+N)/i.mass;v=v+j*b,h=h+v*b}}else{let w=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,a.durationProgress>0&&(a.elapsedTime=i.duration*a.durationProgress,p=a.elapsedTime+=e)),w=(i.progress||0)+p/this._memoizedDuration,w=w>1?1:w<0?0:w,a.durationProgress=w),h=m+i.easing(w)*(d-m),v=(h-a.lastPosition)/e,f=w==1}a.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[l].done&&(f=!1),f?a.done=!0:t=!1,a.setValue(h,i.round)&&(n=!0)});const u=Ie(this),c=u.getValue();if(t){const a=de(r.to);(c!==a||n)&&!i.decay?(u.setValue(a),this._onChange(a)):n&&i.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return J.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(He(this)){const{to:e,config:t}=this.animation;J.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return B.und(e)?(n=this.queue||[],this.queue=[]):n=[B.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>us(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Gt(this._state,e&&this._lastCallId),J.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=B.obj(n)?n[t]:n,(n==null||Cr(n))&&(n=void 0),r=B.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return tr(this)||(e.reverse&&([n,r]=[r,n]),r=de(r),B.und(r)?Ie(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,qn(e,(o,u)=>/^on/.test(u)?yo(o,n):o)),ci(this,e,"onProps"),Ct(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return wo(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{It(this)||(ui(this,!0),Ft(i.pauseQueue),Ct(this,"onPause",xe(this,At(this,this.animation.to)),this))},resume:()=>{It(this)&&(ui(this,!1),He(this)&&this._resume(),Ft(i.resumeQueue),Ct(this,"onResume",xe(this,At(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const u=Oo(e);if(u)return this._update(u,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(mt(this));const r=!B.und(e.to),s=!B.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(mt(this));const{key:i,defaultProps:o,animation:u}=this,{to:c,from:a}=u;let{to:l=c,from:d=a}=e;s&&!r&&(!t.default||B.und(l))&&(l=d),t.reverse&&([l,d]=[d,l]);const f=!je(d,a);f&&(u.from=d),d=de(d);const h=!je(l,c);h&&this._focus(l);const p=Cr(t.to),{config:m}=u,{decay:S,velocity:v}=m;(r||s)&&(m.velocity=0),t.config&&!p&&Tc(m,he(t.config,i),t.config!==o.config?he(o.config,i):void 0);let C=Ie(this);if(!C||B.und(l))return n(xe(this,!0));const w=B.und(t.reset)?s&&!t.default:!B.und(d)&&$t(t.reset,i),E=w?d:this.get(),M=zt(l),k=B.num(M)||B.arr(M)||Nn(M),L=!p&&(!k||$t(o.immediate||t.immediate,i));if(h){const P=Ar(l);if(P!==C.constructor)if(L)C=this._set(M);else throw Error(`Cannot animate between ${C.constructor.name} and ${P.name}, as the "to" prop suggests`)}const O=C.constructor;let b=ye(l),x=!1;if(!b){const P=w||!tr(this)&&f;(h||P)&&(x=je(zt(E),M),b=!x),(!je(u.immediate,L)&&!L||!je(m.decay,S)||!je(m.velocity,v))&&(b=!0)}if(x&&He(this)&&(u.changed&&!w?b=!0:b||this._stop(c)),!p&&((b||ye(c))&&(u.values=C.getPayload(),u.toValues=ye(l)?null:O==Wt?[1]:ce(M)),u.immediate!=L&&(u.immediate=L,!L&&!w&&this._set(c)),b)){const{onRest:P}=u;Q(jc,N=>ci(this,t,N));const $=xe(this,At(this,c));Ft(this._pendingCalls,$),this._pendingCalls.add(n),u.changed&&J.batchedUpdates(()=>{u.changed=!w,P?.($,this),w?he(o.onRest,$):u.onStart?.($,this)})}w&&this._set(E),p?n(xo(t.to,t,this._state,this)):b?this._start():He(this)&&!h?this._pendingCalls.add(n):n(Eo(E))}_focus(e){const t=this.animation;e!==t.to&&(Xs(this)&&this._detach(),t.to=e,Xs(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ye(t)&&(wt(t,this),Fr(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ye(e)&&Ht(e,this)}_set(e,t=!0){const n=de(e);if(!B.und(n)){const r=Ie(this);if(!r||!je(n,r.getValue())){const s=Ar(n);!r||r.constructor!=s?is(this,s.create(n)):r.setValue(n),r&&J.batchedUpdates(()=>{this._onChange(n,t)})}}return Ie(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Ct(this,"onStart",xe(this,At(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),he(this.animation.onChange,e,this)),he(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Ie(this).reset(de(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),He(this)||(oi(this,!0),It(this)||this._resume())}_resume(){Oe.skipAnimation?this.finish():Mn.start(this)}_stop(e,t){if(He(this)){oi(this,!1);const n=this.animation;Q(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ut(this,{type:"idle",parent:this});const r=t?mt(this.get()):xe(this.get(),At(this,e??n.to));Ft(this._pendingCalls,r),n.changed&&(n.changed=!1,Ct(this,"onRest",r,this))}}};function At(e,t){const n=zt(t),r=zt(e.get());return je(r,n)}function Oo(e,t=e.loop,n=e.to){const r=he(t);if(r){const s=r!==!0&&os(r),i=(s||e).reverse,o=!s||s.reset;return Kt({...e,loop:t,default:!1,pause:void 0,to:!i||Cr(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function Kt(e){const{to:t,from:n}=e=os(e),r=new Set;return B.obj(t)&&ai(t,r),B.obj(n)&&ai(n,r),e.keys=r.size?Array.from(r):null,e}function kc(e){const t=Kt(e);return B.und(t.default)&&(t.default=qn(t)),t}function ai(e,t){Fe(e,(n,r)=>n!=null&&t.add(r))}var jc=["onStart","onRest","onChange","onPause","onResume"];function ci(e,t,n){e.animation[n]=t[n]!==vo(t,n)?yo(t[n],e.key):void 0}function Ct(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var Nc=["onStart","onChange","onRest"],Lc=1,Io=class{constructor(e,t){this.id=Lc++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];B.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Kt(e)),this}start(e){let{queue:t}=this;return e?t=ce(e).map(Kt):this.queue=[],this._flush?this._flush(this,t):(Fo(this,t),Mr(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Q(ce(t),r=>n[r].stop(!!e))}else Gt(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(B.und(e))this.start({pause:!0});else{const t=this.springs;Q(ce(e),n=>t[n].pause())}return this}resume(e){if(B.und(e))this.start({pause:!1});else{const t=this.springs;Q(ce(e),n=>t[n].resume())}return this}each(e){Fe(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Dt(e,([u,c])=>{c.value=this.get(),u(c,this,this._item)}));const i=!r&&this._started,o=s||i&&n.size?this.get():null;s&&t.size&&Dt(t,([u,c])=>{c.value=o,u(c,this,this._item)}),i&&(this._started=!1,Dt(n,([u,c])=>{c.value=o,u(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;J.onFrame(this._onFrame)}};function Mr(e,t){return Promise.all(t.map(n=>Ao(e,n))).then(n=>us(e,n))}async function Ao(e,t,n){const{keys:r,to:s,from:i,loop:o,onRest:u,onResolve:c}=t,a=B.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),i===!1&&(t.from=null);const l=B.arr(s)||B.fun(s)?s:void 0;l?(t.to=void 0,t.onRest=void 0,a&&(a.onRest=void 0)):Q(Nc,m=>{const S=t[m];if(B.fun(S)){const v=e._events[m];t[m]=({finished:C,cancelled:w})=>{const E=v.get(S);E?(C||(E.finished=!1),w&&(E.cancelled=!0)):v.set(S,{value:null,finished:C||!1,cancelled:w||!1})},a&&(a[m]=t[m])}});const d=e._state;t.pause===!d.paused?(d.paused=t.pause,Ft(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const f=(r||Object.keys(e.springs)).map(m=>e.springs[m].start(t)),h=t.cancel===!0||vo(t,"cancel")===!0;(l||h&&d.asyncId)&&f.push(wo(++e._lastAsyncId,{props:t,state:d,actions:{pause:_r,resume:_r,start(m,S){h?(Gt(d,e._lastAsyncId),S(mt(e))):(m.onRest=u,S(xo(l,m,d,e)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const p=us(e,await Promise.all(f));if(o&&p.finished&&!(n&&p.noop)){const m=Oo(t,o,s);if(m)return Fo(e,[m]),Ao(e,m,!0)}return c&&J.batchedUpdates(()=>c(p,e,e.item)),p}function $r(e,t){const n={...e.springs};return t&&Q(ce(t),r=>{B.und(r.keys)&&(r=Kt(r)),B.obj(r.to)||(r={...r,to:void 0}),Po(n,r,s=>Ro(s))}),Co(e,n),n}function Co(e,t){Fe(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,wt(n,e))})}function Ro(e,t){const n=new $c;return n.key=e,t&&wt(n,t),n}function Po(e,t,n){t.keys&&Q(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Fo(e,t){Q(t,n=>{Po(e.springs,n,r=>Ro(r,e))})}var en=({children:e,...t})=>{const n=R.useContext(xn),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=yc(()=>({pause:r,immediate:s}),[r,s]);const{Provider:i}=xn;return R.createElement(i,{value:t},e)},xn=Bc(en,{});en.Provider=xn.Provider;en.Consumer=xn.Consumer;function Bc(e,t){return Object.assign(e,R.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var To=()=>{const e=[],t=function(r){pc();const s=[];return Q(e,(i,o)=>{if(B.und(r))s.push(i.start());else{const u=n(r,i,o);u&&s.push(i.start(u))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Q(e,r=>r.pause(...arguments)),this},t.resume=function(){return Q(e,r=>r.resume(...arguments)),this},t.set=function(r){Q(e,(s,i)=>{const o=B.fun(r)?r(i,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return Q(e,(i,o)=>{if(B.und(r))s.push(i.start());else{const u=this._getProps(r,i,o);u&&s.push(i.start(u))}}),s},t.stop=function(){return Q(e,r=>r.stop(...arguments)),this},t.update=function(r){return Q(e,(s,i)=>s.update(this._getProps(r,s,i))),this};const n=function(r,s,i){return B.fun(r)?r(i,s):r};return t._getProps=n,t};function qc(e,t,n){const r=B.fun(t)&&t;r&&!n&&(n=[]);const s=R.useMemo(()=>r||arguments.length==3?To():void 0,[]),i=R.useRef(0),o=rs(),u=R.useMemo(()=>({ctrls:[],queue:[],flush(v,C){const w=$r(v,C);return i.current>0&&!u.queue.length&&!Object.keys(w).some(M=>!v.springs[M])?Mr(v,C):new Promise(M=>{Co(v,w),u.queue.push(()=>{M(Mr(v,C))}),o()})}}),[]),c=R.useRef([...u.ctrls]),a=[],l=Ir(e)||0;R.useMemo(()=>{Q(c.current.slice(e,l),v=>{Rr(v,s),v.stop(!0)}),c.current.length=e,d(l,e)},[e]),R.useMemo(()=>{d(0,Math.min(l,e))},n);function d(v,C){for(let w=v;w<C;w++){const E=c.current[w]||(c.current[w]=new Io(null,u.flush)),M=r?r(w,E):t[w];M&&(a[w]=kc(M))}}const f=c.current.map((v,C)=>$r(v,a[C])),h=R.useContext(en),p=Ir(h),m=h!==p&&bo(h);rt(()=>{i.current++,u.ctrls=c.current;const{queue:v}=u;v.length&&(u.queue=[],Q(v,C=>C())),Q(c.current,(C,w)=>{s?.add(C),m&&C.start({default:h});const E=a[w];E&&(So(C,E.ref),C.ref?C.queue.push(E):C.start(E))})}),ss(()=>()=>{Q(u.ctrls,v=>v.stop(!0))});const S=f.map(v=>({...v}));return s?[S,s]:S}function xd(e,t){const n=B.fun(e),[[r],s]=qc(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function cs(e,t,n){const r=B.fun(t)&&t,{reset:s,sort:i,trail:o=0,expires:u=!0,exitBeforeEnter:c=!1,onDestroyed:a,ref:l,config:d}=r?r():t,f=R.useMemo(()=>r||arguments.length==3?To():void 0,[]),h=ce(e),p=[],m=R.useRef(null),S=s?null:m.current;rt(()=>{m.current=p}),ss(()=>(Q(p,j=>{f?.add(j.ctrl),j.ctrl.ref=f}),()=>{Q(m.current,j=>{j.expired&&clearTimeout(j.expirationId),Rr(j.ctrl,f),j.ctrl.stop(!0)})}));const v=Hc(h,r?r():t,S),C=s&&m.current||[];rt(()=>Q(C,({ctrl:j,item:H,key:G})=>{Rr(j,f),he(a,H,G)}));const w=[];if(S&&Q(S,(j,H)=>{j.expired?(clearTimeout(j.expirationId),C.push(j)):(H=w[H]=v.indexOf(j.key),~H&&(p[H]=j))}),Q(h,(j,H)=>{p[H]||(p[H]={key:v[H],item:j,phase:"mount",ctrl:new Io},p[H].ctrl.item=j)}),w.length){let j=-1;const{leave:H}=r?r():t;Q(w,(G,K)=>{const _=S[K];~G?(j=p.indexOf(_),p[j]={..._,item:h[G]}):H&&p.splice(++j,0,_)})}B.fun(i)&&p.sort((j,H)=>i(j.item,H.item));let E=-o;const M=rs(),k=qn(t),L=new Map,O=R.useRef(new Map),b=R.useRef(!1);Q(p,(j,H)=>{const G=j.key,K=j.phase,_=r?r():t;let y,I;const F=he(_.delay||0,G);if(K=="mount")y=_.enter,I="enter";else{const D=v.indexOf(G)<0;if(K!="leave")if(D)y=_.leave,I="leave";else if(y=_.update)I="update";else return;else if(!D)y=_.enter,I="enter";else return}if(y=he(y,j.item,H),y=B.obj(y)?os(y):{to:y},!y.config){const D=d||k.config;y.config=he(D,j.item,H,I)}E+=o;const g={...k,delay:F+E,ref:l,immediate:_.immediate,reset:!1,...y};if(I=="enter"&&B.und(g.from)){const D=r?r():t,z=B.und(D.initial)||S?D.from:D.initial;g.from=he(z,j.item,H)}const{onResolve:A}=g;g.onResolve=D=>{he(A,D);const z=m.current,Y=z.find(W=>W.key===G);if(Y&&!(D.cancelled&&Y.phase!="update")&&Y.ctrl.idle){const W=z.every(U=>U.ctrl.idle);if(Y.phase=="leave"){const U=he(u,Y.item);if(U!==!1){const Z=U===!0?0:U;if(Y.expired=!0,!W&&Z>0){Z<=2147483647&&(Y.expirationId=setTimeout(M,Z));return}}}W&&z.some(U=>U.expired)&&(O.current.delete(Y),c&&(b.current=!0),M())}};const T=$r(j.ctrl,g);I==="leave"&&c?O.current.set(j,{phase:I,springs:T,payload:g}):L.set(j,{phase:I,springs:T,payload:g})});const x=R.useContext(en),P=Ir(x),$=x!==P&&bo(x);rt(()=>{$&&Q(p,j=>{j.ctrl.start({default:x})})},[x]),Q(L,(j,H)=>{if(O.current.size){const G=p.findIndex(K=>K.key===H.key);p.splice(G,1)}}),rt(()=>{Q(O.current.size?O.current:L,({phase:j,payload:H},G)=>{const{ctrl:K}=G;G.phase=j,f?.add(K),$&&j=="enter"&&K.start({default:x}),H&&(So(K,H.ref),(K.ref||f)&&!b.current?K.update(H):(K.start(H),b.current&&(b.current=!1)))})},s?void 0:n);const N=j=>R.createElement(R.Fragment,null,p.map((H,G)=>{const{springs:K}=L.get(H)||H.ctrl,_=j({...K},H.item,H,G);return _&&_.type?R.createElement(_.type,{..._.props,key:B.str(H.key)||B.num(H.key)?H.key:H.ctrl.id,ref:_.ref}):_}));return f?[N,f]:N}var Uc=1;function Hc(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(i=>{const o=r&&r.find(u=>u.item===i&&u.phase!=="leave"&&!s.has(u));return o?(s.add(o),o.key):Uc++})}return B.und(n)?e:B.fun(n)?e.map(n):ce(n)}var Do=class extends as{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Bt(...t);const n=this._get(),r=Ar(n);is(this,r.create(n))}advance(e){const t=this._get(),n=this.get();je(t,n)||(Ie(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&li(this._active)&&nr(this)}_get(){const e=B.arr(this.source)?this.source.map(de):ce(de(this.source));return this.calc(...e)}_start(){this.idle&&!li(this._active)&&(this.idle=!1,Q(Ln(this),e=>{e.done=!1}),Oe.skipAnimation?(J.batchedUpdates(()=>this.advance()),nr(this)):Mn.start(this))}_attach(){let e=1;Q(ce(this.source),t=>{ye(t)&&wt(t,this),Fr(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Q(ce(this.source),e=>{ye(e)&&Ht(e,this)}),this._active.clear(),nr(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ce(this.source).reduce((t,n)=>Math.max(t,(Fr(n)?n.priority:0)+1),0))}};function Vc(e){return e.idle!==!1}function li(e){return!e.size||Array.from(e).every(Vc)}function nr(e){e.idle||(e.idle=!0,Q(Ln(e),t=>{t.done=!0}),Ut(e,{type:"idle",parent:e}))}var _d=(e,...t)=>new Do(e,t);Oe.assign({createStringInterpolator:ho,to:(e,t)=>new Do(e,t)});var Mo=/^--/;function Wc(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Mo.test(e)&&!(kt.hasOwnProperty(e)&&kt[e])?t+"px":(""+t).trim()}var fi={};function zc(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:i,scrollTop:o,scrollLeft:u,viewBox:c,...a}=t,l=Object.values(a),d=Object.keys(a).map(f=>n||e.hasAttribute(f)?f:fi[f]||(fi[f]=f.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));i!==void 0&&(e.textContent=i);for(const f in s)if(s.hasOwnProperty(f)){const h=Wc(f,s[f]);Mo.test(f)?e.style.setProperty(f,h):e.style[f]=h}d.forEach((f,h)=>{e.setAttribute(f,l[h])}),r!==void 0&&(e.className=r),o!==void 0&&(e.scrollTop=o),u!==void 0&&(e.scrollLeft=u),c!==void 0&&e.setAttribute("viewBox",c)}var kt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gc=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Kc=["Webkit","Ms","Moz","O"];kt=Object.keys(kt).reduce((e,t)=>(Kc.forEach(n=>e[Gc(n,t)]=e[t]),e),kt);var Yc=/^(matrix|translate|scale|rotate|skew)/,Qc=/^(translate)/,Xc=/^(rotate|skew)/,rr=(e,t)=>B.num(e)&&e!==0?e+t:e,mn=(e,t)=>B.arr(e)?e.every(n=>mn(n,t)):B.num(e)?e===t:parseFloat(e)===t,Jc=class extends Bn{constructor({x:e,y:t,z:n,...r}){const s=[],i=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),i.push(o=>[`translate3d(${o.map(u=>rr(u,"px")).join(",")})`,mn(o,0)])),Fe(r,(o,u)=>{if(u==="transform")s.push([o||""]),i.push(c=>[c,c===""]);else if(Yc.test(u)){if(delete r[u],B.und(o))return;const c=Qc.test(u)?"px":Xc.test(u)?"deg":"";s.push(ce(o)),i.push(u==="rotate3d"?([a,l,d,f])=>[`rotate3d(${a},${l},${d},${rr(f,c)})`,mn(f,0)]:a=>[`${u}(${a.map(l=>rr(l,c)).join(",")})`,mn(a,u.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new Zc(s,i)),super(r)}},Zc=class extends co{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Q(this.inputs,(n,r)=>{const s=de(n[0]),[i,o]=this.transforms[r](B.arr(s)?s:n.map(de));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&Q(this.inputs,t=>Q(t,n=>ye(n)&&wt(n,this)))}observerRemoved(e){e==0&&Q(this.inputs,t=>Q(t,n=>ye(n)&&Ht(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Ut(this,e)}},el=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Oe.assign({batchedUpdates:Ui.unstable_batchedUpdates,createStringInterpolator:ho,colors:Ga});var tl=Oc(el,{applyAnimatedValues:zc,createAnimatedStyle:e=>new Jc(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),ls=tl.animated,sr={},ir={exports:{}},or,di;function nl(){if(di)return or;di=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return or=e,or}var ur,hi;function rl(){if(hi)return ur;hi=1;var e=nl();function t(){}function n(){}return n.resetWarningCache=t,ur=function(){function r(o,u,c,a,l,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},ur}var gi;function tn(){return gi||(gi=1,ir.exports=rl()()),ir.exports}var ar,pi;function sl(){if(pi)return ar;pi=1;function e(t,n){if(t===n)return!0;if(!t||!n)return!1;var r=t.length;if(n.length!==r)return!1;for(var s=0;s<r;s++)if(t[s]!==n[s])return!1;return!0}return ar=e,ar}var cr={},lr,mi;function il(){if(mi)return lr;mi=1;var e=function(){function t(n,r){var s=[],i=!0,o=!1,u=void 0;try{for(var c=n[Symbol.iterator](),a;!(i=(a=c.next()).done)&&(s.push(a.value),!(r&&s.length===r));i=!0);}catch(l){o=!0,u=l}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}return s}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return lr=function(t){var n=t.data,r=t.multiSection;function s(a){for(a===null?a=0:a++;a<n.length&&n[a]===0;)a++;return a===n.length?null:a}function i(a){for(a===null?a=n.length-1:a--;a>=0&&n[a]===0;)a--;return a===-1?null:a}function o(a){var l=e(a,2),d=l[0],f=l[1];return r?f===null||f===n[d]-1?(d=s(d),d===null?[null,null]:[d,0]):[d,f+1]:n===0||f===n-1?[null,null]:f===null?[null,0]:[null,f+1]}function u(a){var l=e(a,2),d=l[0],f=l[1];return r?f===null||f===0?(d=i(d),d===null?[null,null]:[d,n[d]-1]):[d,f-1]:n===0||f===0?[null,null]:f===null?[null,n-1]:[null,f-1]}function c(a){return o(a)[1]===null}return{next:o,prev:u,isLast:c}},lr}var fn={exports:{}},fr,yi;function ol(){if(yi)return fr;yi=1;var e=Object.prototype.propertyIsEnumerable;function t(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function n(r){var s=Object.getOwnPropertyNames(r);return Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(r))),s.filter(function(i){return e.call(r,i)})}return fr=Object.assign||function(r,s){for(var i,o,u=t(r),c=1;c<arguments.length;c++){i=arguments[c],o=n(Object(i));for(var a=0;a<o.length;a++)u[o[a]]=i[o[a]]}return u},fr}var vi;function ul(){return vi||(vi=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function c(a,l){var d=[],f=!0,h=!1,p=void 0;try{for(var m=a[Symbol.iterator](),S;!(f=(S=m.next()).done)&&(d.push(S.value),!(l&&d.length===l));f=!0);}catch(v){h=!0,p=v}finally{try{!f&&m.return&&m.return()}finally{if(h)throw p}}return d}return function(a,l){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return c(a,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(c){return c&&c.__esModule?c:{default:c}}function s(c){if(Array.isArray(c)){for(var a=0,l=Array(c.length);a<c.length;a++)l[a]=c[a];return l}else return Array.from(c)}var i=ol(),o=r(i),u=function(a){return a};t.default=function(c){var a=Array.isArray(c)&&c.length===2?c:[c,null],l=n(a,2),d=l[0],f=l[1];return function(h){for(var p=arguments.length,m=Array(p>1?p-1:0),S=1;S<p;S++)m[S-1]=arguments[S];var v=m.map(function(C){return d[C]}).filter(u);return typeof v[0]=="string"||typeof f=="function"?{key:h,className:f?f.apply(void 0,s(v)):v.join(" ")}:{key:h,style:o.default.apply(void 0,[{}].concat(s(v)))}}},e.exports=t.default}(fn,fn.exports)),fn.exports}var dr={},hr={},bi;function fs(){return bi||(bi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(i){return typeof i}:t=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t(r)}function n(r,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===s)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!0;var c={},a,l;for(a=0,l=i.length;a<l;a++)c[i[a]]=!0;for(a=0,l=o.length;a<l;a++){var d=o[a],f=r[d],h=s[d];if(f!==h){if(!c[d]||f===null||h===null||t(f)!=="object"||t(h)!=="object")return!0;var p=Object.keys(f),m=Object.keys(h);if(p.length!==m.length)return!0;for(var S=0,v=p.length;S<v;S++){var C=p[S];if(f[C]!==h[C])return!0}}}return!1}}(hr)),hr}var Si;function al(){return Si||(Si=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(Qt()),n=s(tn()),r=s(fs());function s(E){return E&&E.__esModule?E:{default:E}}function i(){if(typeof WeakMap!="function")return null;var E=new WeakMap;return i=function(){return E},E}function o(E){if(E&&E.__esModule)return E;if(E===null||u(E)!=="object"&&typeof E!="function")return{default:E};var M=i();if(M&&M.has(E))return M.get(E);var k={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in E)if(Object.prototype.hasOwnProperty.call(E,O)){var b=L?Object.getOwnPropertyDescriptor(E,O):null;b&&(b.get||b.set)?Object.defineProperty(k,O,b):k[O]=E[O]}return k.default=E,M&&M.set(E,k),k}function u(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(k){return typeof k}:u=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},u(E)}function c(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")}function a(E,M){for(var k=0;k<M.length;k++){var L=M[k];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}function l(E,M,k){return M&&a(E.prototype,M),E}function d(E){return function(){var M=m(E),k;if(p()){var L=m(this).constructor;k=Reflect.construct(M,arguments,L)}else k=M.apply(this,arguments);return f(this,k)}}function f(E,M){return M&&(u(M)==="object"||typeof M=="function")?M:h(E)}function h(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function m(E){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},m(E)}function S(E,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(M&&M.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),M&&v(E,M)}function v(E,M){return v=Object.setPrototypeOf||function(L,O){return L.__proto__=O,L},v(E,M)}function C(E,M,k){return M in E?Object.defineProperty(E,M,{value:k,enumerable:!0,configurable:!0,writable:!0}):E[M]=k,E}var w=function(E){S(k,E);var M=d(k);function k(){return c(this,k),M.apply(this,arguments)}return l(k,[{key:"shouldComponentUpdate",value:function(O){return(0,r.default)(O,this.props)}},{key:"render",value:function(){var O=this.props,b=O.section,x=O.renderSectionTitle,P=O.theme,$=O.sectionKeyPrefix,N=x(b);return N?t.default.createElement("div",P("".concat($,"title"),"sectionTitle"),N):null}}]),k}(t.Component);e.default=w,C(w,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})}(dr)),dr}var gr={},pr={},wi;function cl(){return wi||(wi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(Qt()),n=s(tn()),r=s(fs());function s(b){return b&&b.__esModule?b:{default:b}}function i(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return i=function(){return b},b}function o(b){if(b&&b.__esModule)return b;if(b===null||u(b)!=="object"&&typeof b!="function")return{default:b};var x=i();if(x&&x.has(b))return x.get(b);var P={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in b)if(Object.prototype.hasOwnProperty.call(b,N)){var j=$?Object.getOwnPropertyDescriptor(b,N):null;j&&(j.get||j.set)?Object.defineProperty(P,N,j):P[N]=b[N]}return P.default=b,x&&x.set(b,P),P}function u(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(P){return typeof P}:u=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},u(b)}function c(){return c=Object.assign||function(b){for(var x=1;x<arguments.length;x++){var P=arguments[x];for(var $ in P)Object.prototype.hasOwnProperty.call(P,$)&&(b[$]=P[$])}return b},c.apply(this,arguments)}function a(b,x){var P=Object.keys(b);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(b);x&&($=$.filter(function(N){return Object.getOwnPropertyDescriptor(b,N).enumerable})),P.push.apply(P,$)}return P}function l(b){for(var x=1;x<arguments.length;x++){var P=arguments[x]!=null?arguments[x]:{};x%2?a(Object(P),!0).forEach(function($){L(b,$,P[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(P)):a(Object(P)).forEach(function($){Object.defineProperty(b,$,Object.getOwnPropertyDescriptor(P,$))})}return b}function d(b,x){if(b==null)return{};var P=f(b,x),$,N;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(b);for(N=0;N<j.length;N++)$=j[N],!(x.indexOf($)>=0)&&Object.prototype.propertyIsEnumerable.call(b,$)&&(P[$]=b[$])}return P}function f(b,x){if(b==null)return{};var P={},$=Object.keys(b),N,j;for(j=0;j<$.length;j++)N=$[j],!(x.indexOf(N)>=0)&&(P[N]=b[N]);return P}function h(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function p(b,x){for(var P=0;P<x.length;P++){var $=x[P];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(b,$.key,$)}}function m(b,x,P){return x&&p(b.prototype,x),b}function S(b){return function(){var x=E(b),P;if(w()){var $=E(this).constructor;P=Reflect.construct(x,arguments,$)}else P=x.apply(this,arguments);return v(this,P)}}function v(b,x){return x&&(u(x)==="object"||typeof x=="function")?x:C(b)}function C(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(b){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},E(b)}function M(b,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&k(b,x)}function k(b,x){return k=Object.setPrototypeOf||function($,N){return $.__proto__=N,$},k(b,x)}function L(b,x,P){return x in b?Object.defineProperty(b,x,{value:P,enumerable:!0,configurable:!0,writable:!0}):b[x]=P,b}var O=function(b){M(P,b);var x=S(P);function P(){var $;h(this,P);for(var N=arguments.length,j=new Array(N),H=0;H<N;H++)j[H]=arguments[H];return $=x.call.apply(x,[this].concat(j)),L(C($),"storeItemReference",function(G){G!==null&&($.item=G)}),L(C($),"onMouseEnter",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onMouseEnter(G,{sectionIndex:_,itemIndex:y})}),L(C($),"onMouseLeave",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onMouseLeave(G,{sectionIndex:_,itemIndex:y})}),L(C($),"onMouseDown",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onMouseDown(G,{sectionIndex:_,itemIndex:y})}),L(C($),"onClick",function(G){var K=$.props,_=K.sectionIndex,y=K.itemIndex;$.props.onClick(G,{sectionIndex:_,itemIndex:y})}),$}return m(P,[{key:"shouldComponentUpdate",value:function(N){return(0,r.default)(N,this.props,["renderItemData"])}},{key:"render",value:function(){var N=this.props,j=N.isHighlighted,H=N.item,G=N.renderItem,K=N.renderItemData,_=d(N,["isHighlighted","item","renderItem","renderItemData"]);return delete _.sectionIndex,delete _.itemIndex,typeof _.onMouseEnter=="function"&&(_.onMouseEnter=this.onMouseEnter),typeof _.onMouseLeave=="function"&&(_.onMouseLeave=this.onMouseLeave),typeof _.onMouseDown=="function"&&(_.onMouseDown=this.onMouseDown),typeof _.onClick=="function"&&(_.onClick=this.onClick),t.default.createElement("li",c({role:"option"},_,{ref:this.storeItemReference}),G(H,l({isHighlighted:j},K)))}}]),P}(t.Component);e.default=O,L(O,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})}(pr)),pr}var Ei;function ll(){return Ei||(Ei=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=u(Qt()),n=i(tn()),r=i(cl()),s=i(fs());function i(O){return O&&O.__esModule?O:{default:O}}function o(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return o=function(){return O},O}function u(O){if(O&&O.__esModule)return O;if(O===null||c(O)!=="object"&&typeof O!="function")return{default:O};var b=o();if(b&&b.has(O))return b.get(O);var x={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in O)if(Object.prototype.hasOwnProperty.call(O,$)){var N=P?Object.getOwnPropertyDescriptor(O,$):null;N&&(N.get||N.set)?Object.defineProperty(x,$,N):x[$]=O[$]}return x.default=O,b&&b.set(O,x),x}function c(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(x){return typeof x}:c=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},c(O)}function a(){return a=Object.assign||function(O){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&(O[P]=x[P])}return O},a.apply(this,arguments)}function l(O,b){var x=Object.keys(O);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(O);b&&(P=P.filter(function($){return Object.getOwnPropertyDescriptor(O,$).enumerable})),x.push.apply(x,P)}return x}function d(O){for(var b=1;b<arguments.length;b++){var x=arguments[b]!=null?arguments[b]:{};b%2?l(Object(x),!0).forEach(function(P){k(O,P,x[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(x)):l(Object(x)).forEach(function(P){Object.defineProperty(O,P,Object.getOwnPropertyDescriptor(x,P))})}return O}function f(O,b){if(!(O instanceof b))throw new TypeError("Cannot call a class as a function")}function h(O,b){for(var x=0;x<b.length;x++){var P=b[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(O,P.key,P)}}function p(O,b,x){return b&&h(O.prototype,b),O}function m(O){return function(){var b=w(O),x;if(C()){var P=w(this).constructor;x=Reflect.construct(b,arguments,P)}else x=b.apply(this,arguments);return S(this,x)}}function S(O,b){return b&&(c(b)==="object"||typeof b=="function")?b:v(O)}function v(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},w(O)}function E(O,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(b&&b.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),b&&M(O,b)}function M(O,b){return M=Object.setPrototypeOf||function(P,$){return P.__proto__=$,P},M(O,b)}function k(O,b,x){return b in O?Object.defineProperty(O,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):O[b]=x,O}var L=function(O){E(x,O);var b=m(x);function x(){var P;f(this,x);for(var $=arguments.length,N=new Array($),j=0;j<$;j++)N[j]=arguments[j];return P=b.call.apply(b,[this].concat(N)),k(v(P),"storeHighlightedItemReference",function(H){P.props.onHighlightedItemChange(H===null?null:H.item)}),P}return p(x,[{key:"shouldComponentUpdate",value:function($){return(0,s.default)($,this.props,["itemProps"])}},{key:"render",value:function(){var $=this,N=this.props,j=N.items,H=N.itemProps,G=N.renderItem,K=N.renderItemData,_=N.sectionIndex,y=N.highlightedItemIndex,I=N.getItemId,F=N.theme,g=N.keyPrefix,A=_===null?g:"".concat(g,"section-").concat(_,"-"),T=typeof H=="function";return t.default.createElement("ul",a({role:"listbox"},F("".concat(A,"items-list"),"itemsList")),j.map(function(D,z){var Y=z===0,W=z===y,U="".concat(A,"item-").concat(z),Z=T?H({sectionIndex:_,itemIndex:z}):H,ne=d({id:I(_,z),"aria-selected":W},F(U,"item",Y&&"itemFirst",W&&"itemHighlighted"),{},Z);return W&&(ne.ref=$.storeHighlightedItemReference),t.default.createElement(r.default,a({},ne,{sectionIndex:_,isHighlighted:W,itemIndex:z,item:D,renderItem:G,renderItemData:K}))}))}}]),x}(t.Component);e.default=L,k(L,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),k(L,"defaultProps",{sectionIndex:null})}(gr)),gr}var xi;function fl(){return xi||(xi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Qt()),n=u(tn()),r=u(il()),s=u(ul()),i=u(al()),o=u(ll());function u(y){return y&&y.__esModule?y:{default:y}}function c(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return c=function(){return y},y}function a(y){if(y&&y.__esModule)return y;if(y===null||C(y)!=="object"&&typeof y!="function")return{default:y};var I=c();if(I&&I.has(y))return I.get(y);var F={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in y)if(Object.prototype.hasOwnProperty.call(y,A)){var T=g?Object.getOwnPropertyDescriptor(y,A):null;T&&(T.get||T.set)?Object.defineProperty(F,A,T):F[A]=y[A]}return F.default=y,I&&I.set(y,F),F}function l(y,I){var F=Object.keys(y);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(y);I&&(g=g.filter(function(A){return Object.getOwnPropertyDescriptor(y,A).enumerable})),F.push.apply(F,g)}return F}function d(y){for(var I=1;I<arguments.length;I++){var F=arguments[I]!=null?arguments[I]:{};I%2?l(Object(F),!0).forEach(function(g){N(y,g,F[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(F)):l(Object(F)).forEach(function(g){Object.defineProperty(y,g,Object.getOwnPropertyDescriptor(F,g))})}return y}function f(y,I){return v(y)||S(y,I)||p(y,I)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(y,I){if(y){if(typeof y=="string")return m(y,I);var F=Object.prototype.toString.call(y).slice(8,-1);if(F==="Object"&&y.constructor&&(F=y.constructor.name),F==="Map"||F==="Set")return Array.from(F);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return m(y,I)}}function m(y,I){(I==null||I>y.length)&&(I=y.length);for(var F=0,g=new Array(I);F<I;F++)g[F]=y[F];return g}function S(y,I){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(y)))){var F=[],g=!0,A=!1,T=void 0;try{for(var D=y[Symbol.iterator](),z;!(g=(z=D.next()).done)&&(F.push(z.value),!(I&&F.length===I));g=!0);}catch(Y){A=!0,T=Y}finally{try{!g&&D.return!=null&&D.return()}finally{if(A)throw T}}return F}}function v(y){if(Array.isArray(y))return y}function C(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(F){return typeof F}:C=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},C(y)}function w(y,I){if(!(y instanceof I))throw new TypeError("Cannot call a class as a function")}function E(y,I){for(var F=0;F<I.length;F++){var g=I[F];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function M(y,I,F){return I&&E(y.prototype,I),y}function k(y){return function(){var I=x(y),F;if(b()){var g=x(this).constructor;F=Reflect.construct(I,arguments,g)}else F=I.apply(this,arguments);return L(this,F)}}function L(y,I){return I&&(C(I)==="object"||typeof I=="function")?I:O(y)}function O(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(y){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},x(y)}function P(y,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(I&&I.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),I&&$(y,I)}function $(y,I){return $=Object.setPrototypeOf||function(g,A){return g.__proto__=A,g},$(y,I)}function N(y,I,F){return I in y?Object.defineProperty(y,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):y[I]=F,y}var j={},H=function(I){return t.default.createElement("input",I)},G=function(I){var F=I.containerProps,g=I.children;return t.default.createElement("div",F,g)},K={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},_=function(y){P(F,y);var I=k(F);function F(g){var A;return w(this,F),A=I.call(this,g),N(O(A),"storeInputReference",function(T){T!==null&&(A.input=T);var D=A.props.inputProps.ref;D&&(typeof D=="function"?D(T):C(D)==="object"&&Object.prototype.hasOwnProperty.call(D,"current")&&(D.current=T))}),N(O(A),"storeItemsContainerReference",function(T){T!==null&&(A.itemsContainer=T)}),N(O(A),"onHighlightedItemChange",function(T){A.highlightedItem=T}),N(O(A),"getItemId",function(T,D){if(D===null)return null;var z=A.props.id,Y=T===null?"":"section-".concat(T);return"react-autowhatever-".concat(z,"-").concat(Y,"-item-").concat(D)}),N(O(A),"onFocus",function(T){var D=A.props.inputProps;A.setState({isInputFocused:!0}),D.onFocus&&D.onFocus(T)}),N(O(A),"onBlur",function(T){var D=A.props.inputProps;A.setState({isInputFocused:!1}),D.onBlur&&D.onBlur(T)}),N(O(A),"onKeyDown",function(T){var D=A.props,z=D.inputProps,Y=D.highlightedSectionIndex,W=D.highlightedItemIndex,U=T.keyCode;switch(U){case 40:case 38:{var Z=U===40?"next":"prev",ne=A.sectionIterator[Z]([Y,W]),se=f(ne,2),ie=se[0],Je=se[1];z.onKeyDown(T,{newHighlightedSectionIndex:ie,newHighlightedItemIndex:Je});break}default:z.onKeyDown(T,{highlightedSectionIndex:Y,highlightedItemIndex:W})}}),A.highlightedItem=null,A.state={isInputFocused:!1},A.setSectionsItems(g),A.setSectionIterator(g),A.setTheme(g),A}return M(F,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(A){A.items!==this.props.items&&this.setSectionsItems(A),(A.items!==this.props.items||A.multiSection!==this.props.multiSection)&&this.setSectionIterator(A),A.theme!==this.props.theme&&this.setTheme(A)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(A){A.multiSection&&(this.sectionsItems=A.items.map(function(T){return A.getSectionItems(T)}),this.sectionsLengths=this.sectionsItems.map(function(T){return T.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(T){return T===0}))}},{key:"setSectionIterator",value:function(A){this.sectionIterator=(0,r.default)({multiSection:A.multiSection,data:A.multiSection?this.sectionsLengths:A.items.length})}},{key:"setTheme",value:function(A){this.theme=(0,s.default)(A.theme)}},{key:"renderSections",value:function(){var A=this;if(this.allSectionsAreEmpty)return null;var T=this.theme,D=this.props,z=D.id,Y=D.items,W=D.renderItem,U=D.renderItemData,Z=D.renderSectionTitle,ne=D.highlightedSectionIndex,se=D.highlightedItemIndex,ie=D.itemProps;return Y.map(function(Je,fe){var at="react-autowhatever-".concat(z,"-"),ct="".concat(at,"section-").concat(fe,"-"),Me=fe===0;return t.default.createElement("div",T("".concat(ct,"container"),"sectionContainer",Me&&"sectionContainerFirst"),t.default.createElement(i.default,{section:Je,renderSectionTitle:Z,theme:T,sectionKeyPrefix:ct}),t.default.createElement(o.default,{items:A.sectionsItems[fe],itemProps:ie,renderItem:W,renderItemData:U,sectionIndex:fe,highlightedItemIndex:ne===fe?se:null,onHighlightedItemChange:A.onHighlightedItemChange,getItemId:A.getItemId,theme:T,keyPrefix:at,ref:A.storeItemsListReference}))})}},{key:"renderItems",value:function(){var A=this.props.items;if(A.length===0)return null;var T=this.theme,D=this.props,z=D.id,Y=D.renderItem,W=D.renderItemData,U=D.highlightedSectionIndex,Z=D.highlightedItemIndex,ne=D.itemProps;return t.default.createElement(o.default,{items:A,itemProps:ne,renderItem:Y,renderItemData:W,highlightedItemIndex:U===null?Z:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:T,keyPrefix:"react-autowhatever-".concat(z,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var A=this.highlightedItem;if(A){var T=this.itemsContainer,D=A.offsetParent===T?A.offsetTop:A.offsetTop-T.offsetTop,z=T.scrollTop;D<z?z=D:D+A.offsetHeight>z+T.offsetHeight&&(z=D+A.offsetHeight-T.offsetHeight),z!==T.scrollTop&&(T.scrollTop=z)}}},{key:"render",value:function(){var A=this.theme,T=this.props,D=T.id,z=T.multiSection,Y=T.renderInputComponent,W=T.renderItemsContainer,U=T.highlightedSectionIndex,Z=T.highlightedItemIndex,ne=this.state.isInputFocused,se=z?this.renderSections():this.renderItems(),ie=se!==null,Je=this.getItemId(U,Z),fe="react-autowhatever-".concat(D),at=d({role:"combobox","aria-haspopup":"listbox","aria-owns":fe,"aria-expanded":ie},A("react-autowhatever-".concat(D,"-container"),"container",ie&&"containerOpen"),{},this.props.containerProps),ct=Y(d({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":fe,"aria-activedescendant":Je},A("react-autowhatever-".concat(D,"-input"),"input",ie&&"inputOpen",ne&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),Me=W({containerProps:d({id:fe,role:"listbox"},A("react-autowhatever-".concat(D,"-items-container"),"itemsContainer",ie&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:se});return t.default.createElement("div",at,ct,Me)}}]),F}(t.Component);e.default=_,N(_,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),N(_,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:H,renderItemsContainer:G,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:j,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:j,inputProps:j,itemProps:j,highlightedSectionIndex:null,highlightedItemIndex:null,theme:K})}(cr)),cr}var Ze={},_i;function dl(){if(_i)return Ze;_i=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.mapToAutowhateverTheme=Ze.defaultTheme=void 0;var e={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};Ze.defaultTheme=e;var t=function(r){var s={};for(var i in r)switch(i){case"suggestionsContainer":s.itemsContainer=r[i];break;case"suggestionsContainerOpen":s.itemsContainerOpen=r[i];break;case"suggestion":s.item=r[i];break;case"suggestionFirst":s.itemFirst=r[i];break;case"suggestionHighlighted":s.itemHighlighted=r[i];break;case"suggestionsList":s.itemsList=r[i];break;default:s[i]=r[i]}return s};return Ze.mapToAutowhateverTheme=t,Ze}var Oi;function hl(){return Oi||(Oi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=c(Qt()),n=o(tn()),r=o(sl()),s=o(fl()),i=dl();function o(_){return _&&_.__esModule?_:{default:_}}function u(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return u=function(){return _},_}function c(_){if(_&&_.__esModule)return _;if(_===null||a(_)!=="object"&&typeof _!="function")return{default:_};var y=u();if(y&&y.has(_))return y.get(_);var I={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in _)if(Object.prototype.hasOwnProperty.call(_,g)){var A=F?Object.getOwnPropertyDescriptor(_,g):null;A&&(A.get||A.set)?Object.defineProperty(I,g,A):I[g]=_[g]}return I.default=_,y&&y.set(_,I),I}function a(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(I){return typeof I}:a=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},a(_)}function l(_,y){var I=Object.keys(_);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(_);y&&(F=F.filter(function(g){return Object.getOwnPropertyDescriptor(_,g).enumerable})),I.push.apply(I,F)}return I}function d(_){for(var y=1;y<arguments.length;y++){var I=arguments[y]!=null?arguments[y]:{};y%2?l(Object(I),!0).forEach(function(F){k(_,F,I[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(I)):l(Object(I)).forEach(function(F){Object.defineProperty(_,F,Object.getOwnPropertyDescriptor(I,F))})}return _}function f(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function h(_,y){for(var I=0;I<y.length;I++){var F=y[I];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(_,F.key,F)}}function p(_,y,I){return y&&h(_.prototype,y),_}function m(_){return function(){var y=w(_),I;if(C()){var F=w(this).constructor;I=Reflect.construct(y,arguments,F)}else I=y.apply(this,arguments);return S(this,I)}}function S(_,y){return y&&(a(y)==="object"||typeof y=="function")?y:v(_)}function v(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(_){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},w(_)}function E(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),y&&M(_,y)}function M(_,y){return M=Object.setPrototypeOf||function(F,g){return F.__proto__=g,F},M(_,y)}function k(_,y,I){return y in _?Object.defineProperty(_,y,{value:I,enumerable:!0,configurable:!0,writable:!0}):_[y]=I,_}var L=function(){return!0},O=function(y){return y.trim().length>0},b=function(y){var I=y.containerProps,F=y.children;return t.default.createElement("div",I,F)},x="suggestions-revealed",P="suggestions-updated",$="suggestion-selected",N="input-focused",j="input-changed",H="input-blurred",G="escape-pressed",K=function(_){E(I,_);var y=m(I);function I(F){var g,A=F.alwaysRenderSuggestions;return f(this,I),g=y.call(this),k(v(g),"onDocumentMouseDown",function(T){g.justClickedOnSuggestionsContainer=!1;for(var D=T.detail&&T.detail.target||T.target;D!==null&&D!==document;){if(D.getAttribute&&D.getAttribute("data-suggestion-index")!==null)return;if(D===g.suggestionsContainer){g.justClickedOnSuggestionsContainer=!0;return}D=D.parentNode}}),k(v(g),"storeAutowhateverRef",function(T){T!==null&&(g.autowhatever=T)}),k(v(g),"onSuggestionMouseEnter",function(T,D){var z=D.sectionIndex,Y=D.itemIndex;g.updateHighlightedSuggestion(z,Y),T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!0),g.justMouseEntered=!0,setTimeout(function(){g.justMouseEntered=!1})}),k(v(g),"highlightFirstSuggestion",function(){g.updateHighlightedSuggestion(g.props.multiSection?0:null,0)}),k(v(g),"onDocumentMouseUp",function(){g.pressedSuggestion&&!g.justSelectedSuggestion&&g.input.focus(),g.pressedSuggestion=null}),k(v(g),"onSuggestionMouseDown",function(T){g.justSelectedSuggestion||(g.justSelectedSuggestion=!0,g.pressedSuggestion=T.target)}),k(v(g),"onSuggestionsClearRequested",function(){var T=g.props.onSuggestionsClearRequested;T&&T()}),k(v(g),"onSuggestionSelected",function(T,D){var z=g.props,Y=z.alwaysRenderSuggestions,W=z.onSuggestionSelected,U=z.onSuggestionsFetchRequested;W&&W(T,D);var Z=g.props.shouldKeepSuggestionsOnSelect(D.suggestion);Y||Z?U({value:D.suggestionValue,reason:$}):g.onSuggestionsClearRequested(),g.resetHighlightedSuggestion()}),k(v(g),"onSuggestionClick",function(T){var D=g.props,z=D.alwaysRenderSuggestions,Y=D.focusInputOnSuggestionClick,W=g.getSuggestionIndices(g.findSuggestionElement(T.target)),U=W.sectionIndex,Z=W.suggestionIndex,ne=g.getSuggestion(U,Z),se=g.props.getSuggestionValue(ne);g.maybeCallOnChange(T,se,"click"),g.onSuggestionSelected(T,{suggestion:ne,suggestionValue:se,suggestionIndex:Z,sectionIndex:U,method:"click"});var ie=g.props.shouldKeepSuggestionsOnSelect(ne);z||ie||g.closeSuggestions(),Y===!0?g.input.focus():g.onBlur(),setTimeout(function(){g.justSelectedSuggestion=!1})}),k(v(g),"onBlur",function(){var T=g.props,D=T.inputProps,z=T.shouldRenderSuggestions,Y=D.value,W=D.onBlur,U=g.getHighlightedSuggestion(),Z=z(Y,H);g.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Z}),W&&W(g.blurEvent,{highlightedSuggestion:U})}),k(v(g),"onSuggestionMouseLeave",function(T){g.resetHighlightedSuggestion(!1),g.justSelectedSuggestion&&T.target===g.pressedSuggestion&&(g.justSelectedSuggestion=!1)}),k(v(g),"onSuggestionTouchStart",function(){g.justSelectedSuggestion=!0}),k(v(g),"onSuggestionTouchMove",function(){g.justSelectedSuggestion=!1,g.pressedSuggestion=null,g.input.focus()}),k(v(g),"itemProps",function(T){var D=T.sectionIndex,z=T.itemIndex;return{"data-section-index":D,"data-suggestion-index":z,onMouseEnter:g.onSuggestionMouseEnter,onMouseLeave:g.onSuggestionMouseLeave,onMouseDown:g.onSuggestionMouseDown,onTouchStart:g.onSuggestionTouchStart,onTouchMove:g.onSuggestionTouchMove,onClick:g.onSuggestionClick}}),k(v(g),"renderSuggestionsContainer",function(T){var D=T.containerProps,z=T.children,Y=g.props.renderSuggestionsContainer;return Y({containerProps:D,children:z,query:g.getQuery()})}),g.state={isFocused:!1,isCollapsed:!A,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},g.justPressedUpDown=!1,g.justMouseEntered=!1,g.pressedSuggestion=null,g}return p(I,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(g){var A=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!g.highlightFirstSuggestion;(0,r.default)(g.suggestions,this.props.suggestions)?g.highlightFirstSuggestion&&g.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():A&&this.resetHighlightedSuggestion():this.willRenderSuggestions(g,P)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),A&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(g,A){var T=this.props,D=T.suggestions,z=T.onSuggestionHighlighted,Y=T.highlightFirstSuggestion;if(!(0,r.default)(D,g.suggestions)&&D.length>0&&Y){this.highlightFirstSuggestion();return}if(z){var W=this.getHighlightedSuggestion(),U=A.highlightedSuggestion;W!=U&&z({suggestion:W})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(g,A,T){var D=this;this.setState(function(z){var Y=z.valueBeforeUpDown;return A===null?Y=null:Y===null&&typeof T<"u"&&(Y=T),{highlightedSectionIndex:g,highlightedSuggestionIndex:A,highlightedSuggestion:A===null?null:D.getSuggestion(g,A),valueBeforeUpDown:Y}})}},{key:"resetHighlightedSuggestion",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(A){var T=A.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:g?null:T}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(g,A){var T=this.props,D=T.suggestions,z=T.multiSection,Y=T.getSectionSuggestions;return z?Y(D[g])[A]:D[A]}},{key:"getHighlightedSuggestion",value:function(){var g=this.state,A=g.highlightedSectionIndex,T=g.highlightedSuggestionIndex;return T===null?null:this.getSuggestion(A,T)}},{key:"getSuggestionValueByIndex",value:function(g,A){var T=this.props.getSuggestionValue;return T(this.getSuggestion(g,A))}},{key:"getSuggestionIndices",value:function(g){var A=g.getAttribute("data-section-index"),T=g.getAttribute("data-suggestion-index");return{sectionIndex:typeof A=="string"?parseInt(A,10):null,suggestionIndex:parseInt(T,10)}}},{key:"findSuggestionElement",value:function(g){var A=g;do{if(A.getAttribute&&A.getAttribute("data-suggestion-index")!==null)return A;A=A.parentNode}while(A!==null);throw console.error("Clicked element:",g),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(g,A,T){var D=this.props.inputProps,z=D.value,Y=D.onChange;A!==z&&Y(g,{newValue:A,method:T})}},{key:"willRenderSuggestions",value:function(g,A){var T=g.suggestions,D=g.inputProps,z=g.shouldRenderSuggestions,Y=D.value;return T.length>0&&z(Y,A)}},{key:"getQuery",value:function(){var g=this.props.inputProps,A=g.value,T=this.state.valueBeforeUpDown;return(T===null?A:T).trim()}},{key:"render",value:function(){var g=this,A=this.props,T=A.suggestions,D=A.renderInputComponent,z=A.onSuggestionsFetchRequested,Y=A.renderSuggestion,W=A.inputProps,U=A.multiSection,Z=A.renderSectionTitle,ne=A.id,se=A.getSectionSuggestions,ie=A.theme,Je=A.getSuggestionValue,fe=A.alwaysRenderSuggestions,at=A.highlightFirstSuggestion,ct=A.containerProps,Me=this.state,uu=Me.isFocused,Ss=Me.isCollapsed,ws=Me.highlightedSectionIndex,Es=Me.highlightedSuggestionIndex,sn=Me.valueBeforeUpDown,on=fe?L:this.props.shouldRenderSuggestions,lt=W.value,xs=W.onFocus,_s=W.onKeyDown,au=this.willRenderSuggestions(this.props,"render"),un=fe||uu&&!Ss&&au,cu=un?T:[],lu=d({},W,{onFocus:function(re){if(!g.justSelectedSuggestion&&!g.justClickedOnSuggestionsContainer){var $e=on(lt,N);g.setState({isFocused:!0,isCollapsed:!$e}),xs&&xs(re),$e&&z({value:lt,reason:N})}},onBlur:function(re){if(g.justClickedOnSuggestionsContainer){g.input.focus();return}g.blurEvent=re,g.justSelectedSuggestion||(g.onBlur(),g.onSuggestionsClearRequested())},onChange:function(re){var $e=re.target.value,_t=on($e,j);g.maybeCallOnChange(re,$e,"type"),g.suggestionsContainer&&(g.suggestionsContainer.scrollTop=0),g.setState(d({},at?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!_t})),_t?z({value:$e,reason:j}):g.onSuggestionsClearRequested()},onKeyDown:function(re,$e){var _t=re.keyCode;switch(_t){case 40:case 38:if(Ss)on(lt,x)&&(z({value:lt,reason:x}),g.revealSuggestions(),re.preventDefault());else if(T.length>0){var Os=$e.newHighlightedSectionIndex,zn=$e.newHighlightedItemIndex,Gn;zn===null?Gn=sn===null?lt:sn:Gn=g.getSuggestionValueByIndex(Os,zn),g.updateHighlightedSuggestion(Os,zn,lt),g.maybeCallOnChange(re,Gn,_t===40?"down":"up"),re.preventDefault()}g.justPressedUpDown=!0,setTimeout(function(){g.justPressedUpDown=!1});break;case 13:{if(re.keyCode===229)break;var Kn=g.getHighlightedSuggestion();if(un&&!fe&&g.closeSuggestions(),Kn!=null){re.preventDefault();var Is=Je(Kn);g.maybeCallOnChange(re,Is,"enter"),g.onSuggestionSelected(re,{suggestion:Kn,suggestionValue:Is,suggestionIndex:Es,sectionIndex:ws,method:"enter"}),g.justSelectedSuggestion=!0,setTimeout(function(){g.justSelectedSuggestion=!1})}break}case 27:{un&&re.preventDefault();var As=un&&!fe;if(sn===null){if(!As){var Yn="";g.maybeCallOnChange(re,Yn,"escape"),on(Yn,G)?z({value:Yn,reason:G}):g.onSuggestionsClearRequested()}}else g.maybeCallOnChange(re,sn,"escape");As?(g.onSuggestionsClearRequested(),g.closeSuggestions()):g.resetHighlightedSuggestion();break}}_s&&_s(re)}}),fu={query:this.getQuery()};return t.default.createElement(s.default,{multiSection:U,items:cu,renderInputComponent:D,renderItemsContainer:this.renderSuggestionsContainer,renderItem:Y,renderItemData:fu,renderSectionTitle:Z,getSectionItems:se,highlightedSectionIndex:ws,highlightedItemIndex:Es,containerProps:ct,inputProps:lu,itemProps:this.itemProps,theme:(0,i.mapToAutowhateverTheme)(ie),id:ne,ref:this.storeAutowhateverRef})}}]),I}(t.Component);e.default=K,k(K,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(y,I){var F=y[I];if(typeof F!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(y,I){var F=y[I];if(y.alwaysRenderSuggestions===!1&&typeof F!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(y,I){var F=y[I];if(!F)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call(F,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call(F,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(y,I){var F=y[I];if(y.multiSection===!0&&typeof F!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(y,I){var F=y[I];if(y.multiSection===!0&&typeof F!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),k(K,"defaultProps",{renderSuggestionsContainer:b,shouldRenderSuggestions:O,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:i.defaultTheme,id:"1",containerProps:{}})}(sr)),sr}var mr,Ii;function gl(){return Ii||(Ii=1,mr=hl().default),mr}var pl=gl();const ml=qi(pl),yl=e=>{const[t,n]=R.useState([]),r=({value:i})=>n(e.getSuggestions(i)),s=(i,{isHighlighted:o})=>V.jsx("div",{"data-highlighted":o?"true":void 0,children:i});return V.jsx(ml,{suggestions:t,onSuggestionSelected:(i,o)=>e.onSelect&&e.onSelect(o.suggestion),onSuggestionsFetchRequested:r,onSuggestionsClearRequested:()=>n([]),getSuggestionValue:i=>i,renderSuggestionsContainer:({containerProps:i,children:o})=>R.Children.toArray(o).length>0?R.createElement("div",{...i,key:i.key,className:"react-autosuggest"},o):null,renderSuggestion:s,containerProps:{className:"relative"},inputProps:{disabled:e.disabled,placeholder:e.placeholder,value:e.value||"",onBlur:e.onBlur,onChange:(i,{newValue:o})=>e.onChange&&e.onChange(o),onFocus:e.onFocus,onKeyDown:e.onKeyDown}})};var Rt={},Ai;function vl(){if(Ai)return Rt;Ai=1,Rt.remove=i;for(var e=[{base:" ",chars:""},{base:"0",chars:""},{base:"A",chars:""},{base:"AA",chars:""},{base:"AE",chars:""},{base:"AO",chars:""},{base:"AU",chars:""},{base:"AV",chars:""},{base:"AY",chars:""},{base:"B",chars:""},{base:"C",chars:"C"},{base:"D",chars:""},{base:"Dh",chars:""},{base:"DZ",chars:""},{base:"Dz",chars:""},{base:"E",chars:""},{base:"F",chars:""},{base:"G",chars:""},{base:"H",chars:""},{base:"I",chars:""},{base:"J",chars:""},{base:"K",chars:""},{base:"L",chars:""},{base:"LJ",chars:""},{base:"Lj",chars:""},{base:"M",chars:""},{base:"N",chars:""},{base:"NJ",chars:""},{base:"Nj",chars:""},{base:"O",chars:""},{base:"OE",chars:""},{base:"OI",chars:""},{base:"OO",chars:""},{base:"OU",chars:""},{base:"P",chars:""},{base:"Q",chars:""},{base:"R",chars:""},{base:"S",chars:""},{base:"T",chars:""},{base:"Th",chars:""},{base:"TZ",chars:""},{base:"U",chars:""},{base:"V",chars:""},{base:"VY",chars:""},{base:"W",chars:""},{base:"X",chars:""},{base:"Y",chars:""},{base:"Z",chars:""},{base:"a",chars:""},{base:"aa",chars:""},{base:"ae",chars:""},{base:"ao",chars:""},{base:"au",chars:""},{base:"av",chars:""},{base:"ay",chars:""},{base:"b",chars:""},{base:"c",chars:""},{base:"d",chars:""},{base:"dh",chars:""},{base:"dz",chars:""},{base:"e",chars:""},{base:"f",chars:""},{base:"ff",chars:""},{base:"fi",chars:""},{base:"fl",chars:""},{base:"ffi",chars:""},{base:"ffl",chars:""},{base:"g",chars:""},{base:"h",chars:""},{base:"hv",chars:""},{base:"i",chars:""},{base:"j",chars:""},{base:"k",chars:""},{base:"l",chars:""},{base:"lj",chars:""},{base:"m",chars:""},{base:"n",chars:""},{base:"nj",chars:""},{base:"o",chars:""},{base:"oe",chars:""},{base:"oi",chars:""},{base:"oo",chars:""},{base:"ou",chars:""},{base:"p",chars:""},{base:"q",chars:""},{base:"r",chars:""},{base:"s",chars:""},{base:"ss",chars:""},{base:"t",chars:""},{base:"th",chars:""},{base:"tz",chars:""},{base:"u",chars:""},{base:"v",chars:""},{base:"vy",chars:""},{base:"w",chars:""},{base:"x",chars:""},{base:"y",chars:""},{base:"z",chars:""}],t={},n=0;n<e.length;n+=1)for(var r=e[n].chars,s=0;s<r.length;s+=1)t[r[s]]=e[n].base;function i(o){return o.replace(/[^\u0000-\u007e]/g,function(u){return t[u]||u})}return Rt.replacementList=e,Rt.diacriticsMap=t,Rt}var bl=vl();const jt=qi(bl);function Le(e){return Array.isArray?Array.isArray(e):jo(e)==="[object Array]"}const Sl=1/0;function wl(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Sl?"-0":t}function El(e){return e==null?"":wl(e)}function Ce(e){return typeof e=="string"}function $o(e){return typeof e=="number"}function xl(e){return e===!0||e===!1||_l(e)&&jo(e)=="[object Boolean]"}function ko(e){return typeof e=="object"}function _l(e){return ko(e)&&e!==null}function pe(e){return e!=null}function yr(e){return!e.trim().length}function jo(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ol="Incorrect 'index' type",Il=e=>`Invalid value for key ${e}`,Al=e=>`Pattern length exceeds max of ${e}.`,Cl=e=>`Missing ${e} property in key`,Rl=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ci=Object.prototype.hasOwnProperty;class Pl{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=No(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function No(e){let t=null,n=null,r=null,s=1,i=null;if(Ce(e)||Le(e))r=e,t=Ri(e),n=kr(e);else{if(!Ci.call(e,"name"))throw new Error(Cl("name"));const o=e.name;if(r=o,Ci.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(Rl(o));t=Ri(o),n=kr(o),i=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:i}}function Ri(e){return Le(e)?e:e.split(".")}function kr(e){return Le(e)?e.join("."):e}function Fl(e,t){let n=[],r=!1;const s=(i,o,u)=>{if(pe(i))if(!o[u])n.push(i);else{let c=o[u];const a=i[c];if(!pe(a))return;if(u===o.length-1&&(Ce(a)||$o(a)||xl(a)))n.push(El(a));else if(Le(a)){r=!0;for(let l=0,d=a.length;l<d;l+=1)s(a[l],o,u+1)}else o.length&&s(a,o,u+1)}};return s(e,Ce(t)?t.split("."):t,0),r?n:n[0]}const Tl={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Dl={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Ml={location:0,threshold:.6,distance:100},$l={useExtendedSearch:!1,getFn:Fl,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var X={...Dl,...Tl,...Ml,...$l};const kl=/[^ ]+/g;function jl(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const i=s.match(kl).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*e),u=parseFloat(Math.round(o*r)/r);return n.set(i,u),u},clear(){n.clear()}}}class ds{constructor({getFn:t=X.getFn,fieldNormWeight:n=X.fieldNormWeight}={}){this.norm=jl(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ce(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ce(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!pe(t)||yr(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(pe(o)){if(Le(o)){let u=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:a,value:l}=c.pop();if(pe(l))if(Ce(l)&&!yr(l)){let d={v:l,i:a,n:this.norm.get(l)};u.push(d)}else Le(l)&&l.forEach((d,f)=>{c.push({nestedArrIndex:f,value:d})})}r.$[i]=u}else if(Ce(o)&&!yr(o)){let u={v:o,n:this.norm.get(o)};r.$[i]=u}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Lo(e,t,{getFn:n=X.getFn,fieldNormWeight:r=X.fieldNormWeight}={}){const s=new ds({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(No)),s.setSources(t),s.create(),s}function Nl(e,{getFn:t=X.getFn,fieldNormWeight:n=X.fieldNormWeight}={}){const{keys:r,records:s}=e,i=new ds({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function dn(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=X.distance,ignoreLocation:i=X.ignoreLocation}={}){const o=t/e.length;if(i)return o;const u=Math.abs(r-n);return s?o+u/s:u?1:o}function Ll(e=[],t=X.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=e.length;i<o;i+=1){let u=e[i];u&&r===-1?r=i:!u&&r!==-1&&(s=i-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const et=32;function Bl(e,t,n,{location:r=X.location,distance:s=X.distance,threshold:i=X.threshold,findAllMatches:o=X.findAllMatches,minMatchCharLength:u=X.minMatchCharLength,includeMatches:c=X.includeMatches,ignoreLocation:a=X.ignoreLocation}={}){if(t.length>et)throw new Error(Al(et));const l=t.length,d=e.length,f=Math.max(0,Math.min(r,d));let h=i,p=f;const m=u>1||c,S=m?Array(d):[];let v;for(;(v=e.indexOf(t,p))>-1;){let L=dn(t,{currentLocation:v,expectedLocation:f,distance:s,ignoreLocation:a});if(h=Math.min(L,h),p=v+l,m){let O=0;for(;O<l;)S[v+O]=1,O+=1}}p=-1;let C=[],w=1,E=l+d;const M=1<<l-1;for(let L=0;L<l;L+=1){let O=0,b=E;for(;O<b;)dn(t,{errors:L,currentLocation:f+b,expectedLocation:f,distance:s,ignoreLocation:a})<=h?O=b:E=b,b=Math.floor((E-O)/2+O);E=b;let x=Math.max(1,f-b+1),P=o?d:Math.min(f+b,d)+l,$=Array(P+2);$[P+1]=(1<<L)-1;for(let j=P;j>=x;j-=1){let H=j-1,G=n[e.charAt(H)];if(m&&(S[H]=+!!G),$[j]=($[j+1]<<1|1)&G,L&&($[j]|=(C[j+1]|C[j])<<1|1|C[j+1]),$[j]&M&&(w=dn(t,{errors:L,currentLocation:H,expectedLocation:f,distance:s,ignoreLocation:a}),w<=h)){if(h=w,p=H,p<=f)break;x=Math.max(1,2*f-p)}}if(dn(t,{errors:L+1,currentLocation:f,expectedLocation:f,distance:s,ignoreLocation:a})>h)break;C=$}const k={isMatch:p>=0,score:Math.max(.001,w)};if(m){const L=Ll(S,u);L.length?c&&(k.indices=L):k.isMatch=!1}return k}function ql(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class Bo{constructor(t,{location:n=X.location,threshold:r=X.threshold,distance:s=X.distance,includeMatches:i=X.includeMatches,findAllMatches:o=X.findAllMatches,minMatchCharLength:u=X.minMatchCharLength,isCaseSensitive:c=X.isCaseSensitive,ignoreLocation:a=X.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:c,ignoreLocation:a},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(f,h)=>{this.chunks.push({pattern:f,alphabet:ql(f),startIndex:h})},d=this.pattern.length;if(d>et){let f=0;const h=d%et,p=d-h;for(;f<p;)l(this.pattern.substr(f,et),f),f+=et;if(h){const m=d-et;l(this.pattern.substr(m),m)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:s,distance:i,threshold:o,findAllMatches:u,minMatchCharLength:c,ignoreLocation:a}=this.options;let l=[],d=0,f=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:S})=>{const{isMatch:v,score:C,indices:w}=Bl(t,p,m,{location:s+S,distance:i,threshold:o,findAllMatches:u,minMatchCharLength:c,includeMatches:r,ignoreLocation:a});v&&(f=!0),d+=C,v&&w&&(l=[...l,...w])});let h={isMatch:f,score:f?d/this.chunks.length:1};return f&&r&&(h.indices=l),h}}class Qe{constructor(t){this.pattern=t}static isMultiMatch(t){return Pi(t,this.multiRegex)}static isSingleMatch(t){return Pi(t,this.singleRegex)}search(){}}function Pi(e,t){const n=e.match(t);return n?n[1]:null}class Ul extends Qe{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Hl extends Qe{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Vl extends Qe{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Wl extends Qe{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class zl extends Qe{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Gl extends Qe{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class qo extends Qe{constructor(t,{location:n=X.location,threshold:r=X.threshold,distance:s=X.distance,includeMatches:i=X.includeMatches,findAllMatches:o=X.findAllMatches,minMatchCharLength:u=X.minMatchCharLength,isCaseSensitive:c=X.isCaseSensitive,ignoreLocation:a=X.ignoreLocation}={}){super(t),this._bitapSearch=new Bo(t,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:c,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Uo extends Qe{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const jr=[Ul,Uo,Vl,Wl,Gl,zl,Hl,qo],Fi=jr.length,Kl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Yl="|";function Ql(e,t={}){return e.split(Yl).map(n=>{let r=n.trim().split(Kl).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const u=r[i];let c=!1,a=-1;for(;!c&&++a<Fi;){const l=jr[a];let d=l.isMultiMatch(u);d&&(s.push(new l(d,t)),c=!0)}if(!c)for(a=-1;++a<Fi;){const l=jr[a];let d=l.isSingleMatch(u);if(d){s.push(new l(d,t));break}}}return s})}const Xl=new Set([qo.type,Uo.type]);class Jl{constructor(t,{isCaseSensitive:n=X.isCaseSensitive,includeMatches:r=X.includeMatches,minMatchCharLength:s=X.minMatchCharLength,ignoreLocation:i=X.ignoreLocation,findAllMatches:o=X.findAllMatches,location:u=X.location,threshold:c=X.threshold,distance:a=X.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:u,threshold:c,distance:a},this.pattern=n?t:t.toLowerCase(),this.query=Ql(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0,o=[],u=0;for(let c=0,a=n.length;c<a;c+=1){const l=n[c];o.length=0,i=0;for(let d=0,f=l.length;d<f;d+=1){const h=l[d],{isMatch:p,indices:m,score:S}=h.search(t);if(p){if(i+=1,u+=S,r){const v=h.constructor.type;Xl.has(v)?o=[...o,...m]:o.push(m)}}else{u=0,i=0,o.length=0;break}}if(i){let d={isMatch:!0,score:u/i};return r&&(d.indices=o),d}}return{isMatch:!1,score:1}}}const Nr=[];function Zl(...e){Nr.push(...e)}function Lr(e,t){for(let n=0,r=Nr.length;n<r;n+=1){let s=Nr[n];if(s.condition(e,t))return new s(e,t)}return new Bo(e,t)}const _n={AND:"$and",OR:"$or"},Br={PATH:"$path",PATTERN:"$val"},qr=e=>!!(e[_n.AND]||e[_n.OR]),ef=e=>!!e[Br.PATH],tf=e=>!Le(e)&&ko(e)&&!qr(e),Ti=e=>({[_n.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ho(e,t,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=ef(s);if(!o&&i.length>1&&!qr(s))return r(Ti(s));if(tf(s)){const c=o?s[Br.PATH]:i[0],a=o?s[Br.PATTERN]:s[c];if(!Ce(a))throw new Error(Il(c));const l={keyId:kr(c),pattern:a};return n&&(l.searcher=Lr(a,t)),l}let u={children:[],operator:i[0]};return i.forEach(c=>{const a=s[c];Le(a)&&a.forEach(l=>{u.children.push(r(l))})}),u};return qr(e)||(e=Ti(e)),r(e)}function nf(e,{ignoreFieldNorm:t=X.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const u=s?s.weight:null;r*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(t?1:i))}),n.score=r})}function rf(e,t){const n=e.matches;t.matches=[],pe(n)&&n.forEach(r=>{if(!pe(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function sf(e,t){t.score=e.score}function of(e,t,{includeMatches:n=X.includeMatches,includeScore:r=X.includeScore}={}){const s=[];return n&&s.push(rf),r&&s.push(sf),e.map(i=>{const{idx:o}=i,u={item:t[o],refIndex:o};return s.length&&s.forEach(c=>{c(i,u)}),u})}class Xe{constructor(t,n={},r){this.options={...X,...n},this.options.useExtendedSearch,this._keyStore=new Pl(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof ds))throw new Error(Ol);this._myIndex=n||Lo(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){pe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:u}=this.options;let c=Ce(t)?Ce(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return nf(c,{ignoreFieldNorm:u}),i&&c.sort(o),$o(n)&&n>-1&&(c=c.slice(0,n)),of(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=Lr(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:u})=>{if(!pe(i))return;const{isMatch:c,score:a,indices:l}=n.searchIn(i);c&&s.push({item:i,idx:o,matches:[{score:a,value:i,norm:u,indices:l}]})}),s}_searchLogical(t){const n=Ho(t,this.options),r=(u,c,a)=>{if(!u.children){const{keyId:d,searcher:f}=u,h=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:f});return h&&h.length?[{idx:a,item:c,matches:h}]:[]}const l=[];for(let d=0,f=u.children.length;d<f;d+=1){const h=u.children[d],p=r(h,c,a);if(p.length)l.push(...p);else if(u.operator===_n.AND)return[]}return l},s=this._myIndex.records,i={},o=[];return s.forEach(({$:u,i:c})=>{if(pe(u)){let a=r(n,u,c);a.length&&(i[c]||(i[c]={idx:c,item:u,matches:[]},o.push(i[c])),a.forEach(({matches:l})=>{i[c].matches.push(...l)}))}}),o}_searchObjectList(t){const n=Lr(t,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:u})=>{if(!pe(o))return;let c=[];r.forEach((a,l)=>{c.push(...this._findMatches({key:a,value:o[l],searcher:n}))}),c.length&&i.push({idx:u,item:o,matches:c})}),i}_findMatches({key:t,value:n,searcher:r}){if(!pe(n))return[];let s=[];if(Le(n))n.forEach(({v:i,i:o,n:u})=>{if(!pe(i))return;const{isMatch:c,score:a,indices:l}=r.searchIn(i);c&&s.push({score:a,key:t,value:i,idx:o,norm:u,indices:l})});else{const{v:i,n:o}=n,{isMatch:u,score:c,indices:a}=r.searchIn(i);u&&s.push({score:c,key:t,value:i,norm:o,indices:a})}return s}}Xe.version="7.0.0";Xe.createIndex=Lo;Xe.parseIndex=Nl;Xe.config=X;Xe.parseQuery=Ho;Zl(Jl);const Vo=.3,uf=e=>{const n=[...new Set(e.reduce((r,s)=>{const i=s.bodies.filter(o=>o.purpose==="tagging"&&o.value);return[...r,...i.map(o=>o.value)]},[]))].map(r=>({value:r,normalized:jt.remove(r)}));return new Xe(n,{keys:["normalized"],shouldSort:!0,threshold:Vo})},af=()=>fetch("../../thesaurus/all-concepts-compact.json").then(e=>e.json()).then(e=>{e.sort();const t=e.map(n=>({value:n,normalized:jt.remove(n)}));return new Xe(t,{keys:["normalized"],shouldSort:!0,threshold:Vo})}),cf=(e,t="THESAURUS")=>{const[n,r]=R.useState(),s=R.useMemo(()=>new Map(e.map(c=>[c.id,c])),[e]);R.useEffect(()=>{if(t==="FROM_ANNOTATIONS"){const c=uf(e);r(c)}else af().then(r)},[t,e]);const i=R.useMemo(()=>{const c=e.map(a=>{const l=a.id,d=a.bodies.filter(f=>f.purpose==="tagging"&&f.value).map(f=>({value:f.value,normalized:jt.remove(f.value)}));return{annotationId:l,tags:d}}).filter(a=>a.tags.length>0);return new Xe(c,{keys:["tags.normalized"],shouldSort:!0,threshold:0})},[e]);return{search:(c,a)=>i.search(jt.remove(c),{limit:a||500}).map(l=>s.get(l.item.annotationId)).filter(Boolean),getSuggestions:(c,a)=>n?n.search(jt.remove(c),{limit:a||10}).map(l=>l.item.value):[]}},lf=e=>{const t=Pu(),[n,r]=R.useState(!0),{search:s,getSuggestions:i}=cf(t),[o,u]=R.useState(""),[c,a]=R.useState(),[l,d]=R.useState(0),[f,h]=R.useState(!1),p=cs([n],{from:{maxWidth:0,opacity:0},enter:{maxWidth:120,opacity:1},leave:{maxWidth:0,opacity:1},config:{duration:250,easing:kn.easeInOutCubic}});R.useEffect(()=>{if(o){const w=s(o);e.sorter&&w.sort(e.sorter),a(w),w.length>0?d(1):d(0),e.onSearch(w)}else a(void 0),d(1),e.onSearch([])},[o,e.sorter]),R.useEffect(()=>{if(!l||!c)return;const w=c[l-1];e.onHighlightResult(w)},[c,l]);const m=w=>{if(!c)return;const E=Math.min(Math.max(1,l+w),c.length);d(E)},S=()=>{u(""),a(void 0),d(1),r(!0),e.onClear()},v=w=>{w.key==="Enter"?f?m(1):h(!0):h(!1)},C=()=>{o||r(!0)};return V.jsxs("div",{className:"annotation-search",children:[V.jsx(vu,{size:20}),V.jsxs("div",{className:"searchbox-wrapper",children:[V.jsx(yl,{placeholder:"Search",value:o,onChange:u,onFocus:()=>r(!1),onBlur:C,onKeyDown:v,getSuggestions:i}),c&&V.jsxs("div",{className:"result-count",children:[l,"/",c.length]})]}),p((w,E)=>!E&&V.jsx(ls.div,{style:w,className:"collapsible",children:V.jsxs("div",{className:"actions",children:[V.jsx("button",{onClick:()=>m(-1),children:V.jsx(mu,{size:18})}),V.jsx("button",{onClick:()=>m(1),children:V.jsx(gu,{size:18})}),V.jsx("button",{onClick:S,children:V.jsx(zr,{size:18,strokeWidth:2.2})})]})}))]})},Od=e=>{const[t,n]=R.useState([]);return R.useEffect(()=>{e.onSearch(t)},[t]),V.jsxs("header",{children:[V.jsxs("div",{className:"header-left",children:[V.jsxs("a",{href:`../..${e.backToTab?`?tab=${e.backToTab}`:""}`,children:[V.jsx(pu,{}),V.jsx("span",{children:"Home"})]}),V.jsx("a",{href:"../../about",children:"About"}),V.jsx("a",{href:"../../toc/?tab=verses",children:"Texts"}),V.jsx("a",{href:"../../toc/?tab=images",children:"Images"})]}),V.jsxs("div",{className:"header-right",children:[V.jsx(lf,{sorter:e.searchSorter,onClear:e.onClearSearch,onHighlightResult:e.onHighlightSearchResult,onSearch:n}),V.jsx("button",{className:e.isRelatedVersesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedVerses,children:V.jsx(hu,{size:18})}),V.jsx("button",{className:e.isRelatedImagesOpen?"toggle active":"toggle",onClick:e.onToggleRelatedImages,children:V.jsx(yu,{size:18})})]})]})},Wo=e=>e.bodies.filter(t=>t.purpose==="tagging"&&t.value&&t.id).map(t=>({id:t.id,label:t.value})),ff=(e,t)=>{const n=new Set(e.map(o=>o.id)),s=t.map(o=>o.id).filter(o=>n.has(o)),i=new Set([...e,...t]);return s.length/i.size},zo=(e,t)=>{const n=(i,o)=>i.length===o.length&&i.every(u=>o.some(c=>c.id===u.id)),r=i=>{i.sort((o,u)=>u.common.length-o.common.length),i.forEach(o=>o.related.sort((u,c)=>c.score-u.score))},s=[];return t.forEach(i=>{const o=i.tags.filter(a=>e.some(l=>l.id===a.id)),u=ff(e,i.tags),c=s.find(({common:a})=>n(a,o));c?c.related=[...c.related,{annotation:i,score:u}]:s.push({common:o,related:[{annotation:i,score:u}]})}),r(s),s},Id=(e,t)=>{const n=[...e].filter(i=>i.width>0&&i.height>0);let r,s=Number.MAX_VALUE;return n.forEach(i=>{const o=i.top+i.height/2,u=Math.abs(o-t.y);u<s&&(s=u,r=i)}),r},Ad=e=>({length:1,item:t=>t===0?e:void 0,[Symbol.iterator]:function*(){for(let t=0;t<this.length;t++)yield this.item(t)}}),df=ke.createContext({}),Go=!0;function hf({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:s,circle:i,direction:o,duration:u,enableAnimation:c=Go,customHighlightBackground:a}){const l={};return o==="rtl"&&(l["--animation-direction"]="reverse"),typeof u=="number"&&(l["--animation-duration"]=`${u}s`),c||(l["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(l.width=n),(typeof r=="string"||typeof r=="number")&&(l.height=r),(typeof s=="string"||typeof s=="number")&&(l.borderRadius=s),i&&(l.borderRadius="50%"),typeof e<"u"&&(l["--base-color"]=e),typeof t<"u"&&(l["--highlight-color"]=t),typeof a=="string"&&(l["--custom-highlight-background"]=a),l}function gf({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:s,circle:i=!1,style:o,...u}){var c,a,l;const d=ke.useContext(df),f={...u};for(const[w,E]of Object.entries(u))typeof E>"u"&&delete f[w];const h={...d,...f,circle:i},p={...o,...hf(h)};let m="react-loading-skeleton";n&&(m+=` ${n}`);const S=(c=h.inline)!==null&&c!==void 0?c:!1,v=[],C=Math.ceil(e);for(let w=0;w<C;w++){let E=p;if(C>e&&w===C-1){const k=(a=E.width)!==null&&a!==void 0?a:"100%",L=e%1,O=typeof k=="number"?k*L:`calc(${k} * ${L})`;E={...E,width:O}}const M=ke.createElement("span",{className:m,style:E,key:w},"");S?v.push(M):v.push(ke.createElement(ke.Fragment,{key:w},M,ke.createElement("br",null)))}return ke.createElement("span",{className:r,"data-testid":s,"aria-live":"polite","aria-busy":(l=h.enableAnimation)!==null&&l!==void 0?l:Go},t?v.map((w,E)=>ke.createElement(t,{key:E},w)):v)}const pf=e=>{const[t,n]=R.useState(!1);return V.jsxs("a",{href:e.href,className:"thumbnail-wrapper",children:[!t&&V.jsx(gf,{}),V.jsx("img",{src:e.src.startsWith("/thumbnails")?`../..${e.src}`:e.src,style:{display:t?void 0:"none"},onLoad:()=>n(!0)})]})},Cd=e=>{const[t,n]=R.useState(!1),r=Zi(),s=R.useMemo(()=>e.annotation?Wo(e.annotation):[],[e.annotation]),i=R.useMemo(()=>zo(s,e.related||[]),[s,e.related]),o=cs([e.open&&r],{from:{width:t?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:kn.easeInCubic}});R.useLayoutEffect(()=>{setTimeout(()=>n(!0),1)},[]);const u=c=>c.id?c.slug===e.currentSlug?`#${c.id.substring(c.id.lastIndexOf("/")+1)}`:`../../image/${c.slug}/#${c.id.substring(c.id.lastIndexOf("/")+1)}`:c.slug===e.currentSlug?"#":`../../image/${c.slug}`;return o((c,a)=>a&&V.jsxs(ls.aside,{style:c,className:"related related-images",children:[V.jsx("button",{onClick:e.onClose,className:"close",children:V.jsx(zr,{size:20,strokeWidth:1.5})}),V.jsxs("div",{className:"related-verses-wrapper",children:[V.jsxs("h3",{children:["Images ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?V.jsx("ul",{children:i.map((l,d)=>l.related.map(({annotation:f})=>V.jsxs("li",{children:[V.jsxs("div",{className:"preview",children:[V.jsx(pf,{href:u(f),src:f.thumbnail}),V.jsx("div",{className:"taglist-wrapper",children:V.jsx("ul",{className:"taglist",children:f.tags.map(h=>V.jsx("li",{className:s.some(p=>p.id===h.id)?"common":void 0,children:r?.find(p=>p.id===h.id)?.label||h.label},h.id))})})]}),V.jsx("a",{href:u(f),children:f.image})]},`${d}-${f.id}`)))}):V.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},mf=e=>{const{prefix:t,quote:n,suffix:r}=e.value,[s,i]=R.useMemo(()=>{const u=t&&(t.endsWith("|")?t:t+" "),c=r&&(r?.startsWith("|")?r:" "+r);return[u,c]},[t,n,r]),o=u=>u.replace(/\|/g,"|&#8203;");return V.jsxs(V.Fragment,{children:[s&&V.jsx("span",{dangerouslySetInnerHTML:{__html:o(s)}}),V.jsx("a",{href:e.href,className:"verse-snippet-quote",dangerouslySetInnerHTML:{__html:o(n)}}),i&&V.jsx("span",{dangerouslySetInnerHTML:{__html:o(i)}})]})},Rd=e=>{const t=Zi(),[n,r]=R.useState(!1),s=R.useMemo(()=>e.annotation?Wo(e.annotation):[],[e.annotation]),i=R.useMemo(()=>zo(s,e.related||[]),[s,e.related]),o=cs([e.open],{from:{width:n?0:300},enter:{width:300},leave:{width:0},config:{duration:150,easing:kn.easeInCubic}});R.useLayoutEffect(()=>{setTimeout(()=>r(!0),10)},[]);const u=c=>c.slug===e.currentSlug?`#${c.id.substring(c.id.lastIndexOf("/")+1)}`:`../../verse/${c.slug}/#${c.id.substring(c.id.lastIndexOf("/")+1)}`;return o((c,a)=>a&&V.jsxs(ls.aside,{style:c,className:"related related-verses",children:[V.jsx("button",{onClick:e.onClose,className:"close",children:V.jsx(zr,{size:20,strokeWidth:1.5})}),V.jsxs("div",{className:"related-verses-wrapper",children:[V.jsxs("h3",{children:["Verses ",e.annotation&&`(${e.related?e.related.length:0})`]}),e.annotation?V.jsx("ul",{children:i.map(l=>l.related.map(({annotation:d})=>V.jsxs("li",{children:[V.jsx("ul",{className:"taglist",children:d.tags.map(f=>V.jsx("li",{className:s.some(h=>h.id===f.id)?"common":void 0,children:t?.find(h=>h.id===f.id)?.label||f.label},f.id))}),d.snippet&&V.jsx("p",{className:"snippet-preview",children:V.jsx(mf,{value:d.snippet,href:u(d)})}),V.jsx("a",{href:u(d),children:d.verse})]},d.id)))}):V.jsx("div",{className:"no-selection",children:"No annotation selected."})]})]}))},Pd=e=>{const t=e.relatedImages.length,n=e.relatedVerses.length,r=R.useMemo(()=>e.annotation.bodies.filter(s=>s.purpose==="tagging"),[e.annotation]);return V.jsx("div",{className:"annotation-popup",children:V.jsxs("div",{className:"tags",children:[V.jsx("div",{children:r.map(s=>s.value).join("  ")}),e.type==="VERSE"?V.jsxs("div",{className:"related",children:[n>0&&V.jsx("button",{onClick:e.onClickVerses,children:V.jsxs("span",{children:[n," other verse",n>1&&"s"]})}),t>0&&V.jsx("button",{onClick:e.onClickImages,children:V.jsxs("span",{children:[t," image",t>1&&"s"]})})]}):V.jsxs("div",{className:"related",children:[t>0&&V.jsx("button",{onClick:e.onClickImages,children:V.jsxs("span",{children:[t," other image",t>1&&"s"]})}),n>0&&V.jsx("button",{onClick:e.onClickVerses,children:V.jsxs("span",{children:[n," verse",n>1&&"s"]})})]})]})})};function Un(){return typeof window<"u"}function Et(e){return Ko(e)?(e.nodeName||"").toLowerCase():"#document"}function me(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function De(e){var t;return(t=(Ko(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ko(e){return Un()?e instanceof Node||e instanceof me(e).Node:!1}function le(e){return Un()?e instanceof Element||e instanceof me(e).Element:!1}function Te(e){return Un()?e instanceof HTMLElement||e instanceof me(e).HTMLElement:!1}function Di(e){return!Un()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof me(e).ShadowRoot}function nn(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=we(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function yf(e){return["table","td","th"].includes(Et(e))}function Hn(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function hs(e){const t=gs(),n=le(e)?we(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function vf(e){let t=Ye(e);for(;Te(t)&&!bt(t);){if(hs(t))return t;if(Hn(t))return null;t=Ye(t)}return null}function gs(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bt(e){return["html","body","#document"].includes(Et(e))}function we(e){return me(e).getComputedStyle(e)}function Vn(e){return le(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ye(e){if(Et(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Di(e)&&e.host||De(e);return Di(t)?t.host:t}function Yo(e){const t=Ye(e);return bt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Te(t)&&nn(t)?t:Yo(t)}function Yt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Yo(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=me(s);if(i){const u=Ur(o);return t.concat(o,o.visualViewport||[],nn(s)?s:[],u&&n?Yt(u):[])}return t.concat(s,Yt(s,[],n))}function Ur(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Be=Math.min,Re=Math.max,On=Math.round,hn=Math.floor,Pe=e=>({x:e,y:e}),bf={left:"right",right:"left",bottom:"top",top:"bottom"},Sf={start:"end",end:"start"};function Hr(e,t,n){return Re(e,Be(t,n))}function xt(e,t){return typeof e=="function"?e(t):e}function qe(e){return e.split("-")[0]}function rn(e){return e.split("-")[1]}function Qo(e){return e==="x"?"y":"x"}function ps(e){return e==="y"?"height":"width"}function it(e){return["top","bottom"].includes(qe(e))?"y":"x"}function ms(e){return Qo(it(e))}function wf(e,t,n){n===void 0&&(n=!1);const r=rn(e),s=ms(e),i=ps(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=In(o)),[o,In(o)]}function Ef(e){const t=In(e);return[Vr(e),t,Vr(t)]}function Vr(e){return e.replace(/start|end/g,t=>Sf[t])}function xf(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:o;default:return[]}}function _f(e,t,n,r){const s=rn(e);let i=xf(qe(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Vr)))),i}function In(e){return e.replace(/left|right|bottom|top/g,t=>bf[t])}function Of(e){return{top:0,right:0,bottom:0,left:0,...e}}function ys(e){return typeof e!="number"?Of(e):{top:e,right:e,bottom:e,left:e}}function St(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Mi(e,t,n){let{reference:r,floating:s}=e;const i=it(t),o=ms(t),u=ps(o),c=qe(t),a=i==="y",l=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[u]/2-s[u]/2;let h;switch(c){case"top":h={x:l,y:r.y-s.height};break;case"bottom":h={x:l,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(rn(t)){case"start":h[o]-=f*(n&&a?-1:1);break;case"end":h[o]+=f*(n&&a?-1:1);break}return h}const If=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,u=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let a=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:l,y:d}=Mi(a,r,c),f=r,h={},p=0;for(let m=0;m<u.length;m++){const{name:S,fn:v}=u[m],{x:C,y:w,data:E,reset:M}=await v({x:l,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:a,platform:o,elements:{reference:e,floating:t}});l=C??l,d=w??d,h={...h,[S]:{...h[S],...E}},M&&p<=50&&(p++,typeof M=="object"&&(M.placement&&(f=M.placement),M.rects&&(a=M.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):M.rects),{x:l,y:d}=Mi(a,f,c)),m=-1)}return{x:l,y:d,placement:f,strategy:s,middlewareData:h}};async function Xo(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:u,strategy:c}=e,{boundary:a="clippingAncestors",rootBoundary:l="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=xt(t,e),p=ys(h),S=u[f?d==="floating"?"reference":"floating":d],v=St(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:a,rootBoundary:l,strategy:c})),C=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),E=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},M=St(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:w,strategy:c}):C);return{top:(v.top-M.top+p.top)/E.y,bottom:(M.bottom-v.bottom+p.bottom)/E.y,left:(v.left-M.left+p.left)/E.x,right:(M.right-v.right+p.right)/E.x}}const Af=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:u,middlewareData:c}=t,{element:a,padding:l=0}=xt(e,t)||{};if(a==null)return{};const d=ys(l),f={x:n,y:r},h=ms(s),p=ps(h),m=await o.getDimensions(a),S=h==="y",v=S?"top":"left",C=S?"bottom":"right",w=S?"clientHeight":"clientWidth",E=i.reference[p]+i.reference[h]-f[h]-i.floating[p],M=f[h]-i.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a));let L=k?k[w]:0;(!L||!await(o.isElement==null?void 0:o.isElement(k)))&&(L=u.floating[w]||i.floating[p]);const O=E/2-M/2,b=L/2-m[p]/2-1,x=Be(d[v],b),P=Be(d[C],b),$=x,N=L-m[p]-P,j=L/2-m[p]/2+O,H=Hr($,j,N),G=!c.arrow&&rn(s)!=null&&j!==H&&i.reference[p]/2-(j<$?x:P)-m[p]/2<0,K=G?j<$?j-$:j-N:0;return{[h]:f[h]+K,data:{[h]:H,centerOffset:j-H-K,...G&&{alignmentOffset:K}},reset:G}}}),Cf=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:u,platform:c,elements:a}=t,{mainAxis:l=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...S}=xt(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=qe(s),C=it(u),w=qe(u)===u,E=await(c.isRTL==null?void 0:c.isRTL(a.floating)),M=f||(w||!m?[In(u)]:Ef(u)),k=p!=="none";!f&&k&&M.push(..._f(u,m,p,E));const L=[u,...M],O=await Xo(t,S),b=[];let x=((r=i.flip)==null?void 0:r.overflows)||[];if(l&&b.push(O[v]),d){const j=wf(s,o,E);b.push(O[j[0]],O[j[1]])}if(x=[...x,{placement:s,overflows:b}],!b.every(j=>j<=0)){var P,$;const j=(((P=i.flip)==null?void 0:P.index)||0)+1,H=L[j];if(H)return{data:{index:j,overflows:x},reset:{placement:H}};let G=($=x.filter(K=>K.overflows[0]<=0).sort((K,_)=>K.overflows[1]-_.overflows[1])[0])==null?void 0:$.placement;if(!G)switch(h){case"bestFit":{var N;const K=(N=x.filter(_=>{if(k){const y=it(_.placement);return y===C||y==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(y=>y>0).reduce((y,I)=>y+I,0)]).sort((_,y)=>_[1]-y[1])[0])==null?void 0:N[0];K&&(G=K);break}case"initialPlacement":G=u;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function Jo(e){const t=Be(...e.map(i=>i.left)),n=Be(...e.map(i=>i.top)),r=Re(...e.map(i=>i.right)),s=Re(...e.map(i=>i.bottom));return{x:t,y:n,width:r-t,height:s-n}}function Rf(e){const t=e.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<t.length;s++){const i=t[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>St(Jo(s)))}const Pf=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=t,{padding:u=2,x:c,y:a}=xt(e,t),l=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),d=Rf(l),f=St(Jo(l)),h=ys(u);function p(){if(d.length===2&&d[0].left>d[1].right&&c!=null&&a!=null)return d.find(S=>c>S.left-h.left&&c<S.right+h.right&&a>S.top-h.top&&a<S.bottom+h.bottom)||f;if(d.length>=2){if(it(n)==="y"){const x=d[0],P=d[d.length-1],$=qe(n)==="top",N=x.top,j=P.bottom,H=$?x.left:P.left,G=$?x.right:P.right,K=G-H,_=j-N;return{top:N,bottom:j,left:H,right:G,width:K,height:_,x:H,y:N}}const S=qe(n)==="left",v=Re(...d.map(x=>x.right)),C=Be(...d.map(x=>x.left)),w=d.filter(x=>S?x.left===C:x.right===v),E=w[0].top,M=w[w.length-1].bottom,k=C,L=v,O=L-k,b=M-E;return{top:E,bottom:M,left:k,right:L,width:O,height:b,x:k,y:E}}return f}const m=await i.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return s.reference.x!==m.reference.x||s.reference.y!==m.reference.y||s.reference.width!==m.reference.width||s.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Ff(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=qe(n),u=rn(n),c=it(n)==="y",a=["left","top"].includes(o)?-1:1,l=i&&c?-1:1,d=xt(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return u&&typeof p=="number"&&(h=u==="end"?p*-1:p),c?{x:h*l,y:f*a}:{x:f*a,y:h*l}}const Tf=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:u}=t,c=await Ff(t,e);return o===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},Df=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:u={fn:S=>{let{x:v,y:C}=S;return{x:v,y:C}}},...c}=xt(e,t),a={x:n,y:r},l=await Xo(t,c),d=it(qe(s)),f=Qo(d);let h=a[f],p=a[d];if(i){const S=f==="y"?"top":"left",v=f==="y"?"bottom":"right",C=h+l[S],w=h-l[v];h=Hr(C,h,w)}if(o){const S=d==="y"?"top":"left",v=d==="y"?"bottom":"right",C=p+l[S],w=p-l[v];p=Hr(C,p,w)}const m=u.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:o}}}}}};function Zo(e){const t=we(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Te(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,u=On(n)!==i||On(r)!==o;return u&&(n=i,r=o),{width:n,height:r,$:u}}function vs(e){return le(e)?e:e.contextElement}function yt(e){const t=vs(e);if(!Te(t))return Pe(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=Zo(t);let o=(i?On(n.width):n.width)/r,u=(i?On(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!u||!Number.isFinite(u))&&(u=1),{x:o,y:u}}const Mf=Pe(0);function eu(e){const t=me(e);return!gs()||!t.visualViewport?Mf:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $f(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==me(e)?!1:t}function ot(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=vs(e);let o=Pe(1);t&&(r?le(r)&&(o=yt(r)):o=yt(e));const u=$f(i,n,r)?eu(i):Pe(0);let c=(s.left+u.x)/o.x,a=(s.top+u.y)/o.y,l=s.width/o.x,d=s.height/o.y;if(i){const f=me(i),h=r&&le(r)?me(r):r;let p=f,m=Ur(p);for(;m&&r&&h!==p;){const S=yt(m),v=m.getBoundingClientRect(),C=we(m),w=v.left+(m.clientLeft+parseFloat(C.paddingLeft))*S.x,E=v.top+(m.clientTop+parseFloat(C.paddingTop))*S.y;c*=S.x,a*=S.y,l*=S.x,d*=S.y,c+=w,a+=E,p=me(m),m=Ur(p)}}return St({width:l,height:d,x:c,y:a})}function bs(e,t){const n=Vn(e).scrollLeft;return t?t.left+n:ot(De(e)).left+n}function tu(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:bs(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function kf(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=De(r),u=t?Hn(t.floating):!1;if(r===o||u&&i)return n;let c={scrollLeft:0,scrollTop:0},a=Pe(1);const l=Pe(0),d=Te(r);if((d||!d&&!i)&&((Et(r)!=="body"||nn(o))&&(c=Vn(r)),Te(r))){const h=ot(r);a=yt(r),l.x=h.x+r.clientLeft,l.y=h.y+r.clientTop}const f=o&&!d&&!i?tu(o,c,!0):Pe(0);return{width:n.width*a.x,height:n.height*a.y,x:n.x*a.x-c.scrollLeft*a.x+l.x+f.x,y:n.y*a.y-c.scrollTop*a.y+l.y+f.y}}function jf(e){return Array.from(e.getClientRects())}function Nf(e){const t=De(e),n=Vn(e),r=e.ownerDocument.body,s=Re(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Re(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bs(e);const u=-n.scrollTop;return we(r).direction==="rtl"&&(o+=Re(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:u}}function Lf(e,t){const n=me(e),r=De(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,u=0,c=0;if(s){i=s.width,o=s.height;const a=gs();(!a||a&&t==="fixed")&&(u=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:u,y:c}}function Bf(e,t){const n=ot(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Te(e)?yt(e):Pe(1),o=e.clientWidth*i.x,u=e.clientHeight*i.y,c=s*i.x,a=r*i.y;return{width:o,height:u,x:c,y:a}}function $i(e,t,n){let r;if(t==="viewport")r=Lf(e,n);else if(t==="document")r=Nf(De(e));else if(le(t))r=Bf(t,n);else{const s=eu(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return St(r)}function nu(e,t){const n=Ye(e);return n===t||!le(n)||bt(n)?!1:we(n).position==="fixed"||nu(n,t)}function qf(e,t){const n=t.get(e);if(n)return n;let r=Yt(e,[],!1).filter(u=>le(u)&&Et(u)!=="body"),s=null;const i=we(e).position==="fixed";let o=i?Ye(e):e;for(;le(o)&&!bt(o);){const u=we(o),c=hs(o);!c&&u.position==="fixed"&&(s=null),(i?!c&&!s:!c&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||nn(o)&&!c&&nu(e,o))?r=r.filter(l=>l!==o):s=u,o=Ye(o)}return t.set(e,r),r}function Uf(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Hn(t)?[]:qf(t,this._c):[].concat(n),r],u=o[0],c=o.reduce((a,l)=>{const d=$i(t,l,s);return a.top=Re(d.top,a.top),a.right=Be(d.right,a.right),a.bottom=Be(d.bottom,a.bottom),a.left=Re(d.left,a.left),a},$i(t,u,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Hf(e){const{width:t,height:n}=Zo(e);return{width:t,height:n}}function Vf(e,t,n){const r=Te(t),s=De(t),i=n==="fixed",o=ot(e,!0,i,t);let u={scrollLeft:0,scrollTop:0};const c=Pe(0);if(r||!r&&!i)if((Et(t)!=="body"||nn(s))&&(u=Vn(t)),r){const f=ot(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else s&&(c.x=bs(s));const a=s&&!r&&!i?tu(s,u):Pe(0),l=o.left+u.scrollLeft-c.x-a.x,d=o.top+u.scrollTop-c.y-a.y;return{x:l,y:d,width:o.width,height:o.height}}function vr(e){return we(e).position==="static"}function ki(e,t){if(!Te(e)||we(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return De(e)===n&&(n=n.ownerDocument.body),n}function ru(e,t){const n=me(e);if(Hn(e))return n;if(!Te(e)){let s=Ye(e);for(;s&&!bt(s);){if(le(s)&&!vr(s))return s;s=Ye(s)}return n}let r=ki(e,t);for(;r&&yf(r)&&vr(r);)r=ki(r,t);return r&&bt(r)&&vr(r)&&!hs(r)?n:r||vf(e)||n}const Wf=async function(e){const t=this.getOffsetParent||ru,n=this.getDimensions,r=await n(e.floating);return{reference:Vf(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zf(e){return we(e).direction==="rtl"}const Gf={convertOffsetParentRelativeRectToViewportRelativeRect:kf,getDocumentElement:De,getClippingRect:Uf,getOffsetParent:ru,getElementRects:Wf,getClientRects:jf,getDimensions:Hf,getScale:yt,isElement:le,isRTL:zf};function Kf(e,t){let n=null,r;const s=De(e);function i(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function o(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),i();const{left:a,top:l,width:d,height:f}=e.getBoundingClientRect();if(u||t(),!d||!f)return;const h=hn(l),p=hn(s.clientWidth-(a+d)),m=hn(s.clientHeight-(l+f)),S=hn(a),C={rootMargin:-h+"px "+-p+"px "+-m+"px "+-S+"px",threshold:Re(0,Be(1,c))||1};let w=!0;function E(M){const k=M[0].intersectionRatio;if(k!==c){if(!w)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,C)}n.observe(e)}return o(!0),i}function Fd(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,a=vs(e),l=s||i?[...a?Yt(a):[],...Yt(t)]:[];l.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=a&&u?Kf(a,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[C]=v;C&&C.target===a&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),a&&!c&&h.observe(a),h.observe(t));let p,m=c?ot(e):null;c&&S();function S(){const v=ot(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(S)}return n(),()=>{var v;l.forEach(C=>{s&&C.removeEventListener("scroll",n),i&&C.removeEventListener("resize",n)}),d?.(),(v=h)==null||v.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const Yf=Tf,Qf=Df,Xf=Cf,ji=Af,Jf=Pf,Zf=(e,t,n)=>{const r=new Map,s={platform:Gf,...n},i={...s.platform,_c:r};return If(e,t,{...s,platform:i})};var yn=typeof document<"u"?R.useLayoutEffect:R.useEffect;function An(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!An(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!An(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function su(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ni(e,t){const n=su(e);return Math.round(t*n)/n}function br(e){const t=R.useRef(e);return yn(()=>{t.current=e}),t}function ed(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:u=!0,whileElementsMounted:c,open:a}=e,[l,d]=R.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=R.useState(r);An(f,r)||h(r);const[p,m]=R.useState(null),[S,v]=R.useState(null),C=R.useCallback(_=>{_!==k.current&&(k.current=_,m(_))},[]),w=R.useCallback(_=>{_!==L.current&&(L.current=_,v(_))},[]),E=i||p,M=o||S,k=R.useRef(null),L=R.useRef(null),O=R.useRef(l),b=c!=null,x=br(c),P=br(s),$=br(a),N=R.useCallback(()=>{if(!k.current||!L.current)return;const _={placement:t,strategy:n,middleware:f};P.current&&(_.platform=P.current),Zf(k.current,L.current,_).then(y=>{const I={...y,isPositioned:$.current!==!1};j.current&&!An(O.current,I)&&(O.current=I,Ui.flushSync(()=>{d(I)}))})},[f,t,n,P,$]);yn(()=>{a===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,d(_=>({..._,isPositioned:!1})))},[a]);const j=R.useRef(!1);yn(()=>(j.current=!0,()=>{j.current=!1}),[]),yn(()=>{if(E&&(k.current=E),M&&(L.current=M),E&&M){if(x.current)return x.current(E,M,N);N()}},[E,M,N,x,b]);const H=R.useMemo(()=>({reference:k,floating:L,setReference:C,setFloating:w}),[C,w]),G=R.useMemo(()=>({reference:E,floating:M}),[E,M]),K=R.useMemo(()=>{const _={position:n,left:0,top:0};if(!G.floating)return _;const y=Ni(G.floating,l.x),I=Ni(G.floating,l.y);return u?{..._,transform:"translate("+y+"px, "+I+"px)",...su(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:y,top:I}},[n,u,G.floating,l.x,l.y]);return R.useMemo(()=>({...l,update:N,refs:H,elements:G,floatingStyles:K}),[l,N,H,G,K])}const td=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ji({element:r.current,padding:s}).fn(n):{}:r?ji({element:r,padding:s}).fn(n):{}}}},Td=(e,t)=>({...Yf(e),options:[e,t]}),Dd=(e,t)=>({...Qf(e),options:[e,t]}),Md=(e,t)=>({...Xf(e),options:[e,t]}),$d=(e,t)=>({...Jf(e),options:[e,t]}),kd=(e,t)=>({...td(e),options:[e,t]}),iu={...du},nd=iu.useInsertionEffect,rd=nd||(e=>e());function sd(e){const t=R.useRef(()=>{});return rd(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var Cn=typeof document<"u"?R.useLayoutEffect:R.useEffect;function Wr(){return Wr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wr.apply(this,arguments)}let Li=!1,id=0;const Bi=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+id++;function od(){const[e,t]=R.useState(()=>Li?Bi():void 0);return Cn(()=>{e==null&&t(Bi())},[]),R.useEffect(()=>{Li=!0},[]),e}const ud=iu.useId,ou=ud||od,jd=R.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:u=14,height:c=7,tipRadius:a=0,strokeWidth:l=0,staticOffset:d,stroke:f,d:h,style:{transform:p,...m}={},...S}=t,v=ou(),[C,w]=R.useState(!1);if(Cn(()=>{if(!s)return;we(s).direction==="rtl"&&w(!0)},[s]),!s)return null;const[E,M]=r.split("-"),k=E==="top"||E==="bottom";let L=d;(k&&o!=null&&o.x||!k&&o!=null&&o.y)&&(L=null);const O=l*2,b=O/2,x=u/2*(a/-8+1),P=c/2*a/4,$=!!h,N=L&&M==="end"?"bottom":"top";let j=L&&M==="end"?"right":"left";L&&C&&(j=M==="end"?"left":"right");const H=i?.x!=null?L||i.x:"",G=i?.y!=null?L||i.y:"",K=h||"M0,0"+(" H"+u)+(" L"+(u-x)+","+(c-P))+(" Q"+u/2+","+c+" "+x+","+(c-P))+" Z",_={top:$?"rotate(180deg)":"",left:$?"rotate(90deg)":"rotate(-90deg)",bottom:$?"":"rotate(180deg)",right:$?"rotate(-90deg)":"rotate(90deg)"}[E];return R.createElement("svg",Wr({},S,{"aria-hidden":!0,ref:n,width:$?u:u+O,height:u,viewBox:"0 0 "+u+" "+(c>u?c:u),style:{position:"absolute",pointerEvents:"none",[j]:H,[N]:G,[E]:k||$?"100%":"calc(100% - "+O/2+"px)",transform:[_,p].filter(y=>!!y).join(" "),...m}}),O>0&&R.createElement("path",{clipPath:"url(#"+v+")",fill:"none",stroke:f,strokeWidth:O+(h?0:1),d:K}),R.createElement("path",{stroke:O&&!h?S.fill:"none",d:K}),R.createElement("clipPath",{id:v},R.createElement("rect",{x:-b,y:b*($?-1:1),width:u+O,height:u})))});function ad(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const cd=R.createContext(null),ld=R.createContext(null),fd=()=>{var e;return((e=R.useContext(cd))==null?void 0:e.id)||null},dd=()=>R.useContext(ld);function hd(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=ou(),i=R.useRef({}),[o]=R.useState(()=>ad()),u=fd()!=null,[c,a]=R.useState(r.reference),l=sd((h,p,m)=>{i.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:u}),n?.(h,p,m)}),d=R.useMemo(()=>({setPositionReference:a}),[]),f=R.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return R.useMemo(()=>({dataRef:i,open:t,onOpenChange:l,elements:f,events:o,floatingId:s,refs:d}),[t,l,f,o,s,d])}function Nd(e){e===void 0&&(e={});const{nodeId:t}=e,n=hd({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=R.useState(null),[u,c]=R.useState(null),l=s?.domReference||i,d=R.useRef(null),f=dd();Cn(()=>{l&&(d.current=l)},[l]);const h=ed({...e,elements:{...s,...u&&{reference:u}}}),p=R.useCallback(w=>{const E=le(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;c(E),h.refs.setReference(E)},[h.refs]),m=R.useCallback(w=>{(le(w)||w===null)&&(d.current=w,o(w)),(le(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!le(w))&&h.refs.setReference(w)},[h.refs]),S=R.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),v=R.useMemo(()=>({...h.elements,domReference:l}),[h.elements,l]),C=R.useMemo(()=>({...h,...r,refs:S,elements:v,nodeId:t}),[h,S,v,t,r]);return Cn(()=>{r.dataRef.current.floatingContext=C;const w=f?.nodesRef.current.find(E=>E.id===t);w&&(w.context=C)}),R.useMemo(()=>({...h,context:C,refs:S,elements:v}),[h,S,v,C])}export{Pd as A,jd as F,yd as L,Cu as M,Od as P,Rd as R,md as V,wu as Z,$d as a,Fd as b,Na as c,wd as d,bd as e,Md as f,Id as g,Sd as h,Rn as i,Ed as j,Cd as k,kd as l,Su as m,xd as n,Td as o,ls as p,vd as q,_d as r,Dd as s,Ad as t,Nd as u};
